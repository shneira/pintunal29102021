(this.webpackJsonpjaivana=this.webpackJsonpjaivana||[]).push([[0],Array(306).concat([function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,function(e,t){},,,,,,,,,,,,function(e,t){},,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},,,,,function(e,t){},,function(e,t){},,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){var a={"./CustomActualizarProductos.js":663,"./CustomAdministracionBannerCategorias2.js":664,"./CustomAdministracionCategoriasRelacionadas.js":665,"./CustomAdministracionPicking.js":666,"./CustomAdministracionPortafolioProductos.js":667,"./CustomAdministracionSeccionesVariables.js":668,"./CustomAdministracionUsuariosDescuentosMostrador.js":669,"./CustomAdministradorFerricentro.js":670,"./CustomAgregarPuntos.js":671,"./CustomAjusteAgregacion.js":672,"./CustomAjustesAlistamiento.js":673,"./CustomAjustesInvestigacionDesarrollo.js":674,"./CustomAjustesProduccion.js":675,"./CustomAjustesRecepcion.js":676,"./CustomAlistamiento.js":677,"./CustomAlistamientoEnvasadoFinal.js":678,"./CustomAlistamientoMaterial.js":679,"./CustomAprobacionDeProduction.js":680,"./CustomAprobacionEtapas.js":681,"./CustomAprobacionMolienda.js":682,"./CustomAprobacionProduccion.js":683,"./CustomAprobacionProduccionEnvasado.js":684,"./CustomAsignarDirecciones.js":685,"./CustomAsignarRol.js":686,"./CustomAsignarTurnosHorariosOperarios.js":687,"./CustomAsignarUnidad.js":688,"./CustomAutorizaciones.js":689,"./CustomAutorizarCalidad.js":690,"./CustomAutorizarConceptos.js":691,"./CustomAutorizarConceptosAjustes.js":692,"./CustomAutorizarVendedores.js":693,"./CustomB2bEstadoDeCuenta.js":694,"./CustomB2bFacturas.js":695,"./CustomBancosCtasOfiOperaD.js":696,"./CustomBancosCuentasOficinasOperaciones.js":697,"./CustomBannerPrincipal.js":698,"./CustomBannerSecundario.js":699,"./CustomCajaFerricentro.js":700,"./CustomCalidadMolienda.js":701,"./CustomCalidadProduccion.js":702,"./CustomCancelacionAprobacion.js":703,"./CustomCatalogoClientes.js":704,"./CustomCategoriaUno.js":705,"./CustomClientProdEnsamb.js":706,"./CustomCodigosAlternos.js":707,"./CustomConfiguracionClientes.js":708,"./CustomConfiguracionProductos.js":709,"./CustomConfigurarComprador.js":710,"./CustomConfigurarPageHome.js":711,"./CustomConsecutivos.js":712,"./CustomConsultaDeMovimientos.js":713,"./CustomConsultaProductos.js":714,"./CustomConsultarPedidos.js":715,"./CustomConsultarProductosUbicaciones.js":716,"./CustomContactos.js":717,"./CustomConteoPicking.js":718,"./CustomCorreccionEnvasado.js":719,"./CustomCotizaciones.js":720,"./CustomCreacionProcesosDinamicos.js":721,"./CustomCrearFichaProduccion.js":722,"./CustomCrearTerceros.js":723,"./CustomCuentasPuc.js":724,"./CustomDatosLegales.js":725,"./CustomDescuentosListasPreciosArticulos.js":726,"./CustomDescuentosListasPreciosClientes.js":727,"./CustomDevolucionElementosEnvasadoFinal.js":728,"./CustomDevolucionesEnVentas.js":729,"./CustomDevolverProductoProduccion.js":730,"./CustomDiferenciaDeInventario.js":731,"./CustomDigitarDocumentosPredefinidos.js":732,"./CustomDocumentosPredefinidosConfiguracion.js":733,"./CustomEcommerceProductos.js":734,"./CustomEcommerceTextos.js":735,"./CustomEnvasado.js":736,"./CustomEnviarContrasenaDeAcceso.js":737,"./CustomEscalaPorArticulo.js":738,"./CustomEstadoDeCuentaUnificado.js":739,"./CustomEtapas.js":740,"./CustomFacturacionElectronica.js":741,"./CustomFacturaciones.js":742,"./CustomFamiliasAliasProductos.js":743,"./CustomFormulasProductos.js":744,"./CustomGrabacionMovimiento.js":745,"./CustomImportarDatos.js":746,"./CustomImportarDatosFecha.js":750,"./CustomInactivarReserva.js":751,"./CustomInformesTerceros.js":752,"./CustomIngresosClientes.js":753,"./CustomIniciarProceso.js":754,"./CustomIntegracionCotizacionProspectos.js":755,"./CustomIntegrarDocumentosModulos.js":756,"./CustomIntegrarPedidosProspectos.js":757,"./CustomIntegrarProspectos.js":758,"./CustomInvestigacionYDesarrollo.js":759,"./CustomKitsComponentes.js":760,"./CustomListaClientesFerricentro.js":761,"./CustomManejoClientes.js":762,"./CustomManejoProveedores.js":763,"./CustomMaquinasReciepientePeso.js":764,"./CustomModificarProductos.js":765,"./CustomModificarTerceros.js":766,"./CustomMoliendaCalidad.js":767,"./CustomNotasCartera.js":768,"./CustomOtros.js":769,"./CustomPagosProveedor.js":770,"./CustomPedidoMercancia.js":771,"./CustomPedidos.js":772,"./CustomPedidosMercancia.js":773,"./CustomPedidosPendientesPicking.js":774,"./CustomPermisos.js":775,"./CustomPesajeProduccion.js":776,"./CustomPickingContados.js":777,"./CustomPlantillaDocumentos.js":778,"./CustomPortafolio.js":779,"./CustomPortafolioClientes.js":780,"./CustomPortafolioEcommerceMetadatos.js":781,"./CustomPortafolioPrecios.js":782,"./CustomPortafolioProveedoresClientes.js":783,"./CustomProcesarArchivosMulticash.js":784,"./CustomProcesoTrazabilidadAutorizar.js":785,"./CustomProduccionCalidadEspecificaciones.js":786,"./CustomProductosComponentes.js":787,"./CustomProductosKits.js":788,"./CustomProductosOrdenesProduccion.js":789,"./CustomPromocionesEcommerce.js":790,"./CustomRecepcionDevolucionElementos.js":791,"./CustomRecepcionDevolucionEnvasadoFinal.js":792,"./CustomRecepcionEnvasadoFinal.js":793,"./CustomRecepcionMaterialEmpaque.js":794,"./CustomRecepcionMercancia.js":795,"./CustomRecibosCaja.js":796,"./CustomReclasificaOperariosConteo.js":797,"./CustomReemplazoFactura.js":798,"./CustomReformulacionAjustes.js":799,"./CustomRelacionarCuentasNIFF.js":800,"./CustomReservaConsecutivos.js":801,"./CustomRevisionPicking.js":802,"./CustomSeguimientoDocumentos.js":803,"./CustomSustitutos.js":804,"./CustomTestEcommerce.js":805,"./CustomTipoProductos.js":806,"./CustomTurnoDias.js":807,"./CustomUbicacionesCantidades.js":808,"./CustomVerificarAlmacen.js":809,"./CustomVistaComprador.js":810,"./CustomVistaEstandar_.js":811,"./CustomVolverAMoler.js":812,"./CustomWmsCambiarUbicacion.js":813,"./CustomWmsRacks.js":814,"./CustomWmsRacksColumnas.js":815,"./CustomWmsUbicacionProducto.js":816};function o(e){var t=s(e);return i(t)}function s(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=s,e.exports=o,o.id=662},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.upload=o.upload.bind(Object(s.a)(o)),o.limpiarProveedor=o.limpiarProveedor.bind(Object(s.a)(o)),o.limpiarEmpaque=o.limpiarEmpaque.bind(Object(s.a)(o)),o.addEmpaque=o.addEmpaque.bind(Object(s.a)(o)),o.addProveedor=o.addProveedor.bind(Object(s.a)(o)),o.saveProveedor=o.saveProveedor.bind(Object(s.a)(o)),o.saveEmpaque=o.saveEmpaque.bind(Object(s.a)(o)),o.successProveedor=o.successProveedor.bind(Object(s.a)(o)),o.successProducto=o.successProducto.bind(Object(s.a)(o)),o.successProveedorTabla=o.successProveedorTabla.bind(Object(s.a)(o)),o.successEmpaqueTabla=o.successEmpaqueTabla.bind(Object(s.a)(o)),o.setButtonDeleteProveedor=o.setButtonDeleteProveedor.bind(Object(s.a)(o)),o.setButtonDeleteEmpaque=o.setButtonDeleteEmpaque.bind(Object(s.a)(o)),o.deleteEmpaque=o.deleteEmpaque.bind(Object(s.a)(o)),o.deleteProveedor=o.deleteProveedor.bind(Object(s.a)(o)),o.gridOptions2=Object.assign({},o.gridOptions),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("registrar").setClick(this.upload),this.getField("codigo").setCustomSuccess(this.successProducto),this.limpiarEmpaque(),this.limpiarProveedor(),this.getField("btnAddEmpaque").setClick(this.addEmpaque),this.getField("btnAdd").setClick(this.addProveedor),this.getField("btnCancelarEmpaque").setClick(this.limpiarEmpaque),this.getField("btnCancelar").setClick(this.limpiarProveedor),this.getField("btnAceptarEmpaque").setClick(this.saveEmpaque),this.getField("btnAceptar").setClick(this.saveProveedor)}},{key:"successProducto",value:function(e){e.codigo&&(this.service.send(this.getConstant().searchFormat().format(e.codigo,"tablaMostrarProveedor","servicio",this.formId),"GET",void 0,this.successProveedorTabla,this.error_),this.service.send(this.getConstant().searchFormat().format(e.codigo,"tablaMostrarEmpaques","servicio",this.formId),"GET",void 0,this.successEmpaqueTabla,this.error_))}},{key:"successProveedorTabla",value:function(e){if(200===e.estado_p&&e.model.length>0){var t=new Map;t.set(0,{cellRenderer:this.setButtonDeleteProveedor,field:"Operaci\xf3n"}),this.gridOptions2.rowData=e.model,this.getField("tablaMostrarProveedor").initData(this.gridOptions2,t)}}},{key:"successEmpaqueTabla",value:function(e){if(200===e.estado_p&&e.model.length>0){var t=new Map;t.set(0,{cellRenderer:this.setButtonDeleteEmpaque,field:"Operaci\xf3n"}),this.gridOptions.rowData=e.model,this.getField("tablaMostrarEmpaques").initData(this.gridOptions,t)}}},{key:"setButtonDeleteEmpaque",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteEmpaque(i)},a.setAttribute("id","button_empaque_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Eliminar"),a}},{key:"deleteEmpaque",value:function(e){}},{key:"setButtonDeleteProveedor",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteProveedor(i)},a.setAttribute("id","button_proveedor_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Eliminar"),a}},{key:"deleteProveedor",value:function(e){this.successDeleteCustom=this.successDelete;var t={accion:"f9_servicio",campo:"tablaMostrarProveedor",id_formulario:this.formId,id:e};this.data=t,this.getField("modalDelete").toggle(!0)}},{key:"successDelete",value:function(e){void 0!==e.estado_p&&200!==e.estado_p||this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success")}},{key:"saveEmpaque",value:function(){if(this.getField("articulo_unidades_id").valid()&this.getField("factor_empaque").valid()&this.getField("barras_empaque").valid()){var e={accion:"servicio",campo:"btnAceptarEmpaque",id_formulario:this.formId,articulo_unidades_id:this.getField("articulo_unidades_id").getValue(),factor:this.getField("factor_empaque").getValue(),barras:this.getField("barras_empaque").getValue(),codigo_producto:this.getField("codigo").getValue()};this.service.send(this.getConstant().formSave(),"POST",e,this.successEmpaque,this.error_)}}},{key:"saveProveedor",value:function(){if(this.getField("codigo_proveedor").valid()&this.getField("estado_proveedor").valid()&this.getField("nombre_proveedor2").valid()&this.getField("nombre_proveedor").valid()&this.getField("factor_proveedor").valid()&this.getField("precio_proveedor").valid()&this.getField("ancho_proveedor").valid()&this.getField("largo_proveedor").valid()&this.getField("nitsxsedes_id").valid()&this.getField("barras_proveedor").valid()&this.getField("alto_proveedor").valid()&this.getField("peso_proveedor").valid()&this.getField("volumen_proveedor").valid()&this.getField("lead_time_proveedor").valid()&this.getField("cantidad_minima_despacho").valid()){var e={id_formulario:this.formId,accion:"servicio",campo:"btnAceptar",unidad_de_medida_id:this.getField("unidadmedida_id").getValue(),factor:this.getField("factor_proveedor").getValue(),nitsxsedes_id:this.getField("nitsxsedes_id").getValue(),cantidad_minima_despacho:this.getField("cantidad_minima_despacho").getValue(),alto:this.getField("alto_proveedor").getValue(),largo:this.getField("largo_proveedor").getValue(),ancho:this.getField("ancho_proveedor").getValue(),volumen:this.getField("volumen_proveedor").getValue(),precio:this.getField("precio_proveedor").getValue(),lead_time:this.getField("lead_time_proveedor").getValue(),peso:this.getField("peso_proveedor").getValue()};this.service.send(this.getConstant().formSave(),"POST",e,this.successProveedor,this.error_)}}},{key:"successProveedor",value:function(e){200===e.estado_p&&this.service.send(this.getConstant().searchFormat().format(e.codigo,"tablaMostrarProveedor","servicio",this.formId),"GET",void 0,this.successProveedorTabla,this.error_)}},{key:"addEmpaque",value:function(){this.getField("codigo").valid()&this.getField("alias").valid()&this.getField("nombre").valid()?(this.getField("articulo_unidades_id").setDisabled(!1),this.getField("factor_empaque").setDisabled(!1),this.getField("barras_empaque").setDisabled(!1),this.getField("btnAceptarEmpaque").setDisabled(!1),this.getField("btnCancelarEmpaque").setDisabled(!1)):alert("Debe seleccionar un producto para realizar esta operaci\xf3n")}},{key:"addProveedor",value:function(){this.getField("codigo").valid()&this.getField("alias").valid()&this.getField("nombre").valid()?(this.getField("codigo_proveedor").setDisabled(!1),this.getField("estado_proveedor").setDisabled(!1),this.getField("nombre_proveedor2").setDisabled(!1),this.getField("factor_proveedor").setDisabled(!1),this.getField("precio_proveedor").setDisabled(!1),this.getField("barras_proveedor").setDisabled(!1),this.getField("alto_proveedor").setDisabled(!1),this.getField("peso_proveedor").setDisabled(!1),this.getField("volumen_proveedor").setDisabled(!1),this.getField("lead_time_proveedor").setDisabled(!1),this.getField("cantidad_minima_despacho").setDisabled(!1),this.getField("btnAceptar").setDisabled(!1),this.getField("btnCancelar").setDisabled(!1)):alert("Debe seleccionar un producto para realizar esta operaci\xf3n")}},{key:"limpiarEmpaque",value:function(){this.getField("articulo_unidades_id").setDisabled(!0),this.getField("factor_empaque").setDisabled(!0),this.getField("barras_empaque").setDisabled(!0),this.getField("btnAceptarEmpaque").setDisabled(!0),this.getField("btnCancelarEmpaque").setDisabled(!0)}},{key:"limpiarProveedor",value:function(){this.getField("codigo_proveedor").setDisabled(!0),this.getField("estado_proveedor").setDisabled(!0),this.getField("nombre_proveedor2").setDisabled(!0),this.getField("factor_proveedor").setDisabled(!0),this.getField("precio_proveedor").setDisabled(!0),this.getField("barras_proveedor").setDisabled(!0),this.getField("alto_proveedor").setDisabled(!0),this.getField("peso_proveedor").setDisabled(!0),this.getField("volumen_proveedor").setDisabled(!0),this.getField("lead_time_proveedor").setDisabled(!0),this.getField("cantidad_minima_despacho").setDisabled(!0),this.getField("btnAceptar").setDisabled(!0),this.getField("btnCancelar").setDisabled(!0)}},{key:"upload",value:function(){if(this.getField("descripcion").valid()&this.getField("codigo").valid()){var e=document.getElementById("imagen_producto_data").innerText,t={accion:"servicio",campo:"imagen_producto",descripcion:this.getField("descripcion").getValue(),id_formulario:this.formId,codigo_articulo:this.getField("codigo").getValue(),imagen:e};this.service.send(this.getConstant().formSave(),"PUT",t,this.successActive,this.error_)}}},{key:"successActive",value:function(e){}},{key:"error_",value:function(e){}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.traerRegistrosBanners=o.traerRegistrosBanners.bind(Object(s.a)(o)),o.respuestaTraerRegistrosBanners=o.respuestaTraerRegistrosBanners.bind(Object(s.a)(o)),o.setButtonActivar=o.setButtonActivar.bind(Object(s.a)(o)),o.setButtonEliminar=o.setButtonEliminar.bind(Object(s.a)(o)),o.guardarBanner=o.guardarBanner.bind(Object(s.a)(o)),o.respuestaguardarBanner=o.respuestaguardarBanner.bind(Object(s.a)(o)),o.EliminarBanner=o.EliminarBanner.bind(Object(s.a)(o)),o.respuestaEliminarBanner=o.respuestaEliminarBanner.bind(Object(s.a)(o)),o.ActiviarInactiviar=o.ActiviarInactiviar.bind(Object(s.a)(o)),o.respuestaActiviarInactiviar=o.respuestaActiviarInactiviar.bind(Object(s.a)(o)),o.limpiarErrores=o.limpiarErrores.bind(Object(s.a)(o)),o.selectedRow=o.selectedRow.bind(Object(s.a)(o)),o.gridBanners=Object.assign({},o.gridOptions),o.gridBanners.onSelectionChanged=o.selectedRow,o.id_delete=0,o.setButtonEditar=o.setButtonEditar.bind(Object(s.a)(o)),o.startEditBanner=o.startEditBanner.bind(Object(s.a)(o)),o.editarRegistro=o.editarRegistro.bind(Object(s.a)(o)),o.cancelarEditar=o.cancelarEditar.bind(Object(s.a)(o)),o.getBody=o.getBody.bind(Object(s.a)(o)),o.edit_id=null,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.traerRegistrosBanners(),this.getField("boton_agregar").setClick(this.guardarBanner),this.getField("categoria").setOnChange(this.limpiarErrores),this.getField("categoria1_search").setVisible(!1),this.getField("categoria2_search").setVisible(!1),this.getField("categoria3_search").setVisible(!1),this.getField("categoria4_search").setVisible(!1),this.getField("nombre_categoria").setVisible(!1),this.getField("id_categoria").setVisible(!1),this.getField("boton_editar").setVisible(!1),this.getField("cancelar_editar").setVisible(!1),this.getField("boton_editar").setClick(this.editarRegistro),this.getField("cancelar_editar").setClick(this.cancelarEditar)}},{key:"selectedRow",value:function(e){}},{key:"limpiarErrores",value:function(){this.getField("categoria").setError(!1,"Limpiar"),this.getField("url").setError(!1,"Limpiar"),this.getField("estados_activos_id").setError(!1,"Limpiar"),this.getField("imagen").setError(!1,"Limpiar"),this.getField("categoria1_search").setVisible(!1),this.getField("categoria2_search").setVisible(!1),this.getField("categoria3_search").setVisible(!1),this.getField("categoria4_search").setVisible(!1),this.getField("nombre_categoria").setVisible(!1),this.getField("id_categoria").setVisible(!1),this.getField("categoria1_search").setValue(""),this.getField("categoria2_search").setValue(""),this.getField("categoria3_search").setValue(""),this.getField("categoria4_search").setValue(""),this.getField("nombre_categoria").setValue(""),this.getField("id_categoria").setValue(""),this.getField("oficio").setValue(""),this.getField("nombre_oficio").setValue(""),this.getField("id_oficio").setValue(""),this.getField("oficio").setVisible(!1),this.getField("nombre_oficio").setVisible(!1),this.getField("id_oficio").setVisible(!1);var e=this.getField("categoria").getValue();("1"===e||e.includes("CATEGORIA1")||"2"===e||"3"===e||"4"===e)&&(this.getField("nombre_categoria").setVisible(!0),this.getField("id_categoria").setVisible(!0),("1"===e||e.includes("CATEGORIA1"))&&this.getField("categoria1_search").setVisible(!0),"2"===e&&this.getField("categoria2_search").setVisible(!0),"3"===e&&this.getField("categoria3_search").setVisible(!0),"4"===e&&this.getField("categoria4_search").setVisible(!0)),"banner_profesion"===e&&(this.getField("oficio").setVisible(!0),this.getField("nombre_oficio").setVisible(!0),this.getField("id_oficio").setVisible(!0))}},{key:"traerRegistrosBanners",value:function(){this.generalFormat.nombre_accion="portafolio_ecommerce_banner_categoria2_todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.respuestaTraerRegistrosBanners,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"respuestaTraerRegistrosBanners",value:function(e){if(console.log(e),200===e.estado_p){for(var t=e.data,i=0;i<t.length;i++)t[i].nombre_categoria=t[i].categoria,"1"===t[i].categoria?t[i].nombre_categoria="Categor\xeda 1":"2"===t[i].categoria?t[i].nombre_categoria="Categor\xeda 2":"3"===t[i].categoria?t[i].nombre_categoria="Categor\xeda 3":"4"===t[i].categoria?t[i].nombre_categoria="Categor\xeda 4":"HOME-1"===t[i].categoria?t[i].nombre_categoria="Banner home":"HOME-2"===t[i].categoria?t[i].nombre_categoria="Tr\xedptico 1":"HOME-3"===t[i].categoria?t[i].nombre_categoria="Tr\xedptico 2":"HOME-4"===t[i].categoria?t[i].nombre_categoria="Tr\xedptico 3":"banner_principal"===t[i].categoria?t[i].nombre_categoria="Banner principal":"banner_secundario"===t[i].categoria?t[i].nombre_categoria="Banner final":"banner_promociones"===t[i].categoria?t[i].nombre_categoria="Banner promociones":"banner_profesion"===t[i].categoria?t[i].nombre_categoria="Banner oficio":"debajo_paginador"===t[i].categoria&&(t[i].nombre_categoria="Banner debajo del paginador");this.gridBanners.rowData=e.data,this.gridBanners.paginationPageSize=15;var a=new Map;a.set("activar",{cellRenderer:this.setButtonActivar,field:"Activar/Inactivar",width:110}),a.set("eliminar",{cellRenderer:this.setButtonEliminar,field:"Eliminar",width:110}),a.set("editar",{cellRenderer:this.setButtonEditar,field:"Eliminar",width:110}),this.getField("tabla_banners").initData(this.gridBanners,a)}else this.getField("tabla_banners").toggle(!1)}},{key:"setButtonEditar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.startEditBanner(e.data)},i.setAttribute("id","button_edit_"),i.setAttribute("style","width:80px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Editar"),i}},{key:"cancelarEditar",value:function(e){this.getField("categoria").setValue(""),this.getField("url").setValue(""),this.getField("descripcion").setValue(""),this.getField("imagen").setValue(""),this.getField("estados_activos_id").setValue(""),this.getField("habilitar_desde_hasta").setValue(!1),this.getField("boton_editar").setVisible(!1),this.getField("cancelar_editar").setVisible(!1),this.getField("boton_agregar").setVisible(!0)}},{key:"startEditBanner",value:function(e){console.log("///",e),this.edit_id=e.id,this.getField("categoria").setValue(e.categoria),this.getField("categoria1_search").setValue(e.codigo_cat1),this.getField("categoria2_search").setValue(e.codigo_cat2),this.getField("categoria3_search").setValue(e.codigo_cat3),this.getField("categoria4_search").setValue(e.codigo_cat4),this.getField("oficio").setValue(e.codigo_profesion),null!==e.nombre_categoria1?(this.getField("nombre_categoria").setValue(e.nombre_categoria1),this.getField("id_categoria").setValue(e.categoria1_id)):null!==e.nombre_categoria2?(this.getField("nombre_categoria").setValue(e.nombre_categoria2),this.getField("id_categoria").setValue(e.categoria2_id)):null!==e.nombre_categoria3?(this.getField("nombre_categoria").setValue(e.nombre_categoria3),this.getField("id_categoria").setValue(e.categoria3_id)):null!==e.nombre_categoria4&&(this.getField("nombre_categoria").setValue(e.nombre_categoria4),this.getField("id_categoria").setValue(e.categoria4_id)),null!==e.nombre_profesion&&(this.getField("nombre_oficio").setValue(e.nombre_profesion),this.getField("id_oficio").setValue(e.profesion_id)),this.getField("descripcion").setValue(e.descripcion),this.getField("url").setValue(e.url),this.getField("imagen").setValue(e.imagen),this.getField("estados_activos_id").setValue(e.estados_activos_id),this.getField("orden").setValue(e.orden),null!==e.desde&&null!==e.hasta?(this.getField("desde").setValue(e.desde),this.getField("hasta").setValue(e.hasta),this.getField("habilitar_desde_hasta").setValue(!0)):this.getField("habilitar_desde_hasta").setValue(!1),this.getField("boton_editar").setVisible(!0),this.getField("cancelar_editar").setVisible(!0),this.getField("boton_agregar").setVisible(!1)}},{key:"editarRegistro",value:function(){var e=this.getBody(!1);console.log(e),null!==e&&(e.id=this.edit_id,this.generalFormat.nombre_accion="banner_categorias_2_modificar",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.respuestaguardarBanner,error:this.error_,general:this.generalFormat,formData:!0}))}},{key:"setButtonActivar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.ActiviarInactiviar(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),1===e.data.estados_activos_id?i.setAttribute("value","Inactivar"):i.setAttribute("value","Activar"),i}},{key:"setButtonEliminar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.confirmarEliminacion(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"guardarBanner",value:function(){var e=this.getBody();console.log(e),null!==e&&(this.generalFormat.nombre_accion="portafolio_ecommerce_banner_categorias_2_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.respuestaguardarBanner,error:this.error_,general:this.generalFormat,formData:!0}))}},{key:"getBody",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=null,i=!0;if(e&&(i=this.getField("imagen").valid()),i&&this.getField("categoria").valid()&&this.getField("url").valid()&&this.getField("estados_activos_id").valid()){t={categoria:this.getField("categoria").getValue(),descripcion:this.getField("descripcion").getValue(),url:this.getField("url").getValue(),estados_activos_id:this.getField("estados_activos_id").getValue(),imagen:this.getField("imagen").getValue()},null!==this.getField("imagen_movil").getValue()&&void 0!==this.getField("imagen_movil").getValue()&&(t.imagen_movil=this.getField("imagen_movil").getValue());var a=this.getField("categoria").getValue();if(i=!0,"1"===a||a.includes("CATEGORIA1")||"2"===a||"3"===a||"4"===a){i=this.getField("id_categoria").valid();var o=parseInt(this.getField("id_categoria").getValue());a.includes("CATEGORIA1")||"1"===a?t.categoria1_id=o:t["categoria"+a+"_id"]=o}"banner_profesion"===a&&(i=this.getField("id_oficio").valid(),this.getField("oficio").setVisible(!0),this.getField("nombre_oficio").setVisible(!0),this.getField("id_oficio").setVisible(!0),t.profesion_id=this.getField("id_oficio").getValue()),t.orden=this.getField("orden").getValue(),"true"===this.getField("habilitar_desde_hasta").getValueSwitchJaivana()&&(i=!1,this.getField("desde").valid()&&this.getField("hasta").valid()&&(i=!0,t.desde=this.getField("desde").getValue(),t.hasta=this.getField("hasta").getValue()))}else i=!1;return i?t:null}},{key:"respuestaguardarBanner",value:function(e){200===e.estado_p&&(this.getField("categoria").setValue(""),this.getField("url").setValue(""),this.getField("descripcion").setValue(""),this.getField("imagen").handleSave([]),this.getField("estados_activos_id").setValue(""),this.getField("id").setValue(""),this.cancelarEditar(),this.traerRegistrosBanners())}},{key:"confirmarEliminacion",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.EliminarBanner),this.getField("confirmModalCustom").toggle(!0)}},{key:"EliminarBanner",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_delete){var e={id:this.id_delete};this.generalFormat.nombre_accion="portafolio_ecommerce_banner_categorias_2_eliminar",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.respuestaEliminarBanner,error:this.error_,general:this.generalFormat})}}},{key:"respuestaEliminarBanner",value:function(e){200===e.estado_p&&this.traerRegistrosBanners()}},{key:"ActiviarInactiviar",value:function(e){var t={id:e};this.generalFormat.nombre_accion="portafolio_ecommerce_banner_categorias_2_activar",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.respuestaActiviarInactiviar,error:this.error_,general:this.generalFormat})}},{key:"respuestaActiviarInactiviar",value:function(e){200===e.estado_p&&this.traerRegistrosBanners()}}]),i}(d.a.form);d.a.addController("adm_bann_cat_hom_1",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.selectTipoCategoriaDestino=o.selectTipoCategoriaDestino.bind(Object(s.a)(o)),o.customSuccessOrigen=o.customSuccessOrigen.bind(Object(s.a)(o)),o.catOrigen="",o.respuestaTraerRegistros=o.respuestaTraerRegistros.bind(Object(s.a)(o)),o.traerRegistros=o.traerRegistros.bind(Object(s.a)(o)),o.gridBanners=Object.assign({},o.gridOptions),o.setButtonEliminar=o.setButtonEliminar.bind(Object(s.a)(o)),o.agregarRelacion=o.agregarRelacion.bind(Object(s.a)(o)),o.respuestaCrear=o.respuestaCrear.bind(Object(s.a)(o)),o.respuestaEliminarRegister=o.respuestaEliminarRegister.bind(Object(s.a)(o)),o.EliminarRegister=o.EliminarRegister.bind(Object(s.a)(o)),o.confirmarEliminacion=o.confirmarEliminacion.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("tipo_cat_destino").setOnChange(this.selectTipoCategoriaDestino),this.getField("id_cat2_origen").setOnChange(this.customSuccessOrigen),this.getField("agregar_relacion").setClick(this.agregarRelacion)}},{key:"selectTipoCategoriaDestino",value:function(){var e=this.getField("tipo_cat_destino").getValue();this.getField("categoria2_destino").setVisible(!1),this.getField("nombre_cat2_destino").setVisible(!1),this.getField("categoria3_destino").setVisible(!1),this.getField("nombre_cat3_destino").setVisible(!1),this.getField("categoria4_destino").setVisible(!1),this.getField("nombre_cat4_destino").setVisible(!1),this.getField("categoria1_destino").setVisible(!1),this.getField("nombre_cat1_destino").setVisible(!1),"cat-1"===e?(this.getField("categoria1_destino").setVisible(!0),this.getField("nombre_cat1_destino").setVisible(!0)):"cat-2"===e?(this.getField("categoria2_destino").setVisible(!0),this.getField("nombre_cat2_destino").setVisible(!0)):"cat-3"===e?(this.getField("categoria3_destino").setVisible(!0),this.getField("nombre_cat3_destino").setVisible(!0)):"cat-4"===e&&(this.getField("categoria4_destino").setVisible(!0),this.getField("nombre_cat4_destino").setVisible(!0))}},{key:"customSuccessOrigen",value:function(){this.catOrigen=this.getField("categoria2_origen").getValue();var e=this.getField("id_cat2_origen").getValue();null!==e&&void 0!==e&&" "!==e&&""!==e&&this.traerRegistros()}},{key:"traerRegistros",value:function(){var e={tipo_categoria_origen:"cat-2",codigo_categoria_origen:this.catOrigen};this.generalFormat.nombre_accion="relaciones_consultar_relacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.respuestaTraerRegistros,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"respuestaTraerRegistros",value:function(e){if(200===e.estado_p){this.gridBanners.rowData=e.data,this.gridBanners.paginationPageSize=15,this.getField("lista_relacion").label="Relaciones de la categor\xeda 2: "+this.getField("nombre_cat2_origen").getValue();var t=new Map;t.set("eliminar",{cellRenderer:this.setButtonEliminar,field:"Eliminar",width:150}),this.getField("lista_relacion").initData(this.gridBanners,t)}else this.getField("lista_relacion").toggle(!1)}},{key:"setButtonEliminar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.confirmarEliminacion(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:100px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"confirmarEliminacion",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.EliminarRegister),this.getField("confirmModalCustom").toggle(!0)}},{key:"EliminarRegister",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_delete){var e={id:this.id_delete};this.generalFormat.nombre_accion="relaciones_eliminar_relacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.respuestaEliminarRegister,error:this.error_,general:this.generalFormat,showMessage:!0})}}},{key:"respuestaEliminarRegister",value:function(e){200===e.estado_p&&this.traerRegistros()}},{key:"agregarRelacion",value:function(){var e=this.getField("tipo_cat_destino").getValue(),t=this.getField("codigo_destino").getValue(),i=!1;if(i=(i=this.getField("nombre_cat2_origen").valid())&&this.getField("tipo_cat_destino").valid(),"cat-1"===e?i=i&&this.getField("nombre_cat1_destino").valid():"cat-2"===e?i=i&&this.getField("nombre_cat2_destino").valid():"cat-3"===e?i=i&&this.getField("nombre_cat3_destino").valid():"cat-4"===e&&(i=i&&this.getField("nombre_cat4_destino").valid()),i){var a={tipo_categoria_origen:"cat-2",codigo_categoria_origen:this.catOrigen,tipo_categoria_destino:e,codigo_categoria_destino:t};this.generalFormat.nombre_accion="relaciones_crear_relacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:a,success:this.respuestaCrear,error:this.error_,general:this.generalFormat,showMessage:!0})}}},{key:"respuestaCrear",value:function(e){this.getField("categoria2_destino").setVisible(!1),this.getField("nombre_cat2_destino").setVisible(!1),this.getField("categoria3_destino").setVisible(!1),this.getField("nombre_cat3_destino").setVisible(!1),this.getField("categoria4_destino").setVisible(!1),this.getField("nombre_cat4_destino").setVisible(!1),this.getField("categoria1_destino").setVisible(!1),this.getField("nombre_cat1_destino").setVisible(!1),this.getField("categoria2_destino").setValue(""),this.getField("nombre_cat2_destino").setValue(""),this.getField("categoria3_destino").setValue(""),this.getField("nombre_cat3_destino").setValue(""),this.getField("categoria4_destino").setValue(""),this.getField("nombre_cat4_destino").setValue(""),this.getField("categoria1_destino").setValue(""),this.getField("nombre_cat1_destino").setValue(""),this.getField("codigo_destino").setValue(""),this.getField("tipo_cat_destino").setValue(""),200===e.estado_p&&(this.getField("tipo_cat_destino").setValue(""),this.traerRegistros())}}]),i}(d.a.form);d.a.addController("adm_bann_cat_rel",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.uploadTbPedidosPickingContar=o.uploadTbPedidosPickingContar.bind(Object(s.a)(o)),o.loadTbPedidosPickingContar=o.loadTbPedidosPickingContar.bind(Object(s.a)(o)),o.gridOptionsPedidosContar=Object.assign({},o.gridOptions),o.setButtonOperario=o.setButtonOperario.bind(Object(s.a)(o)),o.selectOptions=[],o.successOperarios=o.successOperarios.bind(Object(s.a)(o)),o.valueChange=o.valueChange.bind(Object(s.a)(o)),o.cambiarOperario=o.cambiarOperario.bind(Object(s.a)(o)),o.dataArrayOpe=[],o.successPutCountOne=o.successPutCountOne.bind(Object(s.a)(o)),o.abrirModalPickingPorcentaje=o.abrirModalPickingPorcentaje.bind(Object(s.a)(o)),o.gridOptionsTbPickingPorcentaje=Object.assign({},o.gridOptions),o.loadModalPickingPendientes=o.loadModalPickingPendientes.bind(Object(s.a)(o)),o.cantidadPicking=o.cantidadPicking.bind(Object(s.a)(o)),o.loadCantidadPicking=o.loadCantidadPicking.bind(Object(s.a)(o)),o.cantidadPedidos=o.cantidadPedidos.bind(Object(s.a)(o)),o.loadCantidadPedidos=o.loadCantidadPedidos.bind(Object(s.a)(o)),o.cantidadOperarios=o.cantidadOperarios.bind(Object(s.a)(o)),o.loadCantidadOperarios=o.loadCantidadOperarios.bind(Object(s.a)(o)),o.datosOperario=o.datosOperario.bind(Object(s.a)(o)),o.successTraerOperarioAsignado=o.successTraerOperarioAsignado.bind(Object(s.a)(o)),o.datosOperarioCambio=o.datosOperarioCambio.bind(Object(s.a)(o)),o.successTraerOperarioCambio=o.successTraerOperarioCambio.bind(Object(s.a)(o)),o.guardarCambiarOperario=o.guardarCambiarOperario.bind(Object(s.a)(o)),o.successPutCambioOperario=o.successPutCambioOperario.bind(Object(s.a)(o)),o.limpiar=o.limpiar.bind(Object(s.a)(o)),o.limpiarTodo=o.limpiarTodo.bind(Object(s.a)(o)),o.gridOptionsTbPickingPorcentaje.onSelectionChanged=o.funcionVacia,o.pickingPorContar=o.pickingPorContar.bind(Object(s.a)(o)),o.successPickingPorContar=o.successPickingPorContar.bind(Object(s.a)(o)),o.pedidosPorContar=o.pedidosPorContar.bind(Object(s.a)(o)),o.successPedidosPorContar=o.successPedidosPorContar.bind(Object(s.a)(o)),o.rowSelectedPedidosContar=o.rowSelectedPedidosContar.bind(Object(s.a)(o)),o.dataArrayPedidosContar=[],o.successTraerOperariosTodos=o.successTraerOperariosTodos.bind(Object(s.a)(o)),o.asignarOperario=o.asignarOperario.bind(Object(s.a)(o)),o.successPutasignarOperario=o.successPutasignarOperario.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnrecargar").setClick(this.uploadTbPedidosPickingContar),this.getField("btnPickingPorcentaje").setClick(this.abrirModalPickingPorcentaje),this.getField("btnCambiarOperario").setClick(this.guardarCambiarOperario),this.getField("codigo_bodega").setOnChange(this.limpiarTodo),this.getField("numPicking").setOnChange(this.pedidosPorContar),this.getField("btnAsignar").setClick(this.asignarOperario),this.getField("btnPickingPorcentaje").setVisible(!1),this.getField("cantidadPicking").setVisible(!1),this.getField("cantidadPedidos").setVisible(!1),this.getField("cantidadOperarios").setVisible(!1),this.getField("operarioAsignado").setVisible(!1),this.getField("operarioCambio").setVisible(!1),this.getField("btnCambiarOperario").setVisible(!1),this.getField("nroPicking").setVisible(!1),this.getField("nroPedidos").setVisible(!1),this.getField("idRegistro").setVisible(!1),this.getField("operariosTodos").setVisible(!1),this.getField("btnAsignar").setVisible(!1)}},{key:"limpiarTodo",value:function(){for(var e in this.getField("tbPedidosPickingContar").toggle(!1),this.getField("btnPickingPorcentaje").setVisible(!1),this.getField("cantidadPicking").setVisible(!1),this.getField("cantidadPedidos").setVisible(!1),this.getField("cantidadOperarios").setVisible(!1),this.getField("operarioAsignado").setVisible(!1),this.getField("operarioCambio").setVisible(!1),this.getField("nroPicking").setVisible(!1),this.getField("nroPedidos").setVisible(!1),this.getField("idRegistro").setVisible(!1),this.getField("operariosTodos").setVisible(!1),this.getField("btnAsignar").setVisible(!1),this.getField("btnCambiarOperario").setVisible(!1),this.refs)"codigo_bodega"!==e&&"nombre_bodega"!==e&&"tbPedidosPickingContar"!==e&&void 0!==this.getField(e).setValue&&this.getField(e).setValue("")}},{key:"funcionVacia",value:function(){}},{key:"uploadTbPedidosPickingContar",value:function(){if(this.datosOperarioCambio(),""!==this.getField("codigo_bodega").getValue()&&" "!==this.getField("codigo_bodega").getValue()&&""!==this.getField("nombre_bodega").getValue()&&" "!==this.getField("nombre_bodega").getValue()){this.getField("codigo_bodega").setError(!1,""),this.getField("nombre_bodega").setError(!1,"");var e={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="363-Pedidos_reservados_por_contar",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.loadTbPedidosPickingContar,error:this.error_,general:this.generalFormat})}else this.getField("codigo_bodega").valid()&&""===this.getField("codigo_bodega").getValue()&&this.getField("codigo_bodega").setError(!0,"Este campo es requerido"),this.getField("nombre_bodega").valid()&&""===this.getField("nombre_bodega").getValue()&&this.getField("nombre_bodega").setError(!0,"Este campo es requerido")}},{key:"loadTbPedidosPickingContar",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=new Map;t.set("nuevo_operario",{cellRenderer:this.setButtonOperario,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px"},field:"Nuevo Operario"}),t.set("accion",{cellRenderer:this.valueChange,field:"Acci\xf3n"}),this.getField("tbPedidosPickingContar").setOnRowSelected(!0),this.getField("tbPedidosPickingContar").setOnCellClicked(!0),this.getField("tbPedidosPickingContar").toggle(!0),this.gridOptionsPedidosContar.rowData=e.model,this.gridOptionsPedidosContar.paginationPageSize=100,t.set(0,{headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,field:"seleccionar"}),this.gridOptionsPedidosContar.suppressRowClickSelection=!0,this.gridOptionsPedidosContar.rowSelection="multiple",this.gridOptionsPedidosContar.enableRangeSelection=!0,this.gridOptionsPedidosContar.enableCellChangeFlash=!0,this.getField("tbPedidosPickingContar").initData(this.gridOptionsPedidosContar,t),this.gridOptionsPedidosContar.onRowClicked=this.rowSelectedPedidosContar,this.getField("btnPickingPorcentaje").setVisible(!0),this.getField("cantidadPicking").setVisible(!0),this.getField("cantidadPedidos").setVisible(!0),this.getField("cantidadOperarios").setVisible(!0),this.getField("operarioAsignado").setVisible(!0),this.getField("operarioCambio").setVisible(!0),this.getField("btnCambiarOperario").setVisible(!0),this.getField("nroPicking").setVisible(!0),this.getField("nroPedidos").setVisible(!0),this.getField("idRegistro").setVisible(!0),this.getField("operariosTodos").setVisible(!0),this.getField("btnAsignar").setVisible(!0)}this.cantidadPicking(),this.datosOperario()}},{key:"rowSelectedPedidosContar",value:function(e){if(e.node.isSelected()){e.node.setSelected(!1,!1);var t=e.node.data.id,i=this.dataArrayPedidosContar,a=[];i.forEach((function(e,i,o){t!==e&&a.push(e)})),this.dataArrayPedidosContar=a,this.getField("idRegistro").setValue(this.dataArrayPedidosContar)}else{e.node.setSelected(!0);var o=[];this.gridOptionsPedidosContar.api.getSelectedRows().forEach((function(e){o.push(e.id)})),this.dataArrayPedidosContar=o,this.getField("idRegistro").setValue(this.dataArrayPedidosContar)}}},{key:"cantidadPicking",value:function(){if(""!==this.getField("codigo_bodega").getValue()&&" "!==this.getField("codigo_bodega").getValue()){this.getField("codigo_bodega").setError(!1,"");var e={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="363-Pedidos_reservados_cantidad_picking",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.loadCantidadPicking,error:this.error_,general:this.generalFormat})}else this.getField("codigo_bodega").setError(!0,"Este campo es requerido")}},{key:"loadCantidadPicking",value:function(e){var t=e.model;this.getField("cantidadPicking").setValue(t[0].total),this.cantidadPedidos()}},{key:"cantidadPedidos",value:function(){if(""!==this.getField("codigo_bodega").getValue()&&" "!==this.getField("codigo_bodega").getValue()){this.getField("codigo_bodega").setError(!1,"");var e={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="363-Pedidos_reservados_cantidad_pedidos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.loadCantidadPedidos,error:this.error_,general:this.generalFormat})}else this.getField("codigo_bodega").setError(!0,"Este campo es requerido")}},{key:"loadCantidadPedidos",value:function(e){var t=e.model;this.getField("cantidadPedidos").setValue(t[0].total),this.cantidadOperarios()}},{key:"cantidadOperarios",value:function(){if(""!==this.getField("codigo_bodega").getValue()&&" "!==this.getField("codigo_bodega").getValue()){this.getField("codigo_bodega").setError(!1,"");var e={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="363-Pedidos_reservados_cantidad_operarios",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.loadCantidadOperarios,error:this.error_,general:this.generalFormat})}else this.getField("codigo_bodega").setError(!0,"Este campo es requerido")}},{key:"loadCantidadOperarios",value:function(e){var t=e.model;this.getField("cantidadOperarios").setValue(t[0].total)}},{key:"setButtonOperario",value:function(e){var t=this,i=e.data.id,a=document.createElement("select"),o=document.createElement("div");o.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),a.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),a.onchange=function(i){return t.valueChange(i,e.data)},a.setAttribute("id","mySelectOperario_");var s=this.successOperarios();return this.valor_idOpe=1,s.map((function(e){return a.appendChild(e),parseInt(e.value)===i&&(t.valor_idOpe=parseInt(e.value)),null})),o.appendChild(a),o}},{key:"successOperarios",value:function(e){var t=document.createElement("option");t.setAttribute("value"," "),t.textContent="Ninguno";var i=[t];return this.selectOptions.map((function(e){var t=document.createElement("option");return t.setAttribute("value",parseInt(e.id)),t.textContent=e.nombre,i.push(t),null})),i}},{key:"valueChange",value:function(e,t){var i=this;if(void 0!==e.target){var a={id_operario_nuevo:parseInt(e.target.value),id_pedido:t.id,bodega:this.getField("codigo_bodega").getValue()};this.dataArrayOpe=a}var o=document.createElement("input");return o.onclick=function(){return i.cambiarOperario()},o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Cambiar"),o}},{key:"cambiarOperario",value:function(){var e=this.dataArrayOpe;this.generalFormat.nombre_accion="363-cambia_operario_de_UN_SOLO_pedido",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successPutCountOne,error:this.error_,general:this.generalFormat})}},{key:"successPutCountOne",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.uploadTbPedidosPickingContar()),this.datosOperario()}},{key:"abrirModalPickingPorcentaje",value:function(){if(""!==this.getField("codigo_bodega").getValue()&&" "!==this.getField("codigo_bodega").getValue()){this.getField("codigo_bodega").setError(!1,"");var e={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="363-Resumen_pedidos_pendientes_picking",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.loadModalPickingPendientes,error:this.error_,general:this.generalFormat})}else this.getField("codigo_bodega").setError(!0,"Este campo es requerido")}},{key:"loadModalPickingPendientes",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("ModalPickingPorcentaje").handleClickOpen(),this.getField("tbPickingPorcentaje").toggle(!0),this.gridOptionsTbPickingPorcentaje.rowData=e.model,this.gridOptionsTbPickingPorcentaje.paginationPageSize=100,this.getField("tbPickingPorcentaje").initData(this.gridOptionsTbPickingPorcentaje)):this.getField("tbPickingPorcentaje").toggle(!1)}},{key:"datosOperario",value:function(){var e={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="363-Wms_Operario_asignado",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerOperarioAsignado,error:this.error_,general:this.generalFormat})}},{key:"successTraerOperarioAsignado",value:function(e){if(200===e.estado_p){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.wms_operarios_id,i.text=e.nombre,i.campos_cambian={viejoOperario:e.wms_operarios_id},t.push(i)})),this.getField("operarioAsignado").setOptions(t)}this.datosOperarioCambio()}}},{key:"datosOperarioCambio",value:function(){var e={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="363-Retorna_wms_operarios-todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerOperarioCambio,error:this.error_,general:this.generalFormat})}},{key:"successTraerOperarioCambio",value:function(e){if(this.selectOptions=e.model,200===e.estado_p){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.nombre,i.campos_cambian={nuevoOperario:e.id},t.push(i)})),this.getField("operarioCambio").setOptions(t)}this.pickingPorContar(),this.successTraerOperariosTodos(e)}}},{key:"successTraerOperariosTodos",value:function(e){if(200===e.estado_p&&e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.nombre,i.campos_cambian={totalOperario:e.id},t.push(i)})),this.getField("operariosTodos").setOptions(t)}}},{key:"pickingPorContar",value:function(){var e={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="363-Picking_por_contar",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successPickingPorContar,error:this.error_,general:this.generalFormat})}},{key:"successPickingPorContar",value:function(e){if(200===e.estado_p&&e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.numero_picking,i.text=e.numero_picking,i.campos_cambian={numPicking:e.numero_picking},t.push(i)})),this.getField("nroPicking").setOptions(t)}}},{key:"pedidosPorContar",value:function(){if(""!==this.getField("numPicking").getValue()&&" "!==this.getField("numPicking").getValue()){var e={bodega:this.getField("codigo_bodega").getValue(),numero_picking:this.getField("numPicking").getValue()};this.generalFormat.nombre_accion="363-Pedidos_por_contar",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successPedidosPorContar,error:this.error_,general:this.generalFormat})}}},{key:"successPedidosPorContar",value:function(e){if(200===e.estado_p&&e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.pedido,i.text=e.pedido,i.campos_cambian={numPedidos:e.pedido},t.push(i)})),this.getField("nroPedidos").setOptions(t)}}},{key:"guardarCambiarOperario",value:function(e){if(""!==this.getField("operarioCambio").getValue()&&" "!==this.getField("operarioCambio").getValue()&&""!==this.getField("operarioAsignado").getValue()&&" "!==this.getField("operarioAsignado").getValue()&&""!==this.getField("nroPicking").getValue()&&" "!==this.getField("nroPicking").getValue()){this.getField("operarioCambio").setError(!1,""),this.getField("operarioAsignado").setError(!1,""),this.getField("codigo_bodega").setError(!1,""),this.getField("nroPicking").setError(!1,"");var t={};t=""!==this.getField("nroPedidos").getValue()&&" "!==this.getField("nroPedidos").getValue()?{bodega:this.getField("codigo_bodega").getValue(),id_operario_viejo:this.getField("viejoOperario").getValue(),id_operario_nuevo:this.getField("nuevoOperario").getValue(),numero_picking:this.getField("numPicking").getValue(),numero_pedido:this.getField("numPedidos").getValue()}:{bodega:this.getField("codigo_bodega").getValue(),id_operario_viejo:this.getField("viejoOperario").getValue(),id_operario_nuevo:this.getField("nuevoOperario").getValue(),numero_picking:this.getField("numPicking").getValue(),numero_pedido:0},this.generalFormat.nombre_accion="363-pasa TODOS los pedidos que tenga un operario al otro",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successPutCambioOperario,error:this.error_,general:this.generalFormat})}else this.getField("operarioCambio").valid()&&""===this.getField("operarioCambio").getValue()&&this.getField("operarioCambio").setError(!0,"Este campo es requerido"),this.getField("operarioAsignado").valid()&&""===this.getField("operarioAsignado").getValue()&&this.getField("operarioAsignado").setError(!0,"Este campo es requerido"),this.getField("codigo_bodega").valid()&&""===this.getField("codigo_bodega").getValue()&&this.getField("codigo_bodega").setError(!0,"Este campo es requerido"),this.getField("nroPicking").valid()&&""===this.getField("nroPicking").getValue()&&this.getField("nroPicking").setError(!0,"Este campo es requerido")}},{key:"successPutCambioOperario",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.limpiar())}},{key:"asignarOperario",value:function(){if(""!==this.getField("idRegistro").getValue()&&" "!==this.getField("idRegistro").getValue())if(""!==this.getField("operariosTodos").getValue()&&" "!==this.getField("operariosTodos").getValue()){this.getField("operariosTodos").setError(!1,"");var e={codigo_bodega:this.getField("codigo_bodega").getValue(),wms_operarios_id:this.getField("totalOperario").getValue(),ids:this.getField("idRegistro").getValue(),id:1};this.generalFormat.nombre_accion="363-Cambia_operario_de_todos_los_pedidos_especificados_en_ids",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successPutasignarOperario,error:this.error_,general:this.generalFormat})}else this.getField("operariosTodos").valid()&&""===this.getField("operariosTodos").getValue()&&this.getField("operariosTodos").setError(!0,"Este campo es requerido");else this.getField("fieldAlert").toggle(!0,"Se debe seleccionar al menos un picking y seleccionar un operario","error")}},{key:"successPutasignarOperario",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.getField("idRegistro").setValue(""),this.getField("operariosTodos").setValue(""),this.uploadTbPedidosPickingContar())}},{key:"limpiar",value:function(){this.getField("nuevoOperario").setValue(""),this.getField("viejoOperario").setValue(""),this.getField("operarioCambio").setValue(""),this.getField("operarioAsignado").setValue(""),this.getField("cantidadOperarios").setValue(""),this.getField("cantidadPedidos").setValue(""),this.getField("cantidadPicking").setValue(""),this.getField("codigo_bodega").setValue(""),this.getField("nombre_bodega").setValue(""),this.getField("nroPicking").setValue(""),this.getField("nroPedidos").setValue(""),this.getField("numPicking").setValue(""),this.getField("numPedidos").setValue(""),this.getField("idRegistro").setValue(""),this.getField("operariosTodos").setValue(""),""!==this.getField("nuevoOperario").getValue()?this.getField("nuevoOperario").setError(!1,""):this.getField("tbPedidosPickingContar").toggle(!1)}}]),i}(d.a.form);d.a.addController("adminPicking",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsPortaforlioProductos=Object.assign({},o.gridOptions),o.gridOptionsModalPtoPts=Object.assign({},o.gridOptions),o.gridOptionsModalUnidadesCompra=Object.assign({},o.gridOptions),o.gridOptionsModalUnidadesVenta=Object.assign({},o.gridOptions),o.gridOptionsModalProveedores=Object.assign({},o.gridOptions),o.gridOptionsModalProdProveedores=Object.assign({},o.gridOptions),o.gridOptionsModalDefinir=Object.assign({},o.gridOptions),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.gridOptionsModalDefinir.onSelectionChanged=o.onSelectionChanged,o.filaSeleccionadaGrid=[],o.mostrarTablaAdministracionTodos=o.mostrarTablaAdministracionTodos.bind(Object(s.a)(o)),o.successMostrarTablaAdministracionTodos=o.successMostrarTablaAdministracionTodos.bind(Object(s.a)(o)),o.selectOptionModales=o.selectOptionModales.bind(Object(s.a)(o)),o.openModal=o.openModal.bind(Object(s.a)(o)),o.habilitarBotonAgregar=o.habilitarBotonAgregar.bind(Object(s.a)(o)),o.tablaModalPTOPTS=o.tablaModalPTOPTS.bind(Object(s.a)(o)),o.habilitarBotonAgregarPTO=o.habilitarBotonAgregarPTO.bind(Object(s.a)(o)),o.eliminarPTOPTS=o.eliminarPTOPTS.bind(Object(s.a)(o)),o.funcionClickEliminarItemPTOPTS=o.funcionClickEliminarItemPTOPTS.bind(Object(s.a)(o)),o.eliminarItemPTOPTS=o.eliminarItemPTOPTS.bind(Object(s.a)(o)),o.successEliminarItemPTOPTS=o.successEliminarItemPTOPTS.bind(Object(s.a)(o)),o.validarRadioButtonNI=o.validarRadioButtonNI.bind(Object(s.a)(o)),o.limpiarCamposManejaUnidad=o.limpiarCamposManejaUnidad.bind(Object(s.a)(o)),o.actualizarDatosBasicos=o.actualizarDatosBasicos.bind(Object(s.a)(o)),o.successActualizarDatosBasicos=o.successActualizarDatosBasicos.bind(Object(s.a)(o)),o.habilitarBotonAgregarAbastecimiento=o.habilitarBotonAgregarAbastecimiento.bind(Object(s.a)(o)),o.tablaModalUnidadesCompra=o.tablaModalUnidadesCompra.bind(Object(s.a)(o)),o.setButtonEliminarTableModalUnidadesCompra=o.setButtonEliminarTableModalUnidadesCompra.bind(Object(s.a)(o)),o.funcionClickEliminarItemUnidadCompra=o.funcionClickEliminarItemUnidadCompra.bind(Object(s.a)(o)),o.eliminarItemUnidadCompra=o.eliminarItemUnidadCompra.bind(Object(s.a)(o)),o.successEliminarItemUnidadCompra=o.successEliminarItemUnidadCompra.bind(Object(s.a)(o)),o.tablaModalUnidadesVenta=o.tablaModalUnidadesVenta.bind(Object(s.a)(o)),o.setButtonEliminarTableModalUnidadesVenta=o.setButtonEliminarTableModalUnidadesVenta.bind(Object(s.a)(o)),o.funcionClickEliminarItemUnidadVenta=o.funcionClickEliminarItemUnidadVenta.bind(Object(s.a)(o)),o.eliminarItemUnidadVenta=o.eliminarItemUnidadVenta.bind(Object(s.a)(o)),o.successEliminarItemUnidadVenta=o.successEliminarItemUnidadVenta.bind(Object(s.a)(o)),o.limpiarCamposModalProveedores=o.limpiarCamposModalProveedores.bind(Object(s.a)(o)),o.tablaModalProveedores=o.tablaModalProveedores.bind(Object(s.a)(o)),o.setButtonEliminarTableModalProveedores=o.setButtonEliminarTableModalProveedores.bind(Object(s.a)(o)),o.funcionClickEliminarItemProveedores=o.funcionClickEliminarItemProveedores.bind(Object(s.a)(o)),o.eliminarItemProveedores=o.eliminarItemProveedores.bind(Object(s.a)(o)),o.successEliminarItemProveedores=o.successEliminarItemProveedores.bind(Object(s.a)(o)),o.mostrarTablaArticuloID=o.mostrarTablaArticuloID.bind(Object(s.a)(o)),o.validarCamposModalUnidadesVenta=o.validarCamposModalUnidadesVenta.bind(Object(s.a)(o)),o.habilitarBotonAgregarProveedores=o.habilitarBotonAgregarProveedores.bind(Object(s.a)(o)),o.habilitarBotonActualizarDatosBasicos=o.habilitarBotonActualizarDatosBasicos.bind(Object(s.a)(o)),o.setearRadioButtonPtoPts=o.setearRadioButtonPtoPts.bind(Object(s.a)(o)),o.habilitarBotonAgregarUnidadeCompra=o.habilitarBotonAgregarUnidadeCompra.bind(Object(s.a)(o)),o.validarCamposModalDatosBasicos=o.validarCamposModalDatosBasicos.bind(Object(s.a)(o)),o.agregarModalUnidadesVenta=o.agregarModalUnidadesVenta.bind(Object(s.a)(o)),o.agregarModalPtoPts=o.agregarModalPtoPts.bind(Object(s.a)(o)),o.agregarModalUnidadesCompra=o.agregarModalUnidadesCompra.bind(Object(s.a)(o)),o.agregarModalProveedores=o.agregarModalProveedores.bind(Object(s.a)(o)),o.limpiarCamposModalPtoPts=o.limpiarCamposModalPtoPts.bind(Object(s.a)(o)),o.limpiarCamposModalUnidadesCompra=o.limpiarCamposModalUnidadesCompra.bind(Object(s.a)(o)),o.limpiarCamposModalUnidadesVenta=o.limpiarCamposModalUnidadesVenta.bind(Object(s.a)(o)),o.habilitarBotonProdProveedores=o.habilitarBotonProdProveedores.bind(Object(s.a)(o)),o.tablaTraerTodosModalProdProveedores=o.tablaTraerTodosModalProdProveedores.bind(Object(s.a)(o)),o.setearCampoCargaProdProveedores=o.setearCampoCargaProdProveedores.bind(Object(s.a)(o)),o.setButtonEliminarTableModalProdProveedores=o.setButtonEliminarTableModalProdProveedores.bind(Object(s.a)(o)),o.funcionClickEliminarItemProdProveedores=o.funcionClickEliminarItemProdProveedores.bind(Object(s.a)(o)),o.eliminarItemProdProveedores=o.eliminarItemProdProveedores.bind(Object(s.a)(o)),o.successEliminarItemProdProveedores=o.successEliminarItemProdProveedores.bind(Object(s.a)(o)),o.limpiarCamposModalProdProveedores=o.limpiarCamposModalProdProveedores.bind(Object(s.a)(o)),o.setButtonDefinirTableModalProdProveedores=o.setButtonDefinirTableModalProdProveedores.bind(Object(s.a)(o)),o.tablaCargarModalProdProveedores=o.tablaCargarModalProdProveedores.bind(Object(s.a)(o)),o.successTablaCargarModalProdProveedores=o.successTablaCargarModalProdProveedores.bind(Object(s.a)(o)),o.tablaModalDefinir=o.tablaModalDefinir.bind(Object(s.a)(o)),o.setButtonSeleccionarTableModalDefinir=o.setButtonSeleccionarTableModalDefinir.bind(Object(s.a)(o)),o.botonCancelarModalDefinir=o.botonCancelarModalDefinir.bind(Object(s.a)(o)),o.funcionClickSeleccionarTableModalDefinir=o.funcionClickSeleccionarTableModalDefinir.bind(Object(s.a)(o)),o.eliminarModalDefinir=o.eliminarModalDefinir.bind(Object(s.a)(o)),o.eliminarItemModalDefinir=o.eliminarItemModalDefinir.bind(Object(s.a)(o)),o.successEliminarItemModalDefinir=o.successEliminarItemModalDefinir.bind(Object(s.a)(o)),o.agregarModalDefinir=o.agregarModalDefinir.bind(Object(s.a)(o)),o.modificarModalDefinir=o.modificarModalDefinir.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Productos, @version: 2.0.1, @author: Sebastian Rios Echeverri"),this.getField("ver_todos").setClick(this.mostrarTablaAdministracionTodos),this.getField("agregar").setSuccess(this.mostrarTablaArticuloID),this.getField("articulo_id").setOnChange(this.habilitarBotonAgregar),this.getField("bodegas_id").setOnChange(this.habilitarBotonAgregarPTO),this.getField("actualizar_modal_datos_basicos").setClick(this.actualizarDatosBasicos),this.getField("agregar_unidad_compra").setSuccess(this.agregarModalUnidadesCompra),this.getField("agregar_modal_unds_venta").setSuccess(this.agregarModalUnidadesVenta),this.getField("cancelar_proveedores").setClick(this.limpiarCamposModalProveedores),this.getField("agregar_proveedores").setSuccess(this.agregarModalProveedores),this.getField("unidad_modal_unds_venta").setOnChange(this.validarCamposModalUnidadesVenta),this.getField("tercero_id").setOnChange(this.habilitarBotonAgregarProveedores),this.getField("unidadprincipalinventario_id").setOnChange(this.habilitarBotonActualizarDatosBasicos),this.getField("cantidad_unidadprincipal_inventario").setOnChange(this.habilitarBotonActualizarDatosBasicos),this.getField("peso").setOnChange(this.habilitarBotonActualizarDatosBasicos),this.getField("volumen").setOnChange(this.habilitarBotonActualizarDatosBasicos),this.getField("codigo_ean").setOnChange(this.habilitarBotonActualizarDatosBasicos),this.getField("estadoactivo_id").setOnChange(this.habilitarBotonActualizarDatosBasicos),this.getField("transformado").setOnChange(this.habilitarBotonActualizarDatosBasicos),this.getField("perecedero").setOnChange(this.habilitarBotonActualizarDatosBasicos),this.getField("nacion_import_modal_datos_basicos").setOnChange(this.habilitarBotonActualizarDatosBasicos),this.getField("unidadprincipalcompra_id").setOnChange(this.habilitarBotonActualizarDatosBasicos),this.getField("cantidad_unidadprincipalcompras").setOnChange(this.habilitarBotonActualizarDatosBasicos)}},{key:"onSelectionChanged",value:function(){this.filaSeleccionadaGrid=this.gridOptionsModalDefinir.api.getSelectedRows(),this.getField("unidad_a_definir").setValue(this.filaSeleccionadaGrid[0].portafolio_jaivana_unidades_id),this.getField("factor").setValue(this.filaSeleccionadaGrid[0].factor),this.getField("cantidad_minima").setValue(this.filaSeleccionadaGrid[0].cantidad_minima),this.getField("codigo_erp").setValue(this.filaSeleccionadaGrid[0].codigo_erp),this.getField("codigo_de_barras").setValue(this.filaSeleccionadaGrid[0].codigo_de_barras),this.getField("precio_sin_iva").setValue(this.filaSeleccionadaGrid[0].precio_sin_iva),this.getField("negociacion_volumen").setValue(this.filaSeleccionadaGrid[0].negociacion_volumen),this.getField("detalle").setValue(this.filaSeleccionadaGrid[0].detalle),this.getField("proveedores_productos_id").setValue(this.filaSeleccionadaGrid[0].id)}},{key:"agregarModalDefinir",value:function(e){200===e.estado_p&&(this.getField("campo_carga_definir").setValue(this.getField("portafolio_jaivana_proveedores_id").getValue()),this.botonCancelarModalDefinir())}},{key:"modificarModalDefinir",value:function(e){200===e.estado_p&&(this.getField("campo_carga_definir").setValue(this.getField("portafolio_jaivana_proveedores_id").getValue()),this.botonCancelarModalDefinir())}},{key:"eliminarModalDefinir",value:function(){this.getField("confirmModalCustom").setTitleAndContent("Eliminar","\xbfDesea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.eliminarItemModalDefinir),this.getField("confirmModalCustom").toggle(!0)}},{key:"eliminarItemModalDefinir",value:function(){this.getField("confirmModalCustom").toggle(!1);var e={id:this.getField("proveedores_productos_id").getValue()};this.generalFormat.nombre_accion="adm_port_prod_sj_proveedores_productos_eliminar_377",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarItemModalDefinir,error:this.error_,general:this.generalFormat})}},{key:"successEliminarItemModalDefinir",value:function(e){200===e.estado_p&&(this.getField("campo_carga_definir").setValue(this.getField("portafolio_jaivana_proveedores_id").getValue()),this.botonCancelarModalDefinir())}},{key:"botonCancelarModalDefinir",value:function(){this.getField("unidad_a_definir").setValue(""),this.getField("factor").setValue(0),this.getField("cantidad_minima").setValue(0),this.getField("codigo_erp").setValue(""),this.getField("codigo_de_barras").setValue(""),this.getField("precio_sin_iva").setValue(0),this.getField("negociacion_volumen").setValue("N"),this.getField("detalle").setValue(""),this.getField("proveedores_productos_id").setValue(""),this.getField("eliminar_modal_definir").setDisabled(!0),this.getField("modificar_modal_definir").setDisabled(!0),this.getField("agregar_modal_definir").setDisabled(!1),this.getField("cancelar_modal_definir").setDisabled(!1),this.getField("unidad_a_definir").setError(!1,""),this.getField("factor").setError(!1,""),this.getField("cantidad_minima").setError(!1,""),this.getField("codigo_erp").setError(!1,""),this.getField("codigo_de_barras").setError(!1,""),this.getField("precio_sin_iva").setError(!1,""),this.getField("detalle").setError(!1,""),this.getField("campo_carga_definir").setValue(this.getField("portafolio_jaivana_proveedores_id").getValue())}},{key:"tablaModalDefinir",value:function(e){if(e.length>=1){this.getField("tabla_modal_definir").toggle(!0),this.gridOptionsModalDefinir.rowData=e;var t=new Map;t.set("seleccionar",{cellRenderer:this.setButtonSeleccionarTableModalDefinir,field:"seleccionar",width:127}),this.getField("tabla_modal_definir").initData(this.gridOptionsModalDefinir,t)}else this.getField("tabla_modal_definir").toggle(!1)}},{key:"setButtonSeleccionarTableModalDefinir",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.funcionClickSeleccionarTableModalDefinir(e)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Seleccionar"),i}},{key:"funcionClickSeleccionarTableModalDefinir",value:function(e){""!==this.getField("proveedores_productos_id").getValue()&&" "!==this.getField("proveedores_productos_id").getValue()&&(this.getField("agregar_modal_definir").setDisabled(!0),this.getField("eliminar_modal_definir").setDisabled(!1),this.getField("modificar_modal_definir").setDisabled(!1),this.getField("cancelar_modal_definir").setDisabled(!1))}},{key:"tablaCargarModalProdProveedores",value:function(e){if(""!==this.getField("id_terceros_nit").getValue()&&" "!==this.getField("id_terceros_nit").getValue()){var t={value:this.getField("id_terceros_nit").getValue()};this.generalFormat.nombre_accion="adm_port_prod_sj_proveedores_tercero_id_377",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTablaCargarModalProdProveedores,error:this.error_,general:this.generalFormat,showMessage:e})}}},{key:"successTablaCargarModalProdProveedores",value:function(e){if(e.data.length>=1){this.getField("tabla_prod_proveedores").toggle(!0),this.gridOptionsModalProdProveedores.rowData=e.data;var t=new Map;t.set("definir",{cellRenderer:this.setButtonDefinirTableModalProdProveedores,field:"definir",width:50}),t.set("eliminar",{cellRenderer:this.setButtonEliminarTableModalProdProveedores,field:"eliminar",width:50}),t.set("nit",{field:"nit",width:60}),t.set("sede",{field:"sede",width:50}),t.set("nombre_proveedor",{field:"nombre_proveedor",width:70}),t.set("producto",{field:"producto",width:50}),t.set("nombre",{field:"nombre",width:70}),this.getField("tabla_prod_proveedores").initData(this.gridOptionsModalProdProveedores,t)}else this.getField("tabla_prod_proveedores").toggle(!1)}},{key:"setearCampoCargaProdProveedores",value:function(){this.getField("id_terceros_nit").setValue(""),this.getField("campo_carga_prod_proveedores").setValue(1)}},{key:"tablaTraerTodosModalProdProveedores",value:function(e){if(e.length>=1){this.getField("tabla_prod_proveedores").toggle(!0),this.gridOptionsModalProdProveedores.rowData=e;var t=new Map;t.set("definir",{cellRenderer:this.setButtonDefinirTableModalProdProveedores,field:"definir",width:43}),t.set("eliminar",{cellRenderer:this.setButtonEliminarTableModalProdProveedores,field:"eliminar",width:43}),t.set("nit",{field:"nit",width:60}),t.set("sede",{field:"sede",width:35}),t.set("nombre_proveedor",{field:"nombre_proveedor",width:100}),t.set("producto",{field:"producto",width:60}),t.set("nombre",{field:"nombre",width:100}),this.getField("tabla_prod_proveedores").initData(this.gridOptionsModalProdProveedores,t)}else this.getField("tabla_prod_proveedores").toggle(!1)}},{key:"setButtonDefinirTableModalProdProveedores",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.funcionClickDefinirTableModalProdProveedores(e)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Definir"),i}},{key:"funcionClickDefinirTableModalProdProveedores",value:function(e){this.getField("modal_definir").handleClickOpen(),this.getField("producto_modal_definir").setValue(e.data.producto),this.getField("nombre_modal_definir").setValue(e.data.nombre),this.getField("proveedor_modal_definir").setValue(e.data.nombre_proveedor),this.getField("portafolio_jaivana_proveedores_id").setValue(e.data.id),this.getField("campo_carga_definir").setValue(this.getField("portafolio_jaivana_proveedores_id").getValue()),this.getField("campo_carga_definir").setCustomSuccess(this.tablaModalDefinir),this.getField("cancelar_modal_definir").setClick(this.botonCancelarModalDefinir),this.getField("agregar_modal_definir").setSuccess(this.agregarModalDefinir),this.getField("modificar_modal_definir").setSuccess(this.modificarModalDefinir),this.getField("eliminar_modal_definir").setClick(this.eliminarModalDefinir),this.getField("proveedores_productos_id").setOnChange(this.funcionClickSeleccionarTableModalDefinir)}},{key:"setButtonEliminarTableModalProdProveedores",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.funcionClickEliminarItemProdProveedores(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"funcionClickEliminarItemProdProveedores",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","\xbfDesea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.eliminarItemProdProveedores),this.getField("confirmModalCustom").toggle(!0)}},{key:"eliminarItemProdProveedores",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_delete){var e={id:this.id_delete};this.generalFormat.nombre_accion="adm_port_prod_sj_proveedores_eliminar_377",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarItemProdProveedores,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarItemProdProveedores",value:function(e){200===e.estado_p&&(""!==this.getField("id_terceros_nit").getValue()&&" "!==this.getField("id_terceros_nit").getValue()?this.tablaCargarModalProdProveedores(!1):this.getField("campo_carga_prod_proveedores").setValue(1),this.limpiarCamposModalProdProveedores())}},{key:"limpiarCamposModalProdProveedores",value:function(){this.getField("nit_modal_prod_proveedores").setValue(""),this.getField("sede_modal_prod_proveedores").setValue(""),this.getField("nombre_modal_prod_proveedores").setValue(""),this.getField("id_terceros_nit").setValue("")}},{key:"habilitarBotonProdProveedores",value:function(){""!==this.getField("nit_modal_prod_proveedores").getValue()&&" "!==this.getField("nit_modal_prod_proveedores").getValue()&&""!==this.getField("sede_modal_prod_proveedores").getValue()&&" "!==this.getField("sede_modal_prod_proveedores").getValue()&&""!==this.getField("nombre_modal_prod_proveedores").getValue()&&" "!==this.getField("nombre_modal_prod_proveedores").getValue()&&""!==this.getField("id_terceros_nit").getValue()&&" "!==this.getField("id_terceros_nit").getValue()?this.getField("cargar_modal_prod_proveedores").setDisabled(!1):this.getField("cargar_modal_prod_proveedores").setDisabled(!0)}},{key:"agregarModalProveedores",value:function(e){200===e.estado_p&&(this.getField("campo_carga_proveedores").setValue(this.getField("portafolio_jaivana_productos_id").getValue()),this.limpiarCamposModalProveedores())}},{key:"agregarModalUnidadesCompra",value:function(e){200===e.estado_p&&(this.getField("campo_carga_unidades_compra").setValue(1),this.limpiarCamposModalUnidadesCompra())}},{key:"agregarModalPtoPts",value:function(e){200===e.estado_p&&(this.getField("campo_carga_pto_pts").setValue(1),this.limpiarCamposModalPtoPts())}},{key:"agregarModalUnidadesVenta",value:function(e){200===e.estado_p&&(this.getField("campo_carga_unidades_venta").setValue(1),this.limpiarCamposModalUnidadesVenta())}},{key:"validarCamposModalDatosBasicos",value:function(e){this.getField("unidadprincipalcompra_id").setVisible(!1),this.getField("cantidad_unidadprincipalcompras").setVisible(!1),null===e.data.unidadprincipalinventario_id?this.getField("unidadprincipalinventario_id").setValue(""):this.getField("unidadprincipalinventario_id").setValue(e.data.unidadprincipalinventario_id),null===e.data.contenido_inventario?this.getField("cantidad_unidadprincipal_inventario").setValue(""):this.getField("cantidad_unidadprincipal_inventario").setValue(e.data.contenido_inventario.toFixed(4)),null===e.data.peso?this.getField("peso").setValue(""):this.getField("peso").setValue(e.data.peso.toFixed(2)),null===e.data.volumen?this.getField("volumen").setValue(""):this.getField("volumen").setValue(e.data.volumen.toFixed(4)),null===e.data.codigo_ean?this.getField("codigo_ean").setValue(""):this.getField("codigo_ean").setValue(e.data.codigo_ean),null===e.data.estadoactivo_id?this.getField("estadoactivo_id").setValue(""):this.getField("estadoactivo_id").setValue(e.data.estadoactivo_id),null===e.data.transformado?this.getField("transformado").setValue("N"):this.getField("transformado").setValue(e.data.transformado),null===e.data.perecedero?this.getField("perecedero").setValue("N"):this.getField("perecedero").setValue(e.data.perecedero),null===e.data.unidadprincipalcompra_id?this.getField("unidadprincipalcompra_id").setValue(""):this.getField("unidadprincipalcompra_id").setValue(e.data.unidadprincipalcompra_id),null===e.data.factor_compra?this.getField("cantidad_unidadprincipalcompras").setValue(""):this.getField("cantidad_unidadprincipalcompras").setValue(e.data.factor_compra.toFixed(4)),null===e.data.nacional?this.getField("nacional").setValue(""):this.getField("nacional").setValue(e.data.nacional),null===e.data.importado?this.getField("importado").setValue(""):this.getField("importado").setValue(e.data.importado),"S"===this.getField("nacional").getValue()?this.getField("nacion_import_modal_datos_basicos").setValue("N"):"S"===this.getField("importado").getValue()&&this.getField("nacion_import_modal_datos_basicos").setValue("I"),null===e.data.maneja_plataforma_abastecimiento?this.getField("maneja_compra_modal_datos_basicos").setValue("N"):this.getField("maneja_compra_modal_datos_basicos").setValue(e.data.maneja_plataforma_abastecimiento),"S"===this.getField("maneja_compra_modal_datos_basicos").getValue()?(this.getField("unidadprincipalcompra_id").setVisible(!0),this.getField("cantidad_unidadprincipalcompras").setVisible(!0)):"N"===this.getField("maneja_compra_modal_datos_basicos").getValue()&&(this.getField("unidadprincipalcompra_id").setVisible(!1),this.getField("cantidad_unidadprincipalcompras").setVisible(!1)),this.getField("producto_modal_datos_basicos").setValue(e.data.producto),this.getField("nombre_modal_datos_Basicos").setValue(e.data.nombre),this.getField("id_modal_datos_basicos").setValue(e.data.id),this.getField("maneja_compra_modal_datos_basicos").setOnChange(this.limpiarCamposManejaUnidad),this.getField("actualizar_modal_datos_basicos").setDisabled(!0)}},{key:"habilitarBotonAgregarUnidadeCompra",value:function(){""!==this.getField("portafolio_jaivana_unidades_id").getValue()&&" "!==this.getField("portafolio_jaivana_unidades_id").getValue()&&""!==this.getField("unidad_compra_modal_unidad_compra").getValue()&&""!==this.getField("cantidad_unidad_compra").getValue()?this.getField("agregar_unidad_compra").setDisabled(!1):this.getField("agregar_unidad_compra").setDisabled(!0)}},{key:"setearRadioButtonPtoPts",value:function(){"SI"===this.getField("pto").getValue()&&"NO"===this.getField("pts").getValue()?this.getField("tipo").setValue("PTO"):"NO"===this.getField("pto").getValue()&&"SI"===this.getField("pts").getValue()&&this.getField("tipo").setValue("PTS")}},{key:"habilitarBotonActualizarDatosBasicos",value:function(){this.validarRadioButtonNI(),""!==this.getField("unidadprincipalinventario_id").getValue()&&""!==this.getField("cantidad_unidadprincipal_inventario").getValue()&&""!==this.getField("peso").getValue()&&""!==this.getField("volumen").getValue()&&""!==this.getField("codigo_ean").getValue()&&""!==this.getField("estadoactivo_id").getValue()&&""!==this.getField("transformado").getValue()&&""!==this.getField("perecedero").getValue()&&""!==this.getField("nacion_import_modal_datos_basicos").getValue()?this.getField("actualizar_modal_datos_basicos").setDisabled(!1):this.getField("actualizar_modal_datos_basicos").setDisabled(!0)}},{key:"habilitarBotonAgregarProveedores",value:function(){""!==this.getField("tercero_id").getValue()&&" "!==this.getField("tercero_id").getValue()&&0!==this.getField("tercero_id").getValue()?this.getField("agregar_proveedores").setDisabled(!1):this.getField("agregar_proveedores").setDisabled(!0)}},{key:"validarCamposModalUnidadesVenta",value:function(){this.getField("unidad_modal_unds_venta").valid()?this.getField("unidad_modal_unds_venta").setError(!1,""):this.getField("unidad_modal_unds_venta").setError(!0,"* Este campo es requerido")}},{key:"mostrarTablaArticuloID",value:function(e){if(200===e.estado_p){var t;t={value:this.getField("articulo_id").getValue()},this.generalFormat.nombre_accion="adm_port_prod_sj_productos-articuloid_377",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successMostrarTablaAdministracionTodos,error:this.error_,general:this.generalFormat})}}},{key:"tablaModalProveedores",value:function(e){if(e.length>=1){this.getField("tabla_proveedores").toggle(!0),this.gridOptionsModalProveedores.rowData=e;var t=new Map;t.set("eliminar",{cellRenderer:this.setButtonEliminarTableModalProveedores,field:"Eliminar",width:150}),this.getField("tabla_proveedores").initData(this.gridOptionsModalProveedores,t)}else this.getField("tabla_proveedores").toggle(!1)}},{key:"setButtonEliminarTableModalProveedores",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.funcionClickEliminarItemProveedores(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"funcionClickEliminarItemProveedores",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","\xbfDesea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.eliminarItemProveedores),this.getField("confirmModalCustom").toggle(!0)}},{key:"eliminarItemProveedores",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_delete){var e={id:this.id_delete};this.generalFormat.nombre_accion="adm_port_prod_sj_proveedores_eliminar_377",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarItemProveedores,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarItemProveedores",value:function(e){200===e.estado_p&&(this.getField("campo_carga_proveedores").setValue(this.getField("portafolio_jaivana_productos_id").getValue()),this.limpiarCamposModalProveedores())}},{key:"limpiarCamposModalProveedores",value:function(){this.getField("nit_proveedores").setValue(""),this.getField("sede_proveedores").setValue(""),this.getField("nombre_nit_proveedores").setValue(""),this.getField("tercero_id").setValue(0)}},{key:"tablaModalUnidadesVenta",value:function(e){if(e.length>=1){this.getField("tabla_unidades_de_venta").toggle(!0),this.gridOptionsModalUnidadesVenta.rowData=e;var t=new Map;t.set("eliminar",{cellRenderer:this.setButtonEliminarTableModalUnidadesVenta,field:"Eliminar",width:150}),this.getField("tabla_unidades_de_venta").initData(this.gridOptionsModalUnidadesVenta,t)}else this.getField("tabla_unidades_de_venta").toggle(!1)}},{key:"setButtonEliminarTableModalUnidadesVenta",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.funcionClickEliminarItemUnidadVenta(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"funcionClickEliminarItemUnidadVenta",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","\xbfDesea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.eliminarItemUnidadVenta),this.getField("confirmModalCustom").toggle(!0)}},{key:"eliminarItemUnidadVenta",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_delete){var e={id:this.id_delete};this.generalFormat.nombre_accion="adm_port_prod_sj_unidades_venta_eliminar_377",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarItemUnidadVenta,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarItemUnidadVenta",value:function(e){200===e.estado_p&&(this.getField("campo_carga_unidades_venta").setValue(1),this.limpiarCamposModalUnidadesVenta())}},{key:"limpiarCamposModalUnidadesVenta",value:function(){this.getField("unidad_modal_unds_venta").setValue(""),this.getField("cantidad_unidad_venta").setValue(0),this.getField("precio1").setValue(0),this.getField("precio2").setValue(0),this.getField("precio3").setValue(0),this.getField("precio4").setValue(0),this.getField("precio5").setValue(0),this.getField("tercero_id").setValue(0),this.getField("unidad_modal_unds_venta").setError(!1,"")}},{key:"tablaModalUnidadesCompra",value:function(e){if(e.length>=1){this.getField("tabla_unidad_compra").toggle(!0),this.gridOptionsModalUnidadesCompra.rowData=e;var t=new Map;t.set("eliminar",{cellRenderer:this.setButtonEliminarTableModalUnidadesCompra,field:"Eliminar",width:150}),this.getField("tabla_unidad_compra").initData(this.gridOptionsModalUnidadesCompra,t)}else this.getField("tabla_unidad_compra").toggle(!1)}},{key:"setButtonEliminarTableModalUnidadesCompra",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.funcionClickEliminarItemUnidadCompra(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"funcionClickEliminarItemUnidadCompra",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","\xbfDesea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.eliminarItemUnidadCompra),this.getField("confirmModalCustom").toggle(!0)}},{key:"eliminarItemUnidadCompra",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_delete){var e={id:this.id_delete};this.generalFormat.nombre_accion="adm_port_prod_sj_unidades_compra_eliminar_377",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarItemUnidadCompra,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarItemUnidadCompra",value:function(e){200===e.estado_p&&(this.getField("campo_carga_unidades_compra").setValue(1),this.limpiarCamposModalUnidadesCompra())}},{key:"limpiarCamposModalUnidadesCompra",value:function(){this.getField("unidad_compra_modal_unidad_compra").setValue(""),this.getField("cantidad_unidad_compra").setValue(0),this.getField("portafolio_jaivana_unidades_id").setValue("")}},{key:"habilitarBotonAgregarAbastecimiento",value:function(){this.getField("actualizar_modal_abastecimiento").setDisabled(!1)}},{key:"actualizarDatosBasicos",value:function(){if(""===this.getField("nacional").getValue()&&""===this.getField("importado").getValue()?this.getField("nacion_import_modal_datos_basicos").setError(!0,"* Este campo es requerido"):this.getField("nacion_import_modal_datos_basicos").setError(!1,""),"S"===this.getField("maneja_compra_modal_datos_basicos").getValue()){var e={id:this.getField("id_modal_datos_basicos").getValue(),unidadprincipalinventario_id:this.getField("unidadprincipalinventario_id").getValue(),cantidad_unidadprincipal_inventario:this.getField("cantidad_unidadprincipal_inventario").getValue(),peso:this.getField("peso").getValue(),volumen:this.getField("volumen").getValue(),codigo_ean:this.getField("codigo_ean").getValue(),estadoactivo_id:this.getField("estadoactivo_id").getValue(),transformado:this.getField("transformado").getValue(),perecedero:this.getField("perecedero").getValue(),nacional:this.getField("nacional").getValue(),importado:this.getField("importado").getValue(),maneja_plataforma_abastecimiento:this.getField("maneja_compra_modal_datos_basicos").getValue(),unidadprincipalcompra_id:this.getField("unidadprincipalcompra_id").getValue(),cantidad_unidadprincipalcompras:this.getField("cantidad_unidadprincipalcompras").getValue()};this.getField("unidadprincipalinventario_id").valid()&&this.getField("cantidad_unidadprincipal_inventario").valid()&&this.getField("peso").valid()&&this.getField("volumen").valid()&&this.getField("codigo_ean").valid()&&this.getField("estadoactivo_id").valid()&&this.getField("transformado").valid()&&this.getField("perecedero").valid()&&this.getField("nacional").valid()&&this.getField("importado").valid()&&this.getField("maneja_compra_modal_datos_basicos").valid()&&this.getField("unidadprincipalcompra_id").valid()&&this.getField("cantidad_unidadprincipalcompras").valid()&&(this.generalFormat.nombre_accion="adm_port_prod_sj_productos_datosbasicos_377",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successActualizarDatosBasicos,error:this.error_,general:this.generalFormat}))}else if("N"===this.getField("maneja_compra_modal_datos_basicos").getValue()){var t={id:this.getField("id_modal_datos_basicos").getValue(),unidadprincipalinventario_id:this.getField("unidadprincipalinventario_id").getValue(),cantidad_unidadprincipal_inventario:this.getField("cantidad_unidadprincipal_inventario").getValue(),peso:this.getField("peso").getValue(),volumen:this.getField("volumen").getValue(),codigo_ean:this.getField("codigo_ean").getValue(),estadoactivo_id:this.getField("estadoactivo_id").getValue(),transformado:this.getField("transformado").getValue(),perecedero:this.getField("perecedero").getValue(),nacional:this.getField("nacional").getValue(),importado:this.getField("importado").getValue(),maneja_plataforma_abastecimiento:this.getField("maneja_compra_modal_datos_basicos").getValue()};this.getField("unidadprincipalinventario_id").valid()&&this.getField("cantidad_unidadprincipal_inventario").valid()&&this.getField("peso").valid()&&this.getField("volumen").valid()&&this.getField("codigo_ean").valid()&&this.getField("estadoactivo_id").valid()&&this.getField("transformado").valid()&&this.getField("perecedero").valid()&&this.getField("nacional").valid()&&this.getField("importado").valid()&&this.getField("maneja_compra_modal_datos_basicos").valid()&&(this.generalFormat.nombre_accion="adm_port_prod_sj_productos_datosbasicos_377",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successActualizarDatosBasicos,error:this.error_,general:this.generalFormat}))}}},{key:"successActualizarDatosBasicos",value:function(e){200===e.estado_p&&this.mostrarTablaAdministracionTodos(!1)}},{key:"limpiarCamposManejaUnidad",value:function(){this.habilitarBotonActualizarDatosBasicos(),"N"===this.getField("maneja_compra_modal_datos_basicos").getValue()&&(this.getField("unidadprincipalcompra_id").setValue(""),this.getField("cantidad_unidadprincipalcompras").setValue(0))}},{key:"validarRadioButtonNI",value:function(){"N"===this.getField("nacion_import_modal_datos_basicos").getValue()?(this.getField("nacional").setValue("S"),this.getField("importado").setValue("N")):(this.getField("nacional").setValue("N"),this.getField("importado").setValue("S"))}},{key:"habilitarBotonAgregarPTO",value:function(){""!==this.getField("bodegas_id").getValue()&&" "!==this.getField("bodegas_id").getValue()&&0!==this.getField("bodegas_id").getValue()?this.getField("agregar_modal_pto").setDisabled(!1):this.getField("agregar_modal_pto").setDisabled(!0)}},{key:"tablaModalPTOPTS",value:function(e){if(e.length>=1){this.getField("tabla_pto_pts").toggle(!0),this.gridOptionsModalPtoPts.rowData=e;var t=new Map;t.set("eliminar",{cellRenderer:this.eliminarPTOPTS,field:"Eliminar",width:150}),this.getField("tabla_pto_pts").initData(this.gridOptionsModalPtoPts,t)}else this.getField("tabla_pto_pts").toggle(!1)}},{key:"eliminarPTOPTS",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.funcionClickEliminarItemPTOPTS(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"funcionClickEliminarItemPTOPTS",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","\xbfDesea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.eliminarItemPTOPTS),this.getField("confirmModalCustom").toggle(!0)}},{key:"eliminarItemPTOPTS",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_delete){var e={id:this.id_delete};this.generalFormat.nombre_accion="adm_port_prod_sj_pto_pts-eliminar_377",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarItemPTOPTS,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarItemPTOPTS",value:function(e){200===e.estado_p&&(this.getField("campo_carga_pto_pts").setValue(1),this.limpiarCamposModalPtoPts())}},{key:"limpiarCamposModalPtoPts",value:function(){this.getField("tipo").setValue(""),this.getField("codigo_bodega_pto").setValue(""),this.getField("bodegas_id").setValue(0),this.getField("nombre_bodega").setValue("")}},{key:"habilitarBotonAgregar",value:function(){""!==this.getField("articulo_id").getValue()&&" "!==this.getField("articulo_id").getValue()?this.getField("agregar").setDisabled(!1):this.getField("agregar").setDisabled(!0)}},{key:"mostrarTablaAdministracionTodos",value:function(e){this.generalFormat.nombre_accion="adm_port_prod_sj_productos_todos_377",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",success:this.successMostrarTablaAdministracionTodos,error:this.error_,general:this.generalFormat,showMessage:e})}},{key:"successMostrarTablaAdministracionTodos",value:function(e){if(200===e.estado_p)if(e.data.length>=1){this.getField("tabla_portafolio_productos").toggle(!0),this.gridOptionsPortaforlioProductos.rowData=e.data;var t=new Map;t.set("menu",{cellRenderer:this.selectOptionModales,field:"Menu",width:160}),this.getField("tabla_portafolio_productos").initData(this.gridOptionsPortaforlioProductos,t)}else this.getField("tabla_portafolio_productos").setDisabled(!1);else this.getField("tabla_portafolio_productos").setDisabled(!1)}},{key:"selectOptionModales",value:function(e){var t=this,i=document.createElement("select"),a=document.createElement("div");a.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),i.setAttribute("style","width: 130px; heigth: 100%; background-color: transparent; border: 5px solid transparent; border-color: #fff transparent transparent transparent"),i.onchange=function(i){return t.openModal(i,e)};var o=document.createElement("option");o.setAttribute("value",""),o.textContent="Opciones",i.appendChild(o);var s=document.createElement("option");s.setAttribute("value",1),s.textContent="Datos B\xe1sicos",i.appendChild(s);var r=document.createElement("option");r.setAttribute("value",2),r.textContent="PTO / PTS",i.appendChild(r);var n=document.createElement("option");n.setAttribute("value",3),n.textContent="Abastecimiento",i.appendChild(n);var d=document.createElement("option");d.setAttribute("value",4),d.textContent="Unidades de Compra",i.appendChild(d);var l=document.createElement("option");l.setAttribute("value",5),l.textContent="Unidades de Venta",i.appendChild(l);var c=document.createElement("option");c.setAttribute("value",6),c.textContent="Proveedores",i.appendChild(c);var u=document.createElement("option");return u.setAttribute("value",7),u.textContent="Productos Proveedores",i.appendChild(u),a.appendChild(i),a}},{key:"openModal",value:function(e,t){switch(e.target.value){default:break;case"1":this.getField("modal_datos_basicos").handleClickOpen(),this.validarCamposModalDatosBasicos(t);break;case"2":this.getField("modal_pto_pts").handleClickOpen(),this.getField("producto_modal_pto").setValue(t.data.producto),this.getField("nombre_modal_pto").setValue(t.data.nombre),this.getField("portafoliojaivanaproductos_id").setValue(t.data.id),this.getField("campo_carga_pto_pts").setValue(1),this.getField("campo_carga_pto_pts").setCustomSuccess(this.tablaModalPTOPTS),this.getField("agregar_modal_pto").setSuccess(this.agregarModalPtoPts),this.getField("pto").setOnChange(this.setearRadioButtonPtoPts),this.getField("pts").setOnChange(this.setearRadioButtonPtoPts);break;case"3":this.getField("actualizar_modal_abastecimiento").setDisabled(!0),this.getField("modal_abastecimiento").handleClickOpen(),this.getField("maneja_plataforma_abastecimiento").setOnChange(this.habilitarBotonAgregarAbastecimiento),this.getField("producto_modal_abastecimiento").setValue(t.data.producto),this.getField("nombre_modal_abastecimiento").setValue(t.data.nombre),this.getField("id_modal_abastecimiento").setValue(t.data.id);break;case"4":this.getField("modal_unidades_compra").handleClickOpen(),this.getField("producto_unidad_compra").setValue(t.data.producto),this.getField("nombre_unidad_compra").setValue(t.data.nombre),this.getField("productos_id_modal_unidades_compra").setValue(t.data.id),this.getField("unidad_principal_unidad_compra").setValue(t.data.unidad_principal_inventario),this.getField("campo_carga_unidades_compra").setValue(1),this.getField("campo_carga_unidades_compra").setCustomSuccess(this.tablaModalUnidadesCompra),this.getField("portafolio_jaivana_unidades_id").setOnChange(this.habilitarBotonAgregarUnidadeCompra),this.getField("cantidad_unidad_compra").setOnChange(this.habilitarBotonAgregarUnidadeCompra);break;case"5":this.getField("modal_unidades_de_venta").handleClickOpen(),this.getField("producto_modal_unds_venta").setValue(t.data.producto),this.getField("nombre_modal_unds_venta").setValue(t.data.nombre),this.getField("productos_id_modal_unidades_venta").setValue(t.data.id),this.getField("unidad_modal_unds_venta").setError(!1,""),this.getField("campo_carga_unidades_venta").setValue(1),this.getField("campo_carga_unidades_venta").setCustomSuccess(this.tablaModalUnidadesVenta);break;case"6":this.getField("modal_proveedores").handleClickOpen(),this.getField("producto_proveedores").setValue(t.data.producto),this.getField("nombre_proveedores").setValue(t.data.nombre),this.getField("portafolio_jaivana_productos_id").setValue(t.data.id),this.getField("campo_carga_proveedores").setValue(this.getField("portafolio_jaivana_productos_id").getValue()),this.getField("campo_carga_proveedores").setCustomSuccess(this.tablaModalProveedores);break;case"7":this.getField("modal_productos_proveedores").handleClickOpen(),this.getField("id_terceros_nit").setOnChange(this.habilitarBotonProdProveedores),this.getField("traer_todos_modal_prod_proveedores").setClick(this.setearCampoCargaProdProveedores),this.getField("campo_carga_prod_proveedores").setCustomSuccess(this.tablaTraerTodosModalProdProveedores),this.getField("cargar_modal_prod_proveedores").setClick(this.tablaCargarModalProdProveedores)}e.target.value=""}}]),i}(d.a.form);d.a.addController("adm_port_prod",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=i(1),c=i(78),u=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.selectedRow=o.selectedRow.bind(Object(s.a)(o)),o.gridBanners=Object.assign({},o.gridOptions),o.gridBanners.onSelectionChanged=o.selectedRow,o.gridProductos=Object.assign({},o.gridOptions),o.gridProductos.onSelectionChanged=o.selectedRow,o.traerRegistrosSecciones=o.traerRegistrosSecciones.bind(Object(s.a)(o)),o.showAddSeccion=o.showAddSeccion.bind(Object(s.a)(o)),o.respuestaTraerRegistrosSecciones=o.respuestaTraerRegistrosSecciones.bind(Object(s.a)(o)),o.addNewSeccionFinal=o.addNewSeccionFinal.bind(Object(s.a)(o)),o.addNewSeccionFinalResponse=o.addNewSeccionFinalResponse.bind(Object(s.a)(o)),o.id_seccion_delete=null,o.confirmarEliminacion=o.confirmarEliminacion.bind(Object(s.a)(o)),o.EliminarSeccion=o.EliminarSeccion.bind(Object(s.a)(o)),o.respuestaEliminarSeccion=o.respuestaEliminarSeccion.bind(Object(s.a)(o)),o.showAddProducto=o.showAddProducto.bind(Object(s.a)(o)),o.addProductoSeccion=o.addProductoSeccion.bind(Object(s.a)(o)),o.addProductoSeccionSuccess=o.addProductoSeccionSuccess.bind(Object(s.a)(o)),o.showProductos=o.showProductos.bind(Object(s.a)(o)),o.respuestaTraerProductos=o.respuestaTraerProductos.bind(Object(s.a)(o)),o.confirmarEliminacionProducto=o.confirmarEliminacionProducto.bind(Object(s.a)(o)),o.EliminarProducto=o.EliminarProducto.bind(Object(s.a)(o)),o.respuestaEliminarProducto=o.respuestaEliminarProducto.bind(Object(s.a)(o)),o.getDataProductosSeccion=o.getDataProductosSeccion.bind(Object(s.a)(o)),o.respuestaTraerProductosSeccion=o.respuestaTraerProductosSeccion.bind(Object(s.a)(o)),o.cancelarEdicion=o.cancelarEdicion.bind(Object(s.a)(o)),o.startEdicion=o.startEdicion.bind(Object(s.a)(o)),o.editarSeccionFinal=o.editarSeccionFinal.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"selectedRow",value:function(){}},{key:"initForm",value:function(){this.traerRegistrosSecciones(),this.getField("new_seccion").setClick(this.showAddSeccion),this.getField("addSectionFinal").setClick(this.addNewSeccionFinal),this.getField("agregar").setClick(this.addProductoSeccion),this.getField("editar_seccion").setClick(this.editarSeccionFinal),this.getField("cancelar_edicion").setClick(this.cancelarEdicion)}},{key:"addProductoSeccion",value:function(){if(this.getField("producto_nombre").valid()){var e={codigo_articulo:this.getField("producto").getValue(),seccion_id:this.id_seccion_add};this.generalFormat.nombre_accion="variables_codigo_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.addProductoSeccionSuccess,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"addProductoSeccionSuccess",value:function(e){200===e.estado_p?(this.getField("modal_new_producto").handleClose(),this.getDataProductosSeccion(null,{id:this.current_section_productos_id,descripcion:this.current_section_name})):this.getField("fieldAlert").toggle(!0,"Error al agregar el producto, por favor compruebe que este no est\xe9 en otra secci\xf3n","error")}},{key:"addNewSeccionFinal",value:function(){if(this.getField("descripcion_new_seccion").valid()&&this.getField("orden").valid()){var e={descripcion:this.getField("descripcion_new_seccion").getValue(),orden:parseInt(this.getField("orden").getValue())};this.generalFormat.nombre_accion="variables_titulo_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.addNewSeccionFinalResponse,error:this.error_,general:this.generalFormat,showMessage:!0})}}},{key:"editarSeccionFinal",value:function(){if(this.getField("descripcion_new_seccion").valid()&&this.getField("orden").valid()){var e={descripcion:this.getField("descripcion_new_seccion").getValue(),orden:parseInt(this.getField("orden").getValue()),id:this.id_edicion};this.generalFormat.nombre_accion="variables_titulo_modificar",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.addNewSeccionFinalResponse,error:this.error_,general:this.generalFormat,showMessage:!0})}}},{key:"addNewSeccionFinalResponse",value:function(e){200===e.estado_p&&(this.getField("orden").setValue(1),this.getField("descripcion_new_seccion").setValue(""),this.getField("editar_seccion").setVisible(!1),this.getField("cancelar_edicion").setVisible(!1),this.getField("addSectionFinal").setVisible(!0),this.traerRegistrosSecciones(),this.getField("modal_new").handleClose())}},{key:"cancelarEdicion",value:function(){this.getField("editar_seccion").setVisible(!1),this.getField("cancelar_edicion").setVisible(!1),this.getField("addSectionFinal").setVisible(!0)}},{key:"startEdicion",value:function(e,t){this.id_edicion=t.id,this.getField("descripcion_new_seccion").setValue(t.descripcion),this.getField("orden").setValue(void 0!==t.orden?t.orden:1),this.getField("editar_seccion").setVisible(!0),this.getField("cancelar_edicion").setVisible(!0),this.getField("addSectionFinal").setVisible(!1)}},{key:"traerRegistrosSecciones",value:function(){this.generalFormat.nombre_accion="variables_titulo_todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.respuestaTraerRegistrosSecciones,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"respuestaTraerRegistrosSecciones",value:function(e){if(console.log("************",e),200===e.estado_p){this.gridBanners.rowData=e.data,this.gridBanners.paginationPageSize=15;var t=new Map;t.set("eliminar",{headerName:"Agregar producto",cellRenderer:"buttonRenderer",cellRendererParams:{text:"Eliminar",className:"buttonStyle",onClick:this.confirmarEliminacion},width:100,field:"eliminar"}),t.set("editar",{headerName:"Editar",cellRenderer:"buttonRenderer",cellRendererParams:{text:"Editar",className:"buttonStyle",onClick:this.startEdicion},width:100,field:"editar"}),t.set("agregar_producto",{headerName:"Agregar producto",cellRenderer:"buttonRenderer",cellRendererParams:{text:"+ producto",className:"buttonStyle",onClick:this.showAddProducto},width:100,field:"agregar_producto"}),this.gridBanners.frameworkComponents={buttonRenderer:g},t.set("mostrar_productos",{headerName:"Mostrar productos",cellRenderer:"buttonRenderer",cellRendererParams:{text:"Mostrar productos",className:"buttonStyle",onClick:this.getDataProductosSeccion},width:100,field:"mostrar_productos"}),this.gridBanners.frameworkComponents={buttonRenderer:g},this.getField("lista_secciones").initData(this.gridBanners,t)}else this.getField("lista_secciones").toggle(!1)}},{key:"getDataProductosSeccion",value:function(e,t){this.current_section_name=t.descripcion,this.current_section_productos_id=t.id;var i={value:t.id};this.generalFormat.nombre_accion="variables_codigo_por_seccion_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.respuestaTraerProductosSeccion,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"respuestaTraerProductosSeccion",value:function(e){200===e.estado_p?this.showProductos(e.data):(this.getField("lista_productos").toggle(!1),this.getField("fieldAlert").toggle(!0,"Esta secci\xf3n no tiene productos agregados","warning"))}},{key:"showProductos",value:function(e){null!==e&&(this.actual_seccion_productos=e);for(var t="",i=0;i<this.actual_seccion_productos.length;i++)t+=this.actual_seccion_productos[i].codigo_articulo+"-";var a={value:t};this.generalFormat.nombre_accion="variables_productos_consultar",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:a,success:this.respuestaTraerProductos,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"respuestaTraerProductos",value:function(e){if(0===this.actual_seccion_productos.length)this.getField("lista_productos").toggle(!1);else{if(200===e.estado_p)for(var t=0;t<this.actual_seccion_productos.length;t++)for(var i=0;i<e.data.productos.length;i++)e.data.productos[i].codigo===this.actual_seccion_productos[t].codigo_articulo&&(this.actual_seccion_productos[t].nombre_producto=e.data.productos[i].nombre);this.gridProductos.rowData=this.actual_seccion_productos,this.gridProductos.paginationPageSize=15,this.getField("lista_productos").label="Productos de la secci\xf3n: "+this.current_section_name;var a=new Map;a.set("eliminar",{headerName:"Eliminar",cellRenderer:"buttonRenderer",cellRendererParams:{text:"Eliminar",className:"buttonStyle",onClick:this.confirmarEliminacionProducto},width:100,field:"eliminar"}),this.gridProductos.frameworkComponents={buttonRenderer:g},this.getField("lista_productos").initData(this.gridProductos,a)}}},{key:"confirmarEliminacionProducto",value:function(e,t){this.id_producto_delete=t.id,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.EliminarProducto),this.getField("confirmModalCustom").toggle(!0)}},{key:"EliminarProducto",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_producto_delete){var e={id:this.id_producto_delete};this.generalFormat.nombre_accion="variables_codigo_eliminar",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.respuestaEliminarProducto,error:this.error_,general:this.generalFormat,showMessage:!0})}}},{key:"respuestaEliminarProducto",value:function(e){this.getDataProductosSeccion(null,{id:this.current_section_productos_id,descripcion:this.current_section_name})}},{key:"confirmarEliminacion",value:function(e,t){this.id_seccion_delete=t.id,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.EliminarSeccion),this.getField("confirmModalCustom").toggle(!0)}},{key:"EliminarSeccion",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_delete){var e={id:this.id_seccion_delete};this.generalFormat.nombre_accion="variables_titulo_eliminar",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.respuestaEliminarSeccion,error:this.error_,general:this.generalFormat,showMessage:!0})}}},{key:"respuestaEliminarSeccion",value:function(e){this.traerRegistrosSecciones()}},{key:"showAddProducto",value:function(e,t){this.id_seccion_add=t.id,this.getField("modal_new_producto").handleClickOpen()}},{key:"showAddSeccion",value:function(){this.getField("modal_new").handleClickOpen()}}]),i}(d.a.form);d.a.addController("adm_secc_prod",u),t.default=u;var g=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(){return Object(a.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){var e=this;return Object(c.jsx)("input",{type:"button",value:this.props.text,className:this.props.className,onClick:function(t){return e.props.onClick(t,e.props.data)}})}}]),i}(l.Component)},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.traerRegistrosUsuariosPermisos=o.traerRegistrosUsuariosPermisos.bind(Object(s.a)(o)),o.respuestaTraerRegistrosUsuariosPermisos=o.respuestaTraerRegistrosUsuariosPermisos.bind(Object(s.a)(o)),o.setButtonEliminar=o.setButtonEliminar.bind(Object(s.a)(o)),o.EliminarUsuarioPermisos=o.EliminarUsuarioPermisos.bind(Object(s.a)(o)),o.respuestaEliminarUsuarioPermisos=o.respuestaEliminarUsuarioPermisos.bind(Object(s.a)(o)),o.confirmarEliminacion=o.confirmarEliminacion.bind(Object(s.a)(o)),o.limpiarErrores=o.limpiarErrores.bind(Object(s.a)(o)),o.id_delete=0,o.sucessGuardar=o.sucessGuardar.bind(Object(s.a)(o)),o.gridUsuarios=Object.assign({},o.gridOptions),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.gridUsuarios.onSelectionChanged=o.onSelectionChanged,o.filaSeleccionada=[],o.id_delete=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("codigo").setOnChange(this.limpiarErrores),this.getField("boton_agregar").setSuccess(this.sucessGuardar),this.traerRegistrosUsuariosPermisos()}},{key:"onSelectionChanged",value:function(){this.filaSeleccionada=this.gridUsuarios.api.getSelectedRows(),this.getField("nombre").setValue(this.filaSeleccionada[0].nombre),this.getField("codigo").setValue(this.filaSeleccionada[0].codigo_usuario),this.getField("value").setValue(this.filaSeleccionada[0].codigo_usuario)}},{key:"sucessGuardar",value:function(e){console.log(e),200===e.estado_p&&(this.traerRegistrosUsuariosPermisos(),this.id_delete=0)}},{key:"limpiarErrores",value:function(){this.getField("codigo").setError(!1,"Limpiar")}},{key:"traerRegistrosUsuariosPermisos",value:function(){this.generalFormat.nombre_accion="usuarios_permisos_descuentos_mostrador_traertodoo",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.respuestaTraerRegistrosUsuariosPermisos,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"respuestaTraerRegistrosUsuariosPermisos",value:function(e){if(200===e.estado_p){this.getField("tabla_usuarios").toggle(!0),this.gridUsuarios.rowData=e.data,this.gridUsuarios.paginationPageSize=15;var t=new Map;t.set(2,{cellRenderer:this.setButtonEliminar,field:"Eliminar",width:150}),this.getField("tabla_usuarios").initData(this.gridUsuarios,t)}else this.getField("tabla_usuarios").toggle(!1)}},{key:"setButtonEliminar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.confirmarEliminacion(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"confirmarEliminacion",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.EliminarUsuarioPermisos),this.getField("confirmModalCustom").toggle(!0)}},{key:"EliminarUsuarioPermisos",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_delete){var e={id:this.id_delete};this.generalFormat.nombre_accion="usuarios_permisos_descuentos_mostrador_eliminarr",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.respuestaEliminarUsuarioPermisos,error:this.error_,general:this.generalFormat})}}},{key:"respuestaEliminarUsuarioPermisos",value:function(e){200===e.estado_p&&(this.traerRegistrosUsuariosPermisos(),this.id_delete=0,this.getField("nombre").setValue(""),this.getField("codigo").setValue(""),this.getField("usuario_id").setValue(""))}}]),i}(d.a.form);d.a.addController("dcto_mostrador",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.initModalUbicaciones=o.initModalUbicaciones.bind(Object(s.a)(o)),o.initElementsModal=o.initElementsModal.bind(Object(s.a)(o)),o.successUbicaciones=o.successUbicaciones.bind(Object(s.a)(o)),o.limpiarTablaUbicaciones=o.limpiarTablaUbicaciones.bind(Object(s.a)(o)),o.guardarDatosUbicacion=o.guardarDatosUbicacion.bind(Object(s.a)(o)),o.valorZona=o.valorZona.bind(Object(s.a)(o)),o.successGuardarUbicacion=o.successGuardarUbicacion.bind(Object(s.a)(o)),o.id_cliente=0,o.dataCliente=[],o.totalCantidadProductos=0,o.gridOptionsProducto=Object.assign({},o.gridOptions),o.gridOptionsProductoBodegas=Object.assign({},o.gridOptions),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Administrar Ubicaciones, @version: 2, @author: Juan David Nieto"),this.getField("btnUbicaciones").setClick(this.initModalUbicaciones),this.getField("codigo_ubicacion").setCustomSuccess&&this.getField("codigo_ubicacion").setCustomSuccess(this.successUbicaciones),this.getField("codigo_ubicacion").setOnChange&&this.getField("codigo_ubicacion").setOnChange(this.limpiarTablaUbicaciones)}},{key:"initModalUbicaciones",value:function(){this.getField("modalUbicaciones").handleClickOpen(this.initElementsModal)}},{key:"initElementsModal",value:function(){this.getField("codigo_ubicacion").setCustomSuccess&&this.getField("codigo_ubicacion").setCustomSuccess(this.successUbicaciones),this.getField("codigo_ubicacion").setOnChange&&this.getField("codigo_ubicacion").setOnChange(this.limpiarTablaUbicaciones)}},{key:"limpiarTablaUbicaciones",value:function(){""!==this.getField("codigo_ubicacion").getValue()?this.getField("codigo_ubicacion").loadData(this.getField("codigo_ubicacion").getValue()):this.getField("tablaUbicaciones").toggle(!1)}},{key:"successUbicaciones",value:function(e){if(e.length>0){this.gridOptions.rowData=[],this.getField("tablaUbicaciones").initData(this.gridOptions);var t=new Map;t.set("zona",{cellRenderer:function(e){return e.data.zona},cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorZona,editable:!0,field:"zona"}),t.set("estante",{cellRenderer:function(e){return e.data.estante},cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorZona,editable:!0,field:"estante"}),t.set("fila",{cellRenderer:function(e){return e.data.fila},cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorZona,editable:!0,field:"fila"}),this.gridOptions.rowData=e,this.getField("tablaUbicaciones").initData(this.gridOptions,t)}}},{key:"valorZona",value:function(e){var t=this.getField("tablaUbicaciones").cellValid(e.oldValue,e.newValue,"^[a-zA-Z0-9\xf1\xd1&\xf1\xd1]+$",4);t?(this.getField("codigo_bodega").setValue(e.data.codigo_bodega),this.getField("zona").setValue(e.data.zona),this.getField("estante").setValue(e.data.estante),this.getField("fila").setValue(e.data.fila),this.guardarDatosUbicacion(e.data)):null!==t&&this.getField("codigo_ubicacion").setValue(this.getField("codigo").getValue())}},{key:"guardarDatosUbicacion",value:function(e){var t={id:this.getField("articulo_id").getValue(),zona:this.getField("zona").getValue().toString(),estante:this.getField("estante").getValue().toString(),fila:this.getField("fila").getValue().toString(),codigo:e.codigo,codigo_bodega:this.getField("codigo_bodega").getValue().toString()};this.generalFormat.nombre_accion="servicio_actualiza_ubicacion_ferricentro_Admin",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successGuardarUbicacion,error:this.error_,general:this.generalFormat})}},{key:"successGuardarUbicacion",value:function(e){200===e.estado_p?this.getField("fieldAlert").toggle(!0,"OK","success"):this.getField("codigo_ubicacion").setValue(this.getField("codigo").getValue())}}]),i}(d.a.form);d.a.addController("AdmFerr",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.retornaDatosFicha=o.retornaDatosFicha.bind(Object(s.a)(o)),o.successRetornaDatosFicha=o.successRetornaDatosFicha.bind(Object(s.a)(o)),o.habilitarBtnAgregar=o.habilitarBtnAgregar.bind(Object(s.a)(o)),o.seguirFichaCalidad=o.seguirFichaCalidad.bind(Object(s.a)(o)),o.closeFormulario=o.closeFormulario.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Agregar Puntos, @Version: 1.01.0012, @Author: Juan David Nieto"),this.retornaDatosFicha(),this.getField("btn_agregar").setClick(this.seguirFichaCalidad),this.getField("btn_cancelar").setClick(this.closeFormulario)}},{key:"closeFormulario",value:function(){var e={estado_p:200};this.successCloseEstage(e)}},{key:"seguirFichaCalidad",value:function(){var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),puntos:this.props.data.puntos};this.generalFormat.nombre_accion="1216-continuar_siguiente_etapa",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}},{key:"retornaDatosFicha",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="1216-datos_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successRetornaDatosFicha,error:this.error_,general:this.generalFormat})}},{key:"successRetornaDatosFicha",value:function(e){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("info_ficha").setVisible(!0),this.getField("info_ficha").setItemsFichas(e.model),this.getField("puntos_agregar").setValue(e.model[0].puntos),this.habilitarBtnAgregar()):this.getField("info_ficha").setVisible(!1)}},{key:"habilitarBtnAgregar",value:function(){""!==this.getField("produccion_fichas_id").getValue()&&""!==this.getField("proceso_id").getValue()&&""!==this.getField("actividad_id").getValue()&&""!==this.getField("actividad_configuracion_id").getValue()&&""!==this.getField("puntos_agregar")?this.getField("btn_agregar").setDisabled(!1):this.getField("btn_agregar").setDisabled(!0)}}]),i}(d.a.form);d.a.addController("agregar_puntos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.successTbAgregacion=o.successTbAgregacion.bind(Object(s.a)(o)),o.gridOptionsTbAgregacion=Object.assign({},o.gridOptions),o.setButtonCantidadAgregada=o.setButtonCantidadAgregada.bind(Object(s.a)(o)),o.cantidadAgregadaChange=o.cantidadAgregadaChange.bind(Object(s.a)(o)),o.successCantidadAgregada=o.successCantidadAgregada.bind(Object(s.a)(o)),o.uploadTbAgregacion=o.uploadTbAgregacion.bind(Object(s.a)(o)),o.grabarTodo=o.grabarTodo.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnTerminarAgregacion").setClick(this.grabarTodo);var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="271-Retorna_datos_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="271-Retorna_los_items_ajustes_leidos_por_produccion_fichas_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTbAgregacion,error:this.error_,general:this.generalFormat})}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaAgregacion").setVisible(!0),this.getField("listaAgregacion").setItemsFichas(e.model)):this.getField("listaAgregacion").setVisible(!1)}},{key:"successTbAgregacion",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsTbAgregacion.rowData=[],this.getField("tablaAgregacion").initData(this.gridOptionsTbAgregacion);var t=new Map;t.set("cantidad_agregada",{cellRenderer:this.setButtonCantidadAgregada,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.cantidadAgregadaChange,width:100,editable:!0,field:"cantidad_agregada"}),this.getField("tablaAgregacion").toggle(!0),this.gridOptionsTbAgregacion.rowData=e.model,this.gridOptionsTbAgregacion.paginationPageSize=100,this.getField("tablaAgregacion").initData(this.gridOptionsTbAgregacion,t)}else this.getField("tablaAgregacion").toggle(!1);this.getField("cantidad_agregada").setValue(" ")}},{key:"setButtonCantidadAgregada",value:function(e){var t=e.data.cantidad_agregada,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t>0?(a.textContent=t,"".formatoPrecio(e.data.cantidad_agregada)):(a.textContent=0,i.appendChild(a),i)}},{key:"cantidadAgregadaChange",value:function(e){var t=this.getField("tablaAgregacion").cellValid(e.oldValue,e.newValue,"^[0-9]");if(e.newValue<0&&(e.data.cantidad_agregada=0),t){this.getField("cantidad_agregada").setValue(e.data.cantidad_agregada);var i={id:e.data.id,cantidad_agregada:this.getField("cantidad_agregada").getValue()};this.generalFormat.nombre_accion="271-Permite_cambiar_agregado=1_del_registro",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successCantidadAgregada,error:this.error_,general:this.generalFormat})}}},{key:"successCantidadAgregada",value:function(e){200===e.estado_p&&(this.getField("cantidad_agregada").setValue(" "),this.uploadTbAgregacion())}},{key:"uploadTbAgregacion",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="271-Retorna_los_items_ajustes_leidos_por_produccion_fichas_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTbAgregacion,error:this.error_,general:this.generalFormat})}},{key:"grabarTodo",value:function(){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id);var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue()};this.generalFormat.nombre_accion="271-Permite_terminar_la_actividad_de_agregacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);d.a.addController("AgreProd",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.succesTbItemsPorAbastecer=o.succesTbItemsPorAbastecer.bind(Object(s.a)(o)),o.gridOptionsTbItemsPorAbastecer=Object.assign({},o.gridOptions),o.tamanoDatos=0,o.setLote=o.setLote.bind(Object(s.a)(o)),o.loteChange=o.loteChange.bind(Object(s.a)(o)),o.successGrabarItem=o.successGrabarItem.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.finAlistamientoAjuste=o.finAlistamientoAjuste.bind(Object(s.a)(o)),o.archivoPDF=o.archivoPDF.bind(Object(s.a)(o)),o.successArchivoPDF=o.successArchivoPDF.bind(Object(s.a)(o)),o.detalleMateriaPrima="Ajustes",o}return Object(o.a)(i,[{key:"initForm",value:function(){this.archivoPDF(),this.getField("btnGrabarAlisAjuste").setClick(this.finAlistamientoAjuste);var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="267-Servicio_traer_datos_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat,showMessage:!1}),this.generalFormat.nombre_accion="267-Produccion_items_ajustes_por_abastecer",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesTbItemsPorAbastecer,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"archivoPDF",value:function(){var e={value:this.props.data.actividad_id,detalle:this.detalleMateriaPrima};this.generalFormat.nombre_accion="267-produccion_fichas-urlalistamiento",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successArchivoPDF,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successArchivoPDF",value:function(e){if(200===e.estado_p){for(var t=e.data.length,i=[],a=[],o=0;o<t;o++){var s=e.data[o].codigo_bodega;a.push(e.data[o].url_alistamiento);i.push("<li><a href='"+a[o]+"' target='_blank'>PDF Materia prima, bodega "+s+"</a></li>")}var r="<ul>"+i+"</ul>";this.getField("archivo").setValue(r)}}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaAlistamientoAjuste").setVisible(!0),this.getField("listaAlistamientoAjuste").setItemsFichas(e.model)):this.getField("listaAlistamientoAjuste").setVisible(!1)}},{key:"succesTbItemsPorAbastecer",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsTbItemsPorAbastecer.rowData=[],this.getField("tablaAlisAjuste").initData(this.gridOptionsTbItemsPorAbastecer),this.getField("tablaAlisAjuste").toggle(!0),this.gridOptionsTbItemsPorAbastecer.rowData=e.model,this.gridOptionsTbItemsPorAbastecer.paginationPageSize=100;var t=new Map;this.tamanoDatos=e.model.length,t.set("lote",{cellRenderer:this.setLote,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px"},onCellValueChanged:this.loteChange,width:150,editable:!0,field:"lote"}),this.getField("tablaAlisAjuste").initData(this.gridOptionsTbItemsPorAbastecer,t),this.gridOptionsTbItemsPorAbastecer.api.selectIndex(0,!0,!0)}else this.getField("tablaAlisAjuste").toggle(!1),this.tamanoDatos=0,this.getField("fieldAlert").toggle(!0,"No hay items por abastecer","warning")}},{key:"setLote",value:function(){var e=document.createElement("div"),t=document.createElement("label");return t.textContent="".formatoPrecio("ABASTECER"),t.setAttribute("style",'color:rgb(0, 86, 201);font-family:"Times New Roman"; font-style:italic'),e.appendChild(t),e}},{key:"loteChange",value:function(e){if(""!==e.newValue){var t={produccion_fichas_id:this.props.data.id_ficha,id:e.data.id,articulo_id:e.data.articulo_id,cantidad:e.data.cantidad_galones,lote:e.newValue};this.generalFormat.nombre_accion="267-Permite_crear_un_ajuste_leido",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.successGrabarItem,error:this.error_,general:this.generalFormat})}}},{key:"successGrabarItem",value:function(e){200===e.estado_p&&(this.tamanoDatos>1?this.uploadTable():(this.uploadTable(),this.getField("tablaAlisAjuste").toggle(!1)))}},{key:"uploadTable",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="267-Produccion_items_ajustes_por_abastecer",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesTbItemsPorAbastecer,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"finAlistamientoAjuste",value:function(){if(0===this.tamanoDatos){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id);var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue()};this.generalFormat.nombre_accion="267-Permite_pasar_a_la_actividad_Pesaje",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}else this.getField("fieldAlert").toggle(!0,"A\xfan tiene items por configurar el lote","error")}}]),i}(d.a.form);t.default=l,d.a.addController("AlisAjusProd",l)},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.deleteEspecification=o.deleteEspecification.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.idficha=0,o.valido=!0,o.successAgregarItem=o.successAgregarItem.bind(Object(s.a)(o)),o.openModalGrabar=o.openModalGrabar.bind(Object(s.a)(o)),o.grabarTodo=o.grabarTodo.bind(Object(s.a)(o)),o.terminarProceso=o.terminarProceso.bind(Object(s.a)(o)),o.formato=o.formato.bind(Object(s.a)(o)),o.confirmFinish=o.confirmFinish.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.service.send(this.getConstant().searchFormat().format(this.props.data.id_ficha,"tablaAjustesID","servicio",this.formId),"GET",void 0,this.successTablaItemFichas,this.error_),this.getField("btnAgregarAID").setClick(this.openModalGrabar),this.getField("btnTerminarProceso").setClick(this.confirmFinish),this.getField("btnGrabarAjusteID").setClick(this.grabarTodo)}},{key:"openModalGrabar",value:function(){if(this.getField("codigo").valid()&this.getField("nombre").valid()&this.getField("articulo_id").valid()&this.getField("cantidad").valid()&this.getField("unidad_id").valid()&this.getField("lote").valid()){var e={accion:"servicio",campo:"btnAgregarAID",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,articulo_id:this.getField("articulo_id").getValue(),cantidad:this.getField("cantidad").getValue(),unidad_id:this.getField("unidad_id").getValue()};this.service.send(this.getConstant().formSave(),"POST",e,this.successAgregarItem,this.error_)}}},{key:"successAgregarItem",value:function(e){200===e.estado_p&&(this.uploadTable(),this.getField("codigo").setValue(""),this.getField("nombre").setValue(""),this.getField("articulo_id").setValue(""),this.getField("cantidad").setValue(""),this.getField("unidad_id").setValue(" "),this.getField("lote").setValue(""))}},{key:"uploadTable",value:function(){this.valido=!0,this.service.send(this.getConstant().searchFormat().format(this.props.data.id_ficha,"tablaAjustesID","servicio",this.formId),"GET",void 0,this.successTablaItemFichas,this.error_)}},{key:"formato",value:function(e){return"".formatoPrecio(e.data.cantidad)}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p){var t=new Map;t.set(0,{cellRenderer:this.setButtonDelete,field:"Operaci\xf3n 1"}),t.set("cantidad",{cellRenderer:this.formato,cellStyle:{textAlign:"right"},field:"cantidad"}),this.gridOptions.rowData=e.model,e.model.lenght>0&&(this.valido=!0),this.getField("tablaAjustesID").initData(this.gridOptions,t)}else this.valido=!1,this.getField("tablaAjustesID").toggle(!1)}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteEspecification(i)},a.setAttribute("id","button_delete_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Eliminar"),a}},{key:"deleteEspecification",value:function(e){this.successDeleteCustom=this.successDelete;var t={accion:"f9_servicio",campo:"tablaAjustesID",id_formulario:this.formId,id:e};this.data=t,this.getField("modalDelete").toggle(!0)}},{key:"successDelete",value:function(e){void 0!==e.estado_p&&200!==e.estado_p||(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.uploadTable())}},{key:"grabarTodo",value:function(){if(this.valido){var e={accion:"servicio",campo:"btnGrabarAjusteID",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"POST",e,this.successCloseEstage,this.error_)}else this.alertGeneral.toggle(!0,"Debe agregar m\xednimo un producto","error")}},{key:"confirmFinish",value:function(){this.getField("confirmModalCustom").setTitleAndContent("Cancelar Ficha","La materia prima ya ha sido consumida. Esta seguro de cancelar la ficha?"),this.getField("confirmModalCustom").setClickDialog(this.terminarProceso),this.getField("confirmModalCustom").toggle(!0)}},{key:"terminarProceso",value:function(){var e={accion:"servicio",campo:"btnTerminarProceso",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"PUT",e,this.successCloseEstage,this.error_)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.deleteEspecification=o.deleteEspecification.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.confirmDeleteCustom=o.confirmDeleteCustom.bind(Object(s.a)(o)),o.gridOptionsTB=Object.assign({},o.gridOptions),o.tamanoDatos=0,o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.grabarItem=o.grabarItem.bind(Object(s.a)(o)),o.grabarTodo=o.grabarTodo.bind(Object(s.a)(o)),o.successGrabarItem=o.successGrabarItem.bind(Object(s.a)(o)),o.formato=o.formato.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.observacion="",o.etapa_id=0,o.abastecimiento="",o.id_delete=0,o.traerBodegas=o.traerBodegas.bind(Object(s.a)(o)),o.successTraerBodega=o.successTraerBodega.bind(Object(s.a)(o)),o.valueChangeOperario=o.valueChangeOperario.bind(Object(s.a)(o)),o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_traer_datos_de_ficha_ajustes",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat});var t={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_traer_por_iproduccion_id_fichas_ajustes",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat,showMessage:!1}),this.getField("btnAgragarAjuste").setClick(this.grabarItem),this.getField("btnGrabarAjuste").setClick(this.grabarTodo),this.getField("nombre").setOnChange(this.traerBodegas)}},{key:"successDatosFicha",value:function(e){var t=[];200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaAjustes").setVisible(!0),t.push(e.data[0]),this.getField("listaAjustes").setItemsFichas(t)):this.getField("listaAjustes").setVisible(!1)}},{key:"formato",value:function(e){return"".formatoPrecio(e.data.cantidad)}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p){this.tamanoDatos=e.model.length,this.gridOptionsTB.rowData=[],this.getField("tablaAjustes").initData(this.gridOptionsTB);var t=new Map;t.set(0,{cellRenderer:this.setButtonDelete,field:"accion"}),t.set("cantidad",{cellRenderer:this.formato,cellStyle:{textAlign:"right"},field:"cantidad"}),this.gridOptionsTB.rowData=e.model,this.gridOptionsTB.paginationPageSize=100,this.getField("tablaAjustes").initData(this.gridOptionsTB,t),this.limpiarCampos()}else this.getField("tablaAjustes").toggle(!1),this.limpiarCampos(),this.tamanoDatos=0}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteEspecification(i)},a.setAttribute("id","button_delete_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Eliminar"),a}},{key:"deleteEspecification",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustom),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustom",value:function(){this.getField("confirmModalCustom").toggle(!1);var e={id:this.id_delete};this.generalFormat.nombre_accion="servicio_eliminar_fichas_ajustes",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successDelete,error:this.error_,general:this.generalFormat})}},{key:"successDelete",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.uploadTable())}},{key:"uploadTable",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_traer_por_iproduccion_id_fichas_ajustes",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"grabarTodo",value:function(){if(this.tamanoDatos>0){var e={produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.generalFormat.nombre_accion="servicio_grabar_fichas_ajustes",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}else this.alertGeneral.toggle(!0,"Debe agregar m\xednimo un producto","error")}},{key:"grabarItem",value:function(){if(this.getField("articulo_id").valid()&this.getField("nombre").valid()&this.getField("cantidad").valid()&this.getField("codigo").valid()&this.getField("unidad_id").valid()){var e={produccion_fichas_id:this.props.data.id_ficha,articulo_id:this.getField("articulo_id").getValue(),cantidad:this.getField("cantidad").getValue(),codigo_bodega:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="servidio_produccion_fichas_items_ajustes_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successGrabarItem,error:this.error_,general:this.generalFormat})}}},{key:"successGrabarItem",value:function(e){200===e.estado_p&&this.uploadTable()}},{key:"limpiarCampos",value:function(){this.getField("articulo_id").setValue(""),this.getField("nombre").setValue(""),this.getField("cantidad").setValue(""),this.getField("codigo").setValue(""),this.getField("unidad_id").setValue(""),this.getField("nombre_unidad").setValue(""),this.getField("bodega").setValue("")}},{key:"traerBodegas",value:function(){if(void 0!==this.getField("articulo_id").getValue()&&""!==this.getField("articulo_id").getValue()){var e={value:this.getField("articulo_id").getValue()};this.generalFormat.nombre_accion="266-servicio_produccion_ajustes_fichas_select_bodegas_articulo",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerBodega,error:this.error_,general:this.generalFormat})}else this.getField("articulo_id").setOnChange(this.traerBodegas)}},{key:"successTraerBodega",value:function(e){var t=[{text:"Ninguno",value:"",campos_cambian:{}}];200===e.estado_p?(e.data.forEach((function(e){var i={};i.value=e.codigo_bodega,i.text="".concat(e.nombre_bodega," , saldo = ").concat(e.saldo),i.campos_cambian={codigo_bodegaCodME:e.codigo_bodega},t.push(i)})),this.getField("bodega").setOptions(t)):this.getField("bodega").setOptions(t),this.getField("bodega").setOnChange(this.valueChangeOperario)}},{key:"valueChangeOperario",value:function(){var e=this.getField("bodega").getValue();this.getField("codigo_bodega").setValue(e)}}]),i}(d.a.form);d.a.addController("ProdAjus",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsAjustes=Object.assign({},o.gridOptions),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.successUploadTable=o.successUploadTable.bind(Object(s.a)(o)),o.tamanoDatos=0,o.initModaloperario=o.initModaloperario.bind(Object(s.a)(o)),o.setOperario=o.setOperario.bind(Object(s.a)(o)),o.setButtonOperario=o.setButtonOperario.bind(Object(s.a)(o)),o.successSelect=o.successSelect.bind(Object(s.a)(o)),o.grabarItem=o.grabarItem.bind(Object(s.a)(o)),o.grabarTodo=o.grabarTodo.bind(Object(s.a)(o)),o.successGrabarItem=o.successGrabarItem.bind(Object(s.a)(o)),o.formato=o.formato.bind(Object(s.a)(o)),o.formato2=o.formato2.bind(Object(s.a)(o)),o.grabarOperario=o.grabarOperario.bind(Object(s.a)(o)),o.successGrabarOperario=o.successGrabarOperario.bind(Object(s.a)(o)),o.setSelectRec=o.setSelectRec.bind(Object(s.a)(o)),o.devolverRecepcion=o.devolverRecepcion.bind(Object(s.a)(o)),o.selectOperario=[],o.successSelectOperario=o.successSelectOperario.bind(Object(s.a)(o)),o.recuperarItemsFichas=o.recuperarItemsFichas.bind(Object(s.a)(o)),o.recuperarOperarios=o.recuperarOperarios.bind(Object(s.a)(o)),o.datosFicha=o.datosFicha.bind(Object(s.a)(o)),o.successDatosFichas=o.successDatosFichas.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.datosFicha(),this.recuperarOperarios(),this.getField("btnTerminarAjusteRec").setClick(this.grabarTodo),this.getField("btnDevolver").setClick(this.devolverRecepcion)}},{key:"datosFicha",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_traer_datos_de_ficha_ajustes_recepcion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFichas,error:this.error_,general:this.generalFormat})}},{key:"successDatosFichas",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaAjesteRecepcion").setVisible(!0),this.getField("listaAjesteRecepcion").setItemsFichas(e.model)):this.getField("listaAjesteRecepcion").setVisible(!1)}},{key:"recuperarItemsFichas",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_traer_items_ajustes_recepcion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat})}},{key:"recuperarOperarios",value:function(){this.generalFormat.nombre_accion="268_Retorna_todos_los_produccion_operarios",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successSelectOperario,error:this.error_,general:this.generalFormat})}},{key:"devolverRecepcion",value:function(){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),this.getField("actividad_id").setValue(this.props.data.actividad_id);var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),actividad_id:this.getField("actividad_id").getValue()};this.generalFormat.nombre_accion="produccion_ajuste_recepcion-devolver",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}},{key:"successSelectOperario",value:function(e){this.recuperarItemsFichas(),200===e.estado_p&&(this.selectOperario=e.model)}},{key:"successSelect",value:function(){var e=document.createElement("option");e.setAttribute("value"," "),e.textContent="Ninguno";var t=[e];return this.selectOperario.map((function(e){var i=document.createElement("option");return i.setAttribute("value",parseInt(e.id)),i.textContent=e.nombre,t.push(i),null})),t}},{key:"formato",value:function(e){return"".formatoPrecio(e.data.cantidad_galones)}},{key:"formato2",value:function(e){return"".formatoPrecio(e.data.cantidad_kilos)}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p){this.tamanoDatos=e.model.length;var t=new Map;t.set(0,{cellRenderer:this.setButtonDelete,field:"accion",width:150}),t.set(1,{cellRenderer:this.setButtonOperario,field:"operario",width:280}),t.set(3,{field:"lote",width:100}),t.set("nombre_unidad",{field:"nombre_unidad",width:130}),t.set("cantidad_galones",{cellRenderer:this.formato,cellStyle:{textAlign:"right"},field:"cantidad_galones",width:170}),t.set("cantidad_kilos",{cellRenderer:this.formato2,cellStyle:{textAlign:"right"},field:"cantidad_kilos",width:150}),this.gridOptionsAjustes.rowData=e.model,this.getField("tablaAjusteRecepcion").initData(this.gridOptionsAjustes,t)}else this.tamanoDatos=0,this.getField("tablaAjusteRecepcion").toggle(!1)}},{key:"setSelectRec",value:function(){var e={values:[]};return this.selectOperario.map((function(t){return e.values.push(t.nombre+"-"+t.id),null})),e}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=e.data.nombre_operario,o=document.createElement("input");return o.onclick=function(){return t.grabarItem(i,a)},o.setAttribute("id","button_delete_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Recibir"),o}},{key:"setButtonOperario",value:function(e){var t=this,i=e.data.nombre_operario,a=document.createElement("div"),o=document.createElement("select");a.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),o.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),o.onchange=function(i){return t.grabarOperario(e.data.id,i.target.value)},o.setAttribute("id","mySelectOperario_");var s=this.successSelect();return this.valor_idOpe=0,s.map((function(e){return o.appendChild(e),e.textContent===i&&(t.valor_idOpe=parseInt(e.value)),null})),this.valor_idOpe>0&&(o.value=this.valor_idOpe),a.appendChild(o),a}},{key:"setOperario",value:function(e){this.operario_id=e,this.getField("modalOperarioRecepcion").handleClickOpen(this.initModaloperario.bind(this))}},{key:"initModaloperario",value:function(){this.getField("btnGuardarOperarioRecepccion").setClick(this.grabarOperario)}},{key:"grabarOperario",value:function(e,t){var i={id_formulario:this.formId,id:parseInt(e),produccion_operario_id:parseInt(t)};this.generalFormat.nombre_accion="servicio_asignar_operario_ajustes_recepcion",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successGrabarOperario,error:this.error_,general:this.generalFormat})}},{key:"successGrabarOperario",value:function(e){200===e.estado_p&&(this.getField("modalOperarioRecepcion").handleClose(),this.recuperarOperarios())}},{key:"uploadTable",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_traer_items_ajustes_recepcion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successUploadTable,error:this.error_,general:this.generalFormat})}},{key:"successUploadTable",value:function(e){200===e.estado_p&&(this.gridOptionsAjustes.rowData=[],this.getField("tabla_promociones").initData(this.gridOptionsAjustes),this.successTablaItemFichas())}},{key:"grabarTodo",value:function(){if(0===this.tamanoDatos){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),this.getField("actividad_id").setValue(this.props.data.actividad_id);var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),actividad_id:this.getField("actividad_id").getValue()};this.generalFormat.nombre_accion="servicio_terminar_etapa_ajustes_recepcion",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}else this.alertGeneral.toggle(!0,"Faltan items por recibir","error")}},{key:"grabarItem",value:function(e,t){if(null!==t&&""!==t){var i={id_formulario:this.formId,id:e};this.generalFormat.nombre_accion="servicio_marcar_agregado_ajustes_recepcion",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successGrabarItem,error:this.error_,general:this.generalFormat})}else this.alertGeneral.toggle(!0,"Este item no tiene operario asignado","error")}},{key:"successGrabarItem",value:function(e){200===e.estado_p&&(this.tamanoDatos>1?this.recuperarOperarios():(this.getField("tablaAjusteRecepcion").toggle(!1),this.tamanoDatos=0))}}]),i}(d.a.form);d.a.addController("AjustRec",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.tamanoDatos=0,o.grabarTodo=o.grabarTodo.bind(Object(s.a)(o)),o.successGrabarItem=o.successGrabarItem.bind(Object(s.a)(o)),o.loteChange=o.loteChange.bind(Object(s.a)(o)),o.formato=o.formato.bind(Object(s.a)(o)),o.formato2=o.formato2.bind(Object(s.a)(o)),o.successSearch=o.successSearch.bind(Object(s.a)(o)),o.aprobacionCancelacion=o.aprobacionCancelacion.bind(Object(s.a)(o)),o.observacion="",o.etapa_id=0,o.lote="",o.abastecimiento="",o.successTraerDatosFicha=o.successTraerDatosFicha.bind(Object(s.a)(o)),o.archivoPDF=o.archivoPDF.bind(Object(s.a)(o)),o.successArchivoPDF=o.successArchivoPDF.bind(Object(s.a)(o)),o.archivoPDFEmpaque=o.archivoPDFEmpaque.bind(Object(s.a)(o)),o.successArchivoPDFEmpaque=o.successArchivoPDFEmpaque.bind(Object(s.a)(o)),o.successTablaMaterialEmp=o.successTablaMaterialEmp.bind(Object(s.a)(o)),o.gridOptionsMatEmp=Object.assign({},o.gridOptions),o.retornarDatosFicha=o.retornarDatosFicha.bind(Object(s.a)(o)),o.retornarAlistamientoId=o.retornarAlistamientoId.bind(Object(s.a)(o)),o.retornarMaterialEmpaque=o.retornarMaterialEmpaque.bind(Object(s.a)(o)),o.detalleMateriaPrima="Materia prima",o.detalleMaterialEmpaque="Material empaque",o.tamMateriaPrima=0,o.tamMaterialEmpaque=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.retornarDatosFicha(),this.retornarAlistamientoId(),this.retornarMaterialEmpaque(),this.getField("btnAgregar").setClick(this.grabarItem),this.getField("btnGrabar").setClick(this.grabarTodo),this.getField("btnCancelacion").setClick(this.aprobacionCancelacion),this.getField("es_envasado").setOnChange(this.successSearch)}},{key:"retornarDatosFicha",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_produccion_alistamiento_buscar_datos_fichas_por_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerDatosFicha,error:this.error_,general:this.generalFormat})}},{key:"retornarAlistamientoId",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_produccion_alistamiento_fichas_leid_abastecer_por_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"retornarMaterialEmpaque",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="2-Servicio_produccion_alistamiento_envasado_inicial_traer_tabla_materi",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaMaterialEmp,error:this.error_,general:this.generalFormat})}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p){this.gridOptions.rowData=[],this.getField("tablaAlistamiento").initData(this.gridOptions);var t=new Map;this.tamMateriaPrima=e.model.length,this.tamanoDatos=e.model.length,t.set("lote",{cellRenderer:this.setLote,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px"},onCellValueChanged:this.loteChange,width:150,editable:!0,field:"lote"}),t.set("cantidad_galones",{cellRenderer:this.formato2,cellStyle:{textAlign:"right"},field:"cantidad_galones"}),t.set("nombre_unidad",{cellStyle:{textAlign:"right"},field:"nombre_unidad"}),t.set("cantidad_kilos",{cellRenderer:this.formato,cellStyle:{textAlign:"right"},field:"cantidad_kilos"}),this.gridOptions.rowData=e.model,this.getField("tablaAlistamiento").initData(this.gridOptions,t),this.archivoPDF()}else this.getField("tablaAlistamiento").toggle(!1),this.tamanoDatos=0}},{key:"successTablaMaterialEmp",value:function(e){if(200===e.estado_p){this.tamMaterialEmpaque=e.model.length,this.getField("tablaMaterialEmpaque").toggle(!0);var t=new Map;this.gridOptionsMatEmp.rowData=e.model,this.getField("tablaMaterialEmpaque").initData(this.gridOptionsMatEmp,t),this.archivoPDFEmpaque()}else this.getField("tablaMaterialEmpaque").toggle(!1)}},{key:"archivoPDF",value:function(){var e={value:this.props.data.actividad_id,detalle:this.detalleMateriaPrima};this.generalFormat.nombre_accion="2-produccion_fichas-urlalistamiento",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successArchivoPDF,error:this.error_,general:this.generalFormat})}},{key:"successArchivoPDF",value:function(e){if(200===e.estado_p){var t=e.data.length;this.getField("detalle_empaque").setValue("Material empaque");for(var i=[],a=[],o=0;o<t;o++){var s=e.data[o].codigo_bodega;a.push(e.data[o].url_alistamiento);i.push("<li><a href='"+a[o]+"' target='_blank'>PDF Materia prima, bodega "+s+"</a></li>")}var r="<ul>"+i+"</ul>";this.getField("archivo").setValue(r)}}},{key:"archivoPDFEmpaque",value:function(){var e={value:this.props.data.actividad_id,detalle:this.detalleMaterialEmpaque};this.generalFormat.nombre_accion="2-produccion_fichas-urlalistamiento",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successArchivoPDFEmpaque,error:this.error_,general:this.generalFormat})}},{key:"successArchivoPDFEmpaque",value:function(e){if(200===e.estado_p){for(var t=e.data.length,i=[],a=[],o=0;o<t;o++){var s=e.data[o].codigo_bodega;a.push(e.data[o].url_alistamiento);i.push("<li><a href='"+a[o]+"' target='_blank'>PDF Material empaque, bodega "+s+"</a></li>")}var r="<ul>"+i+"</ul>";this.getField("archivo_empaque").setValue(r)}}},{key:"successTraerDatosFicha",value:function(e){var t=[];200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("lista_items_leidos").setVisible(!0),t.push(e.data[0]),this.getField("lista_items_leidos").setItemsFichas(t)):this.getField("lista_items_leidos").setVisible(!1)}},{key:"aprobacionCancelacion",value:function(e){var t={produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.generalFormat.nombre_accion="servicio_produccion_alistamiento_cancelar_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}},{key:"successSearch",value:function(){"SI"===this.getField("es_envasado").getValue()?this.getField("lote").setValue(999999):this.getField("lote").setValue("")}},{key:"formato",value:function(e){return"".formatoPrecio(e.data.cantidad_kilos)}},{key:"formato2",value:function(e){return"".formatoPrecio(e.data.cantidad_galones)}},{key:"setLote",value:function(){var e=document.createElement("div"),t=document.createElement("label");return t.textContent="".formatoPrecio("ABASTECER"),t.setAttribute("style",'color:rgb(0, 86, 201);font-family:"Times New Roman"; font-style:italic'),e.appendChild(t),e}},{key:"loteChange",value:function(e){if(""!==e.newValue){var t={produccion_fichas_id:this.props.data.id_ficha,articulo_id:e.data.articulo_id,cantidad:e.data.cantidad_galones,unidad_id:e.data.unidad_id,produccion_fichas_items_id:e.data.id,lote:e.newValue};this.generalFormat.nombre_accion="servicio_produccion_alistamiento_crear_ficha_item_leido",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.successGrabarItem,error:this.error_,general:this.generalFormat})}}},{key:"uploadTable",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_produccion_alistamiento_fichas_leid_abastecer_por_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"grabarTodo",value:function(e){var t={produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.generalFormat.nombre_accion="servicio_guardar_alistamiento",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}},{key:"successGrabarItem",value:function(e){200===e.estado_p&&(this.tamanoDatos>1?this.uploadTable():this.getField("tablaAlistamiento").toggle(!1))}}]),i}(d.a.form);d.a.addController("AliProd",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.succesDatosTablaAlistaEnv=o.succesDatosTablaAlistaEnv.bind(Object(s.a)(o)),o.grabarAlistaEnv=o.grabarAlistaEnv.bind(Object(s.a)(o)),o.setButtonAbastecer=o.setButtonAbastecer.bind(Object(s.a)(o)),o.setChangeButtonAbastecer=o.setChangeButtonAbastecer.bind(Object(s.a)(o)),o.succesButtonAbastecer=o.succesButtonAbastecer.bind(Object(s.a)(o)),o.uploadTableAlistaEnv=o.uploadTableAlistaEnv.bind(Object(s.a)(o)),o.archivoPDF=o.archivoPDF.bind(Object(s.a)(o)),o.successArchivoPDF=o.successArchivoPDF.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.archivoPDF();var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="445-Servicio_traer_datos_fichas_items_ali_env",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat});var t={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="445-Servicio_traer_items_tabla_alistamiento_envasado_porleer",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.succesDatosTablaAlistaEnv,error:this.error_,general:this.generalFormat,showMessage:!1}),this.getField("btnGrabarAlistaEnv").setClick(this.grabarAlistaEnv)}},{key:"archivoPDF",value:function(){var e={value:this.props.data.actividad_id,detalle:"Material empaque envasado"};this.generalFormat.nombre_accion="445-produccion_fichas-urlalistamiento",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successArchivoPDF,error:this.error_,general:this.generalFormat}),console.log("datos enviados al servicio",e)}},{key:"successArchivoPDF",value:function(e){if(console.log("url alistamiento ==>",e.data),200===e.estado_p){for(var t=e.data[0].codigo_bodega,i=e.data.length,a=[],o=[],s=0;s<i;s++){o.push(e.data[s].url_alistamiento);a.push("<li><a href= '"+o[s]+"' target='_blank'>PDF material empaque, bodega "+t+"</a></li>")}var r="<ul>"+a+"</ul>";this.getField("archivo").setValue(r)}}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaAlistaEnv").setVisible(!0),this.getField("listaAlistaEnv").setItemsFichas(e.model)):this.getField("listaAlistaEnv").setVisible(!1)}},{key:"succesDatosTablaAlistaEnv",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptions.rowData=[],this.getField("tablaAlistaEnv").initData(this.gridOptions),this.getField("tablaAlistaEnv").toggle(!0);var t=new Map;t.set("accion",{cellRenderer:this.setButtonAbastecer,field:"Acci\xf3n"}),this.gridOptions.rowData=e.model,this.getField("tablaAlistaEnv").initData(this.gridOptions,t)}else this.getField("tablaAlistaEnv").toggle(!1)}},{key:"setButtonAbastecer",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.setChangeButtonAbastecer(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Abastecer"),i}},{key:"setChangeButtonAbastecer",value:function(e){var t={id:e.id};this.generalFormat.nombre_accion="445-servicio_boton_abastecer_alistamiento_envasado_final",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.succesButtonAbastecer,error:this.error_,general:this.generalFormat})}},{key:"succesButtonAbastecer",value:function(e){200===e.estado_p&&this.uploadTableAlistaEnv()}},{key:"uploadTableAlistaEnv",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="445-Servicio_traer_items_tabla_alistamiento_envasado_porleer",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesDatosTablaAlistaEnv,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"grabarAlistaEnv",value:function(){var e={proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id,produccion_fichas_id:this.props.data.id_ficha};this.generalFormat.nombre_accion="445-Servicio_alistamiento_envasado_final_boton_grabar",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);t.default=l,d.a.addController("alistaEnvasado",l)},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.succesTbMaterialEmpaque=o.succesTbMaterialEmpaque.bind(Object(s.a)(o)),o.gridOptionsTbMaterialEmpaque=Object.assign({},o.gridOptions),o.setButtonAlistar=o.setButtonAlistar.bind(Object(s.a)(o)),o.setChangeButtonAlistarclick=o.setChangeButtonAlistarclick.bind(Object(s.a)(o)),o.succesButtonAlistar=o.succesButtonAlistar.bind(Object(s.a)(o)),o.recargarTbMaterialEmpaque=o.recargarTbMaterialEmpaque.bind(Object(s.a)(o)),o.terminarMaterialEmpaque=o.terminarMaterialEmpaque.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnTerminar").setClick(this.terminarMaterialEmpaque);var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="395-servicio_traer_datos_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat,showMessage:!1}),this.generalFormat.nombre_accion="395-Fichas_envasado_mat_Empq_x_leer",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesTbMaterialEmpaque,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("lista_items_produccion").setVisible(!0),this.getField("lista_items_produccion").setItemsFichas(e.model)):this.getField("lista_items_produccion").setVisible(!1)}},{key:"succesTbMaterialEmpaque",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsTbMaterialEmpaque.rowData=[],this.getField("TbMaterialEmpaque").initData(this.gridOptionsTbMaterialEmpaque),this.getField("TbMaterialEmpaque").toggle(!0),this.gridOptionsTbMaterialEmpaque.rowData=e.model,this.gridOptionsTbMaterialEmpaque.paginationPageSize=100;var t=new Map;t.set("accion",{cellRenderer:this.setButtonAlistar,field:"Acci\xf3n"}),this.getField("TbMaterialEmpaque").initData(this.gridOptionsTbMaterialEmpaque,t),this.gridOptionsTbMaterialEmpaque.api.selectIndex(0,!0,!0)}else this.getField("TbMaterialEmpaque").toggle(!1),this.getField("fieldAlert").toggle(!0,"No hay material de empaque","warning")}},{key:"setButtonAlistar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.setChangeButtonAlistarclick(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Abastecer"),i}},{key:"setChangeButtonAlistarclick",value:function(e){var t={id:e.id};this.generalFormat.nombre_accion="395-Permite_modificar_el_parametro_leido=1_del_registro",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.succesButtonAlistar,error:this.error_,general:this.generalFormat})}},{key:"succesButtonAlistar",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Se actualizo de forma correcta","success"),this.recargarTbMaterialEmpaque())}},{key:"recargarTbMaterialEmpaque",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="395-Fichas_envasado_mat_Empq_x_leer",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesTbMaterialEmpaque,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"terminarMaterialEmpaque",value:function(){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id);var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue()};this.generalFormat.nombre_accion="395-Permite_terminar_y_pasar_etapa_aislamiento",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);t.default=l,d.a.addController("AliMatEmpq",l)},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.setButtonVer=o.setButtonVer.bind(Object(s.a)(o)),o.verEspecification=o.verEspecification.bind(Object(s.a)(o)),o.successTablaEtapas=o.successTablaEtapas.bind(Object(s.a)(o)),o.gridOptionsTbEtapas=Object.assign({},o.gridOptions),o.id_ficha=0,o.setCantidadAgregada=o.setCantidadAgregada.bind(Object(s.a)(o)),o.cantidadAgregadaChange=o.cantidadAgregadaChange.bind(Object(s.a)(o)),o.guardarValor=o.guardarValor.bind(Object(s.a)(o)),o.succesGuardarValor=o.succesGuardarValor.bind(Object(s.a)(o)),o.uploadTableEtapas=o.uploadTableEtapas.bind(Object(s.a)(o)),o.uploadTableKg=o.uploadTableKg.bind(Object(s.a)(o)),o.id_etapa=0,o.successResultadoProduccion=o.successResultadoProduccion.bind(Object(s.a)(o)),o.gridOptionsCostosProduccionTotales=Object.assign({},o.gridOptions),o.gridOptionsTbProd=Object.assign({},o.gridOptions),o.successResultadoEnvasado=o.successResultadoEnvasado.bind(Object(s.a)(o)),o.gridOptionsTbEnv=Object.assign({},o.gridOptions),o.successResultadosTotales=o.successResultadosTotales.bind(Object(s.a)(o)),o.gridOptionsResTotal=Object.assign({},o.gridOptions),o.successAnalisisGalones=o.successAnalisisGalones.bind(Object(s.a)(o)),o.gridOptionsGalones=Object.assign({},o.gridOptions),o.gridOptionsAnalizaCostos=Object.assign({},o.gridOptions),o.successCostosTotales=o.successCostosTotales.bind(Object(s.a)(o)),o.gridOptionsCostoTotal=Object.assign({},o.gridOptions),o.successDevMateriaPrima=o.successDevMateriaPrima.bind(Object(s.a)(o)),o.gridOptionsMateriaPrima=Object.assign({},o.gridOptions),o.successDevMaterialEmpaque=o.successDevMaterialEmpaque.bind(Object(s.a)(o)),o.gridOptionsMatEmpaque=Object.assign({},o.gridOptions),o.uploadInforResultados=o.uploadInforResultados.bind(Object(s.a)(o)),o.terminarProcesoAprobacion=o.terminarProcesoAprobacion.bind(Object(s.a)(o)),o.costosTotalesProduccion=o.costosTotalesProduccion.bind(Object(s.a)(o)),o.successCostosTotalesProd=o.successCostosTotalesProd.bind(Object(s.a)(o)),o.formato=o.formato.bind(Object(s.a)(o)),o.formato_costo_reales=o.formato_costo_reales.bind(Object(s.a)(o)),o.formato_diferencia=o.formato_diferencia.bind(Object(s.a)(o)),o.formato_variacion=o.formato_variacion.bind(Object(s.a)(o)),o.traerDatosFicha=o.traerDatosFicha.bind(Object(s.a)(o)),o.traerAnalisisKg=o.traerAnalisisKg.bind(Object(s.a)(o)),o.formato2CostoTeorico=o.formato2CostoTeorico.bind(Object(s.a)(o)),o.formato2CostoReales=o.formato2CostoReales.bind(Object(s.a)(o)),o.formato2Diferencia=o.formato2Diferencia.bind(Object(s.a)(o)),o.formato2Rendimiento=o.formato2Rendimiento.bind(Object(s.a)(o)),o.formatoTotalesPrecioUnit=o.formatoTotalesPrecioUnit.bind(Object(s.a)(o)),o.formatoTotalesPrecioTot=o.formatoTotalesPrecioTot.bind(Object(s.a)(o)),o.formatoPrecioCostoDev=o.formatoPrecioCostoDev.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Aprobaci\xf3n Producci\xf3n @Version:1.01.0016 @Author: Juan David Nieto"),this.getField("btnTerminar").setClick(this.terminarProcesoAprobacion),this.id_ficha=this.props.data.id_ficha,this.costosTotalesProduccion(),this.traerDatosFicha(),this.traerAnalisisKg(),this.uploadInforResultados()}},{key:"traerDatosFicha",value:function(){var e={value:this.id_ficha};this.generalFormat.nombre_accion="457-servicio_produccion_fichas_traer_datos_fichas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"traerAnalisisKg",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="457-servicio_produccion_fichas_items_traer_tabla_analisiskg",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successDatosFicha",value:function(e){var t=[];200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaAprobProd").setVisible(!0),t.push(e.data[0]),this.getField("listaAprobProd").setItemsFichas(t)):this.getField("listaAprobProd").setVisible(!1)}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p){var t=new Map;t.set(0,{cellRenderer:this.setButtonVer,field:"accion"}),this.gridOptions.rowData=e.model,this.getField("tablaAprobProd").initData(this.gridOptions,t)}else this.getField("tablaAprobProd").toggle(!1)}},{key:"setButtonVer",value:function(e){var t=this,i=e.data.etapa_id,a=e.data.nombre_etapa,o=document.createElement("input");return o.onclick=function(){return t.verEspecification(i,a)},o.setAttribute("id","button_delete_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Ver"),o}},{key:"verEspecification",value:function(e,t){this.getField("modalAprobProdEtapas").handleClickOpen(),this.getField("etapas").setValue(t),this.getField("listaEtapasAprobprod").setVisible(!1),this.id_etapa=e;var i={produccion_fichas_id:this.id_ficha,etapa_id:e};this.generalFormat.nombre_accion="457-servicio_produccion_fichas_items_btn_ver_etapas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.successTablaEtapas,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successResultadoProduccion",value:function(e){if(200===e.estado_p){this.getField("resultadoProdTB").toggle(!0);var t=new Map;this.gridOptionsTbProd.rowData=e.data,this.getField("resultadoProdTB").initData(this.gridOptionsTbProd,t)}else this.getField("resultadoProdTB").toggle(!1)}},{key:"successResultadoEnvasado",value:function(e){if(200===e.estado_p){this.getField("resultadoEnvTB").toggle(!0);var t=new Map;this.gridOptionsTbEnv.rowData=e.data,this.getField("resultadoEnvTB").initData(this.gridOptionsTbEnv,t)}else this.getField("resultadoEnvTB").toggle(!1)}},{key:"successResultadosTotales",value:function(e){if(200===e.estado_p){this.getField("resultadoTotalTB").toggle(!0);var t=new Map;this.gridOptionsResTotal.rowData=e.data,this.getField("resultadoTotalTB").initData(this.gridOptionsResTotal,t)}else this.getField("resultadoTotalTB").toggle(!1)}},{key:"successAnalisisGalones",value:function(e){if(200===e.estado_p){this.getField("analisisGalonesTB").toggle(!0);var t=new Map;this.gridOptionsGalones.rowData=e.data,this.getField("analisisGalonesTB").initData(this.gridOptionsGalones,t)}else this.getField("analisisGalonesTB").toggle(!1)}},{key:"formato",value:function(e){return"".formatoPrecio(e.data.costo_teorico)}},{key:"formato_costo_reales",value:function(e){return"".formatoPrecio(e.data.costo_reales)}},{key:"formato_diferencia",value:function(e){return"".formatoPrecio(e.data.diferencia)}},{key:"formato_variacion",value:function(e){return"".formatoPrecio(e.data.variacion)}},{key:"formato2CostoTeorico",value:function(e){return"".formatoPrecio(e.data.costo_teorico)}},{key:"formato2CostoReales",value:function(e){return"".formatoPrecio(e.data.costo_reales)}},{key:"formato2Diferencia",value:function(e){return"".formatoPrecio(e.data.diferencia)}},{key:"formato2Rendimiento",value:function(e){return"".formatoPrecio(e.data.rendimiento)}},{key:"successCostosTotales",value:function(e){if(200===e.estado_p){this.getField("costosTotalesTB").toggle(!0);var t=new Map;this.gridOptionsCostoTotal.rowData=e.data,t.set("costo_teorico",{cellRenderer:this.formato2CostoTeorico,cellStyle:{textAlign:"right"},field:"costo_teorico"}),t.set("costo_reales",{cellRenderer:this.formato2CostoReales,cellStyle:{textAlign:"right"},field:"costo_reales"}),t.set("diferencia",{cellRenderer:this.formato2Diferencia,cellStyle:{textAlign:"right"},field:"diferencia"}),t.set("rendimiento",{cellRenderer:this.formato2Rendimiento,cellStyle:{textAlign:"right"},field:"rendimiento"}),this.getField("costosTotalesTB").initData(this.gridOptionsCostoTotal,t)}else this.getField("costosTotalesTB").toggle(!1)}},{key:"successDevMateriaPrima",value:function(e){if(200===e.estado_p){this.getField("devMateriaPrimaTB").toggle(!0);var t=new Map;t.set("costo",{cellRenderer:this.formatoPrecioCostoDev,editable:!0,field:"costo"}),this.gridOptionsMateriaPrima.rowData=e.data,this.getField("devMateriaPrimaTB").initData(this.gridOptionsMateriaPrima,t)}else this.getField("devMateriaPrimaTB").toggle(!1)}},{key:"formatoPrecioCostoDev",value:function(e){return"".formatoPrecio(e.data.costo)}},{key:"successDevMaterialEmpaque",value:function(e){if(200===e.estado_p){this.getField("devMaterialEmpaqueTB").toggle(!0);var t=new Map;this.gridOptionsMatEmpaque.rowData=e.data,this.getField("devMaterialEmpaqueTB").initData(this.gridOptionsMatEmpaque,t)}else this.getField("devMaterialEmpaqueTB").toggle(!1)}},{key:"successTablaEtapas",value:function(e){if(200===e.estado_p){this.getField("tablaEtapasAprobProd").toggle(!0);var t=new Map;t.set("cantidad_agregada",{cellRenderer:this.setCantidadAgregada,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px"},onCellValueChanged:this.cantidadAgregadaChange,width:150,editable:!0,field:"cantidad_agregada"}),this.gridOptionsTbEtapas.rowData=e.data,this.getField("tablaEtapasAprobProd").initData(this.gridOptionsTbEtapas,t)}else this.getField("tablaEtapasAprobProd").toggle(!1)}},{key:"setCantidadAgregada",value:function(e){var t=e.data.cantidad_agregada,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"cantidadAgregadaChange",value:function(e){if(this.getField("tablaEtapasAprobProd").cellValid(e.oldValue,e.newValue,"^[0-9]")&&e.oldValue!==e.newValue){var t=e.data.id,i=e.newValue;""!==i&&parseFloat(i)>=0?this.guardarValor(t,parseFloat(i)):(e.data.valor_actual=0,this.getField("fieldAlert").toggle(!0,"El campo no cumple con el formato deseado","error"))}}},{key:"guardarValor",value:function(e,t){var i={cantidad_agregada:t,etapa_id:this.id_etapa,id:e};this.generalFormat.nombre_accion="457-Servicio_produccion_items_fichas_modifica_cantidad_agregada_tabla",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.succesGuardarValor,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"succesGuardarValor",value:function(e){200===e.estado_p&&(this.uploadTableEtapas(),this.uploadTableKg(),this.uploadInforResultados())}},{key:"uploadTableKg",value:function(){var e={value:this.id_ficha};this.generalFormat.nombre_accion="457-servicio_produccion_fichas_items_traer_tabla_analisiskg",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"uploadTableEtapas",value:function(){var e={produccion_fichas_id:this.id_ficha,etapa_id:this.id_etapa};this.generalFormat.nombre_accion="457-servicio_produccion_fichas_items_btn_ver_etapas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaEtapas,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"uploadInforResultados",value:function(){var e={value:this.id_ficha};this.generalFormat.nombre_accion="457-Servicio_produccion_items_fichas_resultado_de_produccion_tb",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successResultadoProduccion,error:this.error_,general:this.generalFormat,showMessage:!1}),this.generalFormat.nombre_accion="457-Servicio_produccion_iterms_fichas_resultado_envasado_tb",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successResultadoEnvasado,error:this.error_,general:this.generalFormat,showMessage:!1}),this.generalFormat.nombre_accion="457-servicio_produccion_fichas_tabla_resultados_totales",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successResultadosTotales,error:this.error_,general:this.generalFormat,showMessage:!1}),this.generalFormat.nombre_accion="457-servicio_produccion_fichas_tabla_analisis_galones",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successAnalisisGalones,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="457-servicio_produccion_fichas_costos_totales",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successCostosTotales,error:this.error_,general:this.generalFormat,showMessage:!1}),this.generalFormat.nombre_accion="457-servicio_produccion_items_fichas_tabla_devolucion_materia_prima",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDevMateriaPrima,error:this.error_,general:this.generalFormat,showMessage:!1}),this.generalFormat.nombre_accion="457-servicio_produccion_fichas_tabla_dev_material_empaque",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDevMaterialEmpaque,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"terminarProcesoAprobacion",value:function(){if(this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),""!==this.getField("observacion").getValue()&&" "!==this.getField("observacion").getValue()){this.getField("observacion").setError(!1,"");var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),observacion:this.getField("observacion").getValue()};this.generalFormat.nombre_accion="457-Permite_pasar_a_la_actividad_de_recepcion_de_devolucion",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}else this.getField("observacion").setError(!0,"Este campo es requerido")}},{key:"costosTotalesProduccion",value:function(){var e={value:this.id_ficha};this.generalFormat.nombre_accion="457-produccion_fichas-costostotalesproduccion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successCostosTotalesProd,error:this.error_,general:this.generalFormat})}},{key:"successCostosTotalesProd",value:function(e){if(200===e.estado_p){var t=new Map;t.set("precio_unitario",{cellRenderer:this.formatoTotalesPrecioUnit,editable:!0,field:"precio_unitario"}),t.set("precio_total",{cellRenderer:this.formatoTotalesPrecioTot,editable:!0,field:"precio_total"}),this.gridOptionsCostosProduccionTotales.rowData=e.data,this.getField("costos_totales_produccion").initData(this.gridOptionsCostosProduccionTotales,t)}}},{key:"formatoTotalesPrecioUnit",value:function(e){return"".formatoPrecio(e.data.precio_unitario)}},{key:"formatoTotalesPrecioTot",value:function(e){return"".formatoPrecio(e.data.precio_total)}}]),i}(d.a.form);d.a.addController("aprobaProd",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.continuarEtapa=o.continuarEtapa.bind(Object(s.a)(o)),o.success=o.success.bind(Object(s.a)(o)),o.devolverEtapa=o.devolverEtapa.bind(Object(s.a)(o)),o.formato=o.formato.bind(Object(s.a)(o)),o.formato2=o.formato2.bind(Object(s.a)(o)),o.formato3=o.formato3.bind(Object(s.a)(o)),o.valido=!1,o.etapa_id=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.service.send(this.getConstant().searchFormat().format(this.props.data.id_ficha,"tablaAprobacion","servicio",this.formId),"GET",void 0,this.successTablaItemFichas,this.error_),this.getField("btnContinuarEtapa").setClick(this.continuarEtapa),this.getField("btnDevolverEtapa").setClick(this.devolverEtapa)}},{key:"formato",value:function(e){return"".formatoPrecio(e.data.cantidad)}},{key:"formato2",value:function(e){return"".formatoPrecio(e.data.cantidad_restante)}},{key:"formato3",value:function(e){return"".formatoPrecio(e.data.cantidad_agregada)}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p)if(this.getField("total_cantidad").setValue("".formatoPrecio(e.model[0].total_cantidad)),this.getField("total_agregada").setValue("".formatoPrecio(e.model[0].total_agregada)),this.getField("total_pendiente").setValue("".formatoPrecio(e.model[0].total_pendiente)),this.getField("costo").setValue("".formatoPrecio(e.model[0].costo_etapa)),this.getField("porcentaje").setValue(e.model[0].porcentaje),this.etapa_id=e.model[0].etapa_id,parseFloat(e.model[0].porcentaje)<100?(this.getField("observacion").setVisible(!0),this.valido=!1):(this.getField("observacion").setVisible(!1),this.valido=!0),e.model[0].items.length>0){var t=new Map;t.set("cantidad",{cellRenderer:this.formato,cellStyle:{textAlign:"right"},field:"cantidad"}),t.set("cantidad_restante",{cellRenderer:this.formato2,cellStyle:{textAlign:"right"},field:"cantidad_restante"}),t.set("cantidad_agregada",{cellRenderer:this.formato3,cellStyle:{textAlign:"right"},field:"cantidad_agregada"}),this.gridOptions.rowData=e.model[0].items,this.getField("tablaAprobacion").initData(this.gridOptions,t)}else this.getField("tablaAprobacion").toggle(!1)}},{key:"continuarEtapa",value:function(){var e=!0,t=!1;if(this.valido||(this.getField("observacion").valid()?(e=!0,t=!0):(e=!1,t=!1)),e)if(t){var i={accion:"f9_servicio",campo:"btnContinuarEtapa",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,observaciones:this.getField("observacion").getValue(),etapa_id:this.etapa_id};this.service.send(this.getConstant().formSave(),"PUT",i,this.success,this.error_)}else{var a={accion:"servicio",campo:"btnContinuarEtapa",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"POST",a,this.successCloseEstage,this.error_)}}},{key:"success",value:function(e){if(200===e.estado_p){var t={accion:"servicio",campo:"btnContinuarEtapa",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"POST",t,this.successCloseEstage,this.error_)}}},{key:"devolverEtapa",value:function(){var e={accion:"servicio",campo:"btnDevolverEtapa",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"POST",e,this.successCloseEstage,this.error_)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.continuarEtapa=o.continuarEtapa.bind(Object(s.a)(o)),o.devolverEtapa=o.devolverEtapa.bind(Object(s.a)(o)),o.formato=o.formato.bind(Object(s.a)(o)),o.formato2=o.formato2.bind(Object(s.a)(o)),o.success=o.success.bind(Object(s.a)(o)),o.valido=!1,o.etapa_id=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.service.send(this.getConstant().searchFormat().format(this.props.data.id_ficha,"tablaAprovMol","servicio",this.formId),"GET",void 0,this.successTablaItemFichas,this.error_),this.getField("btnContinuarAprovMol").setClick(this.continuarEtapa),this.getField("btnDevolverAprovMol").setClick(this.devolverEtapa)}},{key:"formato",value:function(e){return"".formatoPrecio(e.data.cantidad)}},{key:"formato2",value:function(e){return"".formatoPrecio(e.data.cantidad_restante)}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p)if(this.getField("total_cantidad").setValue("".formatoPrecio(e.model[0].total_cantidad)),this.getField("total_agregada").setValue("".formatoPrecio(e.model[0].total_agregada)),this.getField("total_pendiente").setValue("".formatoPrecio(e.model[0].total_pendiente)),this.getField("costo").setValue("".formatoPrecio(e.model[0].costo_etapa)),this.getField("porcentaje").setValue(e.model[0].porcentaje),this.etapa_id=e.model[0].etapa_id,parseFloat(e.model[0].porcentaje)<100?(this.getField("observacion").setVisible(!0),this.valido=!1):(this.getField("observacion").setVisible(!1),this.valido=!0),e.model[0].items.length>0){var t=new Map;t.set("cantidad",{cellRenderer:this.formato,cellStyle:{textAlign:"right"},field:"cantidad"}),t.set("cantidad_restante",{cellRenderer:this.formato2,cellStyle:{textAlign:"right"},field:"cantidad_restante"}),this.gridOptions.rowData=e.model[0].items,this.getField("tablaAprovMol").initData(this.gridOptions,t)}else this.getField("tablaAprovMol").toggle(!1)}},{key:"continuarEtapa",value:function(){var e=!0,t=!1;if(this.valido||(this.getField("observacion").valid()?(e=!0,t=!0):(e=!1,t=!1)),e)if(t){var i={accion:"f9_servicio",campo:"btnContinuarAprovMol",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,observaciones:this.getField("observacion").getValue(),etapa_id:this.etapa_id};this.service.send(this.getConstant().formSave(),"PUT",i,this.success,this.error_)}else{var a={accion:"servicio",campo:"btnContinuarAprovMol",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"POST",a,this.successCloseEstage,this.error_)}}},{key:"success",value:function(e){if(200===e.estado_p){var t={accion:"servicio",campo:"btnContinuarAprovMol",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"POST",t,this.successCloseEstage,this.error_)}}},{key:"devolverEtapa",value:function(){var e={accion:"servicio",campo:"btnDevolverAprovMol",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"POST",e,this.successCloseEstage,this.error_)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.continuarEtapa=o.continuarEtapa.bind(Object(s.a)(o)),o.agregarProducto=o.agregarProducto.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.successTablaItemFichasAprobacion=o.successTablaItemFichasAprobacion.bind(Object(s.a)(o)),o.etapa_id=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.service.send(this.getConstant().searchFormat().format(this.props.data.id_ficha,"container_aprobacion_produccion","servicio",this.formId),"GET",void 0,this.successTablaItemFichas,this.error_),this.service.send(this.getConstant().searchFormat().format(this.props.data.id_ficha,"tabla_producto_terminado","servicio",this.formId),"GET",void 0,this.successTablaItemFichasAprobacion,this.error_),this.getField("btn_continuar").setClick(this.continuarEtapa),this.getField("boton_agregar_producto_terminado").setClick(this.agregarProducto)}},{key:"successTablaItemFichasAprobacion",value:function(e){200===e.estado_p&&(this.gridOptions.rowData=e.model,this.getField("tabla_producto_terminado").initData(this.gridOptions))}},{key:"uploadTable",value:function(){this.service.send(this.getConstant().searchFormat().format(this.props.data.id_ficha,"tabla_producto_terminado","servicio",this.formId),"GET",void 0,this.successTablaItemFichasAprobacion,this.error_)}},{key:"agregarProducto",value:function(){this.getField("modalAprobacionProduccion").handleClickOpen(this.initModal.bind(this))}},{key:"initModal",value:function(){this.getField("btn_guardar_producto").setClick(this.guardarProductoTerminado.bind(this))}},{key:"guardarProductoTerminado",value:function(){if(this.getField("codigo").valid()&this.getField("nombre_producto").valid()&this.getField("bodega_id").valid()&this.getField("cantidad").valid()){var e={accion:"servicio",campo:"btn_guardar_producto",id_formulario:this.formId,puntos:"N",articulo_id:this.getField("articulo_id").getValue(),produccion_fichas_id:this.props.data.id_ficha,cantidad:this.getField("cantidad").getValue(),bodega_id:this.getField("bodega_id").getValue(),unidad_id:this.getField("unidad_id").getValue()};this.service.send(this.getConstant().formSave(),"POST",e,this.successGuardarProducto.bind(this),this.error_)}}},{key:"successGuardarProducto",value:function(e){200===e.estado_p&&(this.getField("modalAprobacionProduccion").handleClose(),this.uploadTable())}},{key:"successTablaItemFichas",value:function(e){200===e.estado_p&&(this.getField("costo_produccion").setValue("".formatoPrecio(e.model[0].costo_produccion)),this.getField("galones_planeados").setValue("".formatoPrecio(e.model[0].galones_planeados)),this.getField("galones_reales").setValue("".formatoPrecio(e.model[0].galones_reales)),this.getField("kilos_pesaje").setValue("".formatoPrecio(e.model[0].kilos_pesados)),this.getField("kilos_planeados").setValue("".formatoPrecio(e.model[0].kilos_agregados)),this.getField("galones_reales2").setValue("".formatoPrecio(e.model[0].galones_reales)),this.getField("rendimiento").setValue(e.model[0].rendimiento),this.getField("costo_galon").setValue("".formatoPrecio(e.model[0].costo_galon)),this.getField("sobre_produccion_galones").setValue("".formatoPrecio(e.model[0].sobre_produccion)))}},{key:"continuarEtapa",value:function(){if(this.getField("observaciones_aprobacion").valid()){var e={accion:"servicio",campo:"btn_continuar",id_formulario:this.formId,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id,produccion_fichas_id:this.props.data.id_ficha,observaciones_aprobacion:this.getField("observaciones_aprobacion").getValue(),etapa_id:this.etapa_id};this.service.send(this.getConstant().formSave(),"PUT",e,this.successCloseEstage,this.error_)}}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.continuarEtapa=o.continuarEtapa.bind(Object(s.a)(o)),o.etapa_id=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.service.send(this.getConstant().searchFormat().format(this.props.data.id_ficha,"containerAprobProdEnvasado","servicio",this.formId),"GET",void 0,this.successTablaItemFichas,this.error_),this.getField("continuar_etapa").setClick(this.continuarEtapa)}},{key:"successTablaItemFichas",value:function(e){200===e.estado_p&&(this.getField("costo_galon").setValue("".formatoPrecio(e.model[0].costo_galon)),this.getField("rendimiento").setValue("".formatoPrecio(e.model[0].rendimiento)))}},{key:"continuarEtapa",value:function(){if(this.getField("observaciones_aprobacion").valid()){var e={accion:"servicio",campo:"continuar_etapa",id_formulario:this.formId,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id,produccion_fichas_id:this.props.data.id_ficha,observaciones_aprobacion:this.getField("observaciones_aprobacion").getValue(),etapa_id:this.etapa_id};this.service.send(this.getConstant().formSave(),"PUT",e,this.successCloseEstage,this.error_)}}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).onSelectionChanged=function(){o.limpiarCampos2(),o.deshabilitarCampos()},o.UploadTable=function(){var e=o.getField("nit").getValue(),t=o.getField("sede").getValue();o.service.send(o.getConstant().searchFormat().format(e+"/sede/"+t,"boton_consultar","servicio",o.formId),"GET",void 0,o.successDireccion,o.error_)},o.error_=function(e){},o.poblacion_id=null,o.initForm=o.initForm.bind(Object(s.a)(o)),o.delete=o.delete.bind(Object(s.a)(o)),o.successEstado=o.successEstado.bind(Object(s.a)(o)),o.successPoblacion=o.successPoblacion.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.successData=o.successData.bind(Object(s.a)(o)),o.successCiudad=o.successCiudad.bind(Object(s.a)(o)),o.habilitarCampos=o.habilitarCampos.bind(Object(s.a)(o)),o.grabarData=o.grabarData.bind(Object(s.a)(o)),o.eliminarData=o.eliminarData.bind(Object(s.a)(o)),o.searchDireccion=o.searchDireccion.bind(Object(s.a)(o)),o.setPoblacion=o.setPoblacion.bind(Object(s.a)(o)),o.modificarData=o.modificarData.bind(Object(s.a)(o)),o.limpiarCamposForm=o.limpiarCamposForm.bind(Object(s.a)(o)),o.successDireccion=o.successDireccion.bind(Object(s.a)(o)),o.searchDataId=o.searchDataId.bind(Object(s.a)(o)),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"setValueField",value:function(e,t){var i=this.getField(e);i&&i.setValue(t)}},{key:"initForm",value:function(){this.getField("boton_consultar")&&this.getField("boton_consultar").setClick(this.searchDireccion),this.getField("boton_cargar")&&this.getField("boton_cargar").setClick(this.searchDataId),this.getField("nit")&&this.getField("nit").setOnChange(this.limpiarCamposForm),this.getField("boton_grabar")&&this.getField("boton_grabar").setSuccess(this.grabarData),this.getField("boton_eliminar")&&this.getField("boton_eliminar").setClick(this.eliminarData),this.getField("boton_modificar")&&this.getField("boton_modificar").setSuccess(this.modificarData),this.getField("ciudad_id").setOnChange(this.setPoblacion),this.gridOptions.onSelectionChanged=this.onSelectionChanged,this.deshabilitarCampos()}},{key:"limpiarCamposForm",value:function(){this.limpiarCampos(),this.deshabilitarCampos()}},{key:"setPoblacion",value:function(){if(""!==this.getField("ciudad_id").getValue()){var e=this.getField("ciudad_id").getValue();this.service.send(this.getConstant().searchFormat().format(e,"poblacion_id","enter_servicio",this.formId),"GET",void 0,this.successPoblacion,this.error)}}},{key:"modificarData",value:function(e){200===e.estado_p&&(this.UploadTable(),this.limpiarCampos2(),this.deshabilitarCampos())}},{key:"eliminarData",value:function(){this.getField("id").valid()&&this.delete(this.getField("id").getValue())}},{key:"grabarData",value:function(e){200===e.estado_p&&(this.UploadTable(),this.limpiarCampos2(),this.deshabilitarCampos())}},{key:"searchDireccion",value:function(){if(this.getField("nit").valid()&this.getField("sede").valid()){var e=this.getField("nit").getValue(),t=this.getField("sede").getValue();this.service.send(this.getConstant().searchFormat().format(e+"/sede/"+t,"boton_consultar","servicio",this.formId),"GET",void 0,this.successDireccion,this.error)}}},{key:"searchDataId",value:function(){if(this.getField("id").valid()){var e=this.getField("id").getValue();this.service.send(this.getConstant().searchFormat().format(e,"boton_cargar","servicio",this.formId),"GET",void 0,this.successData,this.error)}}},{key:"successData",value:function(e){if(e.model.length>0){var t=e.model[0];this.habilitarCampos();var i=t.estadoactivo_id,a=t.ciudad_id;this.getField("ciudad").setValue(t.ciudad),this.getField("ciudad_id").setValue(a),this.getField("ncliente").setValue(t.ncliente),this.getField("direccion").setValue(t.direccion),this.getField("telefonos").setValue(t.telefonos),this.getField("detalle").setValue(t.detalle),this.getField("email").setValue(t.email),this.poblacion_id=t.poblacion_id,null!==i&&this.service.send(this.getConstant().searchFormat().format(i,"estadoactivo_id","enter_servicio",this.formId),"GET",void 0,this.successEstado,this.error),null!==t.ciudad&&(this.service.send(this.getConstant().searchFormat().format(a,"poblacion_id","enter_servicio",this.formId),"GET",void 0,this.successPoblacion,this.error),this.service.send(this.getConstant().searchFormat().format(t.ciudad,"ciudad","enter_servicio",this.formId),"GET",void 0,this.successCiudad,this.error))}}},{key:"delete",value:function(e){this.successDeleteCustom=this.successDelete;var t={accion:"servicio",campo:"boton_eliminar",id_formulario:this.formId,id:e};this.data=t,this.getField("modalDelete").toggle(!0)}},{key:"successDelete",value:function(e){void 0!==e.estado_p&&200!==e.estado_p||(this.getField("id").setValue(""),this.limpiarCampos2(),this.deshabilitarCampos(),this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.UploadTable())}},{key:"successEstado",value:function(e){if(200===e.estado_p){var t=e.model[0].id;this.getField("estadoactivo_id").setValue(t)}}},{key:"successCiudad",value:function(e){if(200===e.estado_p){var t=e.model[0];this.getField("ciudad").setValue(t.codigo_ciudad),this.getField("nciudad").setValue(t.nombre)}}},{key:"successPoblacion",value:function(e){var t=[];if(200===e.estado_p){for(var i in t.push({value:" ",text:"Ninguno"}),e.model)t.push({value:e.model[i].id,text:e.model[i].nombre,campos_cambian:{codigo_poblacion:e.model[i].codigo}});e.model.length>=1&&this.getField("codigo_poblacion").setValue(e.model[0].codigo),this.getField("poblacion_id").setOptions(t),this.getField("poblacion_id").setValue(this.poblacion_id)}else t.push({value:" ",text:"No se encontraron poblaciones"}),this.getField("poblacion_id").setOptions(t)}},{key:"successDireccion",value:function(e){e.model.length>0?(this.gridOptions.rowData=e.model,this.getField("tabla_consultar").initData(this.gridOptions)):this.getField("tabla_consultar").toggle(!1)}},{key:"deshabilitarCampos",value:function(){this.getField("ncliente").setDisabled(!0),this.getField("direccion").setDisabled(!0),this.getField("telefonos").setDisabled(!0),this.getField("detalle").setDisabled(!0),this.getField("email").setDisabled(!0),this.getField("estadoactivo_id").setDisabled(!0),this.getField("ciudad").setDisabled(!0),this.getField("poblacion_id").setDisabled(!0),this.getField("codigo_poblacion").setValue(" ");var e=[];e.push({value:"",text:""}),this.getField("poblacion_id").setOptions(e)}},{key:"limpiarCampos",value:function(){this.getField("id").setValue(""),this.getField("ncliente").setValue(""),this.getField("direccion").setValue(""),this.getField("telefonos").setValue(""),this.getField("detalle").setValue(""),this.getField("email").setValue(""),this.getField("ciudad").setValue(""),this.getField("nciudad").setValue(""),this.getField("poblacion_id").setValue(""),this.getField("tabla_consultar").toggle(!1),this.getField("codigo_poblacion").setValue(" ")}},{key:"limpiarCampos2",value:function(){this.getField("ncliente").setValue(""),this.getField("direccion").setValue(""),this.getField("telefonos").setValue(""),this.getField("detalle").setValue(""),this.getField("email").setValue(""),this.getField("ciudad").setValue(""),this.getField("nciudad").setValue(""),this.getField("poblacion_id").setValue(""),this.getField("codigo_poblacion").setValue(" ")}},{key:"habilitarCampos",value:function(){this.getField("ncliente").setDisabled(!1),this.getField("direccion").setDisabled(!1),this.getField("telefonos").setDisabled(!1),this.getField("detalle").setDisabled(!1),this.getField("email").setDisabled(!1),this.getField("estadoactivo_id").setDisabled(!1),this.getField("ciudad").setDisabled(!1),this.getField("poblacion_id").setDisabled(!1)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.mostrarRoles=o.mostrarRoles.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.successDeleteService=o.successDeleteService.bind(Object(s.a)(o)),o.limpiarTabla=o.limpiarTabla.bind(Object(s.a)(o)),o.successAddRolService=o.successAddRolService.bind(Object(s.a)(o)),o.confirmDeleteCustom=o.confirmDeleteCustom.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Asignar Rol, @version: 2.0.0, @author: Mario Alejandro Sep\xfalveda"),this.getField("user_id").setCustomSuccess(this.mostrarRoles),this.getField("btnGuardarRol").setSuccess(this.successAddRolService),this.getField("user_id").setOnChange(this.limpiarTabla)}},{key:"successAddRolService",value:function(e){200===e.estado_p&&(this.getField("roles_permisos_id").setValue(""),this.uploadTable())}},{key:"limpiarTabla",value:function(){""===this.getField("user_id").getValue()&&(this.getField("tablaRoles").toggle(!1),this.getField("roles_permisos_id").setValue(""))}},{key:"mostrarRoles",value:function(e){if(e.length>0){var t=[],i={},a=this.getField("nombre").getValue(),o=this.getField("codigo").getValue();e.map((function(e){return i=Object.assign({codigo_usuario:o,nombre_usuario:a},e),t.push(i),i}));var s=new Map;s.set("opcion",{cellRenderer:this.setButtonDelete,field:"accion"}),this.gridOptions.rowData=t,this.getField("tablaRoles").initData(this.gridOptions,s)}else this.getField("tablaRoles").toggle(!1)}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=document.createElement("div"),o=document.createElement("input");return o.onclick=function(){return t.deleteRol(i)},o.setAttribute("id","buttonDelete_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Eliminar"),a.appendChild(o),o}},{key:"deleteRol",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustom),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustom",value:function(){this.getField("confirmModalCustom").toggle(!1);var e={id:this.id_delete};this.generalFormat.nombre_accion="usuarios_roles_actualizar_borrar",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successDeleteService,error:this.error_,general:this.generalFormat})}},{key:"successDeleteService",value:function(e){200===e.estado_p&&this.uploadTable()}},{key:"uploadTable",value:function(){this.getField("user_id").setValue(this.getField("user_id").getValue())}}]),i}(d.a.form);d.a.addController("AsigRol",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsTurnosOperariosAsignados=Object.assign({},o.gridOptions),o.setButtonEliminar=o.setButtonEliminar.bind(Object(s.a)(o)),o.confirmDelete=o.confirmDelete.bind(Object(s.a)(o)),o.confirmDeleteTurno=o.confirmDeleteTurno.bind(Object(s.a)(o)),o.successTurnosOperariosAsignados=o.successTurnosOperariosAsignados.bind(Object(s.a)(o)),o.successConfirmDeleteTurno=o.successConfirmDeleteTurno.bind(Object(s.a)(o)),o.cargarWmsZonas=o.cargarWmsZonas.bind(Object(s.a)(o)),o.successWmsZonas=o.successWmsZonas.bind(Object(s.a)(o)),o.cleanSelectZonas=o.cleanSelectZonas.bind(Object(s.a)(o)),o.cargarWmsRacks=o.cargarWmsRacks.bind(Object(s.a)(o)),o.successWmsRacks=o.successWmsRacks.bind(Object(s.a)(o)),o.cargarColumnas=o.cargarColumnas.bind(Object(s.a)(o)),o.successColumnas=o.successColumnas.bind(Object(s.a)(o)),o.cleanSelectRacks=o.cleanSelectRacks.bind(Object(s.a)(o)),o.cleanSelectColumnas=o.cleanSelectColumnas.bind(Object(s.a)(o)),o.successAddTurnoOperario=o.successAddTurnoOperario.bind(Object(s.a)(o)),o.ocultarTabla=o.ocultarTabla.bind(Object(s.a)(o)),o.ningunoSelect="",o.id_delete=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("cargar").setSuccess(this.successTurnosOperariosAsignados),this.getField("sucursal_id").setOnChange(this.cargarWmsZonas),this.getField("codigo_bodega").setOnChange(this.cleanSelectZonas),this.getField("zona_id").setOnChange(this.cargarWmsRacks),this.getField("rack_id").setOnChange(this.cargarColumnas),this.getField("agregar").setSuccess(this.successTurnosOperariosAsignados),this.getField("turnos_id").setOnChange(this.ocultarTabla)}},{key:"ocultarTabla",value:function(){this.getField("tabla_turnos_operarios").toggle(!1),this.cleanSelectZonas(),this.getField("codigo_bodega").setValue(""),this.getField("nombre_bodega").setValue("")}},{key:"successTurnosOperariosAsignados",value:function(e){if(200===e.estado_p){console.log("TABLA",e.model),this.gridOptionsTurnosOperariosAsignados.rowData=e.model;var t=new Map;t.set(7,{cellRenderer:this.setButtonEliminar,field:"Accion",width:150}),this.getField("tabla_turnos_operarios").initData(this.gridOptionsTurnosOperariosAsignados,t)}else this.getField("tabla_turnos_operarios").toggle(!1)}},{key:"setButtonEliminar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.confirmDelete(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"confirmDelete",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteTurno),this.getField("confirmModalCustom").toggle(!0),this.getField("id_turno_eliminar").setValue(e)}},{key:"confirmDeleteTurno",value:function(){if(this.getField("confirmModalCustom").toggle(!1),console.log("CLIK ELIMINAR ---\x3e>>",this.getField("id_turno_eliminar").getValue()),this.getField("id_turno_eliminar").valid()&&""!==this.getField("id_turno_eliminar").getValue()){var e={id:this.getField("id_turno_eliminar").getValue()};this.generalFormat.nombre_accion="371-Elimina_zona_rack_columna_operario",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successConfirmDeleteTurno,error:this.error_,general:this.generalFormat})}}},{key:"successConfirmDeleteTurno",value:function(e){200===e.estado_p&&this.turnosOperariosAsignados()}},{key:"cargarWmsZonas",value:function(){if(""!==this.getField("sucursal_id").getValue()){var e={value:this.getField("sucursal_id").getValue()};this.generalFormat.nombre_accion="371-Busca_los_wms_zonas_que_contenga_la_sucursal_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successWmsZonas,error:this.error_,general:this.generalFormat})}}},{key:"successWmsZonas",value:function(e){if(e.model&&e.model.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.codigo+"-"+e.descripcion,i.campos_cambian={zona:e.descripcion},t.push(i)})),this.getField("zona_id").setOptions(t),""===this.ningunoSelect&&this.getField("zona_id").setValue(this.ningunoSelect)}}},{key:"cleanSelectZonas",value:function(){var e=[{text:"Ninguno",value:" ",campos_cambian:{}}];this.getField("zona_id").setOptions(e),this.getField("rack_id").setOptions(e),this.getField("columna_id").setOptions(e),this.getField("zona").setValue(""),this.getField("rack").setValue(""),this.getField("columna").setValue("")}},{key:"cargarWmsRacks",value:function(){if(this.cleanSelectRacks(),""!==this.getField("zona_id").getValue()){var e={value:this.getField("zona_id").getValue()};this.generalFormat.nombre_accion="371-Busca_los_wms_nuevo_racks_que_contengan_wms_zona_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successWmsRacks,error:this.error_,general:this.generalFormat})}}},{key:"successWmsRacks",value:function(e){this.cleanSelectRacks();var t=[];e.model&&e.model.length>0?(t=[{text:"Ninguno",value:" ",campos_cambian:{}}],e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.numero,i.campos_cambian={rack:e.numero},t.push(i)})),this.getField("rack_id").setOptions(t),this.getField("tipo_ubicacion").setValue(""),""===this.ningunoSelect&&this.getField("rack_id").setValue(this.ningunoSelect)):e.model&&0===e.model.length&&(t=[{text:"Ninguno",value:" ",campos_cambian:{}}],this.getField("rack_id").setOptions(t),this.getField("columna_id").setOptions(t),this.getField("tipo_ubicacion").setValue(""))}},{key:"cleanSelectRacks",value:function(){var e=[{text:"Ninguno",value:" ",campos_cambian:{}}];this.getField("rack_id").setOptions(e),this.getField("columna_id").setOptions(e),this.getField("rack").setValue(""),this.getField("columna").setValue("")}},{key:"cargarColumnas",value:function(){if(this.cleanSelectColumnas(),""!==this.getField("rack_id").getValue()){var e={value:this.getField("rack_id").getValue()};this.generalFormat.nombre_accion="371-Busca_un_wms_nuevo_racks_columnas_por_wms_nuevo_rack_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successColumnas,error:this.error_,general:this.generalFormat})}}},{key:"successColumnas",value:function(e){if(this.cleanSelectColumnas(),e.model&&e.model.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.columna_numero,i.nivel=e.niveles,i.tipo_ubicacion=e.tipo_ubicacion,i.campos_cambian={columna:e.columna_numero,tipo_ubicacion:e.tipo_ubicacion},t.push(i)})),this.getField("columna_id").setOptions(t),""===this.ningunoSelect&&this.getField("columna_id").setValue(this.ningunoSelect)}}},{key:"cleanSelectColumnas",value:function(){this.getField("columna_id").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]),this.getField("tipo_ubicacion").setValue(""),this.getField("columna").setValue("")}},{key:"successAddTurnoOperario",value:function(e){200===e.estado_p&&(this.turnosOperariosAsignados(),this.cleanSelectZonas(),this.getField("nit").setValue(""),this.getField("codigo_bodega").setValue(""),this.getField("noperario").setValue(""),this.getField("nombre_bodega").setValue(""))}}]),i}(d.a.form);d.a.addController("asignar_oper_tur",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.handlerClickButton=o.handlerClickButton.bind(Object(s.a)(o)),o.consultarTurno=o.consultarTurno.bind(Object(s.a)(o)),o.successAsignar=o.successAsignar.bind(Object(s.a)(o)),o.cancelarTurno=o.cancelarTurno.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"setValueField",value:function(e,t){var i=this.getField(e);i&&i.setValue(t)}},{key:"initForm",value:function(){this.buttons.has("btn_show")&&this.buttons.get("btn_show").ref.current.setClick(this.handlerClickButton)}},{key:"handlerClickButton",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!0),this.buttons.get("btn_change").ref.current.setDisabled(!0),this.buttons.get("btn_delete").ref.current.setDisabled(!0),this.getField("codigo_articulo").setDisabled(!1),this.getField("btnConsultar").setVisible(!0),this.getField("btnConsultar").setDisabled(!1),this.getField("btnCancelar").setVisible(!0),this.getField("btnCancelar").setDisabled(!1),this.getField("btnConsultar").setClick(this.consultarTurno),this.getField("btnCancelar").setClick(this.cancelarTurno)}},{key:"cancelarTurno",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!1),this.buttons.get("btn_change").ref.current.setDisabled(!1),this.buttons.get("btn_delete").ref.current.setDisabled(!1),this.getField("codigo_articulo").setDisabled(!0),this.getField("btnConsultar").setVisible(!1),this.getField("btnConsultar").setDisabled(!0),this.getField("btnCancelar").setVisible(!1),this.getField("btnCancelar").setDisabled(!0),this.getField("tablaConsulta").toggle(!1)}},{key:"consultarTurno",value:function(){if(this.getField("codigo_articulo").valid()){var e=this.getField("codigo_articulo").getValue();this.service.send(this.getConstant().searchFormat().format(e,"btnConsultar","servicio",this.formId),"GET",void 0,this.successAsignar,this.error)}}},{key:"successAsignar",value:function(e){200===e.estado_p&&(this.gridOptions.rowData=e.model,this.getField("tablaConsulta").initData(this.gridOptions))}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.traerPendientes=o.traerPendientes.bind(Object(s.a)(o)),o.gridOptionsAutorizaciones=Object.assign({},o.gridOptions),o.setButtonPedidosItems=o.setButtonPedidosItems.bind(Object(s.a)(o)),o.openModal=o.openModal.bind(Object(s.a)(o)),o.traeNumeroPedido=o.traeNumeroPedido.bind(Object(s.a)(o)),o.successPedidoPorEstado=o.successPedidoPorEstado.bind(Object(s.a)(o)),o.successTraerPendientes=o.successTraerPendientes.bind(Object(s.a)(o)),o.gridOptionsItemPedido=Object.assign({},o.gridOptions),o.setModalVerMas=o.setModalVerMas.bind(Object(s.a)(o)),o.openModalVerMas=o.openModalVerMas.bind(Object(s.a)(o)),o.setModalAutorizar=o.setModalAutorizar.bind(Object(s.a)(o)),o.openModalAutorizar=o.openModalAutorizar.bind(Object(s.a)(o)),o.cerrarModalVerMas=o.cerrarModalVerMas.bind(Object(s.a)(o)),o.traerCostoBodega=o.traerCostoBodega.bind(Object(s.a)(o)),o.successTraerCostoBodega=o.successTraerCostoBodega.bind(Object(s.a)(o)),o.traerExistenciaBodega=o.traerExistenciaBodega.bind(Object(s.a)(o)),o.successTraerExistenciaBodega=o.successTraerExistenciaBodega.bind(Object(s.a)(o)),o.ModificarPedidoProducto=o.ModificarPedidoProducto.bind(Object(s.a)(o)),o.cerrarModal=o.cerrarModal.bind(Object(s.a)(o)),o.setModalRechazar=o.setModalRechazar.bind(Object(s.a)(o)),o.openModalRechazar=o.openModalRechazar.bind(Object(s.a)(o)),o.cerrarModalRechazar=o.cerrarModalRechazar.bind(Object(s.a)(o)),o.cerrarModalPedidos=o.cerrarModalPedidos.bind(Object(s.a)(o)),o.rechazarPedidoProducto=o.rechazarPedidoProducto.bind(Object(s.a)(o)),o.successRechazarPedidoProducto=o.successRechazarPedidoProducto.bind(Object(s.a)(o)),o.concatenarMargen=[],o.dataConMargen=[],o.cambiarCantidad=o.cambiarCantidad.bind(Object(s.a)(o)),o.cambiarCosto=o.cambiarCosto.bind(Object(s.a)(o)),o.successAutorizarPedidoProducto=o.successAutorizarPedidoProducto.bind(Object(s.a)(o)),o.ocultarTabla=o.ocultarTabla.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Autorizaciones, @version: 1.01.0013, @author: Jose Albeiro Marin"),this.getField("consultar").setClick(this.traerPendientes),this.getField("grabar").setSuccess(this.cerrarModalPedidos),this.getField("cargar_costo_bodega").setCustomSuccess(this.traerCostoBodega),this.getField("bt_volver").setClick(this.cerrarModalVerMas),this.getField("bt_aceptar_autorizar").setClick(this.ModificarPedidoProducto),this.getField("bt_cancelar_autorizar").setClick(this.cerrarModal),this.getField("bt_cancelar_rechazar").setClick(this.cerrarModalRechazar),this.getField("bt_aceptar_rechazar").setClick(this.rechazarPedidoProducto),this.getField("estado").setOnChange(this.ocultarTabla)}},{key:"ocultarTabla",value:function(){this.getField("tb_autorizaciones").toggle(!1)}},{key:"cerrarModalPedidos",value:function(){this.getField("modal_pedido_items").handleClose(),this.getField("tb_autorizaciones").toggle(!1)}},{key:"traerPendientes",value:function(){if(""!==this.getField("estado").getValue()){var e={estado:this.getField("estado").getValue()};this.generalFormat.nombre_accion="528_permite_traer_todos_por_estado",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerPendientes,error:this.error_,general:this.generalFormat,showMessage:!0})}}},{key:"successTraerPendientes",value:function(e){if(console.log("data",e),200===e.estado_p){this.gridOptionsAutorizaciones.rowData=e.model;var t=new Map;t.set("accion",{cellRenderer:this.setButtonPedidosItems,field:"Accion",width:100}),this.getField("tb_autorizaciones").initData(this.gridOptionsAutorizaciones,t)}else this.getField("tb_autorizaciones").toggle(!1)}},{key:"setButtonPedidosItems",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.openModal(e.data)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Ver mas"),i}},{key:"openModal",value:function(e){this.getField("modal_pedido_items").setLabel("Pedidos Items"),this.getField("modal_pedido_items").handleClickOpen(this.traeNumeroPedido),this.gridOptionsAutorizaciones.api.deselectAll()}},{key:"traeNumeroPedido",value:function(){this.gridOptionsItemPedido.rowData=[];var e=new Map;this.getField("tb_item_pedido").initData(this.gridOptionsItemPedido,e);var t={estado:this.getField("estado").getValue(),numero_pedido:this.getField("numero_pedido").getValue()};this.generalFormat.nombre_accion="528_trae_numerodepedidoporestado",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successPedidoPorEstado,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successPedidoPorEstado",value:function(e){if(200===e.estado_p){this.concatenarMargen=e.data,this.dataConMargen=e.data,this.concatenarMargen.forEach((function(e){var t=e.precio_sin_iva_con_descuento,i=((t-e.costo)/t*100).toFixed(2);e.margen=i})),this.gridOptionsItemPedido.rowData=this.concatenarMargen;var t=new Map;t.set("ver_mas",{cellRenderer:this.setModalVerMas,field:"ver_mas"}),t.set("autorizar",{cellRenderer:this.setModalAutorizar,field:"autorizar"}),t.set("rechazar",{cellRenderer:this.setModalRechazar,field:"rechazar"}),t.set("cantidad",{cellRenderer:function(e){return e.data.cantidad},cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},editable:!0,onCellValueChanged:this.cambiarCantidad,sortable:!1,filter:!1,field:"cantidad"}),t.set("precio_sin_iva_con_descuento",{cellRenderer:function(e){return e.data.precio_sin_iva_con_descuento},cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},editable:!0,onCellValueChanged:this.cambiarCosto,sortable:!1,filter:!1,field:"precio_sin_iva_con_descuento"}),this.getField("tb_item_pedido").initData(this.gridOptionsItemPedido,t)}else this.getField("tb_item_pedido").toggle(!1)}},{key:"cambiarCantidad",value:function(e){var t=this.getField("tb_item_pedido").cellValid(e.oldValue,e.newValue,/^(\d{1,15})(\.\d{1,2})?$/,7);if(t){var i=e.newValue,a={numero_pedido:e.data.numero_pedido,codigo:e.data.codigo,cantidad:parseFloat(i)};this.generalFormat.nombre_accion="528_permite_modificar_cantidad",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:a,success:this.traeNumeroPedido,error:this.error_,general:this.generalFormat})}else null!==t&&this.traeNumeroPedido()}},{key:"cambiarCosto",value:function(e){var t=this.getField("tb_item_pedido").cellValid(e.oldValue,e.newValue,/^(\d{1,15})(\.\d{1,2})?$/,7);if(t){var i=e.newValue,a={numero_pedido:e.data.numero_pedido,codigo:e.data.codigo,precio_sin_iva_con_descuento:parseFloat(i)};this.generalFormat.nombre_accion="528_permite_modificar_costo",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:a,success:this.traeNumeroPedido,error:this.error_,general:this.generalFormat})}else null!==t&&this.traeNumeroPedido()}},{key:"setModalVerMas",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.openModalVerMas(e.data)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Ver m\xe1s"),i}},{key:"openModalVerMas",value:function(e){this.getField("modal_ver_mas").setLabel("Pedidos Pendientes"),this.getField("modal_ver_mas").handleClickOpen(),this.getField("p_codigo").setValue(e.codigo),this.getField("p_bodega").setValue(e.bodega),this.getField("pedido_modal_ver_mas").setValue(e.numero_pedido),this.getField("nit_modal_ver_mas").setValue(this.getField("nit").getValue()),this.getField("sede_modal_ver_mas").setValue(this.getField("sede").getValue()),this.getField("nombre_modal_ver_mas").setValue(this.getField("ncliente").getValue()),this.getField("codigo_producto_modal_ver_mas").setValue(e.codigo),this.getField("nombre_producto").setValue(e.narticulo),this.getField("pedido_modal_ver_mas").setValue(e.numero_pedido),this.traerCostoBodega(),this.traerExistenciaBodega()}},{key:"traerCostoBodega",value:function(e){var t={p_codigo:this.getField("p_codigo").getValue(),p_bodega:this.getField("p_bodega").getValue()};this.generalFormat.nombre_accion="528_permite_traer_costo_bodega",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTraerCostoBodega,error:this.error_,general:this.generalFormat})}},{key:"successTraerCostoBodega",value:function(e){console.log("successTraerCostoBodega",e),200===e.estado_p&&this.getField("costo_bodega").setValue(e.data[0].costo_producto)}},{key:"traerExistenciaBodega",value:function(){var e={p_codigo:this.getField("p_codigo").getValue(),p_bodega:this.getField("p_bodega").getValue()};this.generalFormat.nombre_accion="528_permite_traer_existencia_bodega",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerExistenciaBodega,error:this.error_,general:this.generalFormat})}},{key:"successTraerExistenciaBodega",value:function(e){console.log("traerExistenciaBodega",e),200===e.estado_p&&this.getField("existencias").setValue(e.data[0].existencia)}},{key:"cerrarModalVerMas",value:function(){this.getField("modal_ver_mas").handleClose()}},{key:"setModalAutorizar",value:function(e){var t=this,i=document.createElement("input");return i.setAttribute("id","id_autorizar"),i.setAttribute("value","Autorizar"),i.setAttribute("type","button"),"A"===e.data.estado?(i.setAttribute("style","width:90px;height: 20px; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("disabled",!0)):(i.onclick=function(){return t.openModalAutorizar(e.data)},i.setAttribute("style","width:90px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303F9F;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("value","Autorizar")),i}},{key:"openModalAutorizar",value:function(e){this.getField("modal_autorizar").setLabel("Autorizar"),this.getField("modal_autorizar").handleClickOpen(),this.getField("pedido_modal_autorizar").setValue(e.numero_pedido),this.getField("nit_modal_autorizar").setValue(this.getField("nit").getValue()),this.getField("sede_modal_autorizar").setValue(this.getField("sede").getValue()),this.getField("nombre_modal_autorizar").setValue(this.getField("ncliente").getValue()),this.getField("codigo_producto_modal_autorizar").setValue(e.codigo),this.getField("nombre_producto_modal_autorizar").setValue(e.narticulo),this.getField("id").setValue(e.id)}},{key:"cerrarModal",value:function(){this.getField("modal_autorizar").handleClose()}},{key:"ModificarPedidoProducto",value:function(e){var t={id:this.getField("id").getValue(),detalle:this.getField("detalle").getValue(),estado:"A"};this.generalFormat.nombre_accion="528_permite_modificar_autorizarpedidoproducto",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successAutorizarPedidoProducto,error:this.error_,general:this.generalFormat})}},{key:"successAutorizarPedidoProducto",value:function(e){200===e.estado_p&&(console.log("autorizados",e),this.cerrarModal(),this.traeNumeroPedido())}},{key:"setModalRechazar",value:function(e){var t=this,i=document.createElement("input");return i.setAttribute("id","id_rechazar"),i.setAttribute("value","Rechazar"),i.setAttribute("type","button"),"R"===e.data.estado?(i.setAttribute("style","width:90px;height: 20px; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("disabled",!0)):(i.onclick=function(){return t.openModalRechazar(e.data)},i.setAttribute("style","width:90px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303F9F;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("value","Rechazar")),i}},{key:"openModalRechazar",value:function(e){this.getField("modal_rechazar").setLabel("Rechazar"),this.getField("modal_rechazar").handleClickOpen(),this.getField("pedido_modal_rechazar").setValue(e.numero_pedido),this.getField("nit_modal_rechazar").setValue(this.getField("nit").getValue()),this.getField("sede_modal_rechazar").setValue(this.getField("sede").getValue()),this.getField("nombre_modal_rechazar").setValue(this.getField("ncliente").getValue()),this.getField("codigo_producto_modal_rechazar").setValue(e.codigo),this.getField("nombre_producto_modal_rechazar").setValue(e.narticulo),this.getField("id").setValue(e.id)}},{key:"cerrarModalRechazar",value:function(){this.getField("modal_rechazar").handleClose()}},{key:"rechazarPedidoProducto",value:function(){var e={id:this.getField("id").getValue(),detalle:this.getField("dellate_modal_rechazar").getValue(),estado:"R"};this.generalFormat.nombre_accion="528_permite_actualizar_rechazar_pedido_producto",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successRechazarPedidoProducto,error:this.error_,general:this.generalFormat})}},{key:"successRechazarPedidoProducto",value:function(e){200===e.estado_p&&(this.cerrarModalRechazar(),this.traeNumeroPedido())}}]),i}(d.a.form);d.a.addController("AutorizPedidos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successItemFichas=o.successItemFichas.bind(Object(s.a)(o)),o.id_ficha=0,o.grabarTodo=o.grabarTodo.bind(Object(s.a)(o)),o.devolverTodo=o.devolverTodo.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.service.send(this.getConstant().searchFormat().format(this.props.data.id_ficha,"listaAutorizarCalidad","servicio",this.formId),"GET",void 0,this.successItemFichas,this.error_),this.getField("btnAutorizarCalidad").setClick(this.grabarTodo),this.getField("btnDevolverAutorizar").setClick(this.devolverTodo)}},{key:"successItemFichas",value:function(e){200===e.estado_p&&this.getField("listaAutorizarCalidad").setItemsFichas(e.model)}},{key:"grabarTodo",value:function(){if(this.getField("observacionAutorizar").valid()){var e={accion:"servicio",campo:"btnAutorizarCalidad",id_formulario:this.formId,observaciones_calidad:this.getField("observacionAutorizar").getValue(),id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"PUT",e,this.successCloseEstage,this.error_)}}},{key:"devolverTodo",value:function(){var e={accion:"servicio",campo:"btnDevolverAutorizar",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"POST",e,this.successCloseEstage,this.error_)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.handlerClickButton=o.handlerClickButton.bind(Object(s.a)(o)),o.consultarTurno=o.consultarTurno.bind(Object(s.a)(o)),o.successAsignar=o.successAsignar.bind(Object(s.a)(o)),o.cancelarTurno=o.cancelarTurno.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"setValueField",value:function(e,t){var i=this.getField(e);i&&i.setValue(t)}},{key:"initForm",value:function(){this.buttons.has("btn_show")&&this.buttons.get("btn_show").ref.current.setClick(this.handlerClickButton)}},{key:"handlerClickButton",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!0),this.buttons.get("btn_change").ref.current.setDisabled(!0),this.buttons.get("btn_delete").ref.current.setDisabled(!0),this.getField("codigo_usuario").setDisabled(!1),this.getField("codigo_concepto").setDisabled(!1),this.getField("estadoactivo_id").setDisabled(!1),this.getField("btnConsultar").setVisible(!0),this.getField("btnConsultar").setDisabled(!1),this.getField("btnCancelar").setVisible(!0),this.getField("btnCancelar").setDisabled(!1),this.getField("btnConsultar").setClick(this.consultarTurno),this.getField("btnCancelar").setClick(this.cancelarTurno)}},{key:"cancelarTurno",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!1),this.buttons.get("btn_change").ref.current.setDisabled(!1),this.buttons.get("btn_delete").ref.current.setDisabled(!1),this.getField("codigo_usuario").setDisabled(!0),this.getField("codigo_concepto").setDisabled(!0),this.getField("estadoactivo_id").setDisabled(!0),this.getField("btnConsultar").setVisible(!1),this.getField("btnConsultar").setDisabled(!0),this.getField("btnCancelar").setVisible(!1),this.getField("btnCancelar").setDisabled(!0),this.getField("tablaConsulta").toggle(!1)}},{key:"consultarTurno",value:function(){var e=this.getField("codigo_usuario").getValue();this.service.send(this.getConstant().searchFormat().format(e,"btnConsultar","servicio",this.formId),"GET",void 0,this.successAsignar,this.error)}},{key:"successAsignar",value:function(e){200===e.estado_p&&(this.gridOptions.rowData=e.model,this.getField("tablaConsulta").initData(this.gridOptions))}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.dataRetrieve=o.dataRetrieve.bind(Object(s.a)(o)),o.showTB=o.showTB.bind(Object(s.a)(o)),o.setDelete=o.setDelete.bind(Object(s.a)(o)),o.delete=o.delete.bind(Object(s.a)(o)),o.refreshTB=o.refreshTB.bind(Object(s.a)(o)),o.save=o.save.bind(Object(s.a)(o)),o.sendOnSave=o.sendOnSave.bind(Object(s.a)(o)),o.successSaveChild=o.successSaveChild.bind(Object(s.a)(o)),o.gridOptionsOnShowTB=Object.assign({},o.gridOptions),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.dataRetrieve(),this.getField("bt_grabar").setClick(this.save)}},{key:"dataRetrieve",value:function(){this.generalFormat.nombre_accion="servicio_ajustes_usuarios-todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.showTB,error:this.error_,general:this.generalFormat})}},{key:"showTB",value:function(e){var t=new Map;t.set("accion",{cellRenderer:this.setDelete,field:"Acci\xf3n"}),this.gridOptionsOnShowTB.rowData=e.model,this.getField("tb_conceptos_ajustes").initData(this.gridOptionsOnShowTB,t)}},{key:"save",value:function(){var e=new Date,t=this.getField("vigencia_desde").getValue().replace("-",","),i=this.getField("vigencia_hasta").getValue().replace("-",","),a=new Date(t.replace("-",",")),o=new Date(i.replace("-",","));console.log("Today: ",e),console.log("Since: ",a),console.log("Until: ",o),""!==this.getField("nombre_concepto").getValue()&&""!==this.getField("nombre_usuario").getValue()?(console.log("usuarios"),a.getFullYear()>e.getFullYear()?(console.log("full year >>>>>"),o.getFullYear()===a.getFullYear()&&o.getMonth()===a.getMonth()&&o.getDate()===a.getDate()?this.alertGeneral.toggle(!0,'La fecha en "Vigencia desde" no puede ser IGUAL a la fecha en "Vigencia Hasta"',"error"):a>o?(this.alertGeneral.toggle(!0,'La fecha en "Vigencia desde" no puede ser SUPERIOR a la fecha en "Vigencia Hasta"',"error"),console.log("AAAAAAAAAAAAAAAAb")):a>e&&a<o&&this.sendOnSave()):(console.log("fullyear else"),a.getFullYear()===e.getFullYear()?(console.log("full year ==="),a.getMonth()>e.getMonth()?(console.log("getMonth >"),o.getFullYear()===a.getFullYear()&&o.getMonth()===a.getMonth()&&o.getDate()===a.getDate()?this.alertGeneral.toggle(!0,'La fecha en "Vigencia desde" no puede ser IGUAL a la fecha en "Vigencia Hasta"',"error"):a>o?(this.alertGeneral.toggle(!0,'La fecha en "Vigencia desde" no puede ser SUPERIOR a la fecha en "Vigencia Hasta"',"error"),console.log("AAAAAAAAAAAAAAAAb")):a>e&&a<o&&this.sendOnSave()):a.getMonth()===e.getMonth()?(console.log("getMonth >"),a.getDate()>e.getDate()?o.getFullYear()===a.getFullYear()&&o.getMonth()===a.getMonth()&&o.getDate()===a.getDate()?this.alertGeneral.toggle(!0,'La fecha en "Vigencia desde" no puede ser IGUAL a la fecha en "Vigencia Hasta"',"error"):a>o?(this.alertGeneral.toggle(!0,'La fecha en "Vigencia desde" no puede ser SUPERIOR a la fecha en "Vigencia Hasta"',"error"),console.log("AAAAAAAAAAAAAAAAb")):a>e&&a<o&&this.sendOnSave():(this.alertGeneral.toggle(!0,'La fecha en "Vigencia desde" no puede ser igual a la fecha actual.',"error"),console.log("ddddddddddddddddd"))):this.alertGeneral.toggle(!0,'La fecha en "Vigencia desde" no puede ser anterior a la fecha actual. Revise el mes.',"error")):(this.alertGeneral.toggle(!0,'La fecha en "Vigencia desde" no puede ser anterior a la fecha actual. Revise el a\xf1o.',"error"),console.log("cccccccccccccccccccccccc")))):this.alertGeneral.toggle(!0,'Por favor revise los campos de "Usuario" y "Concepto", antes de grabar el registro.',"error")}},{key:"sendOnSave",value:function(){var e={vigencia_desde:this.getField("vigencia_desde").getValue(),vigencia_hasta:this.getField("vigencia_hasta").getValue(),conceptos_ajuste_id:parseInt(this.getField("conceptos_ajuste_id").getValue()),usuario_id:parseInt(this.getField("usuario_id").getValue())};this.generalFormat.nombre_accion="servicio_ajustes_usuarios-crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successSaveChild,error:this.error_,general:this.generalFormat})}},{key:"successSaveChild",value:function(e){502===e.estado_p?this.alertGeneral.toggle(!0,"Por favor verifique los datos. Recuerde que no se pueden duplicar registros.","error"):200===e.estado_p&&(this.alertGeneral.toggle(!0,"Registro guardado con \xe9xito.","success"),this.getField("codigo_concepto").setValue(""),this.getField("codigo_usuario").setValue(""),this.getField("nombre_usuario").setValue(""),this.getField("nombre_concepto").setValue(""),this.getField("vigencia_desde").setValue(""),this.getField("vigencia_hasta").setValue(""),this.dataRetrieve())}},{key:"setDelete",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.delete(e.data.id)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"delete",value:function(e){var t={id:e};this.generalFormat.nombre_accion="servicio_ajustes_usuarios-eliminar",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.refreshTB,error:this.error_,general:this.generalFormat})}},{key:"refreshTB",value:function(e){200===e.estado_p&&(this.alertGeneral.toggle(!0,"Registro eliminado con \xe9xito.","success"),this.getField("codigo_concepto").setValue(""),this.getField("codigo_usuario").setValue(""),this.getField("nombre_usuario").setValue(""),this.getField("nombre_concepto").setValue(""),this.getField("vigencia_desde").setValue(""),this.getField("vigencia_hasta").setValue("")),this.dataRetrieve()}}]),i}(d.a.form);d.a.addController("conceptosAjustes",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).onSelectionChanged=function(){var e=o.gridOptions.api.getSelectedRows(),t=e[0].id,i=e[0].codigo_vendedor,a={};a.id=t,a.codigo_vendedor=i;var s=e[0].autorizarestadosino_id;void 0===s||1===s?(e[0].autorizarestadosino_id=2,s=e[0].autorizarestadosino_id,a.autorizarestadosino_id=s):2===s?(e[0].autorizarestadosino_id=1,s=e[0].autorizarestadosino_id,a.autorizarestadosino_id=s):(e[0].autorizarestadosino_id=2,s=e[0].autorizarestadosino_id,a.autorizarestadosino_id=s);var r={id_formulario:o.formId,accion:"f9_servicio",campo:"tabla_vendedores",codigo_vendedor:a.codigo_vendedor,autorizarestadosino_id:a.autorizarestadosino_id,id:a.id};o.autorizarVendedor(r)},o.error_=function(e){},o.initForm=o.initForm.bind(Object(s.a)(o)),o.updateTable=o.updateTable.bind(Object(s.a)(o)),o.successAutorizarVandedor=o.successAutorizarVandedor.bind(Object(s.a)(o)),o.autorizarVendedor=o.autorizarVendedor.bind(Object(s.a)(o)),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.gridOptions.onSelectionChanged=this.onSelectionChanged,this.service.send(this.getConstant().searchFormat().format("","tabla_vendedores","servicio",this.formId),"GET",void 0,this.updateTable,this.error_)}},{key:"autorizarVendedor",value:function(e){this.service.send(this.getConstant().formSave(),"PUT",e,this.successAutorizarVandedor,this.error_)}},{key:"successAutorizarVandedor",value:function(e){200===e.estado_p&&this.service.send(this.getConstant().searchFormat().format("","tabla_vendedores","servicio",this.formId),"GET",void 0,this.updateTable,this.error_)}},{key:"updateTable",value:function(e){e.model.length>0?(this.gridOptions.rowData=e.model,this.getField("tabla_vendedores").initData(this.gridOptions)):this.getField("tabla_vendedores").toggle(!1)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.consultarTabla=o.consultarTabla.bind(Object(s.a)(o)),o.gridOptionsTB=Object.assign({},o.gridOptions),o.successTablaFechas=o.successTablaFechas.bind(Object(s.a)(o)),o.setButtonPdf=o.setButtonPdf.bind(Object(s.a)(o)),o.pdfEspecification=o.pdfEspecification.bind(Object(s.a)(o)),o.cambioTodo=o.cambioTodo.bind(Object(s.a)(o)),o.cambioConsaldo=o.cambioConsaldo.bind(Object(s.a)(o)),o.successGenerarPdf=o.successGenerarPdf.bind(Object(s.a)(o)),o.successTraerCliente=o.successTraerCliente.bind(Object(s.a)(o)),o.tipo="",o}return Object(o.a)(i,[{key:"initForm",value:function(){this.generalFormat.nombre_accion="Servicio_estado_cuenta_b2b_clientes_por_defecto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successTraerCliente,error:this.error_,general:this.generalFormat}),this.getField("consultarBT").setClick(this.consultarTabla),this.getField("todo").setOnChange(this.cambioTodo),this.getField("consaldo").setOnChange(this.cambioConsaldo)}},{key:"successTraerCliente",value:function(e){if(200===e.estado_p){var t=e.data[0].nit,i=e.data[0].nombre,a=e.data[0].sede;this.getField("nit_cliente").setValue(t),this.getField("nombre").setValue(i),this.getField("sede").setValue(a)}}},{key:"cambioTodo",value:function(){2===this.getField("todo").getValue()?this.tipo="todo":this.tipo="saldo"}},{key:"cambioConsaldo",value:function(){2===this.getField("consaldo").getValue()?this.tipo="saldo":this.tipo="todo"}},{key:"consultarTabla",value:function(){if(2===this.getField("todo").getValue()&&2===this.getField("consaldo").getValue())this.alertGeneral.toggle(!0,'Debe elegir una opci\xf3n ("Todo" \xf3 "Con Saldo")',"error");else if(1===this.getField("todo").getValue()&&1===this.getField("consaldo").getValue())this.alertGeneral.toggle(!0,'Debe elegir solo una opci\xf3n ("Todo" \xf3 "Con Saldo")',"error");else{var e={nit:this.getField("nit_cliente").getValue(),sede:parseInt(this.getField("sede").getValue()),tipo:this.tipo};this.generalFormat.nombre_accion="Servicio_estado_cuenta_b2b_cuentas_por_cobrar",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaFechas,error:this.error_,general:this.generalFormat})}}},{key:"successTablaFechas",value:function(e){if(200===e.estado_p){this.gridOptionsTB.rowData=[],this.getField("estadocuentaTB").initData(this.gridOptionsTB);var t=new Map;t.set(6,{cellRenderer:this.setButtonPdf,field:"accion"}),this.gridOptionsTB.rowData=e.model,this.getField("estadocuentaTB").initData(this.gridOptionsTB,t)}else this.getField("estadocuentaTB").toggle(!1)}},{key:"setButtonPdf",value:function(e){var t=this,i=e.data.numero,a=document.createElement("input");return a.onclick=function(){return t.pdfEspecification(i)},a.setAttribute("id","button_pdf_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Pdf"),a}},{key:"pdfEspecification",value:function(e){var t={tipo:this.tipo,nit:this.getField("nit_cliente").getValue(),sede:parseInt(this.getField("sede").getValue())};this.generalFormat.nombre_accion="Servicio_estado_cuenta_b2b_imprimir_cuentas_por_cobrar_ns",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successGenerarPdf,error:this.error_,general:this.generalFormat})}},{key:"successGenerarPdf",value:function(e){if(200===e.estado_p){var t=e.data[0].url;this.getField("cargarPdf").setValue(t),this.getField("cargarPdf").openFile(!0)}}}]),i}(d.a.form);d.a.addController("est_cuent",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosSelect=o.successDatosSelect.bind(Object(s.a)(o)),o.consultarTabla=o.consultarTabla.bind(Object(s.a)(o)),o.successTablaFechas=o.successTablaFechas.bind(Object(s.a)(o)),o.setButtonPdf=o.setButtonPdf.bind(Object(s.a)(o)),o.pdfEspecification=o.pdfEspecification.bind(Object(s.a)(o)),o.successGenerarPdf=o.successGenerarPdf.bind(Object(s.a)(o)),o.gridOptionsTB=Object.assign({},o.gridOptions),o.changeFecha=o.changeFecha.bind(Object(s.a)(o)),o.successTraerCliente=o.successTraerCliente.bind(Object(s.a)(o)),o.mes=0,o.anio=0,o.opciones=[],o}return Object(o.a)(i,[{key:"initForm",value:function(){this.generalFormat.nombre_accion="Servicio_facturas_b2b_traer_cliente_por_defecto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successTraerCliente,error:this.error_,general:this.generalFormat});var e=new Date;this.anio=e.getFullYear(),this.mes=e.getMonth()+1;var t={anio:this.anio,mes:this.mes,numero_meses_devolver:24};this.generalFormat.nombre_accion="Servicio_facturas_b2b_traer_periodos_tiempo_mese_desc_dev",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successDatosSelect,error:this.error_,general:this.generalFormat}),this.getField("consultar").setClick(this.consultarTabla)}},{key:"successTraerCliente",value:function(e){if(200===e.estado_p){var t=e.data[0].nit,i=e.data[0].nombre,a=e.data[0].sede;this.getField("nit_cliente").setValue(t),this.getField("nombre").setValue(i),this.getField("sede").setValue(a)}}},{key:"successDatosSelect",value:function(e){var t=this;this.opciones=[{text:"Ninguno",anio:"",mes:"",campos_cambian:{}}],200===e.estado_p?(e.data.forEach((function(e){var i={};i.anio=e.a\u00f1o,i.mes=e.mes,i.text="".concat(e.fecha),i.campos_cambian={codigo_bodegaCodME:e.fecha},t.opciones.push(i)})),this.getField("periodo").setOptions(this.opciones)):this.getField("periodo").setOptions(this.opciones),this.getField("periodo").setOnChange(this.changeFecha)}},{key:"changeFecha",value:function(){var e=this;this.opciones.forEach((function(t,i){t.text===e.getField("periodo").getValue()&&(e.anio=t.anio,e.mes=t.mes)}))}},{key:"consultarTabla",value:function(){var e={nit:this.getField("nit_cliente").getValue(),sede:parseInt(this.getField("sede").getValue()),anio:this.anio,mes:this.mes};this.generalFormat.nombre_accion="Servicio_facturas_b2b_traer_facturas_por_cliente_nit_sede",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaFechas,error:this.error_,general:this.generalFormat})}},{key:"successTablaFechas",value:function(e){if(200===e.estado_p){this.gridOptionsTB.rowData=[],this.getField("facturasTB").initData(this.gridOptionsTB);var t=new Map;t.set(6,{cellRenderer:this.setButtonPdf,field:"accion"}),this.gridOptionsTB.rowData=e.model,this.getField("facturasTB").initData(this.gridOptionsTB,t)}else this.getField("facturasTB").toggle(!1)}},{key:"setButtonPdf",value:function(e){var t=this,i=e.data.numero,a=document.createElement("input");return a.onclick=function(){return t.pdfEspecification(i)},a.setAttribute("id","button_pdf_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Pdf"),a}},{key:"pdfEspecification",value:function(e){var t={numero_factura:e,nit:this.getField("nit_cliente").getValue(),sede:parseInt(this.getField("sede").getValue())};this.generalFormat.nombre_accion="Servicio_facturas_b2b_imprimir_factura_numero_nit_sede",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successGenerarPdf,error:this.error_,general:this.generalFormat})}},{key:"successGenerarPdf",value:function(e){if(200===e.estado_p){var t=e.data[0].url;this.getField("cargarPdf").setValue(t),this.getField("cargarPdf").openFile(!0)}}}]),i}(d.a.form);d.a.addController("form_facturacion",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.dibujarSelectCodigoOperacion=o.dibujarSelectCodigoOperacion.bind(Object(s.a)(o)),o.successDibujarSelectCodigoOperacion=o.successDibujarSelectCodigoOperacion.bind(Object(s.a)(o)),o.codigoOperacionId=0,o.codigoOperacion="",o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Bancos Cuentas Oficinas Operaciones Detalles, @version: 1.01.0011_1, @author: Sebastian Rios Echeverri"),this.codigoOperacionId=this.getField("bancos_oficinas_cuentas_operaciones_id").getValue(),this.codigoOperacion=this.getField("codigo_operacion").getValue(),this.getField("bancos_cuentas_id").setOnChange(this.dibujarSelectCodigoOperacion),this.getField("bancos_oficinas_cuentas_operaciones_id").setOnChange(this.dibujarSelectCodigoOperacion(!1)),this.getField("codigo_operacion").setOnChange(this.dibujarSelectCodigoOperacion(!1)),this.dibujarSelectCodigoOperacion(!1)}},{key:"dibujarSelectCodigoOperacion",value:function(e){if(this.codigoOperacionId=this.getField("bancos_oficinas_cuentas_operaciones_id").getValue(),this.codigoOperacion=this.getField("codigo_operacion").getValue(),""!==this.getField("bancos_cuentas_id").getValue()&&" "!==this.getField("bancos_cuentas_id").getValue()){var t={value:this.getField("bancos_cuentas_id").getValue()};this.generalFormat.nombre_accion="bancosCtasOfiOperaD_s_oficinas_operaciones_todoscuenta_1203",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successDibujarSelectCodigoOperacion,error:this.error_,general:this.generalFormat,showMessage:e})}else if(""===this.getField("bancos_cuentas_id").getValue()){this.getField("codigo_operacion_id").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}])}else if(""!==this.getField("bancos_oficinas_cuentas_operaciones_id").getValue()&&" "!==this.getField("bancos_oficinas_cuentas_operaciones_id").getValue()&&""!==this.getField("codigo_operacion").getValue()&&" "!==this.getField("codigo_operacion").getValue()){var i=[{text:this.codigoOperacion,value:this.codigoOperacionId,campos_cambian:{}}];this.getField("codigo_operacion_id").setOptions(i)}}},{key:"successDibujarSelectCodigoOperacion",value:function(e){if(200===e.estado_p){if(""!==this.getField("bancos_cuentas_id").getValue()&&" "!==this.getField("bancos_cuentas_id").getValue()){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.codigo_operacion,i.campos_cambian={bancos_oficinas_cuentas_operaciones_id:e.id},t.push(i)})),this.getField("codigo_operacion_id").setOptions(t),this.codigoOperacionId>0&&this.getField("codigo_operacion_id").setValue(this.codigoOperacionId)}}else{this.getField("codigo_operacion_id").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}])}}}]),i}(d.a.form);d.a.addController("bancosCtasOfiOperaD",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.cargarSelectSeparador=o.cargarSelectSeparador.bind(Object(s.a)(o)),o.onClickSave=o.handlerClickSave.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("funciones adicionales al formulario Bancos cuentas oficinas operaciones, @version: 2, @author: Jose Albeiro Marin"),this.cargarSelectSeparador()}},{key:"cargarSelectSeparador",value:function(){var e=[];e=[{text:"Ninguno",value:".",campos_cambian:{}}],[{valor:",",text:","},{valor:";",text:";"},{valor:"|",text:"|"}].forEach((function(t){var i={};i.value=t.valor,i.text=t.text,i.campos_cambian={separador_select:t.valor},e.push(i)})),this.getField("separador").setOptions(e)}},{key:"handlerClickSave",value:function(){var e="",t=!0;if(e=""===this.getField("separador_select").getValue()?",":this.getField("separador_select").getValue(),"."===this.getField("separador").getValue()&&(t=!1),!0===t&&this.getField("bancos_cuentas_id").valid()&&this.getField("codigo_operacion").valid()&&this.getField("estadoactivo_id").valid()&&this.getField("columna").valid()){this.getField("separador").setError(!1,"*Este campo es requerido");var i="POST",a="1202-Servicio_bancos_cuent_ofici_operac_crear",o={bancos_cuentas_id:this.getField("bancos_cuentas_id").getValue(),codigo_operacion:this.getField("codigo_operacion").getValue(),estadoactivo_id:this.getField("estadoactivo_id").getValue(),separador:e,columna:this.getField("columna").getValue()};this.getField("id").getValue()&&void 0!==this.getField("id").getValue()&&(i="PUT",o.id=this.getField("id").getValue(),a="1202-Servicio_bancos_cuentas_ofici_opera_modificar"),this.generalFormat.nombre_accion=a,this.service.send({endpoint:this.constant.formConfiguration(),method:i,body:o,success:this.successSave,error:this.error_,general:this.generalFormat})}else t||this.getField("separador").setError(!0,"*Este campo es requerido")}}]),i}(d.a.form);d.a.addController("bancosCtasOfiOpera",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsBannerPrincipal=Object.assign({},o.gridOptions),o.successDataTable=o.successDataTableBanner.bind(Object(s.a)(o)),o.setButtonEnviar=o.setButtonEnviar.bind(Object(s.a)(o)),o.enviarBanner=o.enviarBanner.bind(Object(s.a)(o)),o.successSubirBanner=o.successSubirBanner.bind(Object(s.a)(o)),o.handlerClickButtonSave=o.handlerClickButtonSave.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.successSave=this.handlerClickButtonSave}},{key:"handlerClickButtonSave",value:function(e){console.log("Entra a limpiar la imagen..............."),this.getField("imagen").handleSave([]),void 0!==e.estado_p&&200!==e.estado_p||(this.state.data={},this.getField("fieldAlert").toggle(!0,void 0===e.mensaje?void 0===e.model?"Acci\xf3n Exitosa":void 0!==e.model.mensaje?e.model.mensaje:"Acci\xf3n Exitosa":e.mensaje,"success"),this.toggleFields(!0),this.toggleButton(!0),this.buttons.get("btn_save").ref.current.setVisible(!1),this.buttons.get("btn_cancel").ref.current.setVisible(!1),this.clearFields(),void 0!==e.model&&("string"===typeof e.model&&(e.model=JSON.parse(e.model)),this.state.data=e.model,this.loadData()),void 0!==this.buttons.get(this.buttonSelect)&&this.buttons.get(this.buttonSelect).ref.current.success())}},{key:"successDataTableBanner",value:function(e){if(this.getField("imagen").handleSave([]),e.model&&e.model.length>0){this.gridOptionsTableDefault.rowData=e.model;var t=new Map;t.set(6,{cellRenderer:this.setButtonEnviar,field:"Accion Enviar",width:90}),this.getField("tableShowData").initData(this.gridOptionsTableDefault,t)}else this.getField("tableShowData").toggle(!1)}},{key:"setButtonEnviar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.enviarBanner(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Enviar"),i}},{key:"enviarBanner",value:function(e){if(this.getField("id").setValue(e),this.getField("id").valid()){var t={value:this.getField("id").getValue()};this.generalFormat.nombre_accion="358_Sube_a_elasticsearch_un_registro_de_banner_principal",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successSubirBanner,error:this.error_,general:this.generalFormat})}}},{key:"successSubirBanner",value:function(e){200===e.estado_p&&this.onClickShowTable()}}]),i}(d.a.form);d.a.addController("banner_principal",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsBannerPrincipal=Object.assign({},o.gridOptions),o.successDataTable=o.successDataTableBanner.bind(Object(s.a)(o)),o.setButtonEnviar=o.setButtonEnviar.bind(Object(s.a)(o)),o.enviarBanner=o.enviarBanner.bind(Object(s.a)(o)),o.successSubirBanner=o.successSubirBanner.bind(Object(s.a)(o)),o.handlerClickButtonSave=o.handlerClickButtonSave.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.successSave=this.handlerClickButtonSave}},{key:"handlerClickButtonSave",value:function(e){console.log("Entra a limpiar la imagen..............."),this.getField("imagen").handleSave([]),void 0!==e.estado_p&&200!==e.estado_p||(this.state.data={},this.getField("fieldAlert").toggle(!0,void 0===e.mensaje?void 0===e.model?"Acci\xf3n Exitosa":void 0!==e.model.mensaje?e.model.mensaje:"Acci\xf3n Exitosa":e.mensaje,"success"),this.toggleFields(!0),this.toggleButton(!0),this.buttons.get("btn_save").ref.current.setVisible(!1),this.buttons.get("btn_cancel").ref.current.setVisible(!1),this.clearFields(),void 0!==e.model&&("string"===typeof e.model&&(e.model=JSON.parse(e.model)),this.state.data=e.model,this.loadData()),void 0!==this.buttons.get(this.buttonSelect)&&this.buttons.get(this.buttonSelect).ref.current.success())}},{key:"successDataTableBanner",value:function(e){if(this.getField("imagen").handleSave([]),e.model&&e.model.length>0){this.gridOptionsTableDefault.rowData=e.model;var t=new Map;t.set(6,{cellRenderer:this.setButtonEnviar,field:"Accion Enviar",width:90}),this.getField("tableShowData").initData(this.gridOptionsTableDefault,t)}else this.getField("tableShowData").toggle(!1)}},{key:"setButtonEnviar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.enviarBanner(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Enviar"),i}},{key:"enviarBanner",value:function(e){if(this.getField("id").setValue(e),this.getField("id").valid()){var t={value:this.getField("id").getValue()};this.generalFormat.nombre_accion="359_Sube_a_elasticsearch_un_registro_de_banner_secundario",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successSubirBanner,error:this.error_,general:this.generalFormat})}}},{key:"successSubirBanner",value:function(e){200===e.estado_p&&this.onClickShowTable()}}]),i}(d.a.form);d.a.addController("banner_secundario",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.agregarCliente=o.agregarCliente.bind(Object(s.a)(o)),o.initModal=o.initModal.bind(Object(s.a)(o)),o.guardarCliente=o.guardarCliente.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.mostrarProductos=o.mostrarProductos.bind(Object(s.a)(o)),o.successProductosClientes=o.successProductosClientes.bind(Object(s.a)(o)),o.successDatosClientes2=o.successDatosClientes2.bind(Object(s.a)(o)),o.addProdutoACliente=o.addProdutoACliente.bind(Object(s.a)(o)),o.totalProducto=o.totalProducto.bind(Object(s.a)(o)),o.descuentoChange=o.descuentoChange.bind(Object(s.a)(o)),o.successDatosClientes=o.successDatosClientes.bind(Object(s.a)(o)),o.setButtonValorActual=o.setButtonValorActual.bind(Object(s.a)(o)),o.setButtonDeleteProducto=o.setButtonDeleteProducto.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.formatearPrecios=o.formatearPrecios.bind(Object(s.a)(o)),o.successUploadTable=o.successUploadTable.bind(Object(s.a)(o)),o.buscarClientes=o.buscarClientes.bind(Object(s.a)(o)),o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.eliminarProducto=o.eliminarProducto.bind(Object(s.a)(o)),o.confirmDeleteCustom=o.confirmDeleteCustom.bind(Object(s.a)(o)),o.mostrarClientes=o.mostrarClientes.bind(Object(s.a)(o)),o.successDatosClientes3=o.successDatosClientes3.bind(Object(s.a)(o)),o.initFacturar=o.initFacturar.bind(Object(s.a)(o)),o.successGuardarDescuento=o.successGuardarDescuento.bind(Object(s.a)(o)),o.successFacturarCliente=o.successFacturarCliente.bind(Object(s.a)(o)),o.formatearCambio=o.formatearCambio.bind(Object(s.a)(o)),o.datosClienteModificar=o.datosClienteModificar.bind(Object(s.a)(o)),o.initInfoCliente=o.initInfoCliente.bind(Object(s.a)(o)),o.successInfoCliente=o.successInfoCliente.bind(Object(s.a)(o)),o.successGuardarDatosCliente=o.successGuardarDatosCliente.bind(Object(s.a)(o)),o.guardarInfoCliente=o.guardarInfoCliente.bind(Object(s.a)(o)),o.successModificarDescuento=o.successModificarDescuento.bind(Object(s.a)(o)),o.guardarFacturacion=o.guardarFacturacion.bind(Object(s.a)(o)),o.successPagoFactura=o.successPagoFactura.bind(Object(s.a)(o)),o.initModalProductos=o.initModalProductos.bind(Object(s.a)(o)),o.successGuardarCliente=o.successGuardarCliente.bind(Object(s.a)(o)),o.guardarProducto=o.guardarProducto.bind(Object(s.a)(o)),o.addProductoCliente=o.addProductoCliente.bind(Object(s.a)(o)),o.successGuardarProducto=o.successGuardarProducto.bind(Object(s.a)(o)),o.formatearNombre=o.formatearNombre.bind(Object(s.a)(o)),o.setButtonFacturarProducto=o.setButtonFacturarProducto.bind(Object(s.a)(o)),o.habilitarCredito=o.habilitarCredito.bind(Object(s.a)(o)),o.successGuardarDatosClienteSinFacturar=o.successGuardarDatosClienteSinFacturar.bind(Object(s.a)(o)),o.habilitarDebito=o.habilitarDebito.bind(Object(s.a)(o)),o.seguir=!1,o.validDebito=!1,o.validCredito=!1,o.totalFactura=0,o.precio_cliente="",o.id_cliente=0,o.dataCliente=[],o.totalCantidadProductos=0,o.gridOptionsProducto=Object.assign({},o.gridOptions),o.pedidosPendientesCaja=o.pedidosPendientesCaja.bind(Object(s.a)(o)),o.consultarCodigoFacturacion=o.consultarCodigoFacturacion.bind(Object(s.a)(o)),o.precio_base=0,o.totalProducto2=o.totalProducto2.bind(Object(s.a)(o)),o.recuperarDepto=o.recuperarDepto.bind(Object(s.a)(o)),o.successRecuperarDepto=o.successRecuperarDepto.bind(Object(s.a)(o)),o.deptoIdCliente=0,o.recuperarCiudades=o.recuperarCiudades.bind(Object(s.a)(o)),o.successRecuperarCiudades=o.successRecuperarCiudades.bind(Object(s.a)(o)),o.ciudadIdCliente=0,o.recuperarTipoDoc=o.recuperarTipoDoc.bind(Object(s.a)(o)),o.successRecuperarTipoDoc=o.successRecuperarTipoDoc.bind(Object(s.a)(o)),o.tipoDocumentoId=0,o.recuperarAgenteRet=o.recuperarAgenteRet.bind(Object(s.a)(o)),o.successRecuperarAgenteRet=o.successRecuperarAgenteRet.bind(Object(s.a)(o)),o.agenteRetenedorCodigo="",o.abrirModalFactura=o.abrirModalFactura.bind(Object(s.a)(o)),o.modificarMostradorCliente=o.modificarMostradorCliente.bind(Object(s.a)(o)),o.datoFactura="",o.validarDescuentoMax=o.validarDescuentoMax.bind(Object(s.a)(o)),o.successValidarDescuentoMax=o.successValidarDescuentoMax.bind(Object(s.a)(o)),o.successValidarDescuento=o.successValidarDescuento.bind(Object(s.a)(o)),o.nitCliente="",o.sedeCliente=0,o.preciosCliente="",o.traerProductosCoincidenciaNombreCoincidenciaMarca=o.traerProductosCoincidenciaNombreCoincidenciaMarca.bind(Object(s.a)(o)),o.gridOptionsProductos=Object.assign({},o.gridOptions),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.gridOptionsProductos.onSelectionChanged=o.onSelectionChanged,o.filaSeleccionadaGrid=[],o.habilitarBusquedaNombreMarca=o.habilitarBusquedaNombreMarca.bind(Object(s.a)(o)),o.mensajeErrorProducto=o.mensajeErrorProducto.bind(Object(s.a)(o)),o.consumirServicioModificarMostradorCliente=o.consumirServicioModificarMostradorCliente.bind(Object(s.a)(o)),o.setearEmailSecundario=o.setearEmailSecundario.bind(Object(s.a)(o)),o.confirmCloseAlertModal=o.confirmCloseAlertModal.bind(Object(s.a)(o)),o.limpiarMsjDeErrorInfoCliente=o.limpiarMsjDeErrorInfoCliente.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Caja @version: 1.01.0018, @author: Jose Albeiro Marin"),this.pedidosPendientesCaja(),this.getField("btnAgregarProducto").setDisabled(!0),this.getField("btnContinuar").setClick(this.modificarMostradorCliente),this.getField("pais_id").setOnChange(this.recuperarDepto),this.getField("departamento_geografico_id").setOnChange(this.recuperarCiudades),this.getField("busqueda_cliente").setValue("N"),this.getField("busqueda_cliente").setOnChange(this.limpiarCampos),this.getField("cliente").setOnChange(this.limpiarCampos),this.getField("btnBuscarCliente").setClick(this.buscarClientes),this.getField("btnAceptar").setClick(this.consultarCodigoFacturacion),this.getField("bt_buscar_por_nombre_marca").setSuccess(this.traerProductosCoincidenciaNombreCoincidenciaMarca),this.getField("modalAgregarProducto").setCloseButton(this.mensajeErrorProducto),this.getField("email_secundario").setOnChange(this.setearEmailSecundario),this.getField("modal_datos_cliente").setCloseButton(this.limpiarMsjDeErrorInfoCliente),this.getField("requiere_factura_electronica").setOnChange(this.limpiarMsjDeErrorInfoCliente)}},{key:"limpiarMsjDeErrorInfoCliente",value:function(){this.getField("email_secundario").setError(!1,"* Este campo es requerido"),this.getField("email_secundario").setError(!1,"* El valor no cumple con el formato deseado"),this.getField("email_secundario").setError(!1,"* Digite un email valido"),this.getField("email_secundario").setError(!1,"* Digite un email valido o un punto (.)"),this.getField("requiere_factura_electronica").setError(!1,"* Este campo es requerido")}},{key:"confirmCloseAlertModal",value:function(){this.getField("confirmModalCustom").toggle(!1)}},{key:"setearEmailSecundario",value:function(){this.getField("email_secundario_facturacion_electronica").setValue(this.getField("email_secundario").getValue()),this.getField("email_secundario").setRules({required:!0,rule:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9]){1,}$/,max:100,min:1})}},{key:"mensajeErrorProducto",value:function(){this.getField("producto").setError(!1,"El nombre del producto es requerido")}},{key:"pedidosPendientesCaja",value:function(){this.generalFormat.nombre_accion="servicio_traer_resumen_productos_pendientes_caja_ferricentro",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.mostrarClientes,error:this.error_,general:this.generalFormat})}},{key:"validarDescuentoMax",value:function(e){if(e>=1){var t={value:e};this.generalFormat.nombre_accion="terceros_id-289",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successValidarDescuentoMax,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successValidarDescuentoMax",value:function(e){200===e.estado_p?(this.getField("nit").setValue(e.data[0].nit),this.getField("sede").setValue(e.data[0].sede),this.getField("precios").setValue(e.data[0].precios),this.getField("codigo").setValue(this.getField("producto").getValue()),void 0!==this.getField("precios").getValue()&&""!==this.getField("precios").getValue()?(this.getField("producto").setDisabled(!1),this.getField("producto").setError(!1,"No hay una lista de precios configurada")):(this.getField("producto").setError(!0,"No hay una lista de precios configurada"),this.getField("producto").setDisabled(!0))):this.alertGeneral.toggle(!0,"Error validando descuento","error")}},{key:"successValidarDescuento",value:function(e){if(200===e.estado_p){if(this.getField("descuento").setError(!1,"* Descuento no autorizado."),this.seguir&&this.getField("cantidad").valid()&this.getField("nombre_producto").valid()&this.getField("producto").valid()&this.getField("precio").valid()&this.getField("descuento").valid()&this.getField("total_producto_agregar").valid()){var t={articulo_id:this.getField("articulo_id").getValue(),cantidad:this.getField("cantidad").getValue(),descuento:this.getField("descuento").getValue(),nitsx_sedes_id:this.getField("nitsx_sedes_id").getValue(),precio:this.getField("precio").getValue(),precios:this.precio_cliente};this.getField("btnAgregarDatosCliente").setDisabled(!0),this.generalFormat.nombre_accion="servicio_guardar_producto_cliente_caja",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.successGuardarProducto,error:this.error_,general:this.generalFormat})}}else this.getField("descuento").setError(!0,"* Descuento no autorizado.")}},{key:"modificarMostradorCliente",value:function(){this.limpiarMsjDeErrorInfoCliente(),this.getField("email_secundario_facturacion_electronica").setValue(this.getField("email_secundario").getValue()),this.getField("nombre1").valid()&&this.getField("nombre2").valid()&&this.getField("apellido1").valid()&&this.getField("apellido2").valid()&&this.getField("tipo_persona").valid()&&this.getField("ciudad_id").valid()&&this.getField("direccion").valid()&&this.getField("pais_id").valid()&&this.getField("departamento_geografico_id").valid()&&this.getField("tipo_documento_id").valid()&&this.getField("digito_verificacion").valid()&&this.getField("telefonos").valid()&&this.getField("nombre_cliente").valid()&&this.getField("email").valid()&&this.getField("requiere_factura_electronica").valid()&&this.getField("total").getValue()>=1?""!==this.getField("email").getValue()&&"."!==this.getField("email").getValue()||""!==this.getField("email_secundario_facturacion_electronica").getValue()&&"."!==this.getField("email_secundario_facturacion_electronica").getValue()?this.consumirServicioModificarMostradorCliente():"."!==this.getField("email").getValue()&&""!==this.getField("email").getValue()||"S"!==this.getField("requiere_factura_electronica").getValue()?"."!==this.getField("email").getValue()&&""!==this.getField("email").getValue()||"N"!==this.getField("requiere_factura_electronica").getValue()||""!==this.getField("email_secundario").getValue()?"."!==this.getField("email").getValue()&&""!==this.getField("email").getValue()||"N"!==this.getField("requiere_factura_electronica").getValue()||""===this.getField("email_secundario").getValue()||this.consumirServicioModificarMostradorCliente():(this.getField("email_secundario").setError(!0,"* Digite un email valido o un punto (.)"),this.getField("email_secundario").setRules({required:!0,rule:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9]){1,}$/,max:100,min:1})):(this.getField("email_secundario").setError(!0,"* Digite un email valido"),this.getField("email_secundario").setRules({required:!0,rule:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9]){1,}$/,max:100,min:1})):0===this.getField("total").getValue()&&this.alertGeneral.toggle(!0,"El Cliente no tiene art\xedculos asociados","error")}},{key:"consumirServicioModificarMostradorCliente",value:function(){this.getField("verifica").setValue(this.getField("digito_verificacion").getValue()),this.getField("calidad_agente_retenedor_ventas_id").setValue(this.getField("calidad_agenteretenedor_id").getValue());var e={id:this.getField("id").getValue(),nombre1:this.getField("nombre1").getValue(),nombre2:this.getField("nombre2").getValue(),apellido1:this.getField("apellido1").getValue(),apellido2:this.getField("apellido2").getValue(),tipo_persona:this.getField("tipo_persona").getValue(),codigo_ciudad:this.getField("codigo_ciudad").getValue(),direccion:this.getField("direccion").getValue(),pais_id:this.getField("pais_id").getValue(),departamento_geografico_id:this.getField("departamento_geografico_id").getValue(),ciudad_id:this.getField("ciudad_id").getValue(),tipo_documento_id:this.getField("tipo_documento_id").getValue(),verifica:this.getField("verifica").getValue(),calidad_agente_retenedor_ventas_id:this.getField("calidad_agente_retenedor_ventas_id").getValue(),telefonos:this.getField("telefonos").getValue(),nombre_cliente:this.getField("nombre_cliente").getValue(),email:this.getField("email").getValue(),email_secundario_facturacion_electronica:this.getField("email_secundario_facturacion_electronica").getValue(),requiere_factura_electronica:this.getField("requiere_factura_electronica").getValue()};this.generalFormat.nombre_accion="289-permite_modificar_mostradorcliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.abrirModalFactura,error:this.error_,general:this.generalFormat})}},{key:"abrirModalFactura",value:function(e){200===e.estado_p&&(this.getField("total_factura").setValue(this.getField("total").getValue()),this.getField("modalFacturar").handleClickOpen(this.initFacturar,e.data),this.datoFactura=this.getField("requiere_factura_electronica").getValue(),this.getField("cliente_requiere_factura_electronica").setValue(this.datoFactura))}},{key:"recuperarDepto",value:function(){if(""!==this.getField("pais_id").getValue()&&" "!==this.getField("pais_id").getValue()){var e={value:this.getField("pais_id").getValue()};this.generalFormat.nombre_accion="289-recupera_detp_por_pais-id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successRecuperarDepto,error:this.error_,general:this.generalFormat})}}},{key:"successRecuperarDepto",value:function(e){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.nombre,i.campos_cambian={},t.push(i)})),this.getField("departamento_geografico_id").setOptions(t),""!==this.deptoIdCliente&&this.deptoIdCliente>0&&(this.getField("departamento_geografico_id").setValue(this.deptoIdCliente),this.recuperarCiudades()),this.deptoIdCliente=0,this.recuperarCiudades()}}},{key:"recuperarCiudades",value:function(){if(""!==this.getField("departamento_geografico_id").getValue()&&" "!==this.getField("departamento_geografico_id").getValue()){var e={value:this.getField("departamento_geografico_id").getValue()};this.generalFormat.nombre_accion="289-recupera_ciudades_por_depto-id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successRecuperarCiudades,error:this.error_,general:this.generalFormat})}}},{key:"successRecuperarCiudades",value:function(e){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.nombre,i.campos_cambian={},t.push(i)})),this.getField("ciudad_id").setOptions(t),""!==this.ciudadIdCliente&&this.ciudadIdCliente>0&&this.getField("ciudad_id").setValue(this.ciudadIdCliente),this.ciudadIdCliente=0}}},{key:"recuperarTipoDoc",value:function(){this.generalFormat.nombre_accion="289-servicio.tipos.documentos.traer.todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successRecuperarTipoDoc,error:this.error_,general:this.generalFormat})}},{key:"successRecuperarTipoDoc",value:function(e){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.nombre,i.campos_cambian={},t.push(i)})),this.getField("tipo_documento_id").setOptions(t),""!==this.tipoDocumentoId&&this.tipoDocumentoId>0&&this.getField("tipo_documento_id").setValue(this.tipoDocumentoId)," "!==this.getField("tipo_documento_id").getValue()&&""!==this.getField("tipo_documento_id").getValue()||this.getField("tipo_documento_id").setValue(8),this.tipoDocumentoId=0}}},{key:"recuperarAgenteRet",value:function(){this.generalFormat.nombre_accion="289-traer_todos_calidad_agente_retenedor",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successRecuperarAgenteRet,error:this.error_,general:this.generalFormat})}},{key:"successRecuperarAgenteRet",value:function(e){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.codigo,i.text=e.codigo+" - "+e.descripcion,i.campos_cambian={calidad_agenteretenedor_id:e.id},t.push(i)})),this.getField("codigo_agente_retenedor").setOptions(t),""!==this.agenteRetenedorCodigo&&" "!==this.agenteRetenedorCodigo&&this.getField("codigo_agente_retenedor").setValue(this.agenteRetenedorCodigo)," "!==this.getField("codigo_agente_retenedor").getValue()&&""!==this.getField("codigo_agente_retenedor").getValue()||(this.getField("codigo_agente_retenedor").setValue("R-99-PN"),this.getField("calidad_agenteretenedor_id").setValue(1)),this.agenteRetenedorCodigo=""}}},{key:"limpiarCampos",value:function(){this.getField("tablaClientes").toggle(!1)}},{key:"buscarClientes",value:function(){this.generalFormat.nombre_accion="servicio_traer_resumen_productos_pendientes_caja_ferricentro",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.mostrarClientes,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"mostrarClientes",value:function(e){if(200===e.estado_p)if(e.data.length>=1){var t=new Map;t.set("productos",{cellRenderer:this.setButtonDelete,width:132,sortable:!1,filter:!1,field:"productos"}),t.set("facturar",{cellRenderer:this.setButtonFacturarProducto,width:90,sortable:!1,filter:!1,field:"facturar"}),t.set("codigo_usuario",{width:200,field:"codigo_usuario"}),t.set("nombre_cliente",{width:233,field:"nombre_cliente"}),t.set("documento",{width:131,field:"documento"}),t.set("sede",{width:90,field:"sede"}),t.set("fecha",{width:110,field:"fecha"}),t.set("total",{cellRenderer:function(e){return"".formatoPrecio(e.data.total)},field:"total"}),t.set("formato",{cellRenderer:this.setButtonFormato,width:160,sortable:!1,filter:!1,field:"formato"}),this.gridOptions.rowData=e.data,this.getField("tablaClientes").initData(this.gridOptions,t)}else this.alertGeneral.toggle(!0,"No hay pedidos pendientes","error"),this.getField("tablaClientes").toggle(!1);else 404!==e.estado_p&&0!==e.data.length||(this.alertGeneral.toggle(!0,"No hay pedidos pendientes","error"),this.getField("tablaClientes").toggle(!1))}},{key:"setButtonFormato",value:function(e){var t=e.data.id,i=document.createElement("input");return i.setAttribute("id","button_delete_"+t),i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Formato Industria"),i}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=e.data.precios,o=document.createElement("input");return o.onclick=function(){return t.mostrarProductos(i,a)},o.setAttribute("id","button_delete_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Productos"),o}},{key:"mostrarProductos",value:function(e,t){this.totalCantidadProductos=0,this.precio_cliente=t,this.id_cliente=e,this.getField("precios").setValue(this.precio_cliente);var i={value:e};this.generalFormat.nombre_accion="servicio_traer_productos_por_cliente_id_caja",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.successProductosClientes,error:this.error_,general:this.generalFormat});var a={value:e};this.generalFormat.nombre_accion="servicio_traer_datos_cliente_id_caja",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:a,success:this.successDatosClientes2,error:this.error_,general:this.generalFormat})}},{key:"successProductosClientes",value:function(e){var t="";200===e.estado_p&&(t=e.model),this.getField("modalProducto").handleClickOpen(this.initModalProductos,t)}},{key:"uploadTable",value:function(){this.totalCantidadProductos=0;var e={value:this.id_cliente};this.generalFormat.nombre_accion="servicio_traer_productos_por_cliente_id_caja",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successUploadTable,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successUploadTable",value:function(e){if(200===e.estado_p){this.gridOptionsProducto.rowData=[],this.getField("tablaProductos").initData(this.gridOptionsProducto);var t=new Map;for(var i in t.set("precio",{cellRenderer:function(e){return"".formatoPrecio(e.data.precio)},field:"precio"}),t.set("total",{cellRenderer:this.setButtonValorActual,field:"total"}),t.set("accion",{cellRenderer:this.setButtonDeleteProducto,sortable:!1,filter:!1,field:"acci\xf3n"}),e.model[0].modificar_descuento&&t.set("descuento",{cellRenderer:function(e){return e.data.descuento},cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},editable:!1,onCellValueChanged:this.descuentoChange,sortable:!1,filter:!1,field:"descuento"}),this.gridOptionsProducto.rowData=e.model,this.getField("tablaProductos").initData(this.gridOptionsProducto,t),e.model)this.totalCantidadProductos+=parseFloat(e.model[i].total);isNaN(this.totalCantidadProductos)?this.getField("total_producto").setValue(0):this.getField("total_producto").setValue(this.totalCantidadProductos.toFixed(2)),this.buscarClientes()}else this.getField("tablaProductos").toggle(!1),this.getField("total_producto").setValue(0)}},{key:"successDatosClientes3",value:function(e){200===e.estado_p&&(e.data.total="".formatoPrecio(e.data.total),this.getField("listaProductos").setItemsFichas(this.dataCliente))}},{key:"agregarCliente",value:function(){this.limpiarCampos(),this.getField("modalClientes").handleClickOpen(this.initModal)}},{key:"initModal",value:function(){this.getField("btnAgregarCliente").setClick(this.guardarCliente),this.getField("nombre").setOnBlur(this.formatearNombre)}},{key:"formatearNombre",value:function(){if(""!==this.getField("nombre").getValue()){var e=this.getField("nombre").getValue();e=e.replace(/\b[a-z ]/g,(function(e){return e.toUpperCase()})),this.getField("nombre").setValue(e)}}},{key:"guardarCliente",value:function(){if(this.getField("documento").valid()&this.getField("nombre").valid()&this.getField("telefono").valid()&this.getField("email").valid()){this.generalFormat.nombre_accion="servicio_guardar_cliente_ferricentro",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successGuardarCliente,error:this.error_,general:this.generalFormat})}}},{key:"successGuardarCliente",value:function(e){if(200===e.estado_p){this.id_cliente=e.model.nid;var t={value:this.id_cliente};this.generalFormat.nombre_accion="servicio_traer_productos_por_cliente_id_caja",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successProductosClientes,error:this.error_,general:this.generalFormat});var i={value:this.id_cliente};this.generalFormat.nombre_accion="servicio_traer_datos_cliente_por_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.successDatosClientes2,error:this.error_,general:this.generalFormat}),this.getField("modalClientes").handleClose()}}},{key:"initModalProductos",value:function(e){if(this.getField("btnAgregarProducto").setDisabled(!1),this.getField("btnAgregarProducto").setClick(this.guardarProducto),void 0!==e&&null!==e&&e.length>0){for(var t in this.totalCantidadProductos=0,e)this.totalCantidadProductos+=parseFloat(e[t].total);this.gridOptionsProducto.rowData=[],this.getField("tablaProductos").initData(this.gridOptionsProducto);var i=new Map;i.set("total",{cellRenderer:this.setButtonValorActual,field:"total"}),i.set("cantidad",{cellRenderer:function(e){return"".formatoPrecio(e.data.cantidad)},field:"cantidad"}),i.set("precio",{cellRenderer:function(e){return"".formatoPrecio(e.data.precio)},field:"precio"}),e[0].modificar_descuento&&i.set("descuento",{cellRenderer:function(e){return e.data.descuento},cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},editable:!1,onCellValueChanged:this.descuentoChange,sortable:!1,filter:!1,field:"descuento"}),i.set("accion",{cellRenderer:this.setButtonDeleteProducto,sortable:!1,filter:!1,field:"acci\xf3n"}),this.gridOptionsProducto.rowData=e,this.getField("tablaProductos").initData(this.gridOptionsProducto,i),isNaN(this.totalCantidadProductos)?this.getField("total_producto").setValue(0):this.getField("total_producto").setValue(this.totalCantidadProductos.toFixed(2)),void 0!==this.dataCliente[0]&&(this.dataCliente[0].total="".formatoPrecio(this.dataCliente[0].total))}else this.getField("total_producto").setValue(0);this.getField("listaProductos").setItemsFichas&&this.getField("listaProductos").setItemsFichas(this.dataCliente[0])}},{key:"descuentoChange",value:function(e){var t=this.getField("tablaProductos").cellValid(e.oldValue,e.newValue,/^(\d{1,3})(\.\d{1,4})?$/,7);if(t){var i=e.newValue,a={descuento:parseFloat(i),id:e.data.id};this.generalFormat.nombre_accion="servicio_guardar_descuento_ferricentro_caja_cajero",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:a,success:this.successGuardarDescuento,error:this.error_,general:this.generalFormat})}else null!==t&&this.initModalProductos()}},{key:"successGuardarDescuento",value:function(e){this.uploadTable()}},{key:"successDatosClientes2",value:function(e){if(200===e.estado_p){var t=[];t.push(e.data),this.dataCliente=t}}},{key:"setButtonDeleteProducto",value:function(e){var t=this,i=e.data.id,a=document.createElement("div"),o=document.createElement("input");return o.onclick=function(){return t.eliminarProducto(i)},o.setAttribute("id","button_Add_"+i),a.setAttribute("id","div_Add_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Eliminar"),a.appendChild(o),a}},{key:"setButtonFacturarProducto",value:function(e){var t=this,i=e.data.id,a=document.createElement("div"),o=document.createElement("input");return o.onclick=function(){return t.datosClienteModificar(i)},o.setAttribute("id","button_facturar_"+i),a.setAttribute("id","div_facturar_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Facturar"),a.appendChild(o),a}},{key:"datosClienteModificar",value:function(e){this.id_cliente=e;var t={value:e};this.generalFormat.nombre_accion="servicio_traer_datos_cliente_id_caja",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successInfoCliente,error:this.error_,general:this.generalFormat})}},{key:"successInfoCliente",value:function(e){200===e.estado_p&&(this.getField("modal_datos_cliente").handleClickOpen(this.initInfoCliente,e.data[0]),this.limpiarMsjDeErrorInfoCliente())}},{key:"initInfoCliente",value:function(e){var t=this;for(var i in this.datos=e,this.deptoIdCliente=e.departamento_geografico_id,this.ciudadIdCliente=e.ciudad_id,this.tipoDocumentoId=e.tipo_documento_id,this.agenteRetenedorCodigo=e.codigo_calidad_agente_retenedor_ventas,this.totalFactura=e.total,this.getField("calidad_agenteretenedor_id").setValue(e.calidad_agente_retenedor_ventas_id),this.getField("nombre_cliente").setValue(e.nombre_cliente),this.getField("nombre1").setValue(e.nombre1),this.getField("nombre2").setValue(e.nombre2),this.getField("apellido1").setValue(e.apellido1),this.getField("apellido2").setValue(e.apellido2),this.getField("digito_verificacion").setValue(e.digito_verificacion),""!==e.email&&"."!==e.email&&""!==e.email_secundario_facturacion_electronica&&"."!==e.email_secundario_facturacion_electronica?(this.getField("email_secundario").setValue(e.email_secundario_facturacion_electronica),this.limpiarMsjDeErrorInfoCliente()):""===e.email||"."===e.email||""!==e.email_secundario_facturacion_electronica&&"."!==e.email_secundario_facturacion_electronica?(""!==e.email&&"."!==e.email||""!==e.email_secundario_facturacion_electronica&&"."!==e.email_secundario_facturacion_electronica)&&(""!==e.email&&"."!==e.email||""===e.email_secundario_facturacion_electronica&&"."===e.email_secundario_facturacion_electronica)||(this.getField("email_secundario").setValue(e.email_secundario_facturacion_electronica),this.limpiarMsjDeErrorInfoCliente()):(this.getField("email_secundario").setValue(e.email),this.limpiarMsjDeErrorInfoCliente()),this.getField("iva").setValue(e.total_iva),this.recuperarTipoDoc(),this.recuperarAgenteRet(),this.getField("btn_guardar_info").setClick(this.guardarInfoCliente),this.getField("btn_facturar").setClick((function(){return t.facturarProducto(e.id)})),e)this.getField(i)&&"total_items"!==i&&"tipo_persona"!==i?this.getField(i).setValue(e[i]):"total_items"===i?this.getField("total_items2").setValue(e[i]):"tipo_persona"===i&&("Natural"===e[i]?this.getField("tipo_persona").setValue("N"):"."===e[i]?this.getField("tipo_persona").setValue(" "):this.getField("tipo_persona").setValue("J"))}},{key:"guardarInfoCliente",value:function(){if(this.getField("nombre1").valid()&this.getField("nombre2").valid()&this.getField("apellido1").valid()&this.getField("apellido2").valid()&this.getField("tipo_persona").valid()&this.getField("codigo_ciudad").valid()&this.getField("direccion").valid()&this.getField("id").valid()){var e={nombre1:this.getField("nombre1").getValue(),nombre2:this.getField("nombre2").getValue(),apellido1:this.getField("apellido1").getValue(),apellido2:this.getField("apellido2").getValue(),tipo_persona:this.getField("tipo_persona").getValue(),codigo_ciudad:this.getField("codigo_ciudad").getValue(),direccion:this.getField("direccion").getValue(),id:this.getField("id").getValue()};0===parseInt(this.getField("total").getValue())?(this.generalFormat.nombre_accion="servicio_mostradorcliente_modificar_cliente_ferricentro_caja",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successGuardarDatosClienteSinFacturar,error:this.error_,general:this.generalFormat})):(this.generalFormat.nombre_accion="servicio_mostradorcliente_modificar_cliente_ferricentro_caja",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successGuardarDatosCliente,error:this.error_,general:this.generalFormat}))}}},{key:"successGuardarDatosClienteSinFacturar",value:function(e){200===e.estado_p&&(this.getField("modal_datos_cliente").handleClose(),this.getField("fieldAlert").toggle(!0,"Ok","success"),this.limpiarMsjDeErrorInfoCliente())}},{key:"successGuardarDatosCliente",value:function(e){if(200===e.estado_p){this.getField("fieldAlert").toggle(!0,"Ok","success"),this.id_cliente=this.getField("id").getValue();var t={value:this.id_cliente};this.generalFormat.nombre_accion="servicio_traer_total_factura_caja_ferricentro",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successFacturarCliente,error:this.error_,general:this.generalFormat})}}},{key:"facturarProducto",value:function(e){var t={efectivo:this.getField("efectivo").getValue(),cheques:this.getField("cheques").getValue(),tarjeta_debito:this.getField("tarjeta_debito").getValue(),tarjeta_credito:this.getField("tarjeta_credito").getValue(),otros:this.getField("otros").getValue(),devuelta:this.getField("devuelta").getValue(),codigo_tarjeta_debito:this.getField("codigo_tarjeta_debito").getValue(),codigo_tarjeta_credito:this.getField("codigo_tarjeta_credito").getValue(),aprobacion_tarjeta_credito:this.getField("aprobacion_taejeta_credito").getValue(),aprobacion_tarjeta_debito:this.getField("aprobacion_tarjeta_debito").getValue()};this.generalFormat.nombre_accion="servicio_facturar_cliente_caja_ferricentro",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.successFacturarCliente,error:this.error_,general:this.generalFormat})}},{key:"successFacturarCliente",value:function(e){200===e.estado_p&&(this.datoFactura=this.getField("requiere_factura_electronica").getValue(),this.getField("modalFacturar").handleClickOpen(this.initFacturar,e.data))}},{key:"initFacturar",value:function(e){this.getField("cliente_requiere_factura_electronica").setValue(this.datoFactura),this.getField("tarjeta_debito").setRules({}),this.getField("tarjeta_credito").setRules({}),this.getField("modal_datos_cliente").handleClose(),this.limpiarMsjDeErrorInfoCliente(),this.getField("efectivo").setValue(0),this.getField("cheques").setValue(0),this.getField("tarjeta_credito").setValue(0),this.getField("tarjeta_debito").setValue(0),this.getField("otros").setValue(0),this.getField("efectivo").setKeyUp(this.formatearCambio),this.getField("cheques").setKeyUp(this.formatearCambio),this.getField("tarjeta_credito").setKeyUp(this.formatearCambio),this.getField("tarjeta_debito").setKeyUp(this.formatearCambio),this.getField("otros").setKeyUp(this.formatearCambio),this.getField("btnAceptar").setClick(this.consultarCodigoFacturacion),this.getField("codigo_tarjeta_credito").setOnBlur(this.habilitarCredito),this.getField("codigo_tarjeta_debito").setOnBlur(this.habilitarDebito),this.getField("devuelta").setValue(0),void 0!==e.total&&this.getField("total_factura").setValue(e.total.toFixed(2)),void 0!==e.iva&&this.getField("iva").setValue(e.iva.toFixed(2))}},{key:"validar",value:function(){}},{key:"habilitarCredito",value:function(){""!==this.getField("codigo_tarjeta_credito").getValue()?(this.validCredito=!0,this.getField("tarjeta_credito").setRules({min:1}),this.getField("aprobacion_tarjeta_credito").setRules({required:!0,rule:/^([0-9A-Za-z-]{1,30})?$/})):(this.validCredito=!1,this.getField("tarjeta_credito").setRules({min:0}),this.getField("tarjeta_credito").setError(!1,""),this.getField("aprobacion_tarjeta_credito").setError(!1,""),this.getField("aprobacion_tarjeta_credito").setRules({}),this.getField("tarjeta_credito").setValue(0),this.getField("aprobacion_tarjeta_credito").setValue("")),this.formatearCambio()}},{key:"habilitarDebito",value:function(){""!==this.getField("codigo_tarjeta_debito").getValue()?(this.validDebito=!0,this.getField("tarjeta_debito").setRules({min:1}),this.getField("aprobacion_tarjeta_debito").setRules({required:!0,rule:/^([0-9A-Za-z-]{1,30})?$/})):(this.validDebito=!1,this.getField("tarjeta_debito").setRules({min:0}),this.getField("tarjeta_debito").setValue(0),this.getField("tarjeta_debito").setError(!1,""),this.getField("aprobacion_tarjeta_debito").setRules({}),this.getField("aprobacion_tarjeta_debito").setValue(""),this.getField("aprobacion_tarjeta_debito").setError(!1,"")),this.formatearCambio()}},{key:"consultarCodigoFacturacion",value:function(){this.getField("btnAceptar").setDisabled(!0);this.generalFormat.nombre_accion="289_retorna_codigo_fact_usuario",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.guardarFacturacion,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"guardarFacturacion",value:function(e){if(200===e.estado_p)if(this.getField("codigo_facturacion").setValue(e.data[0].codigo_facturacion)," "!==this.getField("codigo_facturacion").getValue()&&""!==this.getField("codigo_facturacion").getValue()&&void 0!==this.getField("codigo_facturacion").getValue()){var t=!0;if(this.validCredito&&(t=!!(this.getField("aprobacion_tarjeta_credito").valid()&this.getField("codigo_tarjeta_credito").valid()&this.getField("tarjeta_credito").valid())),this.validDebito&&(t=!!(this.getField("aprobacion_tarjeta_debito").valid()&this.getField("codigo_tarjeta_debito").valid()&this.getField("tarjeta_debito").valid())),this.getField("efectivo").valid()&this.getField("cheques").valid()&this.getField("otros").valid()&t){var i=isNaN(parseFloat(this.getField("efectivo").getValue()))?0:parseFloat(this.getField("efectivo").getValue()),a=isNaN(parseFloat(this.getField("cheques").getValue()))?0:parseFloat(this.getField("cheques").getValue()),o=isNaN(parseFloat(this.getField("tarjeta_debito").getValue()))?0:parseFloat(this.getField("tarjeta_debito").getValue()),s=isNaN(parseFloat(this.getField("tarjeta_credito").getValue()))?0:parseFloat(this.getField("tarjeta_credito").getValue()),r=i+a+(isNaN(parseFloat(this.getField("otros").getValue()))?0:parseFloat(this.getField("otros").getValue()))+o+s-this.totalFactura;r<0&&(r=0);var n={nitsx_sedes_id:this.id_cliente,efectivo:""===this.getField("efectivo").getValue()?0:this.getField("efectivo").getValue(),cheques:""===this.getField("cheques").getValue()?0:this.getField("cheques").getValue(),tarjeta_debito:""===this.getField("tarjeta_debito").getValue()?0:this.getField("tarjeta_debito").getValue(),tarjeta_credito:""===this.getField("tarjeta_credito").getValue()?0:this.getField("tarjeta_credito").getValue(),otros:""===this.getField("otros").getValue()?0:this.getField("otros").getValue(),devuelta:r,codigo_tarjeta_credito:this.getField("codigo_tarjeta_credito").getValue(),codigo_tarjeta_debito:this.getField("codigo_tarjeta_debito").getValue(),aprobacion_tarjeta_credito:this.getField("aprobacion_tarjeta_credito").getValue(),aprobacion_tarjeta_debito:this.getField("aprobacion_tarjeta_debito").getValue(),cliente_requiere_factura_electronica:this.getField("cliente_requiere_factura_electronica").getValue(),codigo_facturacion:this.getField("codigo_facturacion").getValue()};this.getField("btnAceptar").setDisabled(!0),this.generalFormat.nombre_accion="servicio_facturar_cliente_caja_ferricentro",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:n,success:this.successPagoFactura,error:this.error_,general:this.generalFormat})}}else this.getField("btnAceptar").setDisabled(!1);else 404===e.estado_p?(this.alertGeneral.toggle(!0,"El usuario no posee c\xf3digo de facturaci\xf3n asociado","error"),this.getField("btnAceptar").setDisabled(!1)):(this.alertGeneral.toggle(!0,e.data.mensaje,"error"),this.getField("btnAceptar").setDisabled(!1))}},{key:"successPagoFactura",value:function(e){this.getField("btnAceptar").setDisabled(!1),200===e.estado_p&&(this.getField("modalFacturar").handleClose(),this.getField("modal_datos_cliente").handleClose(),this.limpiarMsjDeErrorInfoCliente(),this.buscarClientes(),this.getField("fieldAlert").toggle(!0,"Ok","success"))}},{key:"formatearCambio",value:function(){var e=isNaN(parseFloat(this.getField("efectivo").getValue()))?0:parseFloat(this.getField("efectivo").getValue()),t=isNaN(parseFloat(this.getField("cheques").getValue()))?0:parseFloat(this.getField("cheques").getValue()),i=isNaN(parseFloat(this.getField("tarjeta_debito").getValue()))?0:parseFloat(this.getField("tarjeta_debito").getValue()),a=isNaN(parseFloat(this.getField("tarjeta_credito").getValue()))?0:parseFloat(this.getField("tarjeta_credito").getValue()),o=isNaN(parseFloat(this.getField("otros").getValue()))?0:parseFloat(this.getField("otros").getValue()),s=this.totalFactura-(e+t+o+i+a);this.getField("tarjeta_debito").getValue()>0?(this.validDebito=!0,this.getField("codigo_tarjeta_debito").setRules({required:!0}),this.getField("aprobacion_tarjeta_debito").setRules({required:!0,rule:/^([0-9A-Za-z-]{1,30})?$/})):(this.validDebito=!1,this.getField("codigo_tarjeta_debito").setRules({}),this.getField("aprobacion_tarjeta_debito").setRules({})),this.getField("tarjeta_credito").getValue()>0?(this.validCredito=!0,this.getField("codigo_tarjeta_credito").setRules({required:!0}),this.getField("aprobacion_tarjeta_credito").setRules({required:!0,rule:/^([0-9A-Za-z-]{1,30})?$/})):(this.validCredito=!1,this.getField("codigo_tarjeta_credito").setRules({}),this.getField("aprobacion_tarjeta_credito").setRules({})),this.getField("devuelta").setValue(s),s>0?this.getField("total_factura").setValue(s.toFixed(2)):this.getField("total_factura").setValue(0);var r=e+t+o+i+a-this.totalFactura;r>0?this.getField("devuelta").setValue(r.toFixed(2)):this.getField("devuelta").setValue(0)}},{key:"eliminarProducto",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustom),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!1)}},{key:"confirmDeleteCustom",value:function(){this.getField("confirmModalCustom").toggle(!1);var e={id:this.id_delete};this.generalFormat.nombre_accion="servicio_eliminar_produto_cliente_caja",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successDelete,error:this.error_,general:this.generalFormat})}},{key:"successDelete",value:function(e){this.pedidosPendientesCaja(),void 0!==e.estado_p&&200!==e.estado_p||(this.totalCantidadProductos=0,this.uploadTable())}},{key:"setButtonValorActual",value:function(e){var t=e.data.total;return"".formatoPrecio(t)}},{key:"guardarProducto",value:function(){this.getField("nombre_marca").setValue(".");var e={value:this.id_cliente};this.generalFormat.nombre_accion="servicio_traer_datos_cliente_id_caja",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosClientes,error:this.error_,general:this.generalFormat})}},{key:"successDatosClientes",value:function(e){var t=[];if(200===e.estado_p){t=[e.data[0]];this.generalFormat.nombre_accion="servicio_traer_permiso_descuento_ferricentro_caja",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successModificarDescuento,error:this.error_,general:this.generalFormat})}this.getField("modalAgregarProducto").handleClickOpen(this.addProductoCliente,t),this.getField("nombre_marca").setKeyUp(this.habilitarBusquedaNombreMarca),this.getField("producto").setOnBlur(this.habilitarBusquedaNombreMarca),this.getField("producto").setDisabled(!0),this.getField("cantidad").setValue(0),this.getField("descuento").setValue(0),this.getField("marca").setValue(0),this.getField("precio").setValue(0)}},{key:"successModificarDescuento",value:function(e){200===e.estado_p?e.model[0].modificar_descuento?this.getField("descuento").setDisabled(!1):(this.getField("descuento").setDisabled(!1),this.getField("descuento").setValue(0)):this.getField("modalAgregarProducto").handleClose()}},{key:"addProductoCliente",value:function(e){this.getField("precio").setKeyUp(this.totalProducto2),this.getField("cantidad").setKeyUp(this.totalProducto),this.getField("descuento").setKeyUp(this.totalProducto),this.getField("nitsx_sedes_id").setValue(this.id_cliente),this.getField("precios").setValue(this.precio_cliente),this.getField("nombre_producto").setOnChange(this.formatearPrecios),this.validarDescuentoMax(this.id_cliente),""!==e&&e.length>0&&(this.getField("total_items").setValue(e[0].total_items),this.getField("total_general_cliente").setValue(e[0].total_general.toFixed(2))),this.getField("btnAgregarDatosCliente").setClick(this.addProdutoACliente),this.getField("listaAgregarProducto").setItemsFichas(e)}},{key:"formatearPrecios",value:function(){this.getField("descuento").setValue(0),this.precio_base=this.getField("precio").getValue(),""!==this.getField("precio").getValue()&&this.getField("precio").setValue(this.getField("precio").getValue()),0===parseInt(this.getField("precio").getValue())&&(this.getField("cantidad").setValue(0),this.getField("descuento").setValue(0),this.getField("total_producto_agregar").setValue(0)),""!==this.getField("existencia").getValue()&&this.getField("existencia").setValue(this.getField("existencia").getValue()),""!==this.getField("precio_mas_iva").getValue()&&this.getField("precio_mas_iva").setValue(this.getField("precio_mas_iva").getValue())}},{key:"totalProducto2",value:function(){if(this.getField("descuento").setValue(0),""!==this.getField("precio").getValue()&&" "!==this.getField("precio").getValue())if(parseFloat(this.getField("precio").getValue())<parseFloat(this.precio_base))this.getField("precio").setError(!0,"El precio deber ser mayor al precio base");else{if(this.getField("precio").setError(!1,""),this.getField("precio_mas_iva").setValue("".precioTotalIvaCantidadDecimal(this.getField("precio").getValue(),this.getField("tarifa_iva").getValue(),0,1)),""!==this.getField("cantidad").getValue()&&""!==this.getField("descuento").getValue()&&""!==this.getField("precio").getValue()){var e="".precioTotalIvaCantidadDecimal(this.getField("precio").getValue(),this.getField("tarifa_iva").getValue(),this.getField("descuento").getValue(),this.getField("cantidad").getValue());this.getField("total_producto_agregar").setValue(e.toFixed(2))}else{var t="".precioTotalIvaCantidadDecimal(this.getField("precio").getValue(),this.getField("tarifa_iva").getValue(),0,this.getField("cantidad").getValue());this.getField("total_producto_agregar").setValue(t.toFixed(2))}parseFloat(this.getField("cantidad").getValue())>parseFloat(this.getField("existencia").getValue())?(this.seguir=!1,this.getField("cantidad").setError(!0,"* Este valor no puede ser mayor a las existencias")):(this.seguir=!0,this.getField("cantidad").setError(!1,""),this.getField("cantidad").valid(),this.getField("descuento").valid())}}},{key:"totalProducto",value:function(){if(""!==this.getField("precio").getValue()&&" "!==this.getField("precio").getValue())if(parseFloat(this.getField("precio").getValue())<parseFloat(this.precio_base))this.getField("precio").setError(!0,"El precio deber ser mayor al precio base");else{if(this.getField("precio").setError(!1,""),this.getField("precio_mas_iva").setValue("".precioTotalIvaCantidadDecimal(this.getField("precio").getValue(),this.getField("tarifa_iva").getValue(),0,1)),""!==this.getField("cantidad").getValue()&&""!==this.getField("descuento").getValue()&&""!==this.getField("precio").getValue()){var e="".precioTotalIvaCantidadDecimal(this.getField("precio").getValue(),this.getField("tarifa_iva").getValue(),this.getField("descuento").getValue(),this.getField("cantidad").getValue());this.getField("total_producto_agregar").setValue(e.toFixed(2))}else{var t="".precioTotalIvaCantidadDecimal(this.getField("precio").getValue(),this.getField("tarifa_iva").getValue(),0,this.getField("cantidad").getValue());this.getField("total_producto_agregar").setValue(t.toFixed(2))}parseFloat(this.getField("cantidad").getValue())>parseFloat(this.getField("existencia").getValue())?(this.seguir=!1,this.getField("cantidad").setError(!0,"* Este valor no puede ser mayor a las existencias")):(this.seguir=!0,this.getField("cantidad").setError(!1,""),this.getField("cantidad").valid(),this.getField("descuento").valid())}}},{key:"addProdutoACliente",value:function(){var e={nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue(),descuento:this.getField("descuento").getValue(),codigo:this.getField("producto").getValue(),precios:this.getField("precios").getValue()};this.getField("descuento").getValue()>=1?(this.generalFormat.nombre_accion="valida_descuento-289",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successValidarDescuento,error:this.error_,general:this.generalFormat})):(this.generalFormat.nombre_accion="valida_descuento-289",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successValidarDescuento,error:this.error_,general:this.generalFormat,showMessage:!1}))}},{key:"successGuardarProducto",value:function(e){this.getField("btnAgregarDatosCliente").setDisabled(!1),200===e.estado_p&&(this.getField("modalAgregarProducto").handleClose(),this.totalCantidadProductos=0,this.uploadTable())}},{key:"traerProductosCoincidenciaNombreCoincidenciaMarca",value:function(e){if(e.data.length>1){this.getField("modal_productos").handleClickOpen(),this.gridOptionsProductos.rowData=e.data;var t=new Map;this.getField("tb_productos").initData(this.gridOptionsProductos,t)}else 1===e.data.length&&(this.getField("modal_productos").handleClose(),this.getField("tb_productos").toggle(!1),this.getField("producto").setValue(e.data[0].codigo),this.getField("nombre_marca").setValue("."),this.getField("marca").setValue(e.data[0].marca),this.getField("tarifa_iva").setValue(e.data[0].tarifa_iva),this.getField("precio").setValue(e.data[0].precio),this.getField("precio_mas_iva").setValue(e.data[0].precio_mas_iva),this.getField("referencia").setValue(e.data[0].referencia),this.getField("presenta").setValue(e.data[0].presenta),this.getField("existencia").setValue(e.data[0].existencia),this.getField("articulo_id").setValue(e.data[0].id),this.getField("nombre_producto").setValue(e.data[0].nombre))}},{key:"onSelectionChanged",value:function(){this.filaSeleccionadaGrid=this.gridOptionsProductos.api.getSelectedRows(),this.getField("producto").setValue(this.filaSeleccionadaGrid[0].codigo),this.getField("nombre_marca").setValue("."),this.getField("marca").setValue(this.filaSeleccionadaGrid[0].marca),this.getField("tarifa_iva").setValue(this.filaSeleccionadaGrid[0].tarifa_iva),this.getField("precio").setValue(this.filaSeleccionadaGrid[0].precio),this.getField("precio_mas_iva").setValue(this.filaSeleccionadaGrid[0].precio_mas_iva),this.getField("referencia").setValue(this.filaSeleccionadaGrid[0].referencia),this.getField("presenta").setValue(this.filaSeleccionadaGrid[0].presenta),this.getField("presenta").setValue(this.filaSeleccionadaGrid[0].presenta),this.getField("existencia").setValue(this.filaSeleccionadaGrid[0].existencia),this.getField("articulo_id").setValue(this.filaSeleccionadaGrid[0].id),this.getField("nombre_producto").setValue(this.filaSeleccionadaGrid[0].nombre),this.getField("modal_productos").handleClose()}},{key:"habilitarBusquedaNombreMarca",value:function(){"."!==this.getField("nombre_marca").getValue()&&""!==this.getField("nombre_marca").getValue()&&""!==this.getField("producto").getValue()?this.getField("bt_buscar_por_nombre_marca").setDisabled(!1):""===this.getField("producto").getValue()?(this.getField("bt_buscar_por_nombre_marca").setDisabled(!0),this.getField("producto").setError(!0,"El nombre del producto es requerido")):"."===this.getField("nombre_marca").getValue()&&this.getField("bt_buscar_por_nombre_marca").setDisabled(!0)}}]),i}(d.a.form);d.a.addController("CajaFerr",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.succesTbDatosFicha=o.succesTbDatosFicha.bind(Object(s.a)(o)),o.gridOptionsTbDatosFichas=Object.assign({},o.gridOptions),o.setButtonValorActual=o.setButtonValorActual.bind(Object(s.a)(o)),o.valido=!0,o.valorActualChange=o.valorActualChange.bind(Object(s.a)(o)),o.guardarValor=o.guardarValor.bind(Object(s.a)(o)),o.succesGuardarValor=o.succesGuardarValor.bind(Object(s.a)(o)),o.uploadTbDatosFicha=o.uploadTbDatosFicha.bind(Object(s.a)(o)),o.continuarFicha=o.continuarFicha.bind(Object(s.a)(o)),o.volverMoler=o.volverMoler.bind(Object(s.a)(o)),o.setButtonObservacion=o.setButtonObservacion.bind(Object(s.a)(o)),o.observacionChange=o.observacionChange.bind(Object(s.a)(o)),o.guardarObservacion=o.guardarObservacion.bind(Object(s.a)(o)),o.successGrabarObservacion=o.successGrabarObservacion.bind(Object(s.a)(o)),o.traerDatosFicha=o.traerDatosFicha.bind(Object(s.a)(o)),o.traerItemsCalidadMolienda=o.traerItemsCalidadMolienda.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Calidad Molienda @version: 1.01.0013 @author: Juan David Nieto"),this.traerDatosFicha(),this.getField("btnContinuar").setClick(this.continuarFicha),this.getField("btnVolveraMoler").setClick(this.volverMoler)}},{key:"traerDatosFicha",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="393-servicio_traer_datos_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat})}},{key:"traerItemsCalidadMolienda",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="393-Trae_tabla_calidad_molienda",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesTbDatosFicha,error:this.error_,general:this.generalFormat})}},{key:"successDatosFicha",value:function(e){this.traerItemsCalidadMolienda(),200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("lista_items_produccion").setVisible(!0),this.getField("lista_items_produccion").setItemsFichas(e.model)):this.getField("lista_items_produccion").setVisible(!1)}},{key:"succesTbDatosFicha",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsTbDatosFichas.rowData=[],this.getField("TbDatosficha").initData(this.gridOptionsTbDatosFichas),this.getField("TbDatosficha").toggle(!0),this.gridOptionsTbDatosFichas.rowData=e.model,this.gridOptionsTbDatosFichas.paginationPageSize=100;var t=new Map;t.set("valor_actual",{cellRenderer:this.setButtonValorActual,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorActualChange,editable:!0,field:"Valor actual"}),t.set("observaciones",{cellRenderer:this.setButtonObservacion,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.observacionChange,editable:!0,field:"Observaciones"}),this.getField("TbDatosficha").initData(this.gridOptionsTbDatosFichas,t),this.gridOptionsTbDatosFichas.api.selectIndex(0,!0,!0)}else this.getField("TbDatosficha").toggle(!1),this.getField("fieldAlert").toggle(!0,"No hay envasado","error")}},{key:"setButtonValorActual",value:function(e){var t=e.data.valor_actual,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t?(a.textContent=t,"".formatoPrecio(e.data.valor_actual)):(a.textContent=0,i.appendChild(a),i)}},{key:"valorActualChange",value:function(e){if(this.getField("TbDatosficha").cellValid(e.oldValue,e.newValue,"^[0-9]")&&e.oldValue!==e.newValue){var t=e.data.id,i=e.newValue;""!==i&&parseFloat(i)>=0?this.guardarValor(t,parseFloat(i)):(e.data.valor_actual=0,this.getField("fieldAlert").toggle(!0,"El campo no cumple con el formato deseado","error"))}}},{key:"guardarValor",value:function(e,t){var i={id:e,valor_digitado:t};this.generalFormat.nombre_accion="393-Actualiza_valor_actual_de_la_tabla",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.succesGuardarValor,error:this.error_,general:this.generalFormat})}},{key:"succesGuardarValor",value:function(e){200===e.estado_p&&this.uploadTbDatosFicha()}},{key:"setButtonObservacion",value:function(e){var t=e.data.observaciones,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,(e.data.valor_actual>e.data.valor_maximo||e.data.valor_actual<e.data.valor_minimo)&&e.data.observaciones.length<5&&(this.valido=!1),i.appendChild(a),i}},{key:"observacionChange",value:function(e){if(e.oldValue!==e.newValue&&""!==e.newValue)if(e.newValue.length>5){var t=e.data.id,i=e.newValue;this.guardarObservacion(t,i)}else this.alertGeneral.toggle(!0,"La observaci\xf3n debe contener m\xednimo 5 caracteres","error"),this.uploadTbDatosFicha()}},{key:"guardarObservacion",value:function(e,t){this.getField("observaciones").setValue(t);var i={observaciones:this.getField("observaciones").getValue(),id:e};this.generalFormat.nombre_accion="393-Permite_actualizar_las_observaciones",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successGrabarObservacion,error:this.error_,general:this.generalFormat})}},{key:"successGrabarObservacion",value:function(e){200===e.estado_p&&this.uploadTbDatosFicha()}},{key:"uploadTbDatosFicha",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="393-Trae_tabla_calidad_molienda",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesTbDatosFicha,error:this.error_,general:this.generalFormat})}},{key:"continuarFicha",value:function(){this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha);var e={id_formulario:this.formId,proceso_id:this.getField("proceso_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),puntos:this.props.data.puntos};this.generalFormat.nombre_accion="393-Permite_pasar_a_la_actividad_de_calidad",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}},{key:"volverMoler",value:function(){this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha);var e={id_formulario:this.formId,proceso_id:this.getField("proceso_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),puntos:this.props.data.puntos};this.generalFormat.nombre_accion="393-Permite_devolver_la_ficha_a_molienda",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);t.default=l,d.a.addController("calidMolienda",l)},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.setButtonObservacion=o.setButtonObservacion.bind(Object(s.a)(o)),o.setButtonValorActual=o.setButtonValorActual.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.id_valor_actual=0,o.valMax=0,o.valMin=0,o.valido=!0,o.envasarFicha=o.envasarFicha.bind(Object(s.a)(o)),o.successProximoConteo=o.successProximoConteo.bind(Object(s.a)(o)),o.successGrabarValorActual=o.successGrabarValorActual.bind(Object(s.a)(o)),o.guardarValor=o.guardarValor.bind(Object(s.a)(o)),o.guardarObservacion=o.guardarObservacion.bind(Object(s.a)(o)),o.successGrabarObservacion=o.successGrabarObservacion.bind(Object(s.a)(o)),o.ajusteFicha=o.ajusteFicha.bind(Object(s.a)(o)),o.autorizarAjustesID=o.autorizarAjustesID.bind(Object(s.a)(o)),o.valorActualChange=o.valorActualChange.bind(Object(s.a)(o)),o.observacionChange=o.observacionChange.bind(Object(s.a)(o)),o.tablaItemsFichas=o.tablaItemsFichas.bind(Object(s.a)(o)),o.proximoConteo=o.proximoConteo.bind(Object(s.a)(o)),o.gridOptionsFichasEtapas=Object.assign({},o.gridOptions),o.setButtonVer=o.setButtonVer.bind(Object(s.a)(o)),o.verEtapa=o.verEtapa.bind(Object(s.a)(o)),o.successVerEtapa=o.successVerEtapa.bind(Object(s.a)(o)),o.successFichaIdSet=o.successFichaIdSet.bind(Object(s.a)(o)),o.gridOptionsItems=Object.assign({},o.gridOptions),o.fichaIdSet=o.fichaIdSet.bind(Object(s.a)(o)),o.observacion="",o.valido=!0,o.arrayCantidades=[],o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Calidad @version: 1.01.0019 @author: Mario A. Sep\xfalveda R"),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.fichaIdSet(),this.tablaItemsFichas(),this.proximoConteo(),this.getField("btnAjuste").setClick(this.ajusteFicha),this.getField("btnEnvasar").setClick(this.envasarFicha),this.getField("btnAutorizar").setClick(this.autorizarAjustesID)}},{key:"fichaIdSet",value:function(){if(this.getField("value").setValue(this.props.data.id_ficha),""!==this.getField("value").getValue()){var e={value:this.getField("value").getValue()};this.generalFormat.nombre_accion="servicio_traer_datos_de_ficha_calidad",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successFichaIdSet,error:this.error_,general:this.generalFormat})}}},{key:"successFichaIdSet",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaFichaCalidad").setVisible(!0),this.getField("listaFichaCalidad").setItemsFichas(e.model)):this.getField("listaFichaCalidad").setVisible(!1)}},{key:"tablaItemsFichas",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="265-Retorna_items_tabla_fichascalidad",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat})}},{key:"proximoConteo",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="265-Retorna_fichas_calidad_proximoconteo",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successProximoConteo,error:this.error_,general:this.generalFormat})}},{key:"setButtonVer",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.verEtapa(e)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Ver"),i}},{key:"verEtapa",value:function(e){if(this.getField("modal_fichas_etapas").handleClickOpen(),this.getField("etapa_id").setValue(e.data.etapa_id),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),""!==this.getField("produccion_fichas_id").getValue()&&""!==this.getField("etapa_id").getValue()){var t={produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),etapa_id:this.getField("etapa_id").getValue()};this.generalFormat.nombre_accion="265-Retorna_fichas_itemsetapa",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successVerEtapa,error:this.error_,general:this.generalFormat})}}},{key:"successVerEtapa",value:function(e){200===e.estado_p&&(this.getField("costo").setValue(e.data[0].costo_etapa),this.getField("total_cantidad").setValue(e.data[0].total_cantidad),this.getField("total_agregado").setValue(e.data[0].total_agregada),this.getField("total_pendiente").setValue(e.data[0].total_pendiente),this.getField("porcentaje").setValue(e.data[0].porcentaje),e.data[0].items&&e.data[0].items.length>0?(this.gridOptionsItems.rowData=e.data[0].items,this.getField("tabla_items").initData(this.gridOptionsItems)):this.getField("tabla_items").toggle(!1))}},{key:"autorizarAjustesID",value:function(){if(this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),""!==this.getField("produccion_fichas_id").getValue()&&""!==this.getField("proceso_id").getValue()&&""!==this.getField("actividad_configuracion_id").getValue()&&""!==this.getField("actividad_id").getValue()){var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),actividad_id:this.getField("actividad_id").getValue()};this.generalFormat.nombre_accion="265-Crear_investigaciondesarrollo_ficha_calidad",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}},{key:"envasarFicha",value:function(){var e=this;if(this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.arrayCantidades.map((function(t,i){return parseFloat(e.arrayCantidades[i].valor_maximo)>0&&parseFloat(e.arrayCantidades[i].valor_minimo)>0&&0===parseFloat(e.arrayCantidades[i].valor_actual)?(e.valido=!1,e.getField("confirmModalCustom").setTitleAndContent("Campo vacio","el Valor actual de ".concat(t.variable," no pude ser cero")),e.getField("confirmModalCustom").setClickDialog(e.uploadTable),e.getField("confirmModalCustom").toggle(!0)):0===parseFloat(e.arrayCantidades[i].valor_maximo)&&0===parseFloat(e.arrayCantidades[i].valor_minimo)&&"."===e.arrayCantidades[i].observaciones&&(e.valido=!1,e.getField("confirmModalCustom").setTitleAndContent("Campo vacio","La Observaci\xf3n para ".concat(t.variable," , es requerida")),e.getField("confirmModalCustom").setClickDialog(e.uploadTable),e.getField("confirmModalCustom").toggle(!0)),null})),this.valido)if(""!==this.getField("produccion_fichas_id").getValue()&&""!==this.getField("proceso_id").getValue()&&""!==this.getField("actividad_configuracion_id").getValue()&&""!==this.getField("actividad_id").getValue()){var t={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue()};this.generalFormat.nombre_accion="265-Crear_ficha_calidad_pesaje",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}else this.alertGeneral.toggle(!0,"Falta alg\xfan item","error");else this.alertGeneral.toggle(!0,"Alg\xfan item esta por fuera del rango permitido y se requiere de una observaci\xf3n para continuar","error")}},{key:"uploadTable",value:function(){this.getField("confirmModalCustom").toggle(!1),this.valido=!0;var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="265-Retorna_items_tabla_fichascalidad",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat})}},{key:"successProximoConteo",value:function(e){200===e.estado_p&&this.getField("conteo").setValue(e.model[0].conteo)}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p){this.gridOptions.rowData=[],this.getField("tablaCalidad").initData(this.gridOptions),this.getField("valor_digitado").setValue(""),this.getField("observaciones").setValue("");var t=new Map;this.tamanoDatos=e.model.length,t.set("valor_actual",{cellRenderer:this.setButtonValorActual,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorActualChange,editable:!0,field:"Valor actual"}),t.set("observaciones",{cellRenderer:this.setButtonObservacion,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.observacionChange,editable:!0,field:"Observaciones"}),this.gridOptions.rowData=e.model,this.arrayCantidades=e.model,this.getField("tablaCalidad").initData(this.gridOptions,t)}else this.getField("tablaCalidad").toggle(!1)}},{key:"valorActualChange",value:function(e){if(e.oldValue!==e.newValue&&""!==e.newValue){var t=e.data.id,i=e.data.valor_minimo,a=e.data.valor_maximo,o=e.newValue;if(""!==o&&parseFloat(o)&&parseFloat(o)>=0)if(parseFloat(o)>=i&&parseFloat(o)<=a){var s="";s=""===e.data.observaciones?".":e.data.observaciones,this.guardarValor(t,parseFloat(o),s)}else{var r="";""===e.data.observaciones?(r=".",this.guardarValor(t,parseFloat(o),r),this.alertGeneral.toggle(!0,"Debe ingresar una observaci\xf3n","error")):r=e.data.observaciones,this.guardarValor(t,parseFloat(o),r)}else this.alertGeneral.toggle(!0,"El campo no cumple con el formato deseado","error"),this.gridOptions.rowData[parseInt(e.node.id)][e.column.colId]=e.oldValue}}},{key:"observacionChange",value:function(e){if(e.oldValue!==e.newValue&&""!==e.newValue)if(e.newValue.length>5){var t=e.data.id,i=e.newValue;this.guardarObservacion(t,i)}else this.alertGeneral.toggle(!0,"La observaci\xf3n debe contener m\xednimo 5 caracteres","error"),this.uploadTable()}},{key:"setButtonValorActual",value:function(e){var t=e.data.valor_actual;null===t&&(this.valido=!1);var i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"setValorActual",value:function(e,t,i){this.id_valor_actual=e,this.valMax=i,this.valMin=t,this.getField("modalCalidad").handleClickOpen(this.openModalGrabar.bind(this))}},{key:"openModalGrabar",value:function(){this.getField("btnGuardarValor").setClick(this.guardarValor)}},{key:"guardarValor",value:function(e,t,i){this.getField("valor_digitado").setValue(t),this.getField("observaciones").setValue(i);var a={id_formulario:this.formId,valor_digitado:this.getField("valor_digitado").getValue(),observaciones:this.getField("observaciones").getValue(),id:e};this.generalFormat.nombre_accion="servicio_actualizar_valor_digitado_ficha_calidad",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:a,success:this.successGrabarValorActual,error:this.error_,general:this.generalFormat})}},{key:"successGrabarValorActual",value:function(e){200===e.estado_p&&this.uploadTable()}},{key:"setButtonObservacion",value:function(e){var t=e.data.observaciones,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,(e.data.valor_actual>e.data.valor_maximo||e.data.valor_actual<e.data.valor_minimo)&&e.data.observaciones.length<5&&(i.setAttribute("style","border: 1px solid rgb(255, 133, 133); height: 99%"),this.valido=!1),i.appendChild(a),i}},{key:"setObservacion",value:function(e,t){this.id_observacion=e,this.getField("modalObservacion").handleClickOpen(this.openModalGrabarOb.bind(this))}},{key:"openModalGrabarOb",value:function(){this.getField("btnGuardarObservacion").setClick(this.guardarObservacion)}},{key:"guardarObservacion",value:function(e,t){this.getField("observaciones").setValue(t);var i={id_formulario:this.formId,observaciones:this.getField("observaciones").getValue(),id:e};this.generalFormat.nombre_accion="265-Actualiza_observaciones_fichacalidad",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successGrabarObservacion,error:this.error_,general:this.generalFormat})}},{key:"successGrabarObservacion",value:function(e){200===e.estado_p&&this.uploadTable()}},{key:"ajusteFicha",value:function(){if(this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),""!==this.getField("produccion_fichas_id").getValue()&&""!==this.getField("proceso_id").getValue()&&""!==this.getField("actividad_configuracion_id").getValue()&&""!==this.getField("actividad_id").getValue()){var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),actividad_id:this.getField("actividad_id").getValue()};this.generalFormat.nombre_accion="265-Crear_ajuste_calidad",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}}]),i}(d.a.form);d.a.addController("CalidProd",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successItemFichas=o.successItemFichas.bind(Object(s.a)(o)),o.id_ficha=0,o.grabarTodo=o.grabarTodo.bind(Object(s.a)(o)),o.devolverTodo=o.devolverTodo.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.service.send(this.getConstant().searchFormat().format(this.props.data.id_ficha,"contenedoraprobacion","servicio",this.formId),"GET",void 0,this.successItemFichas,this.error_),this.getField("btnDevolver").setClick(this.grabarTodo),this.getField("btnTerminar").setClick(this.devolverTodo)}},{key:"successItemFichas",value:function(e){200===e.estado_p&&this.getField("listaaprobacion").setItemsFichas(e.model)}},{key:"grabarTodo",value:function(){if(this.getField("observaciones_cancelacion_alistamiento").valid()){var e={accion:"servicio",campo:"btnDevolver",id_formulario:this.formId,observaciones_cancelacion_alistamiento:this.getField("observaciones_cancelacion_alistamiento").getValue(),produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"PUT",e,this.successCloseEstage,this.error_)}}},{key:"devolverTodo",value:function(){var e={accion:"servicio",campo:"btnTerminar",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"PUT",e,this.successCloseEstage,this.error_)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.handlerClickButton=o.handlerClickButton.bind(Object(s.a)(o)),o.handleClickButtonGet=o.handleClickButtonGet.bind(Object(s.a)(o)),o.onSuccessClick=o.onSuccessClick.bind(Object(s.a)(o)),o.error=o.error.bind(Object(s.a)(o)),o.cancelarTurno=o.cancelarTurno.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.buttons.has("btn_show")&&this.buttons.get("btn_show").ref.current.setClick(this.handlerClickButton),this.getField("nit").setDisabled(!0),this.getField("btnCancelar").setVisible(!1),this.getField("btn_consultar").setVisible(!1)}},{key:"handlerClickButton",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!0),this.buttons.get("btn_change").ref.current.setDisabled(!0),this.buttons.get("btn_delete").ref.current.setDisabled(!0),this.getField("nit").setDisabled(!1),this.getField("btn_consultar").setVisible(!0),this.getField("btn_consultar").setDisabled(!1),this.getField("btn_consultar").setClick(this.handleClickButtonGet),this.getField("btnCancelar").setVisible(!0),this.getField("btnCancelar").setDisabled(!1),this.getField("btnCancelar").setClick(this.cancelarTurno)}},{key:"handleClickButtonGet",value:function(){var e=this.getField("nit").getValue(),t=this.getField("sede").getValue();this.getField("btn_consultar").send(this.getField("btn_consultar").searchFormat().format(e+"/"+t,"btn_consultar","servicio",this.getFormId()),"GET",void 0,this.onSuccessClick,this.error)}},{key:"onSuccessClick",value:function(e){200===e.estado_p&&e.model.length>0&&e.model.length>0&&(this.gridOptions.rowData=e.model,this.getField("tableShowData").initData(this.gridOptions))}},{key:"cancelarTurno",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!1),this.buttons.get("btn_change").ref.current.setDisabled(!1),this.buttons.get("btn_delete").ref.current.setDisabled(!1),this.getField("nit").setDisabled(!0),this.getField("btn_consultar").setVisible(!1),this.getField("btn_consultar").setDisabled(!0),this.getField("btnCancelar").setVisible(!1),this.getField("btnCancelar").setDisabled(!0),this.getField("tableShowData").toggle(!1)}},{key:"error",value:function(e){}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDataTable=o.successDataTableCategoriaUno.bind(Object(s.a)(o)),o.setButtonSubir=o.setButtonSubir.bind(Object(s.a)(o)),o.setButtonBajar=o.setButtonBajar.bind(Object(s.a)(o)),o.accionSubir=o.accionSubir.bind(Object(s.a)(o)),o.accionBajar=o.accionBajar.bind(Object(s.a)(o)),o.servicioActualuzarOrden=o.servicioActualuzarOrden.bind(Object(s.a)(o)),o.successServicioActualuzarOrden=o.successServicioActualuzarOrden.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){}},{key:"successDataTableCategoriaUno",value:function(e){if(e.model&&e.model.length>0){this.gridOptionsTableDefault.rowData=e.model;var t=new Map;t.set(3,{cellRenderer:this.setButtonSubir,field:"subir",width:90}),t.set(4,{cellRenderer:this.setButtonBajar,field:"bajar",width:90}),this.getField("tableShowData").initData(this.gridOptionsTableDefault,t)}else this.getField("tableShowData").toggle(!1)}},{key:"setButtonSubir",value:function(e){var t=this,i=document.createElement("input"),a=e.data.orden;return i.onclick=function(){return t.accionSubir(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Subir"),1===a&&(i.setAttribute("style","width:60px;height: 20px%; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("disabled",!0)),i}},{key:"accionSubir",value:function(e){this.getField("id").setValue(e),this.getField("accion").setValue("subir"),""!==this.idCategoria&&"subir"===this.getField("accion").getValue()&&this.servicioActualuzarOrden()}},{key:"setButtonBajar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.accionBajar(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Bajar"),i}},{key:"accionBajar",value:function(e){this.getField("id").setValue(e),this.getField("accion").setValue("bajar"),""!==this.idCategoria&&"bajar"===this.getField("accion").getValue()&&this.servicioActualuzarOrden()}},{key:"servicioActualuzarOrden",value:function(){if(""!==this.getField("accion").getValue()&&""!==this.getField("id").getValue()){var e={id:this.getField("id").getValue(),accion:this.getField("accion").getValue()};this.generalFormat.nombre_accion="344-Permite_modificar_orden_categoria_1",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successServicioActualuzarOrden,error:this.error_,general:this.generalFormat})}}},{key:"successServicioActualuzarOrden",value:function(e){200===e.estado_p&&(this.onClickShowTable(),this.getField("accion").setValue(""),this.getField("id").setValue(""))}}]),i}(d.a.form);d.a.addController("portafolio_cate_1",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsClienteProdEnsamblados=Object.assign({},o.gridOptions),o.habilitarBtnCargar=o.habilitarBtnCargar.bind(Object(s.a)(o)),o.tbClienteProdEnsamblados=o.tbClienteProdEnsamblados.bind(Object(s.a)(o)),o.setButtonEliminarTbClientProdEnsamblados=o.setButtonEliminarTbClientProdEnsamblados.bind(Object(s.a)(o)),o.funcionClickEliminarItemClientProdEnsam=o.funcionClickEliminarItemClientProdEnsam.bind(Object(s.a)(o)),o.eliminarItemClientProdEnsam=o.eliminarItemClientProdEnsam.bind(Object(s.a)(o)),o.successEliminarItemClientProdEnsam=o.successEliminarItemClientProdEnsam.bind(Object(s.a)(o)),o.refrescarTbClienteProdEnsamblados=o.refrescarTbClienteProdEnsamblados.bind(Object(s.a)(o)),o.agregarClientProdEnsamb=o.agregarClientProdEnsamb.bind(Object(s.a)(o)),o.habilitarBtnAgregar=o.habilitarBtnAgregar.bind(Object(s.a)(o)),o.BtnCancelar=o.BtnCancelar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Clientes productos ensamblados, @version: 1.01.0011, @author: Sebastian Rios Echeverri"),this.getField("tercero_id").setOnChange(this.habilitarBtnCargar),this.getField("btn_cargar").setSuccess(this.tbClienteProdEnsamblados),this.getField("campo_carga_tb").setCustomSuccess(this.refrescarTbClienteProdEnsamblados),this.getField("btn_agregar").setSuccess(this.agregarClientProdEnsamb),this.getField("componentes_id").setOnChange(this.habilitarBtnAgregar),this.getField("referencia").setOnChange(this.habilitarBtnAgregar),this.getField("maquina").setOnChange(this.habilitarBtnAgregar),this.getField("detalle").setOnChange(this.habilitarBtnAgregar),this.getField("btn_cancelar").setClick(this.BtnCancelar)}},{key:"BtnCancelar",value:function(){this.getField("cliente").setValue(""),this.getField("sede").setValue(""),this.getField("nombre_nit").setValue(""),this.getField("producto").setValue(""),this.getField("nombre").setValue(""),this.getField("referencia").setValue(""),this.getField("maquina").setValue(""),this.getField("detalle").setValue(""),this.getField("tercero_id").setValue(""),this.getField("componentes_id").setValue(""),this.getField("tb_clientes_productos_ensamblados").toggle(!1)}},{key:"habilitarBtnAgregar",value:function(){""!==this.getField("tercero_id").getValue()&&" "!==this.getField("tercero_id").getValue()&&""!==this.getField("componentes_id").getValue()&&" "!==this.getField("componentes_id").getValue()&&""!==this.getField("referencia").getValue()&&" "!==this.getField("referencia").getValue()&&""!==this.getField("maquina").getValue()&&" "!==this.getField("maquina").getValue()&&""!==this.getField("detalle").getValue()&&" "!==this.getField("detalle").getValue()?this.getField("btn_agregar").setDisabled(!1):this.getField("btn_agregar").setDisabled(!0)}},{key:"agregarClientProdEnsamb",value:function(e){200===e.estado_p&&(this.getField("campo_carga_tb").setValue(this.getField("tercero_id").getValue()),this.getField("producto").setValue(""),this.getField("nombre").setValue(""),this.getField("referencia").setValue(""),this.getField("maquina").setValue(""),this.getField("detalle").setValue(""),this.getField("componentes_id").setValue(""))}},{key:"refrescarTbClienteProdEnsamblados",value:function(e){if(e.length>=1){this.getField("tb_clientes_productos_ensamblados").toggle(!0),this.gridOptionsClienteProdEnsamblados.rowData=e;var t=new Map;t.set("eliminar",{cellRenderer:this.setButtonEliminarTbClientProdEnsamblados,field:"Eliminar",width:150}),this.getField("tb_clientes_productos_ensamblados").initData(this.gridOptionsClienteProdEnsamblados,t)}else this.getField("tb_clientes_productos_ensamblados").toggle(!1)}},{key:"tbClienteProdEnsamblados",value:function(e){if(200===e.estado_p)if(e.data.length>=1){this.getField("tb_clientes_productos_ensamblados").toggle(!0),this.gridOptionsClienteProdEnsamblados.rowData=e.data;var t=new Map;t.set("eliminar",{cellRenderer:this.setButtonEliminarTbClientProdEnsamblados,field:"Eliminar",width:150}),this.getField("tb_clientes_productos_ensamblados").initData(this.gridOptionsClienteProdEnsamblados,t)}else this.getField("tb_clientes_productos_ensamblados").toggle(!1)}},{key:"setButtonEliminarTbClientProdEnsamblados",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.funcionClickEliminarItemClientProdEnsam(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"funcionClickEliminarItemClientProdEnsam",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","\xbfDesea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.eliminarItemClientProdEnsam),this.getField("confirmModalCustom").toggle(!0)}},{key:"eliminarItemClientProdEnsam",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_delete){var e={id:this.id_delete};this.generalFormat.nombre_accion="clientProdEnsamb_s_productos_componentes_eliminar_1209",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarItemClientProdEnsam,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarItemClientProdEnsam",value:function(e){200===e.estado_p&&(this.getField("campo_carga_tb").setValue(this.getField("tercero_id").getValue()),this.getField("producto").setValue(""),this.getField("nombre").setValue(""),this.getField("referencia").setValue(""),this.getField("maquina").setValue(""),this.getField("detalle").setValue(""),this.getField("componentes_id").setValue(""))}},{key:"habilitarBtnCargar",value:function(){this.habilitarBtnAgregar(),""!==this.getField("tercero_id").getValue()&&" "!==this.getField("tercero_id").getValue()?this.getField("btn_cargar").setDisabled(!1):(this.getField("btn_cargar").setDisabled(!0),this.getField("btn_cargar").setDisabled(!0)||this.getField("tb_clientes_productos_ensamblados").toggle(!1))}}]),i}(d.a.form);d.a.addController("clientProdEnsamb",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.getter=o.getter.bind(Object(s.a)(o)),o.setter=o.setter.bind(Object(s.a)(o)),o.triggerTB=o.triggerTB.bind(Object(s.a)(o)),o.showTB=o.showTB.bind(Object(s.a)(o)),o.configState=o.configState.bind(Object(s.a)(o)),o.changeState=o.changeState.bind(Object(s.a)(o)),o.successChangeStateA=o.successChangeStateA.bind(Object(s.a)(o)),o.successChangeStateI=o.successChangeStateI.bind(Object(s.a)(o)),o.setDelete=o.setDelete.bind(Object(s.a)(o)),o.deleteItem=o.deleteItem.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.addItem=o.addItem.bind(Object(s.a)(o)),o.successAdd=o.successAdd.bind(Object(s.a)(o)),o.cancel=o.cancel.bind(Object(s.a)(o)),o.gridOptionsOnShowTB=Object.assign({},o.gridOptions),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("bt_agregar").setClick(this.addItem),this.getField("bt_cancelar").setClick(this.cancel),this.triggerTB()}},{key:"getter",value:function(e){return this.getField(e).getValue()}},{key:"setter",value:function(e,t){this.getField(e).setValue(t)}},{key:"triggerTB",value:function(){this.generalFormat.nombre_accion="servicio_codigos_alternos-todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.showTB,error:this.error_,general:this.generalFormat})}},{key:"showTB",value:function(e){if(200===e.estado_p){var t=new Map;t.set("inactivar",{cellRenderer:this.configState,field:"Acci\xf3n"}),t.set("eliminar",{cellRenderer:this.setDelete,field:"Acci\xf3n"}),this.gridOptionsOnShowTB.rowData=e.model,this.getField("tb_productos_alternos").initData(this.gridOptionsOnShowTB,t)}}},{key:"setDelete",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.deleteItem(e.data.id)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"deleteItem",value:function(e){if(e){var t={id:e};this.generalFormat.nombre_accion="servicio_codigos_alternos-eliminar",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.successDelete,error:this.error_,general:this.generalFormat})}}},{key:"successDelete",value:function(){this.alertGeneral.toggle(!0,"Registro eliminado con \xe9xito.","success"),this.triggerTB()}},{key:"addItem",value:function(){if(this.getter("articuloprincipal_id")===this.getter("componentearticulo_id"))this.alertGeneral.toggle(!0,"El Articulo y el Componente no pueden ser el mismo.","error");else if(""===this.getter("articuloprincipal_id")||""===this.getter("componentearticulo_id")||""===this.getter("costo_componente")||""===this.getter("cantidad_componente")||"*"!==this.getter("factor_componente")&&"/"!==this.getter("factor_componente"))this.alertGeneral.toggle(!0,"No puede enviar campos vac\xedos. Por favor revise los datos.","error");else{var e={cantidad_componente:parseFloat(this.getter("cantidad_componente")),factor_componente:this.getter("factor_componente"),costo_componente:this.getter("costo_componente"),articuloprincipal_id:this.getter("articuloprincipal_id"),componentearticulo_id:this.getter("componentearticulo_id"),estadoactivo_id:1};this.generalFormat.nombre_accion="servicio_codigos_alternos-crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successAdd,error:this.error_,general:this.generalFormat})}}},{key:"successAdd",value:function(e){200===e.estado_p&&this.cancel()}},{key:"cancel",value:function(){this.setter("codigo_articulo",""),this.setter("nombre_articulo_principal",""),this.setter("codigo_componente",""),this.setter("nombre_componente",""),this.setter("cantidad_componente",""),this.setter("factor_componente",""),this.setter("costo_componente",""),this.triggerTB()}},{key:"configState",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.changeState(e.data.id,e.data.estadoactivo_id)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),2===e.data.estadoactivo_id?i.setAttribute("value","Activar"):i.setAttribute("value","Inactivar"),i}},{key:"changeState",value:function(e,t){if(t)if(2===t){var i={id:e,factor_componente:"*",estadoactivo_id:1};this.generalFormat.nombre_accion="servicio_codigos_alternos-modificarestado",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successChangeStateA,error:this.error_,general:this.generalFormat})}else{var a={id:e,factor_componente:"*",estadoactivo_id:2};this.generalFormat.nombre_accion="servicio_codigos_alternos-modificarestado",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:a,success:this.successChangeStateI,error:this.error_,general:this.generalFormat})}}},{key:"successChangeStateA",value:function(){this.triggerTB(),this.alertGeneral.toggle(!0,'Operaci\xf3n exitosa: estado del registro "Activo".',"success")}},{key:"successChangeStateI",value:function(){this.triggerTB(),this.alertGeneral.toggle(!0,'Operaci\xf3n exitosa: estado del registro "Inactivo".',"success")}}]),i}(d.a.form);d.a.addController("articulosAlternos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.setTipoTercero=o.setTipoTercero.bind(Object(s.a)(o)),o.successTipoTercero=o.successTipoTercero.bind(Object(s.a)(o)),o.successTablaClientes=o.successTablaClientes.bind(Object(s.a)(o)),o.gridOptionsTB=Object.assign({},o.gridOptions),o.setButtonActivarInactivar=o.setButtonActivarInactivar.bind(Object(s.a)(o)),o.deleteEspecification=o.deleteEspecification.bind(Object(s.a)(o)),o.activeInactiveEspecif=o.activeInactiveEspecif.bind(Object(s.a)(o)),o.successActivarInactivar=o.successActivarInactivar.bind(Object(s.a)(o)),o.btnLimpiarCampos=o.btnLimpiarCampos.bind(Object(s.a)(o)),o.setButtonEliminar=o.setButtonEliminar.bind(Object(s.a)(o)),o.confirmDeleteCustom=o.confirmDeleteCustom.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.btnAgregarCliente=o.btnAgregarCliente.bind(Object(s.a)(o)),o.successAgregarCliente=o.successAgregarCliente.bind(Object(s.a)(o)),o.id_delete=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.generalFormat.nombre_accion="513-Servicio_configuracion_clientes_clientes_todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successTablaClientes,error:this.error_,general:this.generalFormat}),this.getField("cargatercero_id").setCustomSuccess(this.setTipoTercero),this.getField("agregar").setClick(this.btnAgregarCliente),this.getField("cancelar").setClick(this.btnLimpiarCampos)}},{key:"setTipoTercero",value:function(){var e={value:parseInt(this.getField("tercero_id").getValue())};this.generalFormat.nombre_accion="513-Servicio_configuracion_clientes_terceros_tipotercero",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTipoTercero,error:this.error_,general:this.generalFormat})}},{key:"successTipoTercero",value:function(e){200===e.estado_p&&("C"===e.data[0].tipo_cliente?this.getField("tipo_cliente").setValue(e.data[0].tipo_cliente):(this.alertGeneral.toggle(!0,"Tercero no permitido","error"),this.btnLimpiarCampos()))}},{key:"successTablaClientes",value:function(e){if(200===e.estado_p){this.gridOptionsTB.rowData=[],this.getField("conf_clientesTB").initData(this.gridOptionsTB);var t=new Map;t.set(5,{cellRenderer:this.setButtonEliminar,field:"Eliminar"}),t.set(6,{cellRenderer:this.setButtonActivarInactivar,field:"Activar/Inactivar"}),this.gridOptionsTB.rowData=e.model,this.getField("conf_clientesTB").initData(this.gridOptionsTB,t)}else this.getField("conf_clientesTB").toggle(!1)}},{key:"setButtonEliminar",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteEspecification(i)},a.setAttribute("id","button_pdf_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","eliminar"),a}},{key:"deleteEspecification",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustom),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustom",value:function(){this.getField("confirmModalCustom").toggle(!1);var e={id:parseInt(this.id_delete)};this.generalFormat.nombre_accion="513-Servicio_configuracion_clientes_clientes_eliminar",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successDelete,error:this.error_,general:this.generalFormat})}},{key:"successDelete",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.uploadTable())}},{key:"uploadTable",value:function(){this.generalFormat.nombre_accion="513-Servicio_configuracion_clientes_clientes_todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successTablaClientes,error:this.error_,general:this.generalFormat})}},{key:"setButtonActivarInactivar",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.activeInactiveEspecif(i)},a.setAttribute("id","button_pdf_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),"Inactivo"===e.data.estado_descripcion?a.setAttribute("value","Activar"):"Activo"===e.data.estado_descripcion&&a.setAttribute("value","Inactivar"),a}},{key:"activeInactiveEspecif",value:function(e){var t={id:e};this.generalFormat.nombre_accion="513-Servicio_configuracion_clientes_clientes_activarinactivar",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successActivarInactivar,error:this.error_,general:this.generalFormat})}},{key:"successActivarInactivar",value:function(e){200===e.estado_p&&this.uploadTable()}},{key:"btnAgregarCliente",value:function(){if(this.getField("nit").valid()&&this.getField("proveedoresclientescanales_id").valid()&&this.getField("proveedoresclientestipologias_id").valid()&&this.getField("estadoactivo_id").valid()&&""!==this.getField("tercero_id")){var e={tercero_id:this.getField("tercero_id").getValue(),proveedoresclientescanales_id:this.getField("proveedoresclientescanales_id").getValue(),proveedoresclientestipologias_id:this.getField("proveedoresclientestipologias_id").getValue(),estadoactivo_id:this.getField("estadoactivo_id").getValue()};this.generalFormat.nombre_accion="513-Servicio_configuracion_clientes_clientes_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successAgregarCliente,error:this.error_,general:this.generalFormat})}}},{key:"successAgregarCliente",value:function(e){200===e.estado_p&&this.uploadTable()}},{key:"btnLimpiarCampos",value:function(){this.getField("nit").setValue(""),this.getField("sede").setValue(""),this.getField("nombre").setValue(""),this.getField("proveedoresclientescanales_id").setValue(""),this.getField("proveedoresclientestipologias_id").setValue(""),this.getField("estadoactivo_id").setValue("")}}]),i}(d.a.form);d.a.addController("clientes_conf",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.configurarProducto=o.configurarProducto.bind(Object(s.a)(o)),o.successConfigurarProducto=o.successConfigurarProducto.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnModificar").setClick(this.configurarProducto)}},{key:"configurarProducto",value:function(){var e={id:this.getField("id").getValue(),es_producto_fabricado_id:this.getField("es_producto_fabricado_id").getValue(),unidad_id:this.getField("unidad_id").getValue(),maneja_lote_id:this.getField("maneja_lote_id").getValue(),es_envasado_id:this.getField("es_envasado_id").getValue(),capacidad:this.getField("capacidad").getValue(),color:this.getField("color").getValue(),ral:this.getField("ral").getValue()};this.generalFormat.nombre_accion="servicio_actualizar_articulo_produccion",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successConfigurarProducto,error:this.error_,general:this.generalFormat})}},{key:"successConfigurarProducto",value:function(e){200===e.estado_p&&(this.getField("es_producto_fabricado_id").setValue(2),this.getField("maneja_lote_id").setValue(2),this.getField("unidad_id").setValue(" "),this.getField("es_envasado_id").setValue(" "),this.getField("codigo").setValue(" "),this.getField("nombre").setValue(" "),this.getField("capacidad").setValue(" "),this.getField("color").setValue(" "),this.getField("ral").setValue(" "))}}]),i}(d.a.form);d.a.addController("ConfProd",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).success2=function(e){void 0!==e.estado_p&&200!==e.estado_p||(o.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),o.UploadTable())},o.success=function(e){if(e.model&&e.model.length>0){if(o.gridOptions.rowData=e.model,e.model&&e.model.length>0){var t=new Map;t.set("opcion",{cellRenderer:o.setButtonDelete,field:"Opci\xf3n"}),t.set("token",{cellRenderer:o.setButtonToken}),o.getField("table_config").initData(o.gridOptions,t)}o.getField("nit").setValue(""),o.getField("sede").setValue(""),o.getField("nombre").setValue("")}else o.getField("table_config").toggle(!1)},o.error_=function(e){},o.onClick=function(){if(o.getField("nit").valid()&&o.getField("sede").valid()&&o.getField("nombre").valid()){var e={accion:"servicio",campo:"button_upload",id_formulario:o.formId,nit:o.getField("nit").getValue(),sede:o.getField("sede").getValue(),nombre:o.getField("nombre").getValue(),id_tercero:parseInt(o.getField("tercero_id").getValue())};o.service.send(o.getConstant().formSave(),"POST",e,o.success2,o.error_)}},o.UploadTable=function(){o.service.send(o.getConstant().searchFormat().format("","table_config","servicio",o.formId),"GET",void 0,o.success,o.error_)},o.successToken=o.successToken.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.state.open=!1,o.initForm=o.initForm.bind(Object(s.a)(o)),o.delete=o.delete.bind(Object(s.a)(o)),o.changeToken=o.changeToken.bind(Object(s.a)(o)),o.onClick=o.onClick.bind(Object(s.a)(o)),o.setButtonToken=o.setButtonToken.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("button_upload").setClick(this.onClick),this.UploadTable()}},{key:"setButtonToken",value:function(e){var t=this,i=e.data.id,a=e.getValue(),o=document.createElement("div"),s=document.createElement("label"),r=document.createElement("input");return r.onclick=function(){return t.changeToken(i)},r.setAttribute("id","button_"+i),r.setAttribute("type","button"),r.setAttribute("style","font-weight: 500;line-height: 1.75;font-family: 'Roboto', 'Helvetica', 'Arial', sans-serif;border-radius: 4px;font-size: 0.875rem; box-shadow:0px 3px 1px -2px rgba(0,0,0,0.2), 0px 2px 2px 0px rgba(0,0,0,0.14), 0px 1px 5px 0px rgba(0,0,0,0.12);text-transform: uppercase; height: 100%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-right:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer;transition: background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;"),r.setAttribute("value","Token"),s.setAttribute("id","label_"+i),s.textContent="  "+a,o.appendChild(r),o.appendChild(s),o}},{key:"delete",value:function(e){this.successDeleteCustom=this.successDelete;var t={accion:"f9_servicio",campo:"table_config",id_formulario:this.formId,id:e};this.data=t,this.getField("modalDelete").toggle(!0)}},{key:"successDelete",value:function(e){void 0!==e.estado_p&&200!==e.estado_p||(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.UploadTable())}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.delete(i)},a.setAttribute("id","button_delete_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Eliminar"),a}},{key:"successToken",value:function(e){void 0!==e.estado_p&&200!==e.estado_p||(document.getElementById("label_"+e.model.id).textContent=e.token,this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"))}},{key:"changeToken",value:function(e){var t={accion:"f9_servicio",campo:"table_config",id_formulario:this.formId,id:e};this.service.send(this.getConstant().formSave(),"PUT",t,this.successToken,this.error_)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.traerProductosVisiblesHome=o.traerProductosVisiblesHome.bind(Object(s.a)(o)),o.successTraerProductosVisiblesHome=o.successTraerProductosVisiblesHome.bind(Object(s.a)(o)),o.gridOptionsVisibles=Object.assign({},o.gridOptions),o.setButtonSubir=o.setButtonSubir.bind(Object(s.a)(o)),o.subirArticulo=o.subirArticulo.bind(Object(s.a)(o)),o.setButtonBajar=o.setButtonBajar.bind(Object(s.a)(o)),o.bajarArticulo=o.bajarArticulo.bind(Object(s.a)(o)),o.successSubirArticulo=o.successSubirArticulo.bind(Object(s.a)(o)),o.setButtonEnviar=o.setButtonEnviar.bind(Object(s.a)(o)),o.enviarArticulo=o.enviarArticulo.bind(Object(s.a)(o)),o.successEnviarArticulo=o.successEnviarArticulo.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.traerProductosVisiblesHome(),this.getField("boton_refrescar").setClick(this.traerProductosVisiblesHome)}},{key:"traerProductosVisiblesHome",value:function(){this.generalFormat.nombre_accion="346-Busca_portafolio_ecommerce_producto_que_sean_visible",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successTraerProductosVisiblesHome,error:this.error_,general:this.generalFormat})}},{key:"successTraerProductosVisiblesHome",value:function(e){if(e.model&&e.model.length>0){this.gridOptionsVisibles.rowData=e.model;var t=new Map;t.set(5,{cellRenderer:this.setButtonSubir,field:"subir",width:150}),t.set(6,{cellRenderer:this.setButtonBajar,field:"bajar",width:150}),t.set(8,{cellRenderer:this.setButtonEnviar,field:"enviar",width:150}),this.getField("tabla_productos").initData(this.gridOptionsVisibles,t)}else this.getField("tabla_productos").toggle(!1)}},{key:"setButtonSubir",value:function(e){var t=this,i=e.data.orden,a=document.createElement("input");return a.onclick=function(){return t.subirArticulo(e.data.id)},a.setAttribute("id","button_aprove_"),a.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),a.setAttribute("type","button"),a.setAttribute("value","Subir"),1===i&&(a.setAttribute("style","width:60px;height: 20px%; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),a.setAttribute("disabled",!0)),a}},{key:"subirArticulo",value:function(e){var t=e;if(this.getField("accion").setValue("subir"),""!==t&&"subir"===this.getField("accion").getValue()){var i={id:t,accion:this.getField("accion").getValue()};this.generalFormat.nombre_accion="346-Permite_modificar_orden_de_un_producto",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successSubirArticulo,error:this.error_,general:this.generalFormat})}}},{key:"successSubirArticulo",value:function(e){200===e.estado_p&&this.traerProductosVisiblesHome()}},{key:"setButtonBajar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.bajarArticulo(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Bajar"),i}},{key:"bajarArticulo",value:function(e){var t=e;if(this.getField("accion").setValue("bajar"),""!==t&&"bajar"===this.getField("accion").getValue()){var i={id:t,accion:this.getField("accion").getValue()};this.generalFormat.nombre_accion="346-Permite_modificar_orden_de_un_producto",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successSubirArticulo,error:this.error_,general:this.generalFormat})}}},{key:"setButtonEnviar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.enviarArticulo(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Enviar"),i}},{key:"enviarArticulo",value:function(e){if(this.getField("id_subir").setValue(e),""!==this.getField("id_subir").getValue()){var t={value:this.getField("id_subir").getValue()};this.generalFormat.nombre_accion="376-Actualiza_datos_producto_en_elasticsearch",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successEnviarArticulo,error:this.error_,general:this.generalFormat})}}},{key:"successEnviarArticulo",value:function(e){200===e.estado_p&&this.traerProductosVisiblesHome()}}]),i}(d.a.form);d.a.addController("configurar_pag_prin",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.handlerClickSave=o.handlerClickSave.bind(Object(s.a)(o)),o.consultarConsecutivo=o.consultarConsecutivo.bind(Object(s.a)(o)),o.cancelarConsecutivo=o.cancelarConsecutivo.bind(Object(s.a)(o)),o.successConsecutivo=o.successConsecutivo.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("codigo").setDisabled(!0),this.getField("desde").setDisabled(!0),this.getField("hasta").setDisabled(!0),this.buttons.has("btn_save")&&this.buttons.get("btn_save").ref.current.setClick(this.handlerClickSave)}},{key:"handlerClickSave",value:function(){var e=parseInt(this.getField("desde").getValue().split("-")[2]),t=parseInt(this.getField("desde").getValue().split("-")[1]),i=parseInt(this.getField("desde").getValue().split("-")[0]);this.getField("fecha").setValue(this.getField("desde").getValue());var a=parseInt(this.getField("hasta").getValue().split("-")[2]),o=parseInt(this.getField("hasta").getValue().split("-")[1]),s=parseInt(this.getField("hasta").getValue().split("-")[0]),r=!0;(r=s>i||s===i&&(o>t||o===t&&a>=e))?(this.getField("hasta").setError(!r,""),this.onClickSave()):this.getField("hasta").setError(!r,"* Fecha debe ser Mayor que la fecha Desde")}},{key:"cancelarConsecutivo",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!1),this.buttons.get("btn_change").ref.current.setDisabled(!1),this.buttons.get("btn_delete").ref.current.setDisabled(!1),this.getField("btnConsultar").setVisible(!1),this.getField("btnCancelar").setVisible(!1),this.getField("codigo").setDisabled(!0),this.getField("desde").setDisabled(!0),this.getField("hasta").setDisabled(!0)}},{key:"consultarConsecutivo",value:function(){this.getField("codigo").valid()&this.getField("desde").valid()&&this.service.send(this.getConstant().searchFormat().format(this.getField("codigo").getValue()+","+this.getField("desde").getValue(),"btnConsultar","servicio",this.formId),"GET",void 0,this.successConsecutivo,this.error_)}},{key:"successConsecutivo",value:function(e){200===e.estado_p&&e.model.length>0&&(this.gridOptions.rowData=e.model,this.getField("tableShowData").initData(this.gridOptions))}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).onSelectionChangedRowTable=function(){var e=o.gridOptions2.api.getSelectedRows(),t=e[0].nit,i=e[0].sede;o.numero_documento=e[0].numero_documento,o.guardarNitSede(o.id_data,t,i,o.fechaNit,o.codigo_doc),o.getField("modal_movimientos").handleClose()},o.initForm=o.initForm.bind(Object(s.a)(o)),o.sendSearchMov=o.sendSearchMov.bind(Object(s.a)(o)),o.setButtonValorActual=o.setButtonValorActual.bind(Object(s.a)(o)),o.validarFechas=o.validarFechas.bind(Object(s.a)(o)),o.consultarMovimientos=o.consultarMovimientos.bind(Object(s.a)(o)),o.successMovimiento=o.successMovimiento.bind(Object(s.a)(o)),o.valorActualChange=o.valorActualChange.bind(Object(s.a)(o)),o.setButtonClone=o.setButtonClone.bind(Object(s.a)(o)),o.setDataTable=o.setDataTable.bind(Object(s.a)(o)),o.clonarCampo=o.clonarCampo.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.borrarDatos=o.borrarDatos.bind(Object(s.a)(o)),o.successGrabarValorActual=o.successGrabarValorActual.bind(Object(s.a)(o)),o.fechaActualChange=o.fechaActualChange.bind(Object(s.a)(o)),o.detalleActualChange=o.detalleActualChange.bind(Object(s.a)(o)),o.cuentaActualChange=o.cuentaActualChange.bind(Object(s.a)(o)),o.fuenteActualChange=o.fuenteActualChange.bind(Object(s.a)(o)),o.successClonarMovimiento=o.successClonarMovimiento.bind(Object(s.a)(o)),o.comprobarCuenta=o.comprobarCuenta.bind(Object(s.a)(o)),o.successCuenta=o.successCuenta.bind(Object(s.a)(o)),o.successComprobante=o.successComprobante.bind(Object(s.a)(o)),o.successGrabarNitSedeActual=o.successGrabarNitSedeActual.bind(Object(s.a)(o)),o.guardarNitSede=o.guardarNitSede.bind(Object(s.a)(o)),o.nitYsedeChange=o.nitYsedeChange.bind(Object(s.a)(o)),o.nitYsede2Change=o.nitYsede2Change.bind(Object(s.a)(o)),o.onSelectionChangedRowTable=o.onSelectionChangedRowTable.bind(Object(s.a)(o)),o.initModal=o.initModal.bind(Object(s.a)(o)),o.numeroDocumentoChange=o.numeroDocumentoChange.bind(Object(s.a)(o)),o.successNitYSede=o.successNitYSede.bind(Object(s.a)(o)),o.baseActualChange=o.baseActualChange.bind(Object(s.a)(o)),o.successDptoInterno=o.successDptoInterno.bind(Object(s.a)(o)),o.valor_actual_dpto=o.gridOptionsTableDefault="",o.codigo_doc="",o.valor_anterior_dpto="",o.id_data=0,o.valores_negativos=0,o.valores_positivos=0,o.fechaNit="",o.old_value="",o.datosAux=[],o.gridOptionsTablaConsulta=Object.assign({},o.gridOptions),o.gridOptionsTablaConsulta.onSelectionChanged=o.onSelectionChangedNada,o.gridOptions2=Object.assign({},o.gridOptions),o.gridOptions2.onSelectionChanged=o.onSelectionChangedRowTable,o.numero_documento="",o}return Object(o.a)(i,[{key:"onSelectionChangedNada",value:function(){console.log("=====> Se ejecuto la funcion OnSelectionChangedNada")}},{key:"initForm",value:function(){console.log("=====> Se cargo el formulario"),this.getField("btn_consultar").setClick(this.consultarMovimientos),this.getField("total_negativos").setVisible(!1),this.getField("total_positivos").setVisible(!1),this.getField("total_diferencia").setVisible(!1),this.getField("fecha_desde").setOnChange(this.borrarDatos),this.getField("fecha_hasta").setOnChange(this.borrarDatos),this.getField("numero_de_documento").setOnChange(this.borrarDatos),this.getField("codigo_comprobante").setOnChange(this.borrarDatos)}},{key:"borrarDatos",value:function(){this.getField("numero_de_documento").setError(!1,""),this.getField("fecha_desde").setError(!1,""),this.getField("fecha_hasta").setError(!1,""),this.getField("tabla_movimientos").toggle(!1),this.getField("total_negativos").setVisible(!1),this.getField("total_positivos").setVisible(!1),this.getField("total_diferencia").setVisible(!1),console.log("Se borro por ejecucion de borrarDatos()"),this.getField("codigo_comprobante").setError(!1,"* Este campo es requerido.")}},{key:"validarFechas",value:function(){var e=parseInt(this.getField("fecha_desde").getValue().split("-")[2]),t=parseInt(this.getField("fecha_desde").getValue().split("-")[1]),i=parseInt(this.getField("fecha_desde").getValue().split("-")[0]),a=parseInt(this.getField("fecha_hasta").getValue().split("-")[2]),o=parseInt(this.getField("fecha_hasta").getValue().split("-")[1]),s=parseInt(this.getField("fecha_hasta").getValue().split("-")[0]),r=!1;return(s>i||s===i&&(o>t||o===t&&a>=e))&&(r=!0),this.getField("fecha_hasta").setError(!r,"* Fecha Hasta debe ser Mayor a fecha Desde"),r}},{key:"consultarMovimientos",value:function(){if(""===this.getField("numero_de_documento").getValue()&&""===this.getField("codigo_comprobante").getValue()&&""===this.getField("nombre_comprobante").getValue())this.getField("codigo_comprobante").setError(!0,"* Este campo es requerido."),this.getField("nombre_comprobante").setError(!0,"* Este campo es requerido."),console.log("CAMPO REQUERIDO ---\x3e>>");else if(""===this.getField("numero_de_documento").getValue())if(this.getField("numero_de_documento").setError(!1,""),this.getField("codigo_comprobante").setError(!1,"* Este campo es requerido."),""!==this.getField("codigo_comprobante").getValue()&&""===this.getField("numero_de_documento").getValue()&&""!==this.getField("nombre_comprobante").getValue()){console.log("BUSQUEDA POR COMPROBANTE"),this.getField("numero_de_documento").setError(!1,"");this.sendSearchMov("servicio_traer_movimiento_por_fechainicial_fechafinal_numero_comp",{fecha_inicial:this.getField("fecha_desde").getValue(),fecha_final:this.getField("fecha_hasta").getValue(),numero:"*",codigo:this.getField("codigo_comprobante").getValue()})}else if(this.existeFecha(this.getField("fecha_desde").getValue())&this.existeFecha(this.getField("fecha_hasta").getValue())){if(this.validarFechas()){var e=this.getField("fecha_desde").getValue().split("-")[1],t=this.getField("fecha_hasta").getValue().split("-")[1],i=this.getField("fecha_desde").getValue().split("-")[0],a=this.getField("fecha_hasta").getValue().split("-")[0];parseInt(i)===parseInt(a)?parseInt(t)-parseInt(e)<=1?(this.getField("fecha_desde").setError(!1,""),this.getField("fecha_hasta").setError(!1,"")):(this.getField("fecha_desde").setError(!0,"* La diferencia debe ser menor a 1 mes"),this.getField("fecha_hasta").setError(!0,"* La diferencia debe ser menor a 1 mes")):(this.getField("fecha_desde").setError(!0,"* Las fechas deben estar en el mismo a\xf1o"),this.getField("fecha_hasta").setError(!0,"* Las fechas deben estar en el mismo a\xf1o"))}}else this.alertGeneral.toggle(!0,"Alguna de las fechas es incorrecta","error");else if(this.getField("numero_de_documento").valid()&this.validarFechas())if(this.existeFecha(this.getField("fecha_desde").getValue())&this.existeFecha(this.getField("fecha_hasta").getValue())){var o="*";""!==this.getField("codigo_comprobante").getValue()&&this.getField("nombre_comprobante").valid()?(o=this.getField("codigo_comprobante").getValue(),this.sendSearchMov("servicio_traer_movimiento_por_fechainicial_fechafinal_numero_comp",{fecha_inicial:this.getField("fecha_desde").getValue(),fecha_final:this.getField("fecha_hasta").getValue(),numero:this.getField("numero_de_documento").getValue(),codigo:o})):""===this.getField("codigo_comprobante").getValue()&&(this.getField("nombre_comprobante").setError(!1,""),this.sendSearchMov("servicio_traer_movimiento_por_fechainicial_fechafinal_numero_comp",{fecha_inicial:this.getField("fecha_desde").getValue(),fecha_final:this.getField("fecha_hasta").getValue(),numero:this.getField("numero_de_documento").getValue(),codigo:o}))}else this.alertGeneral.toggle(!0,"Alguna de las fechas es incorrecta","error")}},{key:"sendSearchMov",value:function(e,t){this.generalFormat.nombre_accion=e,this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successMovimiento,error:this.error_,general:this.generalFormat})}},{key:"successMovimiento",value:function(e){console.log(e),200===e.estado_p?e.model.length>0&&this.setDataTable(e.model):this.getField("tabla_movimientos").toggle(!1)}},{key:"setDataTable",value:function(e){this.gridOptionsTablaConsulta=Object.assign({},this.gridOptions),this.gridOptionsTablaConsulta.onSelectionChanged=this.onSelectionChangedNada,this.gridOptionsTablaConsulta.rowData=[],this.getField("tabla_movimientos").initData(this.gridOptionsTablaConsulta),this.valores_negativos=0,this.valores_positivos=0;var t=new Map;for(var i in t.set(0,{cellRenderer:this.setButtonClone,width:90,sortable:!1,filter:!1,field:"clonar"}),t.set("valor",{cellRenderer:this.setButtonValorActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorActualChange,width:100,editable:!0,field:"valor"}),t.set("base",{cellRenderer:this.setButtonBaseActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.baseActualChange,width:100,editable:!0,field:"base"}),t.set("fecha_documento",{cellRenderer:this.setButtonFechaActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.fechaActualChange,width:100,editable:!0,field:"fecha_documento"}),t.set("numero_documento",{cellRenderer:this.setButtonNumeroActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.numeroDocumentoChange,width:100,editable:!0,field:"numero_documento"}),t.set("codigo_documento",{cellRenderer:this.setButtonCodigoActual,width:120,field:"comprobante"}),t.set("sede",{cellRenderer:this.setButtonSedeActual,width:80,field:"sede"}),t.set("documento_fuente",{cellRenderer:this.setButtonFuenteActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.fuenteActualChange,width:160,editable:!0,field:"documento_fuente"}),t.set("codigo_cuenta",{cellRenderer:this.setButtonCuentaActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.cuentaActualChange,width:100,editable:!0,field:"codigo_cuenta"}),t.set("nit",{cellRenderer:this.setButtonNitActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.nitYsedeChange,width:100,editable:!0,field:"nit"}),t.set("detalle",{cellRenderer:this.setButtonDetalleActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.detalleActualChange,editable:!0,field:"detalle"}),this.gridOptionsTablaConsulta.rowData=e,this.getField("tabla_movimientos").initData(this.gridOptionsTablaConsulta,t),this.getField("total_negativos").setVisible(!0),this.getField("total_positivos").setVisible(!0),this.getField("total_diferencia").setVisible(!0),e)e[i].valor<0?this.valores_negativos+=e[i].valor:this.valores_positivos+=e[i].valor;this.getField("total_negativos").setValue("".redondear(this.valores_negativos,4)),this.getField("total_positivos").setValue("".redondear(this.valores_positivos,4)),this.getField("total_diferencia").setValue("".redondear(this.valores_positivos+this.valores_negativos,4))}},{key:"setButtonCodigoActual",value:function(e){var t=e.data.codigo_documento,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"setButtonClone",value:function(e){var t=this,i=e.data.id,a=e.data.fecha_documento.split("-")[0],o=document.createElement("input");return o.onclick=function(){return t.clonarCampo(i,a,0,"clonar")},o.setAttribute("id","button_delete_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","+"),o}},{key:"clonarCampo",value:function(e,t,i){var a={id:e,"a\xf1o":t,valor:i};this.generalFormat.nombre_accion="servicio_clonar_movimiento",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:a,success:this.successClonarMovimiento,error:this.error_,general:this.generalFormat})}},{key:"successClonarMovimiento",value:function(e){200===e.estado_p&&this.consultarMovimientos()}},{key:"setButtonFuenteActual",value:function(e){var t=e.data.documento_fuente,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"fuenteActualChange",value:function(e){if("C"===e.data.tipo_fuente||"P"===e.data.tipo_fuente){var t=this.getField("tabla_movimientos").cellValid(e.oldValue,e.newValue,"^[0-9a-zA-Z-]+$",20);if(t){var i=e.data.id,a=e.newValue,o=e.oldValue,s=e.data.codigo_documento,r=e.data.fecha_documento.split("-")[0];this.guardarValor(i,a,o,"documento_fuente",r,s)}else null!==t&&this.consultarMovimientos()}else this.alertGeneral.toggle(!0,"No se puede modificar este dato. Tipo de Fuente no es C o P","error"),this.consultarMovimientos()}},{key:"setButtonCuentaActual",value:function(e){var t=e.data.codigo_cuenta,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"cuentaActualChange",value:function(e){var t=this.getField("tabla_movimientos").cellValid(e.oldValue,e.newValue,"^[0-9]+$",10);t?(this.id_dato_cambiar=e.data.id,this.id_data=e.node.id,this.old_value=e.oldValue,this.comprobarCuenta(e.newValue,e)):null!==t&&this.consultarMovimientos()}},{key:"comprobarCuenta",value:function(e,t){var i=this;this.generalFormat.nombre_accion="servicio_comprobar_cuenta_consulta_mov";var a={value:e};this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:a,success:function(e){return i.successCuenta(e,t)},error:this.error_,general:this.generalFormat})}},{key:"successCuenta",value:function(e,t){if(200===e.estado_p){var i=this.gridOptionsTablaConsulta.api.getRowNode(this.id_data).data.fecha_documento.split("-")[0],a=e.model[0].codigo_cuenta,o=t.data.codigo_documento;this.guardarValor(this.id_dato_cambiar,a,this.old_value,"codigo_cuenta",i,o)}else this.consultarMovimientos()}},{key:"setButtonDetalleActual",value:function(e){var t=e.data.detalle,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"detalleActualChange",value:function(e){if(""!==e.newValue){if(e.oldValue+""!==e.newValue+""){var t=e.data.id,i=e.newValue,a=e.oldValue,o=e.data.codigo_documento,s=e.data.fecha_documento.split("-")[0];""!==i?this.guardarValor(t,i,a,"detalle",s,o):(this.alertGeneral.toggle(!0,"El campo no puede estar vac\xedo","error"),this.consultarMovimientos())}}else this.consultarMovimientos(),this.alertGeneral.toggle(!0,"Campo no puede estar vac\xedo","error")}},{key:"setButtonBaseActual",value:function(e){var t=e.data.base,i=document.createElement("div"),a=document.createElement("label");return a.textContent="".formatoPrecio(t),i.appendChild(a),i}},{key:"baseActualChange",value:function(e){var t=this.getField("tabla_movimientos").cellValid(e.oldValue,e.newValue,/^-?(\d{1,11})(\.\d{1,4})?$/,14);if(t){var i=e.data.id,a=e.newValue,o=e.oldValue,s=e.data.codigo_documento,r=e.data.fecha_documento.split("-")[0];this.guardarValor(i,parseFloat(a)?parseFloat(a):0,parseFloat(o)?parseFloat(o):0,"base",r,s)}else null!==t&&this.consultarMovimientos()}},{key:"setButtonValorActual",value:function(e){var t=e.data.valor,i=document.createElement("div"),a=document.createElement("label");return a.textContent="".formatoPrecio(t),i.appendChild(a),parseFloat(t)<0?this.valores_negativos+=parseFloat(t):parseFloat(t)>0&&(this.valores_positivos+=parseFloat(t)),i}},{key:"valorActualChange",value:function(e){var t=this.getField("tabla_movimientos").cellValid(e.oldValue,e.newValue,/^-?(\d{1,11})(\.\d{1,4})?$/,14);if(t){var i=e.data.id,a=e.newValue,o=e.oldValue,s=e.data.codigo_documento,r=e.data.fecha_documento.split("-")[0];this.guardarValor(i,parseFloat(a)?parseFloat(a):0,parseFloat(o)?parseFloat(o):0,"valor",r,s)}else null!==t&&this.consultarMovimientos()}},{key:"setButtonNumeroActual",value:function(e){var t=e.data.numero_documento,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"numeroDocumentoChange",value:function(e){var t=this.getField("tabla_movimientos").cellValid(e.oldValue,e.newValue,"^[0-9A-Za-z -]+$",20);if(t){var i=e.data.id,a=e.newValue,o=e.oldValue,s=e.data.codigo_documento,r=e.data.fecha_documento.split("-")[0];this.guardarValor(i,a,o,"numero_documento",r,s)}else null!==t&&this.consultarMovimientos()}},{key:"successComprobante",value:function(e,t){if(200===e.estado_p){var i=this.gridOptionsTablaConsulta.api.getRowNode(this.id_data).data.fecha_documento.split("-")[0],a=this.gridOptionsTablaConsulta.api.getRowNode(this.id_data).data.codigo_documento,o=this.gridOptionsTablaConsulta.api.getRowNode(this.id_data).data.id,s=t.data.codigo_documento;this.guardarValor(o,a,this.old_value,"codigo_documento",i,s)}else this.consultarMovimientos()}},{key:"setButtonDptoInternoActual",value:function(e){var t=e.data.dpto_interno,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"successDptoInterno",value:function(e){if(200===e.estado_p){this.guardarValor(this.id_data,this.valor_actual_dpto,this.valor_anterior_dpto,"dpto_interno",this.fechaNit)}else this.consultarMovimientos()}},{key:"setButtonNitActual",value:function(e){var t=e.data.nit,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"setButtonSedeActual",value:function(e){var t=e.data.sede,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"nitYsedeChange",value:function(e){var t=this.getField("tabla_movimientos").cellValid(e.oldValue,e.newValue,"^[0-9]+$",20);if(t){this.id_data=e.data.id;var i=e.newValue;this.fechaNit=e.data.fecha_documento.split("-")[0],this.generalFormat.nombre_accion="servicio_traer_nit_sede_movimiento";var a={value:i,estado:"A"};this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:a,success:this.successNitYSede,error:this.error_,general:this.generalFormat})}else null!==t&&this.consultarMovimientos()}},{key:"successNitYSede",value:function(e){200===e.estado_p?this.getField("modal_movimientos").handleClickOpen(this.initModal,e.model):this.consultarMovimientos()}},{key:"initModal",value:function(e){this.gridOptions2.rowData=e,this.getField("tabla_nit_sede").initData(this.gridOptions2)}},{key:"nitYsede2Change",value:function(e){if(e.oldValue!==e.newValue&&""!==e.newValue){var t=e.data.id,i=e.newValue,a=e.data.nit,o=e.data.fecha_documento.split("-")[0];this.guardarNitSede(t,a,i,o)}}},{key:"guardarNitSede",value:function(e,t,i,a){var o={id:e,"a\xf1o":a,nit:t,sede:parseInt(i)};this.generalFormat.nombre_accion="servicio_actualizar_nit_sede_movimiento",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:o,success:this.successGrabarNitSedeActual,error:this.error_,general:this.generalFormat})}},{key:"successGrabarNitSedeActual",value:function(e){200===e.estado_p&&this.consultarMovimientos()}},{key:"setButtonFechaActual",value:function(e){var t=e.data.fecha_documento,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"fechaActualChange",value:function(e){var t=this.getField("tabla_movimientos").cellValid(e.oldValue,e.newValue,"",10);if(t){var i=e.data.id,a=e.newValue,o=e.oldValue;if(this.validarFormatoFecha(a)&&this.existeFecha(a))if(parseInt(a.split("-")[0])===parseInt(o.split("-")[0])){var s=e.data.fecha_documento.split("-")[0],r=e.data.codigo_documento;this.guardarValor(i,a,o,"fecha_documento",s,r)}else this.alertGeneral.toggle(!0,"Las fechas deben tener el mismo a\xf1o","error"),this.consultarMovimientos();else this.alertGeneral.toggle(!0,"Fecha incorrecta","error"),this.consultarMovimientos()}else null!==t&&this.consultarMovimientos()}},{key:"guardarValor",value:function(e,t,i,a,o,s){var r={id:e,"a\xf1o":o,campo_tabla:a,valor_nuevo:t,codigo_documento:s};this.generalFormat.nombre_accion="servicio_actualizar_movimiento_consulta_movimiento",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:r,success:this.successGrabarValorActual,error:this.error_,general:this.generalFormat})}},{key:"successGrabarValorActual",value:function(e){200===e.estado_p&&this.alertGeneral.toggle(!0,"Ok","success"),this.consultarMovimientos()}},{key:"uploadTable",value:function(){this.consultarMovimientos()}},{key:"validarFormatoFecha",value:function(e){return!(!e.match(/^\d{2,4}-\d{1,2}-\d{1,2}$/)||""===e)}},{key:"existeFecha",value:function(e){var t=e.split("-"),i=t[2],a=t[1],o=t[0],s=new Date(o,a,"0");return!(parseInt(a)>12||parseInt(a)<1)&&(!(i-0>s.getDate()-0)&&(i+""!=="0"&&"0_"!==i&&"__"!==i&&"00"!==i))}}]),i}(d.a.form);d.a.addController("ConsMovMaes",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.traerBodegas=o.traerBodegas.bind(Object(s.a)(o)),o.successTraerBodegas=o.successTraerBodegas.bind(Object(s.a)(o)),o.configuracionTablaPrecios=Object.assign({},o.gridOptions),o.configuracionTablaBodega1=Object.assign({},o.gridOptions),o.configuracionTablaBodega2=Object.assign({},o.gridOptions),o.limpiar=o.limpiar.bind(Object(s.a)(o)),o.tablaPrecios=o.tablaPrecios.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"nada",value:function(){}},{key:"initForm",value:function(){console.log("inicia"),this.getField("btnCargar").setClick(this.traerBodegas),this.getField("nombre").setOnChange(this.limpiar),this.getField("precio3").setOnChange(this.tablaPrecios)}},{key:"tablaPrecios",value:function(){if(""!==this.getField("precio3").getValue()){var e={};e.precio1=this.getField("precio1").getValue(),e.precio2=this.getField("precio2").getValue(),e.precio3=this.getField("precio3").getValue();var t=[];t.push(e);var i=new Map;i.set("precio1",{cellRenderer:function(e){return"".formatoPrecio(e.data.precio1)}}),i.set("precio2",{cellRenderer:function(e){return"".formatoPrecio(e.data.precio2)}}),i.set("precio3",{cellRenderer:function(e){return"".formatoPrecio(e.data.precio3)}}),this.configuracionTablaPrecios.rowData=t,this.configuracionTablaPrecios.pagination=!1,this.configuracionTablaPrecios.suppressPaginationPanel=!0,this.configuracionTablaPrecios.onSelectionChanged=this.nada,this.getField("tbPrecios").initData(this.configuracionTablaPrecios,i),this.traerBodegas()}else this.getField("tbPrecios").toggle(!1)}},{key:"limpiar",value:function(){""!==this.getField("nombre").getValue()?this.getField("nombre").setError(!1,""):(this.getField("tbBodegas1").toggle(!1),this.getField("tbBodegas2").toggle(!1))}},{key:"traerBodegas",value:function(){if(""!==this.getField("nombre").getValue()){this.getField("nombre").setError(!1,"");var e={codigo_articulo:this.getField("codigo").getValue()};this.generalFormat.nombre_accion="consulta_produtos_articulo_saldo_costo_por_codigo_articulo",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerBodegas,error:this.error_,general:this.generalFormat})}else this.getField("nombre").setError(!0,"* Este campo es requerido")}},{key:"successTraerBodegas",value:function(e){if(console.log("Data bodega = ",e),200===e.estado_p){var t=new Map,i=[],a=[];e.data.forEach((function(e,t){t<=18?i.push(e):a.push(e)})),t.set("nombre",{cellRenderer:function(e){return e.data.nombre},field:"nombre"}),t.set("saldo",{cellRenderer:function(e){return"".formatoPrecio(e.data.saldo)},field:"saldo"}),t.set("costo",{cellRenderer:function(e){return"".formatoPrecio(e.data.costo)}}),this.configuracionTablaBodega1.rowData=i,this.configuracionTablaBodega2.rowData=a,this.configuracionTablaBodega1.paginationPageSize=18,this.configuracionTablaBodega1.pagination=!1,this.configuracionTablaBodega1.onSelectionChanged=this.nada,this.configuracionTablaBodega2.onSelectionChanged=this.nada,this.getField("tbBodegas1").initData(this.configuracionTablaBodega1,t),a.length>0?this.getField("tbBodegas2").initData(this.configuracionTablaBodega2,t):this.getField("tbBodegas2").toggle(!1)}else this.getField("tbBodegas1").toggle(!1),this.getField("tbBodegas2").toggle(!1)}}]),i}(d.a.form);d.a.addController("consulta_productos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTablaConsultar=o.successTablaConsultar.bind(Object(s.a)(o)),o.gridOptionsTablaPedidos=Object.assign({},o.gridOptions),o.consultarPedido=o.consultarPedido.bind(Object(s.a)(o)),o.validarFormatoFecha=o.validarFormatoFecha.bind(Object(s.a)(o)),o.existeFecha=o.existeFecha.bind(Object(s.a)(o)),o.mensajeErrorFecha=o.mensajeErrorFecha.bind(Object(s.a)(o)),o.habilitarBotonConsultar=o.habilitarBotonConsultar.bind(Object(s.a)(o)),o.seguir=!0,o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Consultar Pedidos, @version:1.01.0016, @author: Mario A. Sepulveda"),this.getField("consultar").setClick(this.consultarPedido),this.getField("nit").setOnChange(this.habilitarBotonConsultar),this.getField("sede").setOnChange(this.habilitarBotonConsultar),this.getField("fecha").setOnChange(this.habilitarBotonConsultar),this.getField("numero").setOnChange(this.habilitarBotonConsultar),this.getField("vendedor").setOnChange(this.habilitarBotonConsultar),this.getField("nombre_vendedor").setOnChange(this.habilitarBotonConsultar)}},{key:"consultarPedido",value:function(){""===this.getField("nombre_vendedor").getValue()&&""===this.getField("sede").getValue()&&""===this.getField("numero").getValue()&&""===this.getField("fecha").getValue()||(this.seguir=!0);var e=this.getField("fecha").getValue();if(""!==e?this.validarFormatoFecha(e)?this.existeFecha(e)?this.mensajeErrorFecha():(this.getField("fecha").setError(!0,"*La fecha introducida no existe"),this.seguir=!1):(this.getField("fecha").setError(!0,"*El formato de la fecha es incorrecto (aaaa-mm-dd)"),this.seguir=!1):this.seguir=!0,""!==this.getField("nit").getValue()&&""===this.getField("sede").getValue()&&(this.seguir=!1,this.getField("sede").setError(!0,"*Este campo es requerido")),this.seguir){var t={fecha:this.getField("fecha").getValue(),numero:this.getField("numero").getValue(),vendedor:this.getField("vendedor").getValue(),nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="1273-Servicio_consultar_pedidos_traer_informacion_pedidos_boton",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTablaConsultar,error:this.error_,general:this.generalFormat})}}},{key:"successTablaConsultar",value:function(e){if(200===e.estado_p)if(e.data.length>=1){this.getField("pedidos").toggle(!0),this.gridOptionsTablaPedidos.rowData=e.data;var t=new Map;this.getField("pedidos").initData(this.gridOptionsTablaPedidos,t)}else this.getField("pedidos").toggle(!1);else this.getField("pedidos").toggle(!1)}},{key:"habilitarBotonConsultar",value:function(){this.getField("pedidos").toggle(!1),""!==this.getField("nombre_vendedor").getValue()||""!==this.getField("fecha").getValue()||""!==this.getField("numero").getValue()||""!==this.getField("sede").getValue()?this.getField("consultar").setDisabled(!1):this.getField("consultar").setDisabled(!0),this.getField("sede").setError(!1,"")}},{key:"validarFormatoFecha",value:function(e){return!(!e.match(/^\d{4}-\d{2}-\d{2}$/)||""===e)}},{key:"existeFecha",value:function(e){var t=e.split("-"),i=t[2],a=t[1],o=t[0],s=new Date(o,a,"0");return parseInt(a)>12||parseInt(a)<1||i-0>s.getDate()-0||i+""==="0"||"0_"===i||"__"===i||"00"===i?(this.seguir=!1,!1):(this.seguir=!0,!0)}},{key:"mensajeErrorFecha",value:function(){var e=new Date,t=new Date(this.getField("fecha").getValue());t>e?(this.getField("consultar").setDisabled(!0),this.getField("fecha").setError(!0,"*La fecha debe ser menor o igual a la fecha actual"),this.seguir=!1):t<=e&&(this.habilitarBotonConsultar(),this.getField("fecha").setError(!1,""),this.seguir=!0)}}]),i}(d.a.form);d.a.addController("consulta_pedidos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.initTB=o.initTB.bind(Object(s.a)(o)),o.releaseTB=o.releaseTB.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("nombre_bodega").setOnChange(this.initTB),this.getField("nombre_producto").setOnChange(this.initTB)}},{key:"initTB",value:function(){if(""!==this.getField("nombre_bodega").getValue()&&""!==this.getField("nombre_producto").getValue()){var e={codigo_producto:this.getField("producto").getValue(),codigo_bodega:this.getField("bodega").getValue()};this.generalFormat.nombre_accion="retorna_bodegas_wms_nuevo-bodegaproducto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.releaseTB,error:this.error_,general:this.generalFormat})}else this.getField("tb_ubicaciones_productos").toggle(!1)}},{key:"releaseTB",value:function(e){e.model.length>0&&(this.gridOptions.rowData=e.model,this.getField("tb_ubicaciones_productos").initData(this.gridOptions))}}]),i}(d.a.form);d.a.addController("wmsConsultarUbicacio",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.gridOptionsTablaContactos=Object.assign({},o.gridOptions),o.gridOptionsTablaContactos.onSelectionChanged=o.onSelectionChanged,o.filaSeleccionada=[],o.traerTodosContactos=o.traerTodosContactos.bind(Object(s.a)(o)),o.respuestaObtenerContactos=o.respuestaObtenerContactos.bind(Object(s.a)(o)),o.setButtonEliminar=o.setButtonEliminar.bind(Object(s.a)(o)),o.eliminar=o.eliminar.bind(Object(s.a)(o)),o.respuestaEliminar=o.respuestaEliminar.bind(Object(s.a)(o)),o.respuestaAgregar=o.respuestaAgregar.bind(Object(s.a)(o)),o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o.actualizarLimpiar=o.actualizarLimpiar.bind(Object(s.a)(o)),o.respuestaModificar=o.respuestaModificar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("cancelar").setClick(this.limpiarCampos),this.getField("agregar").setSuccess(this.respuestaAgregar),this.getField("nombre_nit").setOnChange(this.actualizarLimpiar),this.getField("nit").setOnChange(this.limpiarCampos),this.getField("modificar").setSuccess(this.respuestaModificar)}},{key:"respuestaModificar",value:function(e){this.limpiarCampos(),this.traerTodosContactos()}},{key:"actualizarLimpiar",value:function(){this.traerTodosContactos(),this.limpiarCampos(),this.getField("tabla_contactos").toggle(!1)}},{key:"onSelectionChanged",value:function(){this.filaSeleccionada=this.gridOptionsTablaContactos.api.getSelectedRows(),this.getField("nombre").setValue(this.filaSeleccionada[0].nombre),this.getField("telefonos").setValue(this.filaSeleccionada[0].telefonos),this.getField("email").setValue(this.filaSeleccionada[0].email),this.getField("observaciones").setValue(this.filaSeleccionada[0].observaciones),this.getField("id").setValue(this.filaSeleccionada[0].id),this.getField("modificar").setDisabled(!1),this.getField("agregar").setDisabled(!0)}},{key:"traerTodosContactos",value:function(){if(""!==this.getField("nit").getValue()&&""!==this.getField("sede").getValue()){var e={nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="permite_traerContactosPorNit_nitsx_sedes_contactos_526",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.respuestaObtenerContactos,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"respuestaObtenerContactos",value:function(e){if(200===e.estado_p)if(e.data.length>0){this.gridOptionsTablaContactos.rowData=e.data;var t=new Map;t.set("Eliminar",{field:"Eliminar",cellRenderer:this.setButtonEliminar,width:150}),this.getField("tabla_contactos").initData(this.gridOptionsTablaContactos,t)}else this.getField("tabla_contactos").toggle(!1);else this.getField("tabla_contactos").toggle(!1)}},{key:"setButtonEliminar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminar(e.data.id)},i.setAttribute("id","boton_eliminar"),i.setAttribute("style","width:90px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminar",value:function(e){var t={id:e};this.generalFormat.nombre_accion="permite_eliminar_nitsx_sedes_contactos_526",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.respuestaEliminar,error:this.error_,general:this.generalFormat})}},{key:"respuestaEliminar",value:function(e){200===e.estado_p&&(this.traerTodosContactos(),this.limpiarCampos())}},{key:"respuestaAgregar",value:function(e){200===e.estado_p&&(this.traerTodosContactos(),this.limpiarCampos())}},{key:"limpiarCampos",value:function(){this.getField("nombre").setValue(""),this.getField("telefonos").setValue(""),this.getField("email").setValue(""),this.getField("observaciones").setValue(""),this.getField("id").setValue(""),this.getField("agregar").setDisabled(!1),this.getField("modificar").setDisabled(!0),this.getField("tabla_contactos").toggle(!1)}}]),i}(d.a.form);d.a.addController("cont",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.mostrarPicking=o.mostrarPicking.bind(Object(s.a)(o)),o.ocultarCampos=o.ocultarCampos.bind(Object(s.a)(o)),o.successMostrarPicking=o.successMostrarPicking.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.saveConteo=o.saveConteo.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnCargarConteo").setClick(this.mostrarPicking),this.getField("operario").setOnChange(this.ocultarCampos),this.getField("numero").setOnChange(this.ocultarCampos),this.getField("bodega").setOnChange(this.ocultarCampos),this.getField("btnGuardarConteo").setClick(this.saveConteo)}},{key:"saveConteo",value:function(){if(this.getField("numero").valid()&this.getField("operario").valid()&this.getField("bodega").valid()&this.getField("codigo").valid()&this.getField("conteo").valid()&this.getField("cantidad").valid()&this.getField("oid").valid())if(parseInt(this.getField("conteo").getValue())<=parseInt(this.getField("cantidad").getValue())){this.getField("conteo").setError(!1,"");var e={numero:this.getField("numero").getValue(),operario:this.getField("operario").getValue(),bodega:this.getField("bodega").getValue(),codigo:this.getField("codigo").getValue(),conteo:this.getField("conteo").getValue(),cantidad:this.getField("cantidad").getValue(),oid:this.getField("oid").getValue(),pedido:this.getField("pedido").getValue(),accion:"servicio",campo:"btnGuardarConteo",id_formulario:this.formId};this.service.send(this.getConstant().formSave(),"POST",e,this.uploadTable,this.error_)}else this.getField("conteo").setError(!0,"* Este Valor debe ser menor o igual a la cantidad")}},{key:"uploadTable",value:function(e){200===e.estado_p&&this.mostrarPicking()}},{key:"mostrarPicking",value:function(){this.getField("operario").valid()&this.getField("numero").valid()&this.getField("bodega").valid()&&this.service.send(this.getConstant().searchFormat().format(this.getField("numero").getValue()+"/"+this.getField("bodega").getValue()+"/"+this.getField("operario").getValue(),"btnCargarConteo","servicio",this.formId),"GET",void 0,this.successMostrarPicking,this.error_)}},{key:"successMostrarPicking",value:function(e){200===e.estado_p?(this.mostrarCampos(),this.getField("conteo").input.focus(),this.getField("codigo").setValue(e.model[0].codigo),this.getField("pedido").setValue(e.model[0].pedido),this.getField("cantidad").setValue(e.model[0].cantidad),this.getField("conteo").setValue(e.model[0].conteo),this.getField("ruta").setValue(e.model[0].ruta),this.getField("nombre").setValue(e.model[0].nombre),this.getField("oid").setValue(e.model[0].oid),this.gridOptions.rowData=e.model,this.getField("tablaConteoPicking").initData(this.gridOptions)):(this.ocultarCampos(),this.getField("tablaConteoPicking").toggle(!1))}},{key:"mostrarCampos",value:function(){this.getField("codigo").setVisible(!0),this.getField("pedido").setVisible(!0),this.getField("cantidad").setVisible(!0),this.getField("conteo").setVisible(!0),this.getField("ruta").setVisible(!0),this.getField("nombre").setVisible(!0),this.getField("oid").setVisible(!0),this.getField("btnGuardarConteo").setVisible(!0),this.getField("tablaConteoPicking").toggle(!0)}},{key:"ocultarCampos",value:function(){this.getField("codigo").setVisible(!1),this.getField("pedido").setVisible(!1),this.getField("cantidad").setVisible(!1),this.getField("conteo").setVisible(!1),this.getField("ruta").setVisible(!1),this.getField("nombre").setVisible(!1),this.getField("oid").setVisible(!1),this.getField("btnGuardarConteo").setVisible(!1),this.getField("tablaConteoPicking").toggle(!1)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.successFichaEnvasadoFinal=o.successFichaEnvasadoFinal.bind(Object(s.a)(o)),o.gridOptionsEnvasadoFinal=Object.assign({},o.gridOptions),o.successFichaEnvasadoFinalMaterialEmpaque=o.successFichaEnvasadoFinalMaterialEmpaque.bind(Object(s.a)(o)),o.gridOptionsEnvasadoFinalMaterialEmpaque=Object.assign({},o.gridOptions),o.setButtonCantidadUtilizada=o.setButtonCantidadUtilizada.bind(Object(s.a)(o)),o.cantidadUtilizadaChange=o.cantidadUtilizadaChange.bind(Object(s.a)(o)),o.successCantidadUtilizada=o.successCantidadUtilizada.bind(Object(s.a)(o)),o.uploadTbEnvasado=o.uploadTbEnvasado.bind(Object(s.a)(o)),o.setButtonCantUtilizada=o.setButtonCantUtilizada.bind(Object(s.a)(o)),o.cantUtilizadaChange=o.cantUtilizadaChange.bind(Object(s.a)(o)),o.successcantUtilizadaChange=o.successcantUtilizadaChange.bind(Object(s.a)(o)),o.uploadTbEnvasadoMaterialEmpaque=o.uploadTbEnvasadoMaterialEmpaque.bind(Object(s.a)(o)),o.abrirModalEnvasado=o.abrirModalEnvasado.bind(Object(s.a)(o)),o.grabarEnvasado=o.grabarEnvasado.bind(Object(s.a)(o)),o.successGrabarEnvasado=o.successGrabarEnvasado.bind(Object(s.a)(o)),o.abrirModalEnvasadoMatempaque=o.abrirModalEnvasadoMatempaque.bind(Object(s.a)(o)),o.successDataProductos=o.successDataProductos.bind(Object(s.a)(o)),o.grabarEnvasadoMatEmpaque=o.grabarEnvasadoMatEmpaque.bind(Object(s.a)(o)),o.successGrabarEnvasadoMatEmpaque=o.successGrabarEnvasadoMatEmpaque.bind(Object(s.a)(o)),o.uploadDataSelectProductos=o.uploadDataSelectProductos.bind(Object(s.a)(o)),o.successConceptoFicha=o.successConceptoFicha.bind(Object(s.a)(o)),o.grabarTodo=o.grabarTodo.bind(Object(s.a)(o)),o.successResumenAlistamiento=o.successResumenAlistamiento.bind(Object(s.a)(o)),o.gridOptionsResumenAlistamiento=Object.assign({},o.gridOptionsResumenAlistamiento),o.grabarTodoModalMatEmp=o.grabarTodoModalMatEmp.bind(Object(s.a)(o)),o.successResumenEnvasadoFinal=o.successResumenEnvasadoFinal.bind(Object(s.a)(o)),o.UploadResumenEnvasadoFinal=o.UploadResumenEnvasadoFinal.bind(Object(s.a)(o)),o.cancelarModalMatEmpaque=o.cancelarModalMatEmpaque.bind(Object(s.a)(o)),o.confirmItem=o.confirmItem.bind(Object(s.a)(o)),o.datosBodega=o.datosBodega.bind(Object(s.a)(o)),o.successtraerBodegasSelect=o.successtraerBodegasSelect.bind(Object(s.a)(o)),o.arrayValidarCantidades=[],o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Correcci\xf3n de envasado @version: 1.01.0019 @author: Mario A. Sep\xfalveda R"),this.getField("btAgregarEnvasado").setClick(this.abrirModalEnvasado),this.getField("btnAgregarModalEnvasado").setClick(this.grabarEnvasado),this.getField("btAgregarEnvasadoMaterialEmpaque").setClick(this.abrirModalEnvasadoMatempaque),this.getField("btnAgregarModalEnvMatEmpaque").setClick(this.grabarEnvasadoMatEmpaque),this.getField("btnGrabar").setClick(this.grabarTodo),this.getField("btnConfirmar").setClick(this.grabarTodoModalMatEmp),this.getField("btnCancelar").setClick(this.cancelarModalMatEmpaque),this.getField("textoConfiguracionEnvasado").setValue("CONFIGURACI\xd3N ENVASADO"),this.getField("articulo_id_nofabricado").setOnChange(this.datosBodega);var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="446-Retorna_el_concepto_de_la_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successConceptoFicha,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="446-Retorna_lod_datos_de_la_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="446-Retorna_las_fichas_envasado_final",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successFichaEnvasadoFinal,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="446-Retorna_las_fichas_envasado_final_material_empaque",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successFichaEnvasadoFinalMaterialEmpaque,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="446-Retorna_el_envasado_final_ordenados por_nombre_del_producto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDataProductos,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="446-Retorna_el_resumen_del_envasado_final",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successResumenEnvasadoFinal,error:this.error_,general:this.generalFormat})}},{key:"datosBodega",value:function(){if(""!==this.getField("articulo_id_nofabricado").getValue()&&" "!==this.getField("articulo_id_nofabricado").getValue()){var e={value:this.getField("articulo_id_nofabricado").getValue()};this.generalFormat.nombre_accion="446-Trae_el_saldo_referente_al_producto_para_el_select_de_bodegas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successtraerBodegasSelect,error:this.error_,general:this.generalFormat})}}},{key:"successtraerBodegasSelect",value:function(e){var t=[{text:"Ninguno",value:"",campos_cambian:{}}];200===e.estado_p?(e.data.forEach((function(e){var i={};i.value=e.id,i.text="".concat(e.nombre_bodega," , saldo = ").concat(e.saldo),i.campos_cambian={codigo_bodega_cod:e.codigo_bodega},t.push(i)})),this.getField("codigo_bodega").setOptions(t)):this.getField("codigo_bodega").setOptions(t)}},{key:"successResumenEnvasadoFinal",value:function(e){e.model[0].total_envasado<=e.model[0].galones_resultantes?(this.getField("galones_resultantes1").setValue(e.model[0].galones_resultantes),this.getField("total_envasado").setValue(e.model[0].total_envasado),this.getField("restante1").setValue(e.model[0].restante)):(this.getField("galones_resultantes1").setValue(e.model[0].galones_resultantes),this.getField("total_envasado").setValue(e.model[0].total_envasado),this.getField("restante1").setValue(e.model[0].restante),this.getField("confirmModalCustom").setTitleAndContent("Alerta","Total envasado es mayor que galones resultantes"),this.getField("confirmModalCustom").setClickDialog(this.confirmItem),this.getField("confirmModalCustom").toggle(!0))}},{key:"confirmItem",value:function(){this.getField("confirmModalCustom").toggle(!1)}},{key:"UploadResumenEnvasadoFinal",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="446-Retorna_el_resumen_del_envasado_final",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successResumenEnvasadoFinal,error:this.error_,general:this.generalFormat})}},{key:"successConceptoFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0&&this.getField("listaConceptosFicha").setValue(e.model[0].descripcion)}},{key:"successDataProductos",value:function(e){var t=[{text:"Ninguno",value:"",campos_cambian:{}}];200===e.estado_p?(e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.codigo+"  "+e.nombre,i.campos_cambian={produccion_fichas_envasado_final_id:e.id},t.push(i)})),this.getField("producto").setOptions(t)):this.getField("producto").setOptions(t)}},{key:"uploadDataSelectProductos",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="446-Retorna_el_envasado_final_ordenados por_nombre_del_producto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDataProductos,error:this.error_,general:this.generalFormat})}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("lista_items_produccion").setVisible(!0),this.getField("lista_items_produccion").setItemsFichas(e.model)):this.getField("lista_items_produccion").setVisible(!1)}},{key:"successFichaEnvasadoFinal",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsEnvasadoFinal.rowData=[],this.getField("TbEnvasadoInicio").initData(this.gridOptionsEnvasadoFinal);var t=new Map;t.set("cantidad_utilizada",{cellRenderer:this.setButtonCantidadUtilizada,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.cantidadUtilizadaChange,width:100,editable:!0,field:"cantidad_utilizada"}),this.getField("TbEnvasadoInicio").toggle(!0),this.gridOptionsEnvasadoFinal.rowData=e.model,this.gridOptionsEnvasadoFinal.paginationPageSize=100,this.getField("TbEnvasadoInicio").initData(this.gridOptionsEnvasadoFinal,t)}else this.getField("TbEnvasadoInicio").toggle(!1),this.getField("fieldAlert").toggle(!0,"No hay envasado","error")}},{key:"setButtonCantidadUtilizada",value:function(e){var t=e.data.cantidad_utilizada,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t>=0?(a.textContent=t,"".formatoPrecio(e.data.cantidad_utilizada)):(a.textContent=0,i.appendChild(a),i)}},{key:"cantidadUtilizadaChange",value:function(e){var t=this.getField("TbEnvasadoInicio").cellValid(e.oldValue,e.newValue,"^[0-9]");if(e.newValue<0&&(e.data.cantidad_utilizada=0),t){this.getField("cantidad_utilizada").setValue(e.newValue);var i={id:e.data.id,cantidad_utilizada:this.getField("cantidad_utilizada").getValue()};this.generalFormat.nombre_accion="446-Permite_cambiar_la_cantidad_utilizada",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successCantidadUtilizada,error:this.error_,general:this.generalFormat})}}},{key:"successCantidadUtilizada",value:function(e){200===e.estado_p&&(this.getField("cantidad_utilizada").setValue(" "),this.uploadTbEnvasado(),this.UploadResumenEnvasadoFinal(),this.uploadTbEnvasadoMaterialEmpaque())}},{key:"uploadTbEnvasado",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="446-Retorna_las_fichas_envasado_final",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successFichaEnvasadoFinal,error:this.error_,general:this.generalFormat})}},{key:"successFichaEnvasadoFinalMaterialEmpaque",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsEnvasadoFinalMaterialEmpaque.rowData=[],this.getField("TbEnvasadoFinal").initData(this.gridOptionsEnvasadoFinalMaterialEmpaque);var t=new Map;t.set("cantidad_utilizada",{cellRenderer:this.setButtonCantUtilizada,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.cantUtilizadaChange,width:100,editable:!0,field:"cantidad_utilizada"}),this.getField("TbEnvasadoFinal").toggle(!0),this.gridOptionsEnvasadoFinalMaterialEmpaque.rowData=e.model,this.gridOptionsEnvasadoFinalMaterialEmpaque.paginationPageSize=100,this.getField("TbEnvasadoFinal").initData(this.gridOptionsEnvasadoFinalMaterialEmpaque,t),this.arrayValidarCantidades=e.model}else this.getField("TbEnvasadoFinal").toggle(!1),this.getField("fieldAlert").toggle(!0,"No hay envasado","error")}},{key:"setButtonCantUtilizada",value:function(e){var t=e.data.cantidad_utilizada,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t>=0?(a.textContent=t,"".formatoPrecio(e.data.cantidad_utilizada)):(a.textContent=0,i.appendChild(a),i)}},{key:"cantUtilizadaChange",value:function(e){var t=this.getField("TbEnvasadoFinal").cellValid(e.oldValue,e.newValue,/^[0-9]+$/);if(e.newValue<0&&(e.data.cantidad_utilizada=0),t){this.getField("cantidad_utilizada_matEmp").setValue(e.newValue);var i={id:e.data.id,cantidad_utilizada:this.getField("cantidad_utilizada_matEmp").getValue()};this.generalFormat.nombre_accion="446-Permite_cambiar_la_cantidad_utilizada_MatEmpaque",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successcantUtilizadaChange,error:this.error_,general:this.generalFormat})}else this.uploadTbEnvasadoMaterialEmpaque()}},{key:"successcantUtilizadaChange",value:function(e){200===e.estado_p&&(this.getField("cantidad_utilizada_matEmp").setValue(" "),this.uploadTbEnvasadoMaterialEmpaque())}},{key:"uploadTbEnvasadoMaterialEmpaque",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="446-Retorna_las_fichas_envasado_final_material_empaque",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successFichaEnvasadoFinalMaterialEmpaque,error:this.error_,general:this.generalFormat})}},{key:"abrirModalEnvasado",value:function(){this.getField("modalEnvasado").handleClickOpen(),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("produccion_kit_id").setValue(""),this.getField("codigo_producto").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("factor").setValue(""),this.getField("codigo_kit").setValue(""),this.getField("descripcion").setValue(""),this.getField("articulo_id").setValue(""),this.getField("es_envasado_id").setValue("")}},{key:"grabarEnvasado",value:function(){if(""!==this.getField("cantidad").getValue()&&" "!==this.getField("cantidad").getValue()){this.getField("cantidad").setError(!1,"");var e={};e=""!==this.getField("produccion_kit_id").getValue()&&" "!==this.getField("produccion_kit_id").getValue()?{produccion_fichas_id:this.props.data.id_ficha,articulo_id:this.getField("articulo_id").getValue(),cantidad:this.getField("cantidad").getValue(),produccion_kit_id:this.getField("produccion_kit_id").getValue()}:{produccion_fichas_id:this.props.data.id_ficha,articulo_id:this.getField("articulo_id").getValue(),cantidad:this.getField("cantidad").getValue()},this.generalFormat.nombre_accion="446-Permite_crear_un_envasado_final",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successGrabarEnvasado,error:this.error_,general:this.generalFormat})}else this.getField("cantidad").valid()&&""===this.getField("cantidad").getValue()&&this.getField("cantidad").setError(!0,"Este campo es requerido")}},{key:"successGrabarEnvasado",value:function(e){200===e.estado_p?(this.getField("fieldAlert").toggle(!0,"Ficha envasado creada exitosamente","success"),this.getField("modalEnvasado").handleClose(),this.uploadTbEnvasado(),this.uploadTbEnvasadoMaterialEmpaque(),this.uploadDataSelectProductos(),this.UploadResumenEnvasadoFinal()):this.getField("fieldAlert").toggle(!0,"La ficha envasado no pudo ser creada","error")}},{key:"abrirModalEnvasadoMatempaque",value:function(){this.getField("modalEnvasadoMaterialEmpaque").handleClickOpen(),this.getField("codigo_producto_nofabricado").setValue(""),this.getField("nombre_producto_nofabricado").setValue(""),this.getField("articulo_id_nofabricado").setValue(""),this.getField("cantidadEnvMatEmpaque").setValue("")}},{key:"grabarEnvasadoMatEmpaque",value:function(){if(""!==this.getField("codigo_producto_nofabricado").getValue()&&" "!==this.getField("codigo_producto_nofabricado").getValue()&&""!==this.getField("nombre_producto_nofabricado").getValue()&&" "!==this.getField("nombre_producto_nofabricado").getValue()&&""!==this.getField("cantidadEnvMatEmpaque").getValue()&&this.getField("cantidadEnvMatEmpaque").valid()&&""!==this.getField("producto").getValue()&&" "!==this.getField("producto").getValue()){this.getField("codigo_producto_nofabricado").setError(!1,""),this.getField("nombre_producto_nofabricado").setError(!1,""),this.getField("cantidadEnvMatEmpaque").setError(!1,""),this.getField("producto").setError(!1,"");var e={produccion_fichas_id:this.props.data.id_ficha,articulo_id:this.getField("articulo_id_nofabricado").getValue(),cantidad_utilizada:this.getField("cantidadEnvMatEmpaque").getValue(),produccion_fichas_envasado_final_id:this.getField("produccion_fichas_envasado_final_id").getValue(),codigo_bodega:this.getField("codigo_bodega_cod").getValue()};this.generalFormat.nombre_accion="446-Permite_crear_un_envasado_final_material_empaque",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successGrabarEnvasadoMatEmpaque,error:this.error_,general:this.generalFormat})}else this.getField("codigo_producto_nofabricado").valid()&&""===this.getField("codigo_producto_nofabricado").getValue()&&this.getField("codigo_producto_nofabricado").setError(!0,"Este campo es requerido"),this.getField("nombre_producto_nofabricado").valid()&&""===this.getField("nombre_producto_nofabricado").getValue()&&this.getField("nombre_producto_nofabricado").setError(!0,"Este campo es requerido"),this.getField("cantidadEnvMatEmpaque").valid()&&""===this.getField("cantidadEnvMatEmpaque").getValue()&&this.getField("cantidadEnvMatEmpaque").setError(!0,"Este campo es requerido"),this.getField("producto").valid()&&""===this.getField("producto").getValue()&&this.getField("producto").setError(!0,"Este campo es requerido")}},{key:"successGrabarEnvasadoMatEmpaque",value:function(e){200===e.estado_p?(this.getField("fieldAlert").toggle(!0,"Ficha envasado creada exitosamente","success"),this.getField("modalEnvasadoMaterialEmpaque").handleClose(),this.uploadTbEnvasadoMaterialEmpaque()):this.getField("fieldAlert").toggle(!0,"La ficha envasado no pudo ser creada","error")}},{key:"grabarTodo",value:function(){var e=this,t=!0;if(this.arrayValidarCantidades.map((function(i,a){return e.arrayValidarCantidades[a].cantidad_utilizada-Math.floor(e.arrayValidarCantidades[a].cantidad_utilizada)!==0&&(e.alertGeneral.toggle(!0,"El campo Cantidad Utilizada para el material de empaque ".concat(i.codigo," (").concat(i.cantidad_utilizada,") debe ser entero"),"error"),t=!1),null})),t){this.getField("modalResumenAlistamiento").handleClickOpen(),this.getField("txt_resumen_alistamiento").setValue("Se generar\xe1 un alistamiento para:");var i={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="446-Retorna_resumen_de_alistamiento",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.successResumenAlistamiento,error:this.error_,general:this.generalFormat})}}},{key:"successResumenAlistamiento",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.gridOptionsResumenAlistamiento.rowData=[],this.getField("tbResumenAlistamiento").initData(this.gridOptionsResumenAlistamiento),this.getField("tbResumenAlistamiento").toggle(!0),this.gridOptionsResumenAlistamiento.rowData=e.model,this.gridOptionsResumenAlistamiento.paginationPageSize=100,this.getField("tbResumenAlistamiento").initData(this.gridOptionsResumenAlistamiento)):(this.getField("tbResumenAlistamiento").toggle(!1),this.getField("modalResumenAlistamiento").handleClose(),404===e.estado_p&&this.grabarTodoModalMatEmp())}},{key:"grabarTodoModalMatEmp",value:function(){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id);var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue()};this.generalFormat.nombre_accion="446-Permite_pasar_a_la_actividad_de_alistamiento_envasado_final",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}},{key:"cancelarModalMatEmpaque",value:function(){this.getField("modalResumenAlistamiento").handleClose()}}]),i}(d.a.form);d.a.addController("correnvasado",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).enterServicioTerceros=function(e){switch(e.keyCode?e.keyCode:e.which){case 120:if(""!==o.getField("nit").getValue()){var t={value:o.getField("nit").getValue(),estado:"A"};o.generalFormat.nombre_accion="520-busca_tercero_por_nombre",o.service.send({endpoint:o.constant.formConfiguration(),method:"GET",body:t,success:o.successTercerosF9,error:o.error_,general:o.generalFormat})}break;case 13:if(""!==o.getField("nit").getValue()&&o.getField("nit").getValue()>0){var i={nit:o.getField("nit").getValue(),estado:"A"};o.generalFormat.nombre_accion="520-retorna_terceros_nitexacto_sedes",o.service.send({endpoint:o.constant.formConfiguration(),method:"GET",body:i,success:o.successTerceros,error:o.error_,general:o.generalFormat})}}},o.initForm=o.initForm.bind(Object(s.a)(o)),o.searchTercero=o.searchTercero.bind(Object(s.a)(o)),o.successSearchTercero=o.successSearchTercero.bind(Object(s.a)(o)),o.onSelectionChangedCodigosFacturacion=o.onSelectionChangedCodigosFacturacion.bind(Object(s.a)(o)),o.gridOptionsCodigosFacturacion=Object.assign({},o.gridOptions),o.gridOptionsCodigosFacturacion.onSelectionChanged=o.onSelectionChangedCodigosFacturacion,o.gridOptionsBodegasItem=Object.assign({},o.gridOptions),o.setPrecioListaProspectos=o.setPrecioListaProspectos.bind(Object(s.a)(o)),o.onSelectionChangedTerceros=o.onSelectionChangedTerceros.bind(Object(s.a)(o)),o.gridOptionsTerceros=Object.assign({},o.gridOptions),o.gridOptionsTerceros.onSelectionChanged=o.onSelectionChangedTerceros,o.gridOptionsContactos=Object.assign({},o.gridOptions),o.clearCampos=o.clearCampos.bind(Object(s.a)(o)),o.openModalProducto=o.openModalProducto.bind(Object(s.a)(o)),o.savePedido=o.savePedido.bind(Object(s.a)(o)),o.successSavePedido=o.successSavePedido.bind(Object(s.a)(o)),o.loadPreciosCliente=o.loadPreciosCliente.bind(Object(s.a)(o)),o.successLoadPreciosCliente=o.successLoadPreciosCliente.bind(Object(s.a)(o)),o.clearCamposProducto=o.clearCamposProducto.bind(Object(s.a)(o)),o.loadItemPrecio=o.loadItemPrecio.bind(Object(s.a)(o)),o.validarDespachoMinimo=o.validarDespachoMinimo.bind(Object(s.a)(o)),o.successValidarDespachoMinimo=o.successValidarDespachoMinimo.bind(Object(s.a)(o)),o.successLoadItemPrecio=o.successLoadItemPrecio.bind(Object(s.a)(o)),o.loadBodegasItem=o.loadBodegasItem.bind(Object(s.a)(o)),o.successLoadBodegasItem=o.successLoadBodegasItem.bind(Object(s.a)(o)),o.setButtonEliminarItem=o.setButtonEliminarItem.bind(Object(s.a)(o)),o.setButtonEliminarContacto=o.setButtonEliminarContacto.bind(Object(s.a)(o)),o.eliminarContactosConfirmar=o.eliminarContactosConfirmar.bind(Object(s.a)(o)),o.confirmDeleteContactoEliminar=o.confirmDeleteContactoEliminar.bind(Object(s.a)(o)),o.setButtonModificarItem=o.setButtonModificarItem.bind(Object(s.a)(o)),o.modificarItem=o.modificarItem.bind(Object(s.a)(o)),o.eliminarItem=o.eliminarItem.bind(Object(s.a)(o)),o.eliminarItemConfirmar=o.eliminarItemConfirmar.bind(Object(s.a)(o)),o.valueOrdenCotizacion=o.valueOrdenCotizacion.bind(Object(s.a)(o)),o.agregarItems=o.agregarItems.bind(Object(s.a)(o)),o.validarCostosItem=o.validarCostosItem.bind(Object(s.a)(o)),o.onSelectionChangedItems=o.onSelectionChangedItems.bind(Object(s.a)(o)),o.gridOptionsTablaItems=Object.assign({},o.gridOptions),o.gridOptionsTablaItems.onSelectionChanged=o.onSelectionChangedItems,o.agregarDescuentoItem=o.agregarDescuentoItem.bind(Object(s.a)(o)),o.crearPedido=o.crearPedido.bind(Object(s.a)(o)),o.CloseModalProductos=o.CloseModalProductos.bind(Object(s.a)(o)),o.recalcularPrecios=o.recalcularPrecios.bind(Object(s.a)(o)),o.recalcularPreciosLista=o.recalcularPreciosLista.bind(Object(s.a)(o)),o.recalcularPreciosCantidad=o.recalcularPreciosCantidad.bind(Object(s.a)(o)),o.cleanValid=o.cleanValid.bind(Object(s.a)(o)),o.cleanRecalcular=o.cleanRecalcular.bind(Object(s.a)(o)),o.cleanRecalcularCant=o.cleanRecalcularCant.bind(Object(s.a)(o)),o.selectDirecciones=o.selectDirecciones.bind(Object(s.a)(o)),o.successDirecciones=o.successDirecciones.bind(Object(s.a)(o)),o.rowSelectedPedido=o.rowSelectedPedido.bind(Object(s.a)(o)),o.aplicarDescuentoBloque=o.aplicarDescuentoBloque.bind(Object(s.a)(o)),o.successDescuentoBloque=o.successDescuentoBloque.bind(Object(s.a)(o)),o.currencyFormatterPrecioSinIva=o.currencyFormatterPrecioSinIva.bind(Object(s.a)(o)),o.formatNumberPrecioSinIva=o.formatNumberPrecioSinIva.bind(Object(s.a)(o)),o.enterServicioTerceros=o.enterServicioTerceros.bind(Object(s.a)(o)),o.successTerceros=o.successTerceros.bind(Object(s.a)(o)),o.successTercerosF9=o.successTercerosF9.bind(Object(s.a)(o)),o.nitPendiente=o.nitPendiente.bind(Object(s.a)(o)),o.buscarNitPendiente=o.buscarNitPendiente.bind(Object(s.a)(o)),o.successBuscarNitPendiente=o.successBuscarNitPendiente.bind(Object(s.a)(o)),o.crearNitPendiente=o.crearNitPendiente.bind(Object(s.a)(o)),o.retornarCodigosFacturacion=o.retornarCodigosFacturacion.bind(Object(s.a)(o)),o.successLoadCodigoFacturacion=o.successLoadCodigoFacturacion.bind(Object(s.a)(o)),o.currencyFormatterPrecioTotal=o.currencyFormatterPrecioTotal.bind(Object(s.a)(o)),o.formatNumberPrecioTotal=o.formatNumberPrecioTotal.bind(Object(s.a)(o)),o.recuperarDepto=o.recuperarDepto.bind(Object(s.a)(o)),o.successRecuperarDepto=o.successRecuperarDepto.bind(Object(s.a)(o)),o.recuperarCiudades=o.recuperarCiudades.bind(Object(s.a)(o)),o.successRecuperarCiudades=o.successRecuperarCiudades.bind(Object(s.a)(o)),o.setTipoNegocioProspecto=o.setTipoNegocioProspecto.bind(Object(s.a)(o)),o.setSucursalesProspectos=o.setSucursalesProspectos.bind(Object(s.a)(o)),o.agregarNuevoPendiente=o.agregarNuevoPendiente.bind(Object(s.a)(o)),o.successAgregarNuevoPendiente=o.successAgregarNuevoPendiente.bind(Object(s.a)(o)),o.calcularDV=o.calcularDV.bind(Object(s.a)(o)),o.abrirModalContactos=o.abrirModalContactos.bind(Object(s.a)(o)),o.validarDescuentoMaximo=o.validarDescuentoMaximo.bind(Object(s.a)(o)),o.successValidarDescuentoMax=o.successValidarDescuentoMax.bind(Object(s.a)(o)),o.successAbrirModalContactos=o.successAbrirModalContactos.bind(Object(s.a)(o)),o.cerrarModalContactos=o.cerrarModalContactos.bind(Object(s.a)(o)),o.confirmCloseAlertModal=o.confirmCloseAlertModal.bind(Object(s.a)(o)),o.auxiliarArray=[],o.arrayOrigin=[],o.dAgregado=[],o.arrayDataCheckBox=[],o.datosCodigos=[],o.nuevoArray=[],o.datosArray=[],o.modificarArray=[],o.arrayTemporal=[],o.id_delete=0,o.codigoDeFacturacion="",o.idEliminarContacto=0,o.opcionesSelect=[],o.TipoNegociosProspecto="",o.cantidadDespacho=!1,o.codigoNegocio="",o.itemEnEdicion="",o.btnCerrarModal=!1,o.valorPedido=0,o.totalIvaItems=0,o.subtotalItems=0,o.cantidad=0,o.bodegaIngreso="",o.bodegaSeleccionada="",o.arrayContarItems=[],o.setDiasVigencia=o.setDiasVigencia.bind(Object(s.a)(o)),o.FechaEntregaCot=o.FechaEntregaCot.bind(Object(s.a)(o)),o.successFechaEntregaCot=o.successFechaEntregaCot.bind(Object(s.a)(o)),o.retornaBodegasPorCodigoFacturacion=o.retornaBodegasPorCodigoFacturacion.bind(Object(s.a)(o)),o.successBodegasCodFac=o.successBodegasCodFac.bind(Object(s.a)(o)),o.cerrarEdicionModal=o.cerrarEdicionModal.bind(Object(s.a)(o)),o.conservaBodegaSeleccionada=o.conservaBodegaSeleccionada.bind(Object(s.a)(o)),o.gridOptionsProductos=Object.assign({},o.gridOptions),o.modalCodigoProducto=o.modalCodigoProducto.bind(Object(s.a)(o)),o.setButtonBodega1=o.setButtonBodega1.bind(Object(s.a)(o)),o.setButtonBodega2=o.setButtonBodega2.bind(Object(s.a)(o)),o.setButtonBodega3=o.setButtonBodega3.bind(Object(s.a)(o)),o.setButtonBodega4=o.setButtonBodega4.bind(Object(s.a)(o)),o.setButtonBodega5=o.setButtonBodega5.bind(Object(s.a)(o)),o.setButtonBodega6=o.setButtonBodega6.bind(Object(s.a)(o)),o.setButtonBodega7=o.setButtonBodega7.bind(Object(s.a)(o)),o.setButtonBodega8=o.setButtonBodega8.bind(Object(s.a)(o)),o.setButtonBodega9=o.setButtonBodega9.bind(Object(s.a)(o)),o.setButtonBodega10=o.setButtonBodega10.bind(Object(s.a)(o)),o.confirmarItemsModalProducto=o.confirmarItemsModalProducto.bind(Object(s.a)(o)),o.tablaCodigoProducto=o.tablaCodigoProducto.bind(Object(s.a)(o)),o.successTablaCodigoProducto=o.successTablaCodigoProducto.bind(Object(s.a)(o)),o.closeModalListar=o.closeModalListar.bind(Object(s.a)(o)),o.estadoModalListar=!1,o.loadTablaItems=o.loadTablaItems.bind(Object(s.a)(o)),o.setButtonCodigo=o.setButtonCodigo.bind(Object(s.a)(o)),o.setButtonNombre=o.setButtonNombre.bind(Object(s.a)(o)),o.setButtonBodegas=o.setButtonBodegas.bind(Object(s.a)(o)),o.llamarModalListar=o.llamarModalListar.bind(Object(s.a)(o)),o.loadTabla=!1,o.idProducto="",o.registroSeleccionado="",o.estadoTablaProductosBodegas=[],o.productoModalListar="",o.campo1ModalListar="",o.campo2ModalListar="",o.setBodega="",o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Cotizaciones @version 1.01.0017, @author Juan David Nieto"),this.getField("sucursales_pendientes").setCustomSuccess(this.setSucursalesProspectos),this.getField("lista_precios_prospectos").setCustomSuccess(this.setPrecioListaProspectos),this.getField("tipo_negocio_id").setCustomSuccess(this.setTipoNegocioProspecto),this.getField("agregar_contactos").setSuccess(this.abrirModalContactos),this.getField("btn_contacto").setClick(this.abrirModalContactos),this.getField("cancelar_contactos").setClick(this.cerrarModalContactos),this.getField("cancelar_nuevo").setClick(this.cerrarModalContactos),this.getField("agregar_nuevo").setClick(this.agregarNuevoPendiente),this.getField("documento_nuevo").setOnBlur(this.calcularDV),this.getField("pais_id").setOnChange(this.recuperarDepto),this.getField("departamento_geografico_id").setOnChange(this.recuperarCiudades),this.retornarCodigosFacturacion(),this.getField("boton_agregar_item").setDisabled(!0),this.getField("cantidad_item_520").setOnChange(this.recalcularPreciosCantidad),this.getField("codigo_bodega_item").setOnChange(this.recalcularPreciosCantidad),this.getField("codigo_bodega_item").setOnChange(this.loadItemPrecio),this.getField("boton_productos").setClick(this.openModalProducto),this.getField("boton_grabar").setClick(this.savePedido),this.getField("codigo_id_producto").setOnChange(this.loadPreciosCliente),this.getField("nombre_producto").setOnChange(this.clearCamposProducto),this.getField("cantidad_item_520").setOnBlur(this.loadItemPrecio),this.getField("orden_cotizacion").setOnChange(this.valueOrdenCotizacion),this.getField("boton_agregar_item").setSuccess(this.validarCostosItem),this.getField("modal_producto").setCloseButton(this.cerrarEdicionModal),this.getField("boton_aceptar").setClick(this.CloseModalProductos),this.getField("descuento_item").setOnChange(this.recalcularPrecios),this.getField("descuento_item").setOnBlur(this.validarDescuentoMaximo),this.getField("precio_lista").setOnChange(this.recalcularPreciosLista),this.getField("codigo_producto").setOnChange(this.cleanValid),this.getField("observaciones").setOnChange(this.cleanValid),this.getField("clase_de_pedido").setOnChange(this.cleanValid),this.getField("orden_de_compra").setOnChange(this.cleanValid),this.getField("detalle_item").setOnChange(this.cleanValid),this.getField("cantidad_item_520").setOnChange(this.cleanValid),this.getField("precio_lista").setOnChange(this.cleanValid),this.getField("nit").setOnChange(this.cleanValid),this.getField("nit").setOnChange(this.clearCampos),this.getField("nit").setKeyUp(this.enterServicioTerceros),this.getField("sede").setOnChange(this.cleanValid),this.getField("nombre").setOnChange(this.searchTercero),this.getField("precio_lista").setOnChange(this.cleanRecalcular),this.getField("cantidad_item_520").setOnChange(this.cleanRecalcularCant),this.getField("descuento_general").setVisible(!1),this.getField("aplicar_descuento").setVisible(!1),this.getField("aplicar_descuento").setClick(this.aplicarDescuentoBloque),this.getField("numero_de_item").setOnChange(this.FechaEntregaCot),this.getField("codigo_bodega_item").setOnChange(this.conservaBodegaSeleccionada),this.getField("listar_productos").setClick(this.modalCodigoProducto),this.getField("buscar_productos").setClick(this.tablaCodigoProducto),this.getField("modal_codigo_producto").setCloseButton(this.closeModalListar),this.getField("codigo_grupo_producto").setOnChange(this.llamarModalListar)}},{key:"llamarModalListar",value:function(){""!==this.getField("codigo_grupo_producto").getValue()&&(this.estadoModalListar=!1)}},{key:"closeModalListar",value:function(){!0===this.estadoModalListar&&""!==this.idProducto&&" "!==this.idProducto&&(this.openModalProducto(),this.getField("codigo_id_producto").setValue(this.idProducto))}},{key:"tablaCodigoProducto",value:function(){if(this.productoModalListar=this.getField("producto_modal_cod_producto").getValue(),this.campo1ModalListar=this.getField("campo1").getValue(),this.campo2ModalListar=this.getField("campo2").getValue(),""!==this.getField("producto_modal_cod_producto").getValue()&&" "!==this.getField("producto_modal_cod_producto").getValue()){this.getField("producto_modal_cod_producto").setError(!1,"");var e=this.getField("producto_modal_cod_producto").getValue(),t=this.getField("campo1").getValue(),i=this.getField("campo2").getValue(),a="".concat(e,",").concat(t,",").concat(i).replace(",,",","),o=this.bodegaIngreso.split(",");if(o.length<=10){var s={nombres:a,bodegas:this.bodegaIngreso};this.generalFormat.nombre_accion="520-pedidos-traer_producto_bodegas_autorizadas_facturacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:s,success:this.successTablaCodigoProducto,error:this.error_,general:this.generalFormat})}else{this.alertGeneral.toggle(!0,"Bodegas configuradas ".concat(o.length,", s\xf3lo se permiten seleccionar las primeras 10 columnas"),"warning");var r={nombres:a,bodegas:this.bodegaIngreso};this.generalFormat.nombre_accion="520-pedidos-traer_producto_bodegas_autorizadas_facturacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:r,success:this.successTablaCodigoProducto,error:this.error_,general:this.generalFormat})}}else this.getField("producto_modal_cod_producto").setError(!0,"* Este campo es requerido.")}},{key:"successTablaCodigoProducto",value:function(e){if(this.estadoTablaProductosBodegas=[],200===e.estado_p&&e.data.length>=1){this.estadoTablaProductosBodegas&&(this.estadoTablaProductosBodegas=e),this.getField("tb_codigo_producto").toggle(!1);var t=new Map;this.gridOptionsProductos.rowData=this.estadoTablaProductosBodegas.data;var i=e.data[0],a=Object.keys(i),o=a.length-3,s=a[3],r=a[4],n=a[5],d=a[6],l=a[7],c=a[8],u=a[9],g=a[10],h=a[11],m=a[12];1===o&&t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:520}),2===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:280}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:280})),3===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:190}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:190}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:190})),4===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:180}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:180}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:180}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:180})),5===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:170}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:170}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:170}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:170}),t.set(l,{cellRenderer:this.setButtonBodega5,field:l,width:170})),6===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:160}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:160}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:160}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:160}),t.set(l,{cellRenderer:this.setButtonBodega5,field:l,width:160}),t.set(c,{cellRenderer:this.setButtonBodega6,field:c,width:160})),7===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:150}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:150}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:150}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:150}),t.set(l,{cellRenderer:this.setButtonBodega5,field:l,width:150}),t.set(c,{cellRenderer:this.setButtonBodega6,field:c,width:150}),t.set(u,{cellRenderer:this.setButtonBodega7,field:u,width:150})),8===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:140}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:140}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:140}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:140}),t.set(l,{cellRenderer:this.setButtonBodega5,field:l,width:140}),t.set(c,{cellRenderer:this.setButtonBodega6,field:c,width:140}),t.set(u,{cellRenderer:this.setButtonBodega7,field:u,width:140}),t.set(g,{cellRenderer:this.setButtonBodega8,field:g,width:140})),9===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:130}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:130}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:130}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:130}),t.set(l,{cellRenderer:this.setButtonBodega5,field:l,width:130}),t.set(c,{cellRenderer:this.setButtonBodega6,field:c,width:130}),t.set(u,{cellRenderer:this.setButtonBodega7,field:u,width:130}),t.set(g,{cellRenderer:this.setButtonBodega8,field:g,width:130}),t.set(h,{cellRenderer:this.setButtonBodega9,field:h,width:130})),o>=10&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:120}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:120}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:120}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:120}),t.set(l,{cellRenderer:this.setButtonBodega5,field:l,width:120}),t.set(c,{cellRenderer:this.setButtonBodega6,field:c,width:120}),t.set(u,{cellRenderer:this.setButtonBodega7,field:u,width:120}),t.set(g,{cellRenderer:this.setButtonBodega8,field:g,width:120}),t.set(h,{cellRenderer:this.setButtonBodega9,field:h,width:120}),t.set(m,{cellRenderer:this.setButtonBodega10,field:m,width:120})),t.set("nombre",{cellRenderer:this.setButtonNombre,field:"nombre",width:555}),t.set("codigo",{cellRenderer:this.setButtonCodigo,field:"codigo",width:200}),t.set("bodegas",{cellRenderer:this.setButtonBodegas,field:"",width:10}),this.getField("tb_codigo_producto").initData(this.gridOptionsProductos,t),this.getField("tb_codigo_producto").toggle(!0)}else this.getField("tb_codigo_producto").toggle(!1)}},{key:"setButtonBodegas",value:function(e){if(e.data.codigo===this.registroSeleccionado){var t=document.createElement("div");return t.setAttribute("style","height: 100%;width: 10px; position: fixed; padding-right: 0%;padding-left: 0%;padding-top: 0%;font-size: 0.875rem;color: #0000ff; font-weight: bold; background-color: #B7E4FF;"),t.textContent="-",t}var i=document.createElement("div");return i.setAttribute("style","height: 100%;padding-left: 0%;padding-top: 0%;padding-right: 0%;font-size: 0.875rem;"),i.textContent="-",i}},{key:"setButtonCodigo",value:function(e){var t=e.data.codigo;if(e.data.codigo===this.registroSeleccionado){var i=document.createElement("div");return i.setAttribute("style","height: 100%;width: 200px; position: fixed; padding-right: 0%;padding-left: 0%;padding-top: 0%;font-size: 0.875rem;text-align:left;color: #0000ff; font-weight: bold; background-color: #B7E4FF;"),i.textContent=t,i}var a=document.createElement("div");return a.setAttribute("style","height: 100%;padding-left: 0%;padding-top: 0%;padding-right: 0%;font-size: 0.875rem;text-align:left;"),a.textContent=t,a}},{key:"setButtonNombre",value:function(e){var t=e.data.nombre;if(e.data.codigo===this.registroSeleccionado){var i=document.createElement("div");return i.setAttribute("style","height: 100%; width: 555px; position: fixed; padding-right: 0%;padding-left: 0%;padding-top: 0%;font-size: 0.875rem;text-align:left;color: #0000ff; font-weight: bold; background-color: #B7E4FF;"),i.textContent=t,i}var a=document.createElement("div");return a.setAttribute("style","height: 100%;padding-left: 0%;padding-top: 0%;padding-right: 0%;font-size: 0.875rem;text-align:left;"),a.textContent=t,a}},{key:"setButtonBodega10",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega9",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega8",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega7",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega6",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega5",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega4",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega3",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega2",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega1",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"confirmarItemsModalProducto",value:function(e,t){this.estadoModalListar=!0,this.getField("codigo_producto").setValue(e.data.codigo),this.getField("nombre_producto").setValue(e.data.nombre);var i=t.split("saldo");this.setBodega=i[1],this.getField("codigo_bodega_item").setValue(i[1]),this.idProducto=e.data.codigo,this.registroSeleccionado=e.data.codigo,this.getField("modal_codigo_producto").handleClose(),this.closeModalListar()}},{key:"modalCodigoProducto",value:function(){if(""!==this.getField("sede").getValue()&&""!==this.getField("nit").getValue()&&""!==this.getField("nombre").getValue()&&""!==this.getField("sucursal_origen").getValue()&&""!==this.getField("sucursal_cartera").getValue()){var e=[],t={data:[{nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue(),nombre:this.getField("nombre").getValue()}]};this.getField("lista_terceros_nit").setVisible(!0),e.push(t.data[0]),this.getField("lista_terceros_nit").setItemsFichas(e),this.getField("modal_codigo_producto").handleClickOpen(),this.getField("producto_modal_cod_producto").setValue(this.productoModalListar),this.getField("campo1").setValue(this.campo1ModalListar),this.getField("campo2").setValue(this.campo2ModalListar),this.successTablaCodigoProducto(this.estadoTablaProductosBodegas)}else this.getField("sede").setError(!0,"* Este campo es requerido."),this.getField("nit").setError(!0,"* Este campo es requerido."),this.getField("nombre").setError(!0,"* Este campo es requerido."),this.getField("lista_terceros_nit").setVisible(!1)}},{key:"onSelectionChangedItems",value:function(){}},{key:"cerrarEdicionModal",value:function(){!1===this.btnCerrarModal?!0===this.estadoModalListar&&""===this.itemEnEdicion?(this.getField("modal_codigo_producto").handleClickOpen(),this.getField("producto_modal_cod_producto").setValue(this.productoModalListar),this.getField("campo1").setValue(this.campo1ModalListar),this.getField("campo2").setValue(this.campo2ModalListar),this.successTablaCodigoProducto(this.estadoTablaProductosBodegas)):this.crearPedido():this.estadoModalListar=!1,this.btnCerrarModal=!1}},{key:"retornaBodegasPorCodigoFacturacion",value:function(){var e={value:this.getField("codigo_facturacion").getValue()};this.generalFormat.nombre_accion="520-select_bodegas_cod_fac",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successBodegasCodFac,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successBodegasCodFac",value:function(e){var t=this;if(e.data.length>=1){var i=[{text:"Ninguno",value:" ",campos_cambian:{nombre_bodega:""}}];if(e.data.forEach((function(e){var t={};t.value=e.codigo_bodega,t.text=e.codigo_bodega,t.campos_cambian={nombre_bodega:e.nombre},i.push(t)})),this.getField("codigo_bodega_item").setOptions(i),""!==this.bodegaIngreso&&""===this.bodegaSeleccionada){var a=[];""===this.setBodega&&(a=this.bodegaIngreso.split(","),this.setBodega=a[0]),this.getField("codigo_bodega_item").setValue(this.setBodega),e.data.forEach((function(e){e.codigo_bodega===a[0]&&t.getField("nombre_bodega").setValue(e.nombre)}))}else if(""!==this.bodegaSeleccionada){var o=this.bodegaSeleccionada.split(",");this.getField("codigo_bodega_item").setValue(o[0]),e.data.forEach((function(e){e.codigo_bodega===o[0]&&t.getField("nombre_bodega").setValue(e.nombre)}))}}else{this.getField("codigo_bodega_item").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]),this.getField("nombre_bodega").setValue("")}}},{key:"conservaBodegaSeleccionada",value:function(){""!==this.getField("codigo_bodega_item").getValue()&&(this.bodegaSeleccionada=this.getField("codigo_bodega_item").getValue())}},{key:"validarDescuentoMaximo",value:function(){if(this.getField("nit").valid()&&this.getField("sede").valid()&&this.getField("descuento_item").valid()&&this.getField("codigo_producto").valid()&&this.getField("precio_lista").valid()){var e={nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue(),descuento:this.getField("descuento_item").getValue(),codigo:this.getField("codigo_producto").getValue()};this.generalFormat.nombre_accion="520-valida_descuento_maximo",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successValidarDescuentoMax,error:this.error_,general:this.generalFormat})}}},{key:"successValidarDescuentoMax",value:function(e){200!==e.estado_p&&(this.getField("confirmModalCustom").setTitleAndContent("Descuento Maximo Permitodo","".concat(e.data.descuento_maximo,"%")),this.getField("confirmModalCustom").setClickDialog(this.confirmCloseAlertModal),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!0))}},{key:"confirmCloseAlertModal",value:function(){this.getField("confirmModalCustom").toggle(!1)}},{key:"setDiasVigencia",value:function(e,t){var i=new Date;i.setDate(e.getDate()+t);var a=i.toISOString();this.getField("fecha_vencimiento").setValue(a.split("T")[0]),this.getField("fecha_validez").setValue(a.split("T")[0])}},{key:"cerrarModalContactos",value:function(){this.getField("modal_contactos").handleClose(),this.getField("modal_nuevo_nit").handleClose()}},{key:"setSucursalesProspectos",value:function(e){e.length>=1?(this.getField("sucursal_cartera").setValue(e[0].sucursal_cartera),this.getField("sucursal_origen").setValue(e[0].sucursal_origen)):this.alertGeneral.toggle(!0,"No existen sucursales cartera y origen configuradas","error")}},{key:"setPrecioListaProspectos",value:function(e){e.length>=1?this.getField("precios").setValue(e[0].lista_precios_pendientes):this.alertGeneral.toggle(!0,"No existe una lista de precios configurada","error")}},{key:"setTipoNegocioProspecto",value:function(e){e.length>=1?this.TipoNegociosProspecto=e[0].codigo_negocio:(this.alertGeneral.toggle(!0,"No existe un c\xf3digo de Negocio V\xe1lido","error"),this.TipoNegociosProspecto="")}},{key:"abrirModalContactos",value:function(){if(this.idEliminarContacto=0,this.getField("telefono_contactos").setValue(""),this.getField("email_contactos").setValue(""),this.getField("observacion_contactos").setValue(""),this.getField("nombre_contacto").setValue(""),this.getField("nit").valid()&&this.getField("sede").valid()&&this.getField("nombre").valid()){this.getField("modal_contactos").handleClickOpen();var e={nit:this.getField("nit").getValue(),sede:parseInt(this.getField("sede").getValue())};this.generalFormat.nombre_accion="520_terceros_contactos_nitsede",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successAbrirModalContactos,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successAbrirModalContactos",value:function(e){if(this.getField("nit_contactos").setValue(this.getField("nit").getValue()),this.getField("sede_contactos").setValue(this.getField("sede").getValue()),this.getField("nombre_contactos").setValue(this.getField("nombre").getValue()),200===e.estado_p)if(e.data.length>=1){this.gridOptionsContactos.rowData=e.data;var t=new Map;t.set("eliminar",{cellRenderer:this.setButtonEliminarContacto,field:"eliminar",width:100}),this.getField("tabla_contactos").initData(this.gridOptionsContactos,t)}else this.getField("tabla_contactos").toggle(!1);else this.getField("tabla_contactos").toggle(!1)}},{key:"setButtonEliminarContacto",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarContactosConfirmar(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarContactosConfirmar",value:function(e){this.idEliminarContacto=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteContactoEliminar),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!1)}},{key:"confirmDeleteContactoEliminar",value:function(){if(this.getField("confirmModalCustom").toggle(!1),this.idEliminarContacto>=1){var e={id:this.idEliminarContacto};this.generalFormat.nombre_accion="520_eliminar_contactos",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.abrirModalContactos,error:this.error_,general:this.generalFormat})}}},{key:"agregarNuevoPendiente",value:function(){if(this.getField("documento_nuevo").valid()&&this.getField("verifica").valid()&&this.getField("tipo_documentos_id").valid()&&this.getField("nom1").valid()&&this.getField("nom2").valid()&&this.getField("ape1").valid()&&this.getField("ape2").valid()&&this.getField("nombre_cliente_nuevo").valid()&&this.getField("direccion_nuevo").valid()&&this.getField("telefonos").valid()&&this.getField("pais_id").valid()&&this.getField("departamento_geografico_id").valid()&&this.getField("ciudad_id").valid()&&this.getField("negocios_id").valid()&&this.getField("codigo_vendedor_prospecto").valid()&&this.getField("nombre_vendedor_prospecto").valid()&&this.getField("tipo_persona").valid()&&this.getField("calidad_agente_retenedor_ventas_id").valid()&&this.getField("email").valid()){var e={nit:this.getField("documento_nuevo").getValue(),verifica:this.getField("verifica").getValue(),tipo_documentos_id:this.getField("tipo_documentos_id").getValue(),nombre:this.getField("nombre_cliente_nuevo").getValue(),ape1:this.getField("ape1").getValue(),ape2:this.getField("ape2").getValue(),nom1:this.getField("nom1").getValue(),nom2:this.getField("nom2").getValue(),direccion:this.getField("direccion_nuevo").getValue(),telefonos:this.getField("telefonos").getValue(),ciudad_id:this.getField("ciudad_id").getValue(),negocios_id:this.getField("negocios_id").getValue(),vendedor_id:this.getField("vendedor_id").getValue(),tipo_persona:this.getField("tipo_persona").getValue(),calidad_agente_retenedor_ventas_id:this.getField("calidad_agente_retenedor_ventas_id").getValue(),email:this.getField("email").getValue()};this.generalFormat.nombre_accion="520_terceros_pendientes_agregar",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successAgregarNuevoPendiente,error:this.error_,general:this.generalFormat})}}},{key:"successAgregarNuevoPendiente",value:function(e){200===e.estado_p&&(this.getField("modal_nuevo_nit").handleClose(),this.buscarNitPendiente())}},{key:"calcularDV",value:function(){""!==this.getField("documento_nuevo").getValue()&&" "!==this.getField("documento_nuevo").getValue()&&this.getField("verifica").setValue("".calcularDigitoVerificacion(this.getField("documento_nuevo").getValue()))}},{key:"recuperarDepto",value:function(){if(""!==this.getField("pais_id").getValue()&&" "!==this.getField("pais_id").getValue()){var e={value:this.getField("pais_id").getValue()};this.generalFormat.nombre_accion="520-depto_pais_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successRecuperarDepto,error:this.error_,general:this.generalFormat})}}},{key:"successRecuperarDepto",value:function(e){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.nombre,i.campos_cambian={},t.push(i)})),this.getField("departamento_geografico_id").setOptions(t)}}},{key:"recuperarCiudades",value:function(){if(""!==this.getField("departamento_geografico_id").getValue()&&" "!==this.getField("departamento_geografico_id").getValue()){var e={value:this.getField("departamento_geografico_id").getValue()};this.generalFormat.nombre_accion="520_ciudades_depto_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successRecuperarCiudades,error:this.error_,general:this.generalFormat})}}},{key:"successRecuperarCiudades",value:function(e){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.nombre,i.campos_cambian={},t.push(i)})),this.getField("ciudad_id").setOptions(t)}}},{key:"nitPendiente",value:function(e){}},{key:"successTercerosF9",value:function(e){if(e.data.length>1){this.getField("modal_terceros").handleClickOpen(),this.gridOptionsTerceros.rowData=e.model;var t=new Map;this.getField("tabla_terceros").initData(this.gridOptionsTerceros,t)}else 1===e.data.length&&(this.getField("sede").setValue(e.model[0].sede),this.getField("nit").setValue(e.model[0].nit),this.getField("nombre").setValue(e.model[0].nombre))}},{key:"successTerceros",value:function(e){if(e.data.length>1){this.getField("modal_terceros").handleClickOpen(),this.gridOptionsTerceros.rowData=e.model;var t=new Map;this.getField("tabla_terceros").initData(this.gridOptionsTerceros,t)}else 1===e.data.length?(this.getField("sede").setValue(e.model[0].sede),this.getField("nit").setValue(e.model[0].nit),this.getField("nombre").setValue(e.model[0].nombre)):e.data.length<1&&(this.getField("confirmModalCustom").setTitleAndContent("Buscar","Nit no encontrado, Desea buscarlo en Prospectos?"),this.getField("confirmModalCustom").setClickDialog(this.buscarNitPendiente),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!1))}},{key:"onSelectionChangedTerceros",value:function(){var e=this.gridOptionsTerceros.api.getSelectedRows();this.getField("modal_terceros").handleClose(),this.getField("sede").setValue(e[0].sede),this.getField("nit").setValue(e[0].nit),this.getField("nombre").setValue(e[0].nombre)}},{key:"buscarNitPendiente",value:function(){this.getField("direccion").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]),this.getField("confirmModalCustom").toggle(!1);var e={value:this.getField("nit").getValue()};this.generalFormat.nombre_accion="520_retorna_terceros_pendientes_nit",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successBuscarNitPendiente,error:this.error_,general:this.generalFormat})}},{key:"successBuscarNitPendiente",value:function(e){if(200===e.estado_p){var t=[{text:e.model[0].direccion,value:e.model[0].direccion,campos_cambian:{}}];this.getField("direccion").setOptions(t),this.getField("nit").setValue(e.data[0].nit),this.getField("nombre").setValue(e.data[0].nombre),this.getField("sede").setValue(1),this.getField("telefono").setValue(e.data[0].telefonos),this.getField("codigo_vendedor").setValue(e.data[0].codigo_vendedor),this.getField("tasa_cambio").setValue(e.data[0].tasa_cambio),this.getField("codigo_ciudad").setValue(e.data[0].codigo_ciudad),this.getField("nombre_ciudad").setValue(e.data[0].nombre_ciudad),this.getField("nombre_vendedor").setValue(e.data[0].nombre_vendedor);var i=[{text:e.model[0].direccion,value:e.model[0].direccion,campos_cambian:{}}];this.getField("direccion").setOptions(i),this.getField("tipo_negocio_id").setValue(parseInt(e.data[0].negocios_id)),this.getField("lista_precios_prospectos").setValue(e.data[0].nit),this.getField("sucursales_pendientes").setValue(e.data[0].codigo_vendedor)}else this.getField("confirmModalCustom").setTitleAndContent("Buscar","Nit no encontrado en Prospectos, Desea Crearlo?"),this.getField("confirmModalCustom").setClickDialog(this.crearNitPendiente),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!1)}},{key:"crearNitPendiente",value:function(){this.getField("direccion").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]),this.getField("confirmModalCustom").toggle(!1),this.getField("modal_nuevo_nit").handleClickOpen(),this.getField("documento_nuevo").setValue(this.getField("nit").getValue()),this.calcularDV(),this.getField("nom1").setValue("."),this.getField("nom2").setValue("."),this.getField("ape1").setValue("."),this.getField("ape2").setValue("."),this.getField("email").setValue(".")}},{key:"retornarCodigosFacturacion",value:function(){this.generalFormat.nombre_accion="520-Retorna_codigo_facturacion_del_sesion_usuario",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successLoadCodigoFacturacion,error:this.error_,general:this.generalFormat})}},{key:"successLoadCodigoFacturacion",value:function(e){if(e.model&&e.model.length>0){this.getField("modal_principal").handleClose(),this.gridOptionsCodigosFacturacion.rowData=e.model,this.gridOptionsCodigosFacturacion.paginationPageSize=100;var t=new Map;this.getField("tabla_codigos_facturacion").initData(this.gridOptionsCodigosFacturacion,t)}else this.getField("tabla_codigos_facturacion").toggle(!1),this.alertGeneral.toggle(!0,"El usuario no posee c\xf3digos de facturaci\xf3n","error")}},{key:"onSelectionChangedCodigosFacturacion",value:function(e){if(this.datosCodigos=this.gridOptionsCodigosFacturacion.api.getSelectedRows(),void 0!==this.datosCodigos&&void 0!==this.datosCodigos[0]){this.getField("modal_principal").handleClickOpen(),this.getField("codigo_facturacion").setValue(this.datosCodigos[0].codigo_facturacion),this.getField("codigo_facturacion_actual").setValue(this.datosCodigos[0].codigo_facturacion),this.getField("nombre_sucursal").setValue(this.datosCodigos[0].detalle),this.gridOptionsCodigosFacturacion.api.deselectAll(),this.getField("orden_de_compra").setValue("."),this.getField("observaciones").setValue(".");var t=new Date;this.setDiasVigencia(t,30),this.bodegaIngreso=this.datosCodigos[0].bodegas_autorizadas}}},{key:"selectDirecciones",value:function(){if(""!==this.getField("sede").getValue()&&""!==this.getField("nit").getValue()){var e={sede:this.getField("sede").getValue(),nit:this.getField("nit").getValue()};this.generalFormat.nombre_accion="520-retorna_direcciones_sede_terceros",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDirecciones,error:this.error_,general:this.generalFormat})}}},{key:"successDirecciones",value:function(e){if(e.data.length>=1){var t=[];e.data.forEach((function(e){var i={};i.value=e.direccion,i.text=e.direccion,i.campos_cambian={codigo_ciudad:e.codigo_ciudad,nombre_ciudad:e.nciudad},t.push(i)})),this.getField("direccion").setOptions(t)}else{this.getField("direccion").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}])}}},{key:"cleanRecalcular",value:function(){this.getField("cantidad_item_520").setValue(""),this.getField("valor_total_item").setValue(""),this.getField("precio_facturacion").setValue("")}},{key:"cleanRecalcularCant",value:function(){this.getField("valor_total_item").setValue(""),this.getField("precio_facturacion").setValue(""),this.getField("boton_agregar_item").setDisabled(!0)}},{key:"cleanValid",value:function(){this.getField("subtotal").setError(!1,"* Este campo es requerido."),this.getField("valor_iva_final").setError(!1,"* Este campo es requerido."),this.getField("numero_de_item").setError(!1,"* Este campo es requerido."),this.getField("valor_pedido").setError(!1,"* Este campo es requerido."),this.getField("orden_cotizacion").setError(!1,"* Este campo es requerido."),this.getField("observaciones").setError(!1,"* Este campo es requerido."),this.getField("clase_de_pedido").setError(!1,"* Este campo es requerido."),this.getField("orden_de_compra").setError(!1,"* Este campo es requerido."),this.getField("detalle_item").setError(!1,"* Este campo es requerido."),this.getField("descuento_item").setError(!1,"* Este campo es requerido."),this.getField("precio_lista").setError(!1,"* Este campo es requerido."),this.getField("codigo_producto").setError(!1,"* Este campo es requerido."),this.getField("nit").setError(!1,"* Este campo es requerido."),this.getField("sede").setError(!1,"* Este campo es requerido."),this.getField("detalle_item").valid()&&!0===this.cantidadDespacho?(this.getField("boton_agregar_item").setDisabled(!1),this.getField("cantidad_item_520").setError(!1,"* Este campo es requerido.")):this.getField("boton_agregar_item").setDisabled(!0)}},{key:"recalcularPreciosCantidad",value:function(){this.getField("precio_facturacion").setValue(""),this.getField("valor_total_item").setValue("")}},{key:"recalcularPreciosLista",value:function(){this.getField("descuento_item").setValue(0),this.getField("cantidad_item_520").setValue(""),this.getField("precio_facturacion").setValue(""),this.getField("valor_total_item").setValue("")}},{key:"recalcularPrecios",value:function(){this.getField("cantidad_item_520").setValue(""),this.getField("precio_facturacion").setValue(""),this.getField("valor_total_item").setValue(""),this.cleanValid(),this.cleanRecalcular()}},{key:"FechaEntregaCot",value:function(){if(parseInt(this.getField("numero_de_item").getValue())>=1){var e={numero_items:parseInt(this.getField("numero_de_item").getValue()),nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="520-Servicio_cotizacion_mercancia_calcular_fecha_entrega",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successFechaEntregaCot,error:this.error_,general:this.generalFormat,showMessage:!1})}else this.getField("fecha_entrega").setValue("")}},{key:"CloseModalProductos",value:function(){""===this.itemEnEdicion?(this.btnCerrarModal=!0,this.crearPedido(),this.getField("modal_producto").handleClose()):this.alertGeneral.toggle(!0,"Esta Editando un \xedtem","error")}},{key:"successFechaEntregaCot",value:function(e){200===e.estado_p&&this.getField("fecha_entrega").setValue(e.data[0].fecha_entrega)}},{key:"validarCostosItem",value:function(e){this.agregarItems()}},{key:"loadTablaItems",value:function(e){this.getField("modal_producto").handleClickOpen(),this.getField("codigo_producto").setDisabled(!1),this.modificarArray=[],this.gridOptionsTablaItems.rowData=e,this.arrayOrigin=this.nuevoArray;var t=new Map;t.set("codigo",{field:"codigo",width:110}),t.set("descuento",{field:"descuento",width:120}),t.set("precio_sin_iva",{field:"precio sin iva",valueFormatter:this.currencyFormatterPrecioSinIva}),t.set("precio_total",{field:"precio total",valueFormatter:this.currencyFormatterPrecioTotal}),t.set("nombre",{field:"nombre",width:260}),t.set("cantidad",{field:"cantidad",width:110}),t.set("aplicar_descuento",{headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,field:"Descuento en bloque"}),t.set(7,{cellRenderer:this.setButtonEliminarItem,field:"Accion Eliminar",width:150}),t.set(8,{cellRenderer:this.setButtonModificarItem,field:"Accion Modificar",width:150}),this.gridOptionsTablaItems.suppressRowClickSelection=!0,this.gridOptionsTablaItems.rowSelection="multiple",this.gridOptionsTablaItems.enableRangeSelection=!0,this.gridOptionsTablaItems.enableCellChangeFlash=!0,this.getField("descuento_general").setVisible(!0),this.getField("aplicar_descuento").setVisible(!0),this.getField("tabla_item").initData(this.gridOptionsTablaItems,t),this.gridOptionsTablaItems.onSelectionChanged=this.rowSelectedPedido,this.clearCamposProducto()}},{key:"agregarItems",value:function(){if(""!==this.getField("detalle_item").getValue()&&""!==this.getField("cantidad_item_520").getValue()&&0!==this.getField("cantidad_item_520").getValue()&&""!==this.getField("codigo_producto").getValue()&&""!==this.getField("precio_lista").getValue()&&0!==this.getField("precio_lista").getValue()&&this.getField("valor_total_item").valid()&&this.getField("tarifa_iva_item").valid()){this.cantidadDespacho=!1,this.itemEnEdicion="",this.getField("detalle_item").setError(!1,"* Este campo es requerido."),this.getField("cantidad_item_520").setError(!1,"* Este campo es requerido."),this.getField("descuento_item").setError(!1,"* Este campo es requerido."),this.getField("precio_lista").setError(!1,"* Este campo es requerido."),this.getField("codigo_producto").setError(!1,"* Este campo es requerido."),this.getField("boton_agregar_item").setDisabled(!0);var e=this.getField("precio_sin_iva").getValue()*this.getField("cantidad_item_520").getValue(),t=this.getField("valor_iva").getValue()*this.getField("cantidad_item_520").getValue(),i={codigo:this.getField("codigo_producto").getValue(),nombre:this.getField("nombre_producto").getValue(),cantidad:this.getField("cantidad_item_520").getValue(),descuento:this.getField("descuento_item").getValue(),precio_sin_iva:this.getField("precio_sin_iva").getValue(),precio_total:this.getField("valor_total_item").getValue(),bodega:this.getField("codigo_bodega_item").getValue(),nombre_bodega_item:this.getField("nombre_bodega").getValue(),valor_iva:this.getField("valor_iva").getValue(),peso:this.getField("peso_grm").getValue(),precio:this.getField("precio_lista").getValue(),codigo_unidad:this.getField("unidad").getValue(),detalle:this.getField("detalle_item").getValue(),tarifa_iva:this.getField("tarifa_iva_item").getValue(),precio_sin_iva_con_descuento:this.getField("precio_sin_iva_con_descuento").getValue(),precio_mas_iva:this.getField("precio_mas_iva").getValue(),tasa_de_cambio:this.getField("tasa_de_cambio").getValue(),descuento_bloque:0,codigo_facturacion:this.getField("codigo_facturacion").getValue(),subtotal:e,totalIvaItems:t};if(!0===this.estadoModalListar&&(this.modalCodigoProducto(),this.successTablaCodigoProducto(this.estadoTablaProductosBodegas)),this.getField("codigo_producto").valid()&&""!==this.getField("nombre_producto").getValue()&&this.getField("cantidad_item_520").valid()){this.arrayTemporal.push(i);var a=this.getField("codigo_producto").getValue(),o=[];this.nuevoArray.forEach((function(e){e.codigo===a&&o.push(e)})),0===o.length?(this.nuevoArray.push(i),this.loadTablaItems(this.nuevoArray),this.getField("codigo_producto").setValue(""),this.getField("nombre_producto").setValue("")):this.alertGeneral.toggle(!0,"El item ya fue agregado","error")}else i={}}else""===this.getField("codigo_producto").getValue()?(this.getField("codigo_producto").setError(!0,"* Este campo es requerido."),""===this.itemEnEdicion&&this.alertGeneral.toggle(!0,"Faltan datos","error"),this.getField("boton_agregar_item").setDisabled(!0)):""===this.getField("precio_lista").getValue()||0===this.getField("precio_lista").getValue()?(this.getField("precio_lista").setError(!0,"* Este campo es requerido."),this.alertGeneral.toggle(!0,"Faltan datos","error"),this.getField("boton_agregar_item").setDisabled(!0)):""===this.getField("detalle_item").getValue()?(this.getField("detalle_item").setError(!0,"* Este campo es requerido."),this.alertGeneral.toggle(!0,"Faltan datos","error"),this.getField("boton_agregar_item").setDisabled(!0)):""!==this.getField("cantidad_item_520").getValue()&&0!==this.getField("cantidad_item_520").getValue()||(this.getField("cantidad_item_520").setError(!0,"* Este campo es requerido."),this.alertGeneral.toggle(!0,"Faltan datos","error"),this.getField("boton_agregar_item").setDisabled(!0))}},{key:"currencyFormatterPrecioSinIva",value:function(e){var t=(e.data.precio_sin_iva+"").split(".")[1];return 0!==t&&void 0!==t?this.formatNumberPrecioSinIva(e.data.precio_sin_iva)+"."+t:this.formatNumberPrecioSinIva(e.data.precio_sin_iva)}},{key:"formatNumberPrecioSinIva",value:function(e){return Math.floor(e).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}},{key:"currencyFormatterPrecioTotal",value:function(e){var t=(e.data.precio_total+"").split(".")[1];return 0!==t&&void 0!==t?this.formatNumberPrecioTotal(e.data.precio_total)+"."+t:this.formatNumberPrecioTotal(e.data.precio_total)}},{key:"formatNumberPrecioTotal",value:function(e){return Math.floor(e).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}},{key:"rowSelectedPedido",value:function(){this.arrayDataCheckBox=this.gridOptionsTablaItems.api.getSelectedRows();var e=this.arrayDataCheckBox;this.agregarDescuentoItem(e)}},{key:"agregarDescuentoItem",value:function(e){this.dAgregado=e}},{key:"aplicarDescuentoBloque",value:function(){var e=this;if(this.dAgregado.length>0&&""===this.itemEnEdicion){if(this.getField("descuento_general").valid()){var t=this.getField("descuento_general").getValue();this.auxiliarArray=[],this.nuevoArray.forEach((function(t){var i;i=Object.assign({},t),e.auxiliarArray.push(i)})),this.dAgregado.forEach((function(i,a){e.auxiliarArray.forEach((function(e){i.codigo===e.codigo&&(e.descuento_bloque=1,e.descuento=t)}))}));var i={productos:this.auxiliarArray};this.generalFormat.nombre_accion="520-actualiza_descuento_productos",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successDescuentoBloque,error:this.error_,general:this.generalFormat})}}else""===this.itemEnEdicion?this.alertGeneral.toggle(!0,"Esta modificando un \xedtem","error"):this.alertGeneral.toggle(!0,"No ha seleccionado ning\xfan item","error")}},{key:"successDescuentoBloque",value:function(e){200===e.estado_p&&(this.nuevoArray=e.data,this.openModalProducto(),this.dAgregado=[],this.getField("descuento_general").setValue(0))}},{key:"setButtonEliminarItem",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarItemConfirmar(e.data.codigo)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarItemConfirmar",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.eliminarItem),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!1),this.getField("codigo_eliminar").setValue(e)}},{key:"eliminarItem",value:function(){var e=this;if(0===this.modificarArray.length){this.getField("confirmModalCustom").toggle(!1);var t=[];if(this.nuevoArray.forEach((function(i){i.codigo!==e.getField("codigo_eliminar").getValue()&&t.push(i)})),this.nuevoArray=t,this.nuevoArray.length>0){this.gridOptionsTablaItems.rowData=this.nuevoArray;var i=new Map;i.set("codigo",{field:"codigo",width:110}),i.set("descuento",{field:"descuento",width:120}),i.set("precio_sin_iva",{field:"precio sin iva",valueFormatter:this.currencyFormatterPrecioSinIva}),i.set("precio_total",{field:"precio total",valueFormatter:this.currencyFormatterPrecioTotal}),i.set("nombre",{field:"nombre",width:260}),i.set("cantidad",{field:"cantidad",width:110}),i.set("aplicar_descuento",{headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,field:"Descuento en bloque"}),i.set(7,{cellRenderer:this.setButtonEliminarItem,field:"Accion Eliminar",width:150}),i.set(8,{cellRenderer:this.setButtonModificarItem,field:"Accion Modificar",width:150}),this.gridOptionsTablaItems.suppressRowClickSelection=!0,this.gridOptionsTablaItems.rowSelection="multiple",this.gridOptionsTablaItems.enableRangeSelection=!0,this.gridOptionsTablaItems.enableCellChangeFlash=!0,this.getField("descuento_general").setVisible(!0),this.getField("aplicar_descuento").setVisible(!0),this.getField("tabla_item").initData(this.gridOptionsTablaItems,i),this.gridOptionsTablaItems.onSelectionChanged=this.rowSelectedPedido}else this.getField("tabla_item").toggle(!1),this.getField("tabla_bodega").toggle(!1),this.getField("descuento_general").setVisible(!1),this.getField("aplicar_descuento").setVisible(!1)}else this.alertGeneral.toggle(!0,"Esta modificando un item","error"),this.getField("confirmModalCustom").toggle(!1)}},{key:"setButtonModificarItem",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.modificarItem(e.data.codigo,e.data.nombre,e.data.bodega,e.data.nombre_bodega_item,e.data.valor_iva,e.data.peso,e.data.precio,e.data.descuento,e.data.cantidad,e.data.codigo_unidad,e.data.detalle,e.data.tarifa_iva,e.data.precio_sin_iva,e.data.precio_mas_iva,e.data.precio_total)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Modificar"),i}},{key:"modificarItem",value:function(e,t,i,a,o,s,r,n,d,l,c,u,g,h,m){var _=this;if(0===this.modificarArray.length)if(this.getField("codigo_producto").setDisabled(!0),this.getField("codigo_producto").setValue(e),this.getField("nombre_producto").setValue(t),this.getField("valor_iva").setValue(o),this.getField("peso_grm").setValue(s),this.getField("precio_lista").setValue(r),this.getField("descuento_item").setValue(n),this.getField("cantidad_item_520").setValue(d),this.getField("unidad").setValue(l),this.getField("detalle_item").setValue(c),this.getField("tarifa_iva_item").setValue(u),this.getField("precio_facturacion").setValue(g),this.getField("valor_total_item").setValue(m),this.getField("precio_sin_iva_con_descuento").setValue(g),this.getField("precio_sin_iva").setValue(g),this.getField("precio_mas_iva").setValue(h),this.getField("valor_iva").setValue(o),this.getField("boton_agregar_item").setDisabled(!1),this.itemEnEdicion=this.getField("nombre_producto").getValue(),this.nuevoArray.forEach((function(t){t.codigo!==e&&_.modificarArray.push(t)})),this.nuevoArray=this.modificarArray,this.modificarArray.length>0){this.gridOptionsTablaItems.rowData=this.modificarArray;var b=new Map;b.set("codigo",{field:"codigo",width:110}),b.set("descuento",{field:"descuento",width:120}),b.set("precio_sin_iva",{field:"precio sin iva",valueFormatter:this.currencyFormatterPrecioSinIva}),b.set("precio_total",{field:"precio total",valueFormatter:this.currencyFormatterPrecioTotal}),b.set("nombre",{field:"nombre",width:260}),b.set("cantidad",{field:"cantidad",width:110}),b.set("aplicar_descuento",{headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,field:"Descuento en bloque"}),b.set(7,{cellRenderer:this.setButtonEliminarItem,field:"Accion Eliminar",width:150}),b.set(8,{cellRenderer:this.setButtonModificarItem,field:"Accion Modificar",width:150}),this.gridOptionsTablaItems.suppressRowClickSelection=!0,this.gridOptionsTablaItems.rowSelection="multiple",this.gridOptionsTablaItems.enableRangeSelection=!0,this.gridOptionsTablaItems.enableCellChangeFlash=!0,this.getField("descuento_general").setVisible(!0),this.getField("aplicar_descuento").setVisible(!0),this.getField("tabla_item").initData(this.gridOptionsTablaItems,b),this.gridOptionsTablaItems.onSelectionChanged=this.rowSelectedPedido}else this.getField("tabla_item").toggle(!1),this.getField("tabla_bodega").toggle(!1);else this.alertGeneral.toggle(!0,"Ya est\xe1 modificando un item","error")}},{key:"valueOrdenCotizacion",value:function(){this.cleanValid(),""!==this.getField("orden_cotizacion").getValue()?this.getField("estado_pedido").setValue(this.getField("orden_cotizacion").getValue()):this.getField("estado_pedido").setValue("")}},{key:"clearCampos",value:function(){this.getField("direccion").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]),this.getField("direccion").setValue(""),this.getField("telefono").setValue(""),this.getField("codigo_ciudad").setValue(""),this.getField("nombre_ciudad").setValue(""),this.getField("codigo_vendedor").setValue(""),this.getField("nombre_vendedor").setValue(""),this.getField("tasa_cambio").setValue(""),this.getField("precios").setValue(""),this.getField("codigo_negocio").setValue(""),this.getField("tasa_de_cambio").setValue(""),this.getField("observaciones").setValue("."),this.getField("subtotal").setValue(""),this.getField("valor_iva_final").setValue(""),this.getField("numero_de_item").setValue(""),this.getField("valor_pedido").setValue(""),this.nuevoArray=[],this.estadoTablaProductosBodegas=[],this.registroSeleccionado="",this.TipoNegociosProspecto="",this.codigoNegocio="",this.bodegaSeleccionada="",this.gridOptionsProductos.rowData=[];var e=new Map;this.getField("tb_codigo_producto").initData(this.gridOptionsProductos,e),this.getField("tb_codigo_producto").toggle(!1),this.productoModalListar="",this.campo1ModalListar="",this.campo2ModalListar=""}},{key:"clearCamposProducto",value:function(){this.getField("tarifa_iva_item").setValue(""),this.getField("peso_grm").setValue(""),this.getField("precio_lista").setValue(""),this.getField("unidad").setValue(""),this.getField("precio_facturacion").setValue(""),this.getField("valor_total_item").setValue(""),this.getField("descuento_item").setValue(0),this.getField("cantidad_item_520").setValue(""),this.getField("precio_sin_iva_con_descuento").setValue(""),this.getField("precio_sin_iva").setValue(""),this.getField("precio_mas_iva").setValue(""),this.getField("detalle_item").setValue(".")}},{key:"searchTercero",value:function(){if(this.getField("clase_de_pedido").setValue("1EST"),""!==this.getField("nit").getValue()&&""!==this.getField("sede").getValue()&&""!==this.getField("nombre").getValue()){this.getField("nit").setError(!1,"* Este campo es requerido."),this.getField("sede").setError(!1,"* Este campo es requerido."),this.getField("nombre").setError(!1,"* Este campo es requerido.");var e={nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="520_Retorna_cliente_con_nit_sede",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successSearchTercero,error:this.error_,general:this.generalFormat,showMessage:!1})}else""!==this.getField("nit").getValue()&&""!==this.getField("sede").getValue()||(this.getField("nit").setError(!0,"* Este campo es requerido."),this.getField("sede").setError(!0,"* Este campo es requerido."))}},{key:"successSearchTercero",value:function(e){this.getField("tasa_de_cambio").setValue(this.getField("tasa_cambio").getValue()),200===e.estado_p&&(this.getField("direccion").setValue(e.model[0].direccion),this.getField("telefono").setValue(e.model[0].telefonos),this.getField("codigo_ciudad").setValue(e.model[0].codigo_ciudad),this.getField("nombre_ciudad").setValue(e.model[0].nciudad),this.getField("codigo_vendedor").setValue(e.model[0].codigo_vendedor),this.getField("nombre_vendedor").setValue(e.model[0].nvendedor),this.getField("tasa_cambio").setValue(e.model[0].tasa_cambio),this.getField("precios").setValue(e.model[0].precios),this.codigoNegocio=e.model[0].codigo_negocio,this.getField("codigo_negocio").setValue(e.model[0].codigo_negocio),this.getField("tasa_de_cambio").setValue(this.getField("tasa_cambio").getValue()),this.getField("sucursal_origen").setValue(e.model[0].sucursal_origen),this.getField("sucursal_cartera").setValue(e.model[0].sucursal_cartera),this.selectDirecciones())}},{key:"openModalProducto",value:function(){this.itemEnEdicion="",this.modificarArray=[],""!==this.TipoNegociosProspecto&&this.getField("codigo_negocio").setValue(this.TipoNegociosProspecto),this.getField("nit").valid()&&this.getField("sede").valid()&&this.getField("nombre").valid()&&this.getField("direccion").valid()&&this.getField("telefono").valid()&&this.getField("codigo_ciudad").valid()&&this.getField("nombre_ciudad").valid()&&this.getField("codigo_vendedor").valid()&&this.getField("nombre_vendedor").valid()&&""!==this.getField("tasa_cambio").getValue()&&(this.getField("tasa_de_cambio").setValue(this.getField("tasa_cambio").getValue()),this.retornaBodegasPorCodigoFacturacion(),this.getField("codigo_producto").setDisabled(!1),this.nuevoArray.length>0?(""!==this.codigoNegocio&&this.getField("codigo_negocio").setValue(this.codigoNegocio),this.loadTabla=!0,this.loadTablaItems(this.nuevoArray),this.clearCamposProducto(),!1===this.estadoModalListar&&(this.getField("codigo_producto").setValue(""),this.getField("nombre_producto").setValue(""))):(this.getField("descuento_general").setVisible(!1),this.getField("aplicar_descuento").setVisible(!1),""!==this.codigoNegocio&&this.getField("codigo_negocio").setValue(this.codigoNegocio),this.getField("modal_producto").handleClickOpen())),this.getField("detalle_item").setError(!1,""),this.getField("detalle_item").setValue("."),this.getField("lista_precios").setValue(this.getField("precios").getValue())}},{key:"loadPreciosCliente",value:function(){if(""!==this.getField("codigo_id_producto").getValue()&&""!==this.getField("codigo_producto").getValue()){var e={codigo:this.getField("codigo_producto").getValue(),codigo_facturacion:this.getField("codigo_facturacion").getValue(),precios:this.getField("precios").getValue(),nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="520-Retorna_precio_articulo_para_cliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successLoadPreciosCliente,error:this.error_,general:this.generalFormat})}}},{key:"successLoadPreciosCliente",value:function(e){200===e.estado_p&&(this.getField("tarifa_iva_item").setValue(e.model[0].tarifa_iva),this.getField("peso_grm").setValue(e.model[0].peso),this.getField("precio_lista").setValue(e.model[0].precio),this.getField("unidad").setValue(e.model[0].unidad)),this.getField("cantidad_item_520").input.focus()}},{key:"loadItemPrecio",value:function(){if(""!==this.getField("nombre_producto").getValue()&&this.getField("nombre_producto").valid()&&this.getField("cantidad_item_520").getValue()>=.01&&this.getField("codigo_producto").valid()&&this.getField("precio_lista").valid()){var e={codigo:this.getField("codigo_producto").getValue(),codigo_facturacion:this.getField("codigo_facturacion").getValue(),descuento:this.getField("descuento_item").getValue(),cantidad:this.getField("cantidad_item_520").getValue(),precio:this.getField("precio_lista").getValue(),nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="520-Retorna_items_pedido_precio",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successLoadItemPrecio,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successLoadItemPrecio",value:function(e){this.getField("precio_facturacion").setValue(e.data.precio_sin_iva),this.getField("valor_total_item").setValue(e.data.precio_total),this.getField("precio_sin_iva_con_descuento").setValue(e.data.precio_sin_iva),this.getField("precio_sin_iva").setValue(e.data.precio_sin_iva),this.getField("precio_mas_iva").setValue(e.data.precio_con_iva),this.getField("valor_iva").setValue(e.data.valor_iva),this.loadBodegasItem(),this.cleanValid()}},{key:"loadBodegasItem",value:function(){if(this.getField("codigo_facturacion").valid()&&""!==this.getField("nombre_producto").getValue()){var e={codigo:this.getField("codigo_producto").getValue(),codigo_facturacion:this.getField("codigo_facturacion").getValue()};this.generalFormat.nombre_accion="520-Retorna_bodegas_item",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successLoadBodegasItem,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successLoadBodegasItem",value:function(e){if(this.validarDespachoMinimo(),200===e.estado_p){this.gridOptionsBodegasItem.rowData=e.model;var t=new Map;this.getField("tabla_bodega").initData(this.gridOptionsBodegasItem,t)}else this.getField("tabla_bodega").toggle(!1)}},{key:"validarDespachoMinimo",value:function(){var e={codigo_producto:this.getField("codigo_producto").getValue(),cantidad:this.getField("cantidad_item_520").getValue(),codigo_bodega:this.getField("codigo_bodega_item").getValue()};this.generalFormat.nombre_accion="520-unidad_min_despacho_item",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successValidarDespachoMinimo,error:this.error_,general:this.generalFormat})}},{key:"successValidarDespachoMinimo",value:function(e){200===e.estado_p?(this.cantidadDespacho=!0,this.cleanValid()):(this.cantidadDespacho=!1,this.getField("boton_agregar_item").setDisabled(!0),this.getField("cantidad_item_520").setError(!0,e.data.mensaje))}},{key:"crearPedido",value:function(){this.getField("boton_grabar").setDisabled(!0),this.confirmCloseAlertModal(),this.valorPedido=0,this.totalIvaItems=0,this.subtotalItems=0,this.cantidad=0;var e="";if(""!==this.nuevoArray){var t=this.nuevoArray.length,i=0,a=0,o=0;this.nuevoArray.forEach((function(e){i+=e.precio_total,a+=e.precio_sin_iva*e.cantidad,o+=e.precio_sin_iva*e.cantidad*e.tarifa_iva/100})),e=""!==this.itemEnEdicion?"Terminado con \xc9xito, No guardo el ultimo el item ".concat(this.itemEnEdicion," que estaba modificando"):"Terminado con \xc9xito",this.getField("boton_grabar").setDisabled(!1),this.getField("confirmModalCustom").setTitleAndContent("Calcular Totales",e),this.getField("confirmModalCustom").setClickDialog(this.confirmCloseAlertModal),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!0),this.alertGeneral.toggle(!1,"Procesando... por favor espere","warning"),this.getField("subtotal").setValue(a.toFixed(2)),this.getField("valor_iva_final").setValue(o.toFixed(2)),this.getField("valor_pedido").setValue(i.toFixed(2)),this.getField("numero_de_item").setValue(t)}}},{key:"savePedido",value:function(){if(this.itemEnEdicion="",this.getField("observaciones").valid()&&this.getField("subtotal").valid()&&this.getField("valor_pedido").valid()&&this.getField("numero_de_item").valid()&&this.getField("clase_de_pedido").valid()&&this.getField("orden_de_compra").valid()){this.getField("boton_grabar").setDisabled(!0);var e={pedido:{nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue(),nombre:this.getField("nombre").getValue(),direccion:this.getField("direccion").getValue(),codigo_ciudad:this.getField("codigo_ciudad").getValue(),valor:this.getField("valor_pedido").getValue(),codigo_vendedor:this.getField("codigo_vendedor").getValue(),estado:"Z",observaciones:this.getField("observaciones").getValue(),vence:this.getField("fecha_vencimiento").getValue(),vigencia:this.getField("fecha_validez").getValue(),lista_precios:this.getField("precios").getValue(),codigo_facturacion:this.getField("codigo_facturacion").getValue(),fdespacho:this.getField("fecha_entrega").getValue(),sucursal_origen:this.getField("sucursal_origen").getValue(),sucursal_cartera:this.getField("sucursal_cartera").getValue(),fecha_entrega:this.getField("fecha_entrega").getValue(),direccion_entrega:this.getField("direccion").getValue(),clase_pedido:this.getField("clase_de_pedido").getValue(),orden_compra:this.getField("orden_de_compra").getValue(),tasa_cambio:this.getField("tasa_cambio").getValue()},items:this.nuevoArray};this.generalFormat.nombre_accion="520-permite_crear_un_pedido",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successSavePedido,error:this.error_,general:this.generalFormat})}}},{key:"successSavePedido",value:function(e){if(this.getField("boton_grabar").setDisabled(!1),200===e.estado_p){this.clearCampos(),this.clearCamposProducto(),this.getField("nit").setValue(""),this.getField("sede").setValue(""),this.getField("nombre").setValue(""),this.getField("observaciones").setValue("."),this.getField("subtotal").setValue(""),this.getField("valor_iva_final").setValue(""),this.getField("valor_pedido").setValue(""),this.getField("numero_de_item").setValue(""),this.getField("clase_de_pedido").setValue(""),this.getField("orden_de_compra").setValue("."),this.getField("orden_cotizacion").setValue(""),this.gridOptionsBodegasItem.rowData=[],this.getField("tabla_bodega").toggle(!1),this.nuevoArray=[];this.getField("direccion").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]);var t=new Date;this.setDiasVigencia(t,30),this.getField("confirmModalCustom").setTitleAndContent("Cotizaci\xf3n Mercanc\xedas",e.data.mensaje),this.getField("confirmModalCustom").setClickDialog(this.confirmCloseAlertModal),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!0)}}}]),i}(d.a.form);d.a.addController("cotizaciones",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).bpmn=o.getBpmnReader(),o.gridOptionsTasks=Object.assign({},o.gridOptions),o.gridOptionsTasks.onSelectionChanged=o.selectTable,o.gridOptionsFlow=Object.assign({},o.gridOptions),o.gridOptionsFlow.onSelectionChanged=o.selectTable,o.returnedTasks=[],o.returnedConditions=[],o.uploadFile=o.uploadFile.bind(Object(s.a)(o)),o.successProcesses=o.successProcesses.bind(Object(s.a)(o)),o.successTasks=o.successTasks.bind(Object(s.a)(o)),o.successConditions=o.successConditions.bind(Object(s.a)(o)),o.successFlow=o.successFlow.bind(Object(s.a)(o)),o.successEditSVG=o.successEditSVG.bind(Object(s.a)(o)),o.getTaskID=o.getTaskID.bind(Object(s.a)(o)),o.getConditionID=o.getConditionID.bind(Object(s.a)(o)),o.loadSVG=o.loadSVG.bind(Object(s.a)(o)),o.loadBPMN=o.loadBPMN.bind(Object(s.a)(o)),o.showModal=o.showModal.bind(Object(s.a)(o)),o.svg="",o.data="",o.processID=null,o.loadTable=o.loadTable.bind(Object(s.a)(o)),o.finishLoadTable=o.finishLoadTable.bind(Object(s.a)(o)),o.selectTable=o.selectTable.bind(Object(s.a)(o)),o.setButtonEdit=o.setButtonEdit.bind(Object(s.a)(o)),o.showFormModal=o.showFormModal.bind(Object(s.a)(o)),o.successSaveTask=o.successSaveTask.bind(Object(s.a)(o)),o.finishLoadFlow=o.finishLoadFlow.bind(Object(s.a)(o)),o.updateSelectProcesses=o.updateSelectProcesses.bind(Object(s.a)(o)),o.successLoadSelect=o.successLoadSelect.bind(Object(s.a)(o)),o._actividadData={},o.buttonDeleteFlow=o.buttonDeleteFlow.bind(Object(s.a)(o)),o.confirmDeleteFlow=o.confirmDeleteFlow.bind(Object(s.a)(o)),o.deleteFlow=o.deleteFlow.bind(Object(s.a)(o)),o.finishDeleteFlow=o.finishDeleteFlow.bind(Object(s.a)(o)),o.id_delete=0,o.showFlowModal=o.showFlowModal.bind(Object(s.a)(o)),o.finishFlow=o.finishFlow.bind(Object(s.a)(o)),o.finishSaveFlow=o.finishSaveFlow.bind(Object(s.a)(o)),o.showConditionModal=o.showConditionModal.bind(Object(s.a)(o)),o.gridOptionsPrecondiciones=Object.assign({},o.gridOptions),o.gridOptionsPrecondiciones.onSelectionChanged=o.selectTable,o.saveCondition=o.saveCondition.bind(Object(s.a)(o)),o.saveConditionFinal=o.saveConditionFinal.bind(Object(s.a)(o)),o.loadPreconditions=o.loadPreconditions.bind(Object(s.a)(o)),o.loadPreconditionsSuccess=o.loadPreconditionsSuccess.bind(Object(s.a)(o)),o.disableConditionsName=o.disableConditionsName.bind(Object(s.a)(o)),o.enableConditionsName=o.enableConditionsName.bind(Object(s.a)(o)),o.showPreconditionModal=o.showPreconditionModal.bind(Object(s.a)(o)),o.savePrecondition=o.savePrecondition.bind(Object(s.a)(o)),o.savePreconditionFinal=o.savePreconditionFinal.bind(Object(s.a)(o)),o.deletePreconditionTable=o.deletePreconditionTable.bind(Object(s.a)(o)),o.buttonDeletePrecondition=o.buttonDeletePrecondition.bind(Object(s.a)(o)),o.deletePreconditionTableFinal=o.deletePreconditionTableFinal.bind(Object(s.a)(o)),o.allPreConditions=[],o}return Object(o.a)(i,[{key:"selectTable",value:function(){}},{key:"updateSelectProcesses",value:function(){this.generalFormat.nombre_accion="get_todos_procesos";this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successLoadSelect,error:this.error_,general:this.generalFormat})}},{key:"successLoadSelect",value:function(e){if(200===e.estado_p){var t=[{value:" ",text:"Ninguno"}];e.data.forEach((function(e,i){t.push({value:e.id,text:"Nombre: "+e.nombre})})),this.getField("proceso_configuracion_id").setOptions(t)}}},{key:"successSaveTask",value:function(e){200===e.estado_p&&(this.getField("modal_edit").handleClose(),this.loadTable())}},{key:"initForm",value:function(){this.getField("editar_task").setSuccess(this.successSaveTask),this.getField("load_btn").setOnChange(this.loadBPMN),this.getField("svg_file").setOnChange(this.loadSVG),this.getField("button_load").setClick(this.uploadFile),this.getField("add_new_btn").setClick(this.showModal),this.getField("proceso_configuracion_id").setOnChange(this.loadTable),this.getField("add_flow").setClick(this.showFlowModal),this.getField("finish_flow").setClick(this.finishFlow),this.getField("add_condicion").setClick(this.showConditionModal),this.getField("condicion_btn").setClick(this.saveCondition),this.getField("condicion_add_precondicion").setClick(this.showPreconditionModal),this.getField("condicion_add_precondicion").setDisabled(!0),this.getField("precondicion_save").setClick(this.savePrecondition)}},{key:"showModal",value:function(){this.getField("modal_add").handleClickOpen()}},{key:"loadBPMN",value:function(e){if(void 0!==e.target){var t=e.target.files[0],i=new FileReader,a=this;i.onloadend=function(e){var t=e.target.result;a.data=t,a.bpmn.emptyData(),a.bpmn.addData(t)},t&&i.readAsText(t)}}},{key:"loadSVG",value:function(e){if(void 0!==e.target){var t=e.target.files[0],i=new FileReader,a=this;i.onloadend=function(e){var t=e.target.result;a.svg=t},t&&i.readAsText(t)}}},{key:"uploadFile",value:function(e){if(""!==this.data&&""!==this.svg){this.generalFormat.nombre_accion="servicio_crear_procesos_config";var t=this.bpmn.getPiscina(),i={nombre:t.name,descripcion:t.name,diagrama:"<svg />"};this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:i,success:this.successProcesses,error:this.error_,general:this.generalFormat})}else this.getField("fieldAlert").toggle(!0,"Por favor cargue los archivos solicitados","error")}},{key:"successProcesses",value:function(e){if(200===e.estado_p){this.processID=e.data[0].nid,this.generalFormat.nombre_accion="servicio_crear_actividades_config";for(var t=this.bpmn.allTasks,i=0;i<t.length;i++)t[i].proceso_configuracion_id=e.data[0].nid,t[i].formulario_id="";this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:{actividades:t},success:this.successTasks,error:this.error_,general:this.generalFormat})}}},{key:"successTasks",value:function(e){if(200===e.estado_p){this.returnedTasks=e.data,this.generalFormat.nombre_accion="servicio_crear_condiciones_config";for(var t=this.bpmn.allConditions,i=this.bpmn.allPreConditions,a=0;a<t.length;a++){for(var o=[],s=0;s<i.length;s++)i[s].condicion_id===t[a].id&&void 0!==i[s].nombre_campo&&null!==i[s].nombre_campo&&void 0!==i[s].valor_campo&&null!==i[s].valor_campo&&o.push(i[s]);t[a].precondiciones=o}this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:{condiciones:t},success:this.successConditions,error:this.error_,general:this.generalFormat})}}},{key:"successConditions",value:function(e){if(200===e.estado_p){this.returnedConditions=e.data;for(var t=this.bpmn.allConditions,i=0;i<t.length;i++)this.returnedConditions[i].new_id=this.returnedConditions[i].id,this.returnedConditions[i].id=t[i].id;this.generalFormat.nombre_accion="servicio_crear_flujos_config";for(var a=this.bpmn.allFlow,o=[],s=0;s<a.length;s++)o.push(a[s]),o[s].actividad_inicia_id=this.getTaskID(a[s].actividad_inicial_id),o[s].actividad_genera_id=this.getTaskID(a[s].actividad_genera_id),o[s].condicion_id=this.getConditionID(a[s].condicion_id);this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:{actividades:o},success:this.successFlow,error:this.error_,general:this.generalFormat})}}},{key:"successFlow",value:function(e){if(200===e.estado_p){for(var t=0;t<this.bpmn.allTasks.length;t++){var i='"Task_'+this.getTaskID(this.bpmn.allTasks[t].id)+'"';this.svg=this.bpmn.replaceAll(this.svg,'"'+this.bpmn.allTasks[t].id_internal+'"',i)}this.generalFormat.nombre_accion="procesos_configuracion-diagrama",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:{id:this.processID,diagrama:this.svg},success:this.successEditSVG,error:this.error_,general:this.generalFormat})}}},{key:"successEditSVG",value:function(e){200===e.estado_p&&(this.getField("modal_add").handleClose(),this.getField("fieldAlert").toggle(!0,e.data.mensaje,"success"),this.getField("load_btn").handleClickDelete(),this.getField("svg_file").handleClickDelete(),this.updateSelectProcesses(),this.loadTable())}},{key:"getTaskID",value:function(e){for(var t=0;t<this.returnedTasks.length;t++)if(""+this.returnedTasks[t].tabla===""+e.toString())return this.returnedTasks[t].id}},{key:"getConditionID",value:function(e){for(var t=0;t<this.returnedConditions.length;t++)if(this.returnedConditions[t].id===e)return this.returnedConditions[t].new_id}},{key:"loadTable",value:function(e){if(" "!==this.getField("proceso_configuracion_id").getValue()||""!==this.getField("proceso_configuracion_id").getValue()){this.generalFormat.nombre_accion="servicio_get_tasks";var t={value:null!==this.processID&&void 0!==this.processID?this.processID:this.getField("proceso_configuracion_id").getValue()};this.processID=null,this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.finishLoadTable,error:this.error_,general:this.generalFormat})}}},{key:"finishLoadTable",value:function(e){if(200===e.estado_p){var t=new Map;t.set("accion",{cellRenderer:this.setButtonEdit,field:"accion"}),this.gridOptionsTasks.rowData=e.data,this.getField("tabla_actividades").initData(this.gridOptionsTasks,t)}else this.getField("tabla_actividades").toggle(!1)}},{key:"setButtonEdit",value:function(e){var t=this,i=e.data.id,a=document.createElement("div"),o=document.createElement("input");return o.onclick=function(){t.showFormModal(e.data)},o.setAttribute("id","buttonEdit_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Editar"),a.appendChild(o),a}},{key:"buttonDeleteFlow",value:function(e){var t=this,i=e.data.id,a=document.createElement("div"),o=document.createElement("input");return o.onclick=function(){t.deleteFlow(i)},o.setAttribute("id","buttonDeleteFlow_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Eliminar"),a.appendChild(o),a}},{key:"showFormModal",value:function(e){this._actividadData=e,this.generalFormat.nombre_accion="servicio.get_flujo";var t={value:e.id};this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,showMessage:!1,success:this.finishLoadFlow,error:this.error_,general:this.generalFormat}),this.getField("id").setValue(e.id)}},{key:"finishLoadFlow",value:function(e){if(console.log(e),200===e.estado_p){var t=new Map;t.set("accion",{cellRenderer:this.buttonDeleteFlow,field:"accion"}),this.gridOptionsFlow.rowData=e.data,this.getField("tabla_flujo").initData(this.gridOptionsFlow,t),this.getField("modal_edit").handleClickOpen()}else this.getField("tabla_flujo").toggle(!1),this.getField("modal_edit").handleClickOpen()}},{key:"deleteFlow",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteFlow),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteFlow",value:function(){this.getField("confirmModalCustom").toggle(!1),this.generalFormat.nombre_accion="eliminar_flujo";var e={id:this.id_delete};this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.finishDeleteFlow,error:this.error_,general:this.generalFormat})}},{key:"finishDeleteFlow",value:function(e){200===e.estado_p&&this.showFormModal(this._actividadData)}},{key:"finishFlow",value:function(){this.generalFormat.nombre_accion="servicio_crear_flujos_config";var e=this.getField("actividad_genera_id").getValue(),t=this.getField("actividad_inicia_id").getValue();if(""!==e&&""!==t){var i={actividades:[{actividad_inicia_id:this.getField("actividad_inicia_id").getValue(),actividad_genera_id:this.getField("actividad_genera_id").getValue(),orden:1}]};""!==this.getField("condicion_id").getValue()&&(i.actividades[0].condicion_id=this.getField("condicion_id").getValue()),console.log(i),this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:i,success:this.finishSaveFlow,error:this.error_,general:this.generalFormat})}else this.getField("fieldAlert").toggle(!0,"Por favor llene las actividades","warning")}},{key:"finishSaveFlow",value:function(e){200===e.estado_p&&(this.showFormModal(this._actividadData),this.getField("modal_flow").handleClose())}},{key:"showFlowModal",value:function(e){this.getField("actividad_inicia_id").setValue(this._actividadData.id),this.getField("flow_actividad_inicia").setValue(this._actividadData.nombre),this.getField("flow_actividad_inicia_nombre").setValue(this._actividadData.descripcion),this.getField("modal_flow").handleClickOpen()}},{key:"disableConditionsName",value:function(){this.getField("condicion_nombre").setDisabled(!0),this.getField("condicion_btn").setDisabled(!0)}},{key:"enableConditionsName",value:function(){this.getField("condicion_nombre").setDisabled(!1),this.getField("condicion_btn").setDisabled(!1)}},{key:"showConditionModal",value:function(){if(""===this.getField("condicion_id").getValue())this.getField("condicion_add_precondicion").setDisabled(!0),this.enableConditionsName();else{var e=this.getField("flow_condicion").getValue();this.getField("condicion_nombre").setValue(e),this.getField("condicion_add_precondicion").setDisabled(!1),this.disableConditionsName(),this.loadPreconditions()}this.getField("modal_condiciones").handleClickOpen()}},{key:"saveCondition",value:function(){var e=this.getField("condicion_nombre").getValue();if(""!==e){var t={condiciones:[{nombre:e,precondiciones:[]}]};this.generalFormat.nombre_accion="servicio_crear_condiciones_config",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.saveConditionFinal,error:this.error_,general:this.generalFormat})}else this.getField("fieldAlert").toggle(!0,"Por favor llene el nombre","warning")}},{key:"saveConditionFinal",value:function(e){200===e.estado_p&&(this.getField("condicion_id").setValue(e.data[0].id),this.getField("flow_condicion").setValue(e.data[0].nombre),this.loadPreconditions(e.data[0].id),this.getField("condicion_add_precondicion").setDisabled(!1),this.disableConditionsName())}},{key:"loadPreconditions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={value:null===e?this.getField("condicion_id").getValue():e};this.generalFormat.nombre_accion="servicio.get_precondiciones_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,showMessage:!1,success:this.loadPreconditionsSuccess,error:this.error_,general:this.generalFormat})}},{key:"loadPreconditionsSuccess",value:function(e){if(200===e.estado_p){var t=new Map;t.set("accion",{cellRenderer:this.buttonDeletePrecondition,field:"accion"}),this.gridOptionsPrecondiciones.rowData=e.data,this.getField("tabla_precondiciones").initData(this.gridOptionsPrecondiciones,t)}else this.getField("tabla_precondiciones").toggle(!1)}},{key:"showPreconditionModal",value:function(){this.getField("modal_precondiciones").handleClickOpen()}},{key:"buttonDeletePrecondition",value:function(e){var t=this,i=e.data.id,a=document.createElement("div"),o=document.createElement("input");return o.onclick=function(){t.deletePreconditionTable(i)},o.setAttribute("id","buttonDeleteFlow_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Eliminar"),a.appendChild(o),a}},{key:"deletePreconditionTable",value:function(e){var t={id:e};this.generalFormat.nombre_accion="eliminar-precondiciones",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.deletePreconditionTableFinal,error:this.error_,general:this.generalFormat})}},{key:"deletePreconditionTableFinal",value:function(e){200===e.estado_p&&this.loadPreconditions()}},{key:"savePrecondition",value:function(){var e=this.getField("precondicion_nombre").getValue(),t=this.getField("precondicion_valor").getValue();if(""!==e&&""!==t){var i={condicion_id:this.getField("condicion_id").getValue(),precondiciones:[{nombre_campo:e,valor_campo:t}]};this.generalFormat.nombre_accion="reemplaza-precondiciones-de-condicion",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:i,success:this.savePreconditionFinal,error:this.error_,general:this.generalFormat})}else this.getField("fieldAlert").toggle(!0,"Por favor llene los campos solicitados","warning")}},{key:"savePreconditionFinal",value:function(e){200===e.estado_p&&(this.loadPreconditions(),this.getField("modal_precondiciones").handleClose())}}]),i}(d.a.form);d.a.addController("creacion_proc_din",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.onClickNew=o.handlerClickNew.bind(Object(s.a)(o)),o.successLote=o.successLote.bind(Object(s.a)(o)),o.verificarPuntos=o.verificarPuntos.bind(Object(s.a)(o)),o.gridOptionsCrear=Object.assign({},o.gridOptions),o.cantidaMaximaPuntos=0,o.mostrarPuntos=!1,o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o.limpiarCampos2=o.limpiarCampos2.bind(Object(s.a)(o)),o.validarPuntos=o.validarPuntos.bind(Object(s.a)(o)),o.puntosValidos=!0,o.cantidadProducir=0,o.validarPuntos2=o.validarPuntos2.bind(Object(s.a)(o)),o.onClickSave=o.handlerClickSave.bind(Object(s.a)(o)),o.validarFechas=o.validarFechas.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Crear ficha @version sp-1.01.0011, @author Juan David Nieto"),this.getField("tipo_ficha").setOnChange(this.limpiarCampos),this.getField("codigo_producto_formulacion").setOnChange(this.limpiarCampos2),this.getField("puntos").setKeyUp(this.validarPuntos),this.getField("cantidad_a_producir").setKeyUp(this.validarPuntos2)}},{key:"handlerClickNew",value:function(e){var t=new Date,i=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,o=t.getDate()<10?"0"+t.getDate():t.getDate(),s={codigo:"0001",fecha:t=i+"-"+a+"-"+o};this.generalFormat.nombre_accion="252-Busca_los_consecutivos_por_codigo_y_la_fecha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:s,success:this.successLote,error:this.error_,general:this.generalFormat})}},{key:"successLote",value:function(e){var t=this;if(200===e.estado_p){this.toggleFields(!1),this.toggleButton(!1),this.buttonsActions.map((function(e){return void 0!==t.buttons.get(e).ref.current&&null!==t.buttons.get(e).ref.current&&t.buttons.get(e).ref.current.setVisible(!0),null})),this.clearFields(),this.getField("tablaPuntosCrear").toggle(!1);var i=e.model;this.getField("lote").setValue(i[0].numero),this.getField("articulo_id").setCustomSuccess(this.verificarPuntos)}}},{key:"verificarPuntos",value:function(e){e.length>0?(this.getField("tipo_ficha").setValue("N"),this.gridOptionsCrear.rowData=e,this.getField("puntos").setVisible(!0),this.getField("puntos").setValue(e[0].puntos),this.cantidaMaximaPuntos=e.puntos,this.getField("tablaPuntosCrear").initData(this.gridOptionsCrear),this.gridOptionsCrear.api.selectIndex(0,!0,!0),this.mostrarPuntos=!0):(this.getField("puntos").setVisible(!1),this.getField("tablaPuntosCrear").toggle(!1),this.mostrarPuntos=!1)}},{key:"limpiarCampos",value:function(){"N"===this.getField("tipo_ficha").getValue()?(this.getField("puntos").setValue(0),this.getField("puntos").setVisible(!1),this.getField("tablaPuntosCrear").toggle(!1)):"S"===this.getField("tipo_ficha").getValue()&&this.mostrarPuntos&&(this.getField("puntos").setValue(0),this.getField("puntos").setVisible(!0),this.getField("tablaPuntosCrear").toggle(!0))}},{key:"limpiarCampos2",value:function(){this.getField("puntos").setVisible(!1),this.getField("tablaPuntosCrear").toggle(!1),this.getField("nombre_producto_formulacion").setValue("")}},{key:"validarPuntos",value:function(){this.getField("puntos").valid()&&(parseInt(this.getField("puntos").getValue())>this.cantidaMaximaPuntos||this.getField("puntos").getValue()<0?(this.getField("puntos").setError(!0,"* Este Valor no puede ser mayor a la cantidad de puntos ni menor a cero"),this.puntosValidos=!1):(this.puntosValidos=!0,this.getField("puntos").setError(!1,""),""!==this.getField("cantidad_a_producir").getValue()&&this.getField("cantidad_a_producir").getValue()&&(""!==this.getField("puntos").getValue()&&this.getField("puntos").getValue()||""!==this.getField("puntos").getValue()&&this.getField("puntos").getValue())&&this.getField("cantidad_a_producir").setValue(this.cantidadProducir-this.getField("puntos").getValue())))}},{key:"validarPuntos2",value:function(){this.puntosValidos=!0,""!==this.getField("cantidad_a_producir").getValue()?this.cantidadProducir=this.getField("cantidad_a_producir").getValue():this.cantidadProducir=0,this.getField("puntos").setValue(0)}},{key:"handlerClickSave",value:function(){this.getField("fecha").setError(!1,"");var e="",t=!1;if(""!==this.getField("fecha")&&(this.getField("fecha")&&(e=this.getField("fecha").getValue()),e.split("-"),this.validarFechas(this.getField("fecha").getValue(),this.getField("fecha").getValue(),2)?(t=!0,this.getField("fecha").setError(!1,"")):(t=!1,this.getField("fecha").setError(!0,"* Esta fecha debe ser mayor o igual a la fecha actual"))),!0===t)if(this.getField("cantidad_a_producir").getValue()>0){var i={descripcion:this.getField("descripcion").getValue(),proceso_configuracion_id:this.getField("proceso_configuracion_id").getValue(),cantidad_a_producir:this.getField("cantidad_a_producir").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),formulacion_id:this.getField("formulacion_id").getValue(),tipo_ficha:this.getField("tipo_ficha").getValue(),puntos:this.getField("puntos").getValue()};this.generalFormat.nombre_accion="252-Permite_crear_una_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:i,success:this.successSave,error:this.error_,general:this.generalFormat})}else this.getField("fieldAlert").toggle(!0,"La cantidad a producir debe ser mayor a cero","error");else this.getField("fieldAlert").toggle(!0,"Elegir una fecha que sea mayor o igual a la fecha actual","error")}},{key:"validarFechas",value:function(e,t){var i=parseInt(e.split("-")[2]),a=parseInt(e.split("-")[1]),o=parseInt(e.split("-")[0]),s=!0;if(i>=parseInt(e.split("-")[2])){var r=new Date,n=r.getFullYear(),d=r.getMonth()+1,l=r.getDate();s=o>n||o===n&&(a>d||a===d&&i>=l)}return s}}]),i}(d.a.form);d.a.addController("produccionfichas",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.customSuccess=o.customSuccess.bind(Object(s.a)(o)),o.getNSedes=o.getNSedes.bind(Object(s.a)(o)),o.nextClickCrear=o.nextClickCrear.bind(Object(s.a)(o)),o.onBlur=o.onBlur.bind(Object(s.a)(o)),o.onSuccessSave=o.onSuccessSave.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("nit_proveedor").setCustomSuccess(this.getNSedes),this.getField("btn_siguiente").setClick(this.nextClickCrear),this.getField("nom1").setOnBlur(this.onBlur),this.getField("nom2").setOnBlur(this.onBlur),this.getField("ape1").setOnBlur(this.onBlur),this.getField("ape2").setOnBlur(this.onBlur),this.getField("btn_guardar").setSuccess(this.onSuccessSave)}},{key:"getNSedes",value:function(){if(""!==this.getField("nit_proveedor").getValue()){this.getField("verificacion").setValue("".calcularDigitoVerificacion(this.getField("nit_proveedor").getValue()));var e=this.getField("nit_proveedor").getValue();this.service.send(this.getConstant().searchFormat().format(e,"nit_proveedor","enter_servicio",this.formId),"GET",void 0,this.customSuccess,this.error)}}},{key:"customSuccess",value:function(e){200!==e.estado_p?this.getField("sede_modal").setValue(1):this.getField("sede_modal").setValue(parseInt(this.getField("sede_modal").getValue())+1)}},{key:"onSuccessSave",value:function(){this.clearFields(),this.getField("modal_crear_terceros").handleClickOpen(),this.initForm()}},{key:"onBlur",value:function(e){this.getField("nombre").setValue(this.getField("nom1").getValue()+" "+this.getField("nom2").getValue()+" "+this.getField("ape1").getValue()+" "+this.getField("ape2").getValue())}},{key:"nextClickCrear",value:function(){this.getField("nit_proveedor").valid()&this.getField("sede_modal").valid()&this.getField("verificacion").valid()&&(this.getField("modal_crear_terceros").handleClose(),this.getField("tipo_documento_id").setValue(this.getField("tipo_documento").getValue()),this.getField("nit").setValue(this.getField("nit_proveedor").getValue()),this.getField("sede").setValue(this.getField("sede_modal").getValue()),this.getField("verifica").setValue(this.getField("verificacion").getValue()),this.getField("btn_guardar").setDisabled(!1))}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.setCodigoAlterno=o.setCodigoAlterno.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Cuentas Puc, @version 1.01.0013,  @author: Mario A. Sep\xfalveda'"),this.getField("codigo_cuenta").setOnChange(this.setCodigoAlterno)}},{key:"setCodigoAlterno",value:function(){var e=this.getField("codigo_cuenta").getValue();this.getField("codigo_alterno").setValue(e),this.getField("codigo_cuenta_texto").setValue(e)}}]),i}(d.a.form);d.a.addController("c",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.keyUpDocument=o.keyUpDocument.bind(Object(s.a)(o)),o.changeId=o.changeId.bind(Object(s.a)(o)),o.onSuccessCharge=o.onSuccessCharge.bind(Object(s.a)(o)),o.error=o.error.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("nit_proveedor").setKeyUp(this.keyUpDocument),this.getField("nit_proveedor").setSelectionChanged=this.changeId,this.buttons.get("btn_change").ref.current.setSuccess(this.onSuccessSave.bind(this))}},{key:"keyUpDocument",value:function(e){13===(e.keyCode?e.keyCode:e.which)&&this.getField("verificacion").setValue("".calcularDigitoVerificacion(this.getField("nit_proveedor").getValue()))}},{key:"changeId",value:function(e){var t=this.getField("nit").getValue(),i=this.getField("sede").getValue();this.getField("nit").send(this.getField("nit").searchFormat.format(t+"/"+i,"sede","servicio",this.getFormId()),"GET",void 0,this.onSuccessCharge,this.error)}},{key:"onSuccessCharge",value:function(e){200===e.estado_p&&e.model.length>0&&(this.data=e.model[0],this.loadDataExternalForm(),this.getField("nit_proveedor").valid()&this.getField("verificacion").valid()&&this.getField("modal_datos_legales").handleClose())}},{key:"onSuccessSave",value:function(){this.getField("modal_datos_legales").handleClickOpen(),this.initForm()}},{key:"error",value:function(){}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).data=null,o.precios=0,o.initForm=o.initForm.bind(Object(s.a)(o)),o.chargueTipo=o.chargueTipo.bind(Object(s.a)(o)),o.enableButtons=o.enableButtons.bind(Object(s.a)(o)),o.enableBotonesModificar=o.enableBotonesModificar.bind(Object(s.a)(o)),o.enableBotonesGrabar=o.enableBotonesGrabar.bind(Object(s.a)(o)),o.clearField=o.clearField.bind(Object(s.a)(o)),o.handleClickButtonLoadAlias=o.handleClickButtonLoadAlias.bind(Object(s.a)(o)),o.onSuccessClick=o.onSuccessClick.bind(Object(s.a)(o)),o.loadInformacionAlias=o.loadInformacionAlias.bind(Object(s.a)(o)),o.changeListaPrecios=o.changeListaPrecios.bind(Object(s.a)(o)),o.sendData=o.sendData.bind(Object(s.a)(o)),o.sendMethodPOST=o.sendMethodPOST.bind(Object(s.a)(o)),o.sendMethodPUT=o.sendMethodPUT.bind(Object(s.a)(o)),o.emptyFunction=o.emptyFunction.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){var e=this;this.enableBotonesGrabar(),this.getField("id").setOnChange(this.enableButtons),this.getField("codigo_alias").setOnChange(this.clearField),this.getField("precios").setOnChange((function(t){return e.changeListaPrecios(t)})),this.getField("tipo").setOnChange(this.chargueTipo),this.getField("precio_v").setDisabled(!0),this.getField("precio_p").setDisabled(!0),this.getField("btn_grabarPrecio").setSuccess(this.handleClickButtonLoadAlias),this.getField("btn_modificarGrabarPrecio").setSuccess(this.handleClickButtonLoadAlias),this.getField("btn_grabar").setClick(this.sendMethodPOST),this.getField("btn_modificar").setClick(this.sendMethodPUT)}},{key:"enableButtons",value:function(){this.getField("id").getValue()>0?(this.enableBotonesModificar(),this.getField("precios").setValue(1),this.getField("articulo_id").setCustomSuccess(this.loadInformacionAlias)):this.enableBotonesGrabar()}},{key:"changeListaPrecios",value:function(e){this.precios=parseInt(this.getField("precios").getValue());var t=this.data;(void 0!==e.target&&this.getField("precios").setState({value:e.target.value}),200===t.estado_p&&t.model.length>0)&&(this.getField("tipo").setValue(t.model[0]["tipo"+this.precios]),"V"===this.getField("tipo").getValue()?(this.getField("precio_v").setValue(t.model[0]["precio"+this.precios]),this.getField("precio_p").setValue("")):(this.getField("precio_v").setValue(""),this.getField("precio_p").setValue(t.model[0]["precio"+this.precios])))}},{key:"clearField",value:function(){this.getField("id").setValue(""),this.getField("precio_base").setValue(""),this.getField("estadoactivo_id").setValue(" "),this.getField("precios").setValue(" "),this.getField("tipo").setValue(""),this.getField("precio_v").setDisabled(!0),this.getField("precio_p").setDisabled(!0),this.getField("precio_v").setValue(""),this.getField("precio_p").setValue(""),this.getField("tableShowData").toggle(!1)}},{key:"enableBotonesModificar",value:function(){this.getField("btn_modificarGrabarPrecio").setDisabled(!1),this.getField("btn_grabarPrecio").setDisabled(!0),this.getField("btn_modificar").setDisabled(!1),this.getField("btn_grabar").setDisabled(!0)}},{key:"enableBotonesGrabar",value:function(){this.getField("btn_modificarGrabarPrecio").setDisabled(!0),this.getField("btn_grabarPrecio").setDisabled(!1),this.getField("btn_modificar").setDisabled(!0),this.getField("btn_grabar").setDisabled(!1)}},{key:"chargueTipo",value:function(){"V"===this.getField("tipo").getValue()?(this.getField("precio_v").setDisabled(!1),this.getField("precio_p").setDisabled(!0)):(this.getField("precio_v").setDisabled(!0),this.getField("precio_p").setDisabled(!1))}},{key:"handleClickButtonLoadAlias",value:function(){var e=this.getField("articulo_id").getValue();this.getField("btn_grabarPrecio").send(this.getField("btn_grabarPrecio").searchFormat.format(e,"articulo_id","servicio",this.getFormId()),"GET",void 0,this.onSuccessClick,this.error)}},{key:"loadInformacionAlias",value:function(){var e=this.getField("articulo_id").getValue();this.getField("articulo_id").send(this.getField("articulo_id").searchFormat.format(e,"articulo_id","servicio",this.getFormId()),"GET",void 0,this.onSuccessClick,this.error)}},{key:"onSuccessClick",value:function(e){this.data=e,200===e.estado_p&&e.model.length>0&&(e.model.length>0&&(this.gridOptions.onSelectionChanged=this.emptyFunction,this.gridOptions.rowData=e.model,this.getField("tableShowData").initData(this.gridOptions)),this.changeListaPrecios(),this.enableBotonesModificar())}},{key:"emptyFunction",value:function(){}},{key:"sendMethodPOST",value:function(){var e=this.getField("articulo_id").valid()&this.getField("codigo_alias").valid()&this.getField("alias").valid()&this.getField("precio_base").valid()&this.getField("estadoactivo_id").valid()&this.getField("precios").valid()&this.getField("tipo").valid();this.sendData(e,"btn_grabar","POST")}},{key:"sendMethodPUT",value:function(){var e=this.getField("id").valid()&this.getField("articulo_id").valid()&this.getField("codigo_alias").valid()&this.getField("alias").valid()&this.getField("precio_base").valid()&this.getField("estadoactivo_id").valid()&this.getField("precios").valid()&this.getField("tipo").valid();this.sendData(e,"btn_modificar","PUT")}},{key:"sendData",value:function(e,t,i){if(e){var a=!1,o=0;if("V"===this.getField("tipo").getValue()?this.getField("precio_v").valid()&&(o=parseFloat(this.getField("precio_v").getValue()),a=!0):this.getField("precio_p").valid()&&(o=parseFloat(this.getField("precio_p").getValue()),a=!0),a){var s={id_formulario:this.formId,accion:"servicio",campo:t,id:this.getField("id").getValue(),articulo_id:this.getField("articulo_id").getValue(),codigo_alias:this.getField("codigo_alias").getValue(),alias:this.getField("alias").getValue(),precio_base:this.getField("precio_base").getValue(),estadoactivo_id:this.getField("estadoactivo_id").getValue()};s["tipo"+this.precios]=this.getField("tipo").getValue(),s["precio"+this.precios]=o,this.service.send(this.getConstant().formSave(),i,s,this.handleClickButtonLoadAlias,this.error)}}}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).onSelectionChanged=function(){var e=o.gridOptions.api.getSelectedRows(),t="articulo_id,articulo_id;nombre,nombre;alias,alias;precio_base,precio_base;tipo"+o.precios+",tipo;precio"+o.precios+",precio_oculto";null!==t&&void 0!==t&&t.split(";").map((function(t){var i=t.split(",");return o.setValueField(i[1],e[0][i[0]])})),o.getField("btnModificar").setVisible(!0),o.getField("descuentos").setVisible(!1),o.getField("precio").setVisible(!1),o.getField("descuento").setVisible(!1),o.getField("btnAceptar").setVisible(!1),o.getField("btnCancelar2").setVisible(!1)},o.initForm=o.initForm.bind(Object(s.a)(o)),o.searchLista=o.searchLista.bind(Object(s.a)(o)),o.successLista=o.successLista.bind(Object(s.a)(o)),o.limpiarForm=o.limpiarForm.bind(Object(s.a)(o)),o.precios=0,o.successActualizar=o.successActualizar.bind(Object(s.a)(o)),o.modifyData=o.modifyData.bind(Object(s.a)(o)),o.options=o.options.bind(Object(s.a)(o)),o.cancelData2=o.cancelData2.bind(Object(s.a)(o)),o.sendData=o.sendData.bind(Object(s.a)(o)),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"setValueField",value:function(e,t){var i=this.getField(e);i&&i.setValue(t)}},{key:"initForm",value:function(){this.getField("btnConsultar").setClick(this.searchLista),this.getField("btnModificar").setClick(this.modifyData),this.getField("btnAceptar").setClick(this.sendData),this.getField("descuentos").setOnChange(this.options),this.getField("nit").setOnChange(this.limpiarForm),this.getField("btnCancelar2").setClick(this.cancelData2),this.gridOptions.onSelectionChanged=this.onSelectionChanged,this.limpiarForm()}},{key:"cancelData2",value:function(){this.limpiarForm()}},{key:"options",value:function(){"P"===this.getField("descuentos").getValue()?(this.getField("precio").setDisabled(!1),this.getField("tipo").setValue("V"),this.getField("descuento").setDisabled(!0)):(this.getField("precio").setDisabled(!0),this.getField("tipo").setValue("P"),this.getField("descuento").setDisabled(!1))}},{key:"modifyData",value:function(){this.getField("descuento").setValue(0),this.getField("precio").setValue(0),"P"===this.getField("tipo").getValue()?(this.getField("descuentos").setValue("D"),this.getField("descuento").setValue(this.getField("precio_oculto").getValue())):(this.getField("descuentos").setValue("P"),this.getField("precio").setValue(this.getField("precio_oculto").getValue())),this.getField("descuentos").setVisible(!0),this.getField("precio").setVisible(!0),this.getField("descuento").setVisible(!0),this.getField("btnAceptar").setVisible(!0),this.getField("btnCancelar2").setVisible(!0)}},{key:"searchLista",value:function(){this.getField("precios").valid()&&(this.precios=parseInt(this.getField("precios").getValue().replace("PRECIO","")),this.service.send(this.getConstant().searchFormat().format(this.precios,"btnConsultar","servicio",this.formId),"GET",void 0,this.successLista,this.error))}},{key:"sendData",value:function(){if(this.getField("alias").valid()&this.getField("articulo_id").valid()){var e=!1,t=0;if("P"===this.getField("tipo").getValue()?this.getField("descuento").valid()&&(t=parseFloat(this.getField("descuento").getValue()),e=!0):this.getField("precio").valid()&&(t=parseFloat(this.getField("precio").getValue()),e=!0),e){var i={id_formulario:this.formId,accion:"servicio",campo:"btnAceptar",articulo_id:this.getField("articulo_id").getValue(),alias:this.getField("alias").getValue()};i["precio"+this.precios]=t,i["tipo"+this.precios]=this.getField("tipo").getValue(),this.service.send(this.getConstant().formSave(),"PUT",i,this.successActualizar,this.error_)}}}},{key:"successActualizar",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.limpiarForm(),this.searchLista())}},{key:"limpiarForm",value:function(){this.getField("tablaLista").toggle(!1),this.getField("btnModificar").setVisible(!1),this.getField("descuentos").setVisible(!1),this.getField("precio").setVisible(!1),this.getField("descuento").setVisible(!1),this.getField("btnAceptar").setVisible(!1),this.getField("btnCancelar2").setVisible(!1)}},{key:"successLista",value:function(e){200===e.estado_p?(this.gridOptions.rowData=e.model,this.getField("tablaLista").initData(this.gridOptions)):this.getField("tablaLista").toggle(!1)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.succesDatosTablaDevElement=o.succesDatosTablaDevElement.bind(Object(s.a)(o)),o.setButtonAbastecer=o.setButtonAbastecer.bind(Object(s.a)(o)),o.setChangeButtonAbastecer=o.setChangeButtonAbastecer.bind(Object(s.a)(o)),o.succesButtonAbastecer=o.succesButtonAbastecer.bind(Object(s.a)(o)),o.uploadTableDevElement=o.uploadTableDevElement.bind(Object(s.a)(o)),o.grabarDevElement=o.grabarDevElement.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="448-Servicio_traer_datos_fichas_dev_elementos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat});var t={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="448-Servicio_traer-items_tabla_dev_elementos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.succesDatosTablaDevElement,error:this.error_,general:this.generalFormat}),this.getField("btnGrabarDevElement").setClick(this.grabarDevElement)}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaDevElement").setVisible(!0),this.getField("listaDevElement").setItemsFichas(e.model)):this.getField("listaDevElement").setVisible(!1)}},{key:"succesDatosTablaDevElement",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptions.rowData=[],this.getField("tablaDevElement").initData(this.gridOptions),this.getField("tablaDevElement").toggle(!0);var t=new Map;t.set("accion",{cellRenderer:this.setButtonAbastecer,field:"Acci\xf3n"}),this.gridOptions.rowData=e.model,this.getField("tablaDevElement").initData(this.gridOptions,t)}else this.getField("tablaDevElement").toggle(!1)}},{key:"setButtonAbastecer",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.setChangeButtonAbastecer(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Abastecer"),i}},{key:"setChangeButtonAbastecer",value:function(e){var t={id:e.id};this.generalFormat.nombre_accion="448-Servicio_abastecer_boton_tabla_dev_elementos",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.succesButtonAbastecer,error:this.error_,general:this.generalFormat})}},{key:"succesButtonAbastecer",value:function(e){200===e.estado_p&&this.uploadTableDevElement()}},{key:"uploadTableDevElement",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="448-Servicio_traer-items_tabla_dev_elementos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesDatosTablaDevElement,error:this.error_,general:this.generalFormat})}},{key:"grabarDevElement",value:function(){var e={proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id,produccion_fichas_id:this.props.data.id_ficha};this.generalFormat.nombre_accion="448-Servicio_grabar_devolucion_elementos_envasado_final",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);t.default=l,d.a.addController("devElementos",l)},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.traerClientes=o.traerClientes.bind(Object(s.a)(o)),o.successTraerClientes=o.successTraerClientes.bind(Object(s.a)(o)),o.traerPeriodosMeses=o.traerPeriodosMeses.bind(Object(s.a)(o)),o.successTraerPeriodosMeses=o.successTraerPeriodosMeses.bind(Object(s.a)(o)),o.consultar_devoluciones=o.consultar_devoluciones.bind(Object(s.a)(o)),o.successConsultarDevoluciones=o.successConsultarDevoluciones.bind(Object(s.a)(o)),o.gridOptionsTablaDevoluciones=Object.assign({},o.gridOptions),o.setButtonCargarpdf=o.setButtonCargarpdf.bind(Object(s.a)(o)),o.cargarPdf=o.cargarPdf.bind(Object(s.a)(o)),o.successCargarPdf=o.successCargarPdf.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.traerClientes(),this.traerPeriodosMeses(),this.getField("consultar_devoluciones").setClick(this.consultar_devoluciones)}},{key:"traerClientes",value:function(){this.generalFormat.nombre_accion="483_retorna_clientes_por_defecto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successTraerClientes,error:this.error_,general:this.generalFormat})}},{key:"successTraerClientes",value:function(e){console.log("traerCliente",e),200===e.estado_p&&(this.getField("nit").setValue(e.data[0].nit),this.getField("sede_cliente").setValue(e.data[0].sede))}},{key:"traerPeriodosMeses",value:function(){var e={anio:this.getField("anio").getValue(),mes:this.getField("mes").getValue(),numero_meses_devolver:this.getField("numero_meses_devolver").getValue()};this.generalFormat.nombre_accion="483_traer_periodos_en_meses",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerPeriodosMeses,error:this.error_,general:this.generalFormat})}},{key:"successTraerPeriodosMeses",value:function(e){if(e.data.length>0){var t=[{text:"Ninguno",value:"",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.fecha,i.text=e.fecha,i.campos_cambian={mes:e.mes,anio:e.a\u00f1o},t.push(i)})),this.getField("periodo").setOptions(t),""!==this.fecha&&this.getField("periodo").setValue(this.fecha)}}},{key:"consultar_devoluciones",value:function(){var e={nit:this.getField("nit").getValue(),sede:this.getField("sede_cliente").getValue(),anio:this.getField("anio").getValue(),mes:this.getField("mes").getValue()};this.generalFormat.nombre_accion="483_retorna_facturas_por_cliente_nit_sede",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successConsultarDevoluciones,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successConsultarDevoluciones",value:function(e){if(200===e.estado_p){var t=new Map;this.gridOptionsTablaDevoluciones.rowData=e.model,t.set(7,{cellRenderer:this.setButtonCargarpdf,field:"Accion",width:100}),this.getField("tb_devoluciones").initData(this.gridOptionsTablaDevoluciones,t)}}},{key:"setButtonCargarpdf",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.cargarPdf(e)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Pdf"),i}},{key:"cargarPdf",value:function(e){if(this.getField("numero_devolucion").setValue(e.data.numero),this.getField("nit").setValue(e.data.nit),this.getField("sede_cliente").setValue(e.data.sede),this.getField("codigo_sucursal").setValue(e.data.codigo_sucursal),this.getField("nit").valid()){var t={numero_devolucion:this.getField("numero_devolucion").getValue(),nit:this.getField("nit").getValue(),sede:this.getField("sede_cliente").getValue(),sucursal:this.getField("codigo_sucursal").getValue()};this.generalFormat.nombre_accion="483_dfacturac-fact_dev_impr_nro_nit_sede_sucursal",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successCargarPdf,error:this.error_,general:this.generalFormat})}}},{key:"successCargarPdf",value:function(e){var t=e.data[0].url;this.getField("descargarPdf").setValue(t),this.getField("descargarPdf").openFile(!0)}}]),i}(d.a.form);d.a.addController("DevVentas",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successItemFichas=o.successItemFichas.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.id_ficha=0,o.grabarTodo=o.grabarTodo.bind(Object(s.a)(o)),o.successCerrarForm=o.successCerrarForm.bind(Object(s.a)(o)),o.terminarProceso=o.terminarProceso.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.service.send(this.getConstant().searchFormat().format(this.props.data.id_ficha,"listaDevolver","servicio",this.formId),"GET",void 0,this.successItemFichas,this.error_),this.getField("btnDevolver").setClick(this.grabarTodo)}},{key:"successItemFichas",value:function(e){200===e.estado_p&&(this.getField("listaDevolver").setItemsFichas(e.model),this.id_ficha=e.model[0].id,this.service.send(this.getConstant().searchFormat().format(this.id_ficha,"tablaDevolver","servicio",this.formId),"GET",void 0,this.successTablaItemFichas,this.error_))}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p){var t=new Map;this.gridOptions.rowData=e.model,t.set("cantidad",{cellStyle:{textAlign:"right"},field:"cantidad"}),this.getField("tablaDevolver").initData(this.gridOptions,t)}else this.getField("tablaDevolver").toggle(!1)}},{key:"grabarTodo",value:function(){var e={accion:"servicio",campo:"btnDevolver",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"PUT",e,this.successCerrarForm,this.error_)}},{key:"successCerrarForm",value:function(e){200===e.estado_p&&this.terminarProceso()}},{key:"terminarProceso",value:function(){var e={accion:"f9_servicio",campo:"btnDevolver",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"PUT",e,this.successCloseEstage,this.error_)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTraerDatosFicha=o.successTraerDatosFicha.bind(Object(s.a)(o)),o.devolverReformulacion=o.devolverReformulacion.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_diferencia_inventario_traer_datos_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerDatosFicha,error:this.error_,general:this.generalFormat}),this.getField("btnDevolveraRefor").setClick(this.devolverReformulacion)}},{key:"successTraerDatosFicha",value:function(e){var t=[];200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("lista_datos_ficha").setVisible(!0),t.push(e.data[0]),this.getField("lista_datos_ficha").setItemsFichas(t)):this.getField("lista_datos_ficha").setVisible(!1)}},{key:"devolverReformulacion",value:function(){var e={proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id,produccion_fichas_id:this.props.data.id_ficha,observaciones_cancelacion_alistamiento:this.getField("observaciones_cancelacion_alistamiento").getValue()};this.generalFormat.nombre_accion="servicio_aprobacion_cancelac_devo_alistamien",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);d.a.addController("dif_inventario",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.consultarDatos=o.consultarDatos.bind(Object(s.a)(o)),o.successConsultarDatos=o.successConsultarDatos.bind(Object(s.a)(o)),o.gridOptionsTablaConsulta=Object.assign({},o.gridOptions),o.setButtonSeleccionar=o.setButtonSeleccionar.bind(Object(s.a)(o)),o.accionSeleccionar=o.accionSeleccionar.bind(Object(s.a)(o)),o.validarBoton=o.validarBoton.bind(Object(s.a)(o)),o.successSeleccionar=o.successSeleccionar.bind(Object(s.a)(o)),o.gridOptionsTablaMov=Object.assign({},o.gridOptions),o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o.setButtonFechaActual=o.setButtonFechaActual.bind(Object(s.a)(o)),o.setButtonNumeroActual=o.setButtonNumeroActual.bind(Object(s.a)(o)),o.setButtonNitActual=o.setButtonNitActual.bind(Object(s.a)(o)),o.setButtonDetalleActual=o.setButtonDetalleActual.bind(Object(s.a)(o)),o.setButtonBaseActual=o.setButtonBaseActual.bind(Object(s.a)(o)),o.setButtonValorActual=o.setButtonValorActual.bind(Object(s.a)(o)),o.setButtonCuentaActual=o.setButtonCuentaActual.bind(Object(s.a)(o)),o.setButtonFuenteActual=o.setButtonFuenteActual.bind(Object(s.a)(o)),o.fechaActualChange=o.fechaActualChange.bind(Object(s.a)(o)),o.numeroDocumentoChange=o.numeroDocumentoChange.bind(Object(s.a)(o)),o.nitYsedeChange=o.nitYsedeChange.bind(Object(s.a)(o)),o.detalleActualChange=o.detalleActualChange.bind(Object(s.a)(o)),o.baseActualChange=o.baseActualChange.bind(Object(s.a)(o)),o.valorActualChange=o.valorActualChange.bind(Object(s.a)(o)),o.cuentaActualChange=o.cuentaActualChange.bind(Object(s.a)(o)),o.fuenteActualChange=o.fuenteActualChange.bind(Object(s.a)(o)),o.setButtoCentroCostoActual=o.setButtoCentroCostoActual.bind(Object(s.a)(o)),o.centroCostoActualChange=o.centroCostoActualChange.bind(Object(s.a)(o)),o.successCentroCosto=o.successCentroCosto.bind(Object(s.a)(o)),o.cambiarDocumento=o.cambiarDocumento.bind(Object(s.a)(o)),o.cambiarFecha=o.cambiarFecha.bind(Object(s.a)(o)),o.validarFormatoFecha=o.validarFormatoFecha.bind(Object(s.a)(o)),o.existeFecha=o.existeFecha.bind(Object(s.a)(o)),o.calcularTotales=o.calcularTotales.bind(Object(s.a)(o)),o.btnCancelar=o.btnCancelar.bind(Object(s.a)(o)),o.arrayTotales=[],o.arrayOriginal=[],o.dataArray=[],o.centro_costo="",o.id_modificado=0,o.grabarMovimientosPred=o.grabarMovimientosPred.bind(Object(s.a)(o)),o.successGrabarMov=o.successGrabarMov.bind(Object(s.a)(o)),o.btnGrabarHabilitar=o.btnGrabarHabilitar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Digitar Documentos Predefinidos, @version: 1.01.13, @author: Mario A Sep\xfalveda"),this.getField("documento_id").setOnChange(this.validarBoton),this.getField("sucursal_id").setOnChange(this.limpiarCampos),this.getField("ver_datos").setClick(this.consultarDatos),this.getField("cambiar_documento_btn").setClick(this.cambiarDocumento),this.getField("cambiar_fecha_btn").setClick(this.cambiarFecha),this.getField("cancelar_btn").setClick(this.btnCancelar),this.getField("total_diferencia").setOnChange(this.btnGrabarHabilitar),this.getField("grabar_btn").setClick(this.grabarMovimientosPred)}},{key:"btnGrabarHabilitar",value:function(){0===this.getField("total_diferencia").getValue()?this.getField("grabar_btn").setDisabled(!1):this.getField("grabar_btn").setDisabled(!0)}},{key:"btnCancelar",value:function(){this.getField("sucursal_id").setValue(""),this.getField("documento_id").setValue(""),this.getField("codigo_documento").setValue(""),this.getField("codigo_sucursal").setValue(""),this.getField("nombre_documento").setValue(""),this.getField("nombre_sucursal").setValue(""),this.limpiarCampos()}},{key:"limpiarCampos",value:function(){this.arrayTotales=[],this.arrayOriginal=[],this.centro_costo="",this.id_modificado=0,this.getField("total_credito").setVisible(!1),this.getField("total_debito").setVisible(!1),this.getField("total_diferencia").setVisible(!1),this.getField("numero_documento").setVisible(!1),this.getField("cambiar_documento_btn").setVisible(!1),this.getField("fecha").setVisible(!1),this.getField("cambiar_fecha_btn").setVisible(!1),this.getField("grabar_btn").setVisible(!1),this.getField("cancelar_btn").setVisible(!1),this.getField("tabla_datos").toggle(!1),this.getField("tabla_datos_movimientos").toggle(!1)}},{key:"validarBoton",value:function(){""!==this.getField("documento_id").getValue()&&""!==this.getField("sucursal_id").getValue()?this.getField("ver_datos").setDisabled(!1):(this.getField("ver_datos").setDisabled(!0),this.limpiarCampos())}},{key:"consultarDatos",value:function(){var e={documento_id:this.getField("documento_id").getValue(),sucursal_id:this.getField("sucursal_id").getValue()};this.generalFormat.nombre_accion="1215-Servicio_digitar_documentos_predefinidos_carga_datos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successConsultarDatos,error:this.error_,general:this.generalFormat})}},{key:"successConsultarDatos",value:function(e){if(200===e.estado_p){this.gridOptionsTablaConsulta.rowData=[],this.getField("tabla_datos").initData(this.gridOptionsTablaConsulta);var t=new Map;t.set(2,{cellRenderer:this.setButtonSeleccionar,field:"accion"}),this.gridOptionsTablaConsulta.rowData=e.model,this.getField("tabla_datos").initData(this.gridOptionsTablaConsulta,t)}else this.getField("tabla_datos").toggle(!1)}},{key:"setButtonSeleccionar",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.accionSeleccionar(e)},a.setAttribute("id","button_seleccionar_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","seleccionar"),a}},{key:"accionSeleccionar",value:function(e){this.fecha=e.data.fecha,this.numero_documento=e.data.numero_documento;var t={documento_id:this.getField("documento_id").getValue(),sucursal_id:this.getField("sucursal_id").getValue(),fecha:e.data.fecha,numero_documento:e.data.numero_documento};this.generalFormat.nombre_accion="1215-Servicio_digitar_documentos_predefinidos_cargar_datos_numfech",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successSeleccionar,error:this.error_,general:this.generalFormat})}},{key:"successSeleccionar",value:function(e){if(void 0!==e){this.arrayOriginal=e.model,this.gridOptionsTablaMov.rowData=[],this.getField("tabla_datos_movimientos").initData(this.gridOptionsTablaMov);var t=new Map;t.set("fecha_documento",{cellRenderer:this.setButtonFechaActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.fechaActualChange,width:100,editable:!0,field:"fecha_documento"}),t.set("numero_documento",{cellRenderer:this.setButtonNumeroActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.numeroDocumentoChange,width:100,editable:!0,field:"numero_documento"}),t.set("nit",{cellRenderer:this.setButtonNitActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.nitYsedeChange,width:100,editable:!0,field:"nit"}),t.set("detalle",{cellRenderer:this.setButtonDetalleActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.detalleActualChange,editable:!0,field:"detalle"}),t.set("base",{cellRenderer:this.setButtonBaseActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.baseActualChange,width:100,editable:!0,field:"base"}),t.set("valor",{cellRenderer:this.setButtonValorActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorActualChange,width:100,editable:!0,field:"valor"}),t.set("codigo_cuenta",{cellRenderer:this.setButtonCuentaActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.cuentaActualChange,width:100,editable:!0,field:"codigo_cuenta"}),t.set("documento_fuente",{cellRenderer:this.setButtonFuenteActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.fuenteActualChange,width:160,editable:!0,field:"documento_fuente"}),t.set("codigo_centro_costo",{cellRenderer:this.setButtoCentroCostoActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.centroCostoActualChange,width:160,editable:!0,field:"codigo_centro_costo"}),this.gridOptionsTablaMov.rowData=this.arrayOriginal,this.getField("tabla_datos_movimientos").initData(this.gridOptionsTablaMov,t),this.calcularTotales(),this.getField("total_credito").setVisible(!0),this.getField("total_debito").setVisible(!0),this.getField("total_diferencia").setVisible(!0),this.getField("numero_documento").setVisible(!0),this.getField("cambiar_documento_btn").setVisible(!0),this.getField("fecha").setVisible(!0),this.getField("cambiar_fecha_btn").setVisible(!0),this.getField("grabar_btn").setVisible(!0),this.getField("cancelar_btn").setVisible(!0)}else if(this.arrayOriginal.length>=1){this.gridOptionsTablaMov.rowData=[],this.getField("tabla_datos_movimientos").initData(this.gridOptionsTablaMov);var i=new Map;i.set("fecha_documento",{cellRenderer:this.setButtonFechaActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.fechaActualChange,width:100,editable:!0,field:"fecha_documento"}),i.set("numero_documento",{cellRenderer:this.setButtonNumeroActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.numeroDocumentoChange,width:100,editable:!0,field:"numero_documento"}),i.set("nit",{cellRenderer:this.setButtonNitActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.nitYsedeChange,width:100,editable:!0,field:"nit"}),i.set("detalle",{cellRenderer:this.setButtonDetalleActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.detalleActualChange,editable:!0,field:"detalle"}),i.set("base",{cellRenderer:this.setButtonBaseActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.baseActualChange,width:100,editable:!0,field:"base"}),i.set("valor",{cellRenderer:this.setButtonValorActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorActualChange,width:100,editable:!0,field:"valor"}),i.set("codigo_cuenta",{cellRenderer:this.setButtonCuentaActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.cuentaActualChange,width:100,editable:!0,field:"codigo_cuenta"}),i.set("documento_fuente",{cellRenderer:this.setButtonFuenteActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.fuenteActualChange,width:160,editable:!0,field:"documento_fuente"}),i.set("codigo_centro_costo",{cellRenderer:this.setButtoCentroCostoActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.centroCostoActualChange,width:160,editable:!0,field:"codigo_centro_costo"}),this.gridOptionsTablaMov.rowData=this.arrayOriginal,this.getField("tabla_datos_movimientos").initData(this.gridOptionsTablaMov,i),this.calcularTotales()}else this.getField("tabla_datos_movimientos").toggle(!1),this.limpiarCampos()}},{key:"setButtonFechaActual",value:function(e){var t=e.data.fecha_documento,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"fechaActualChange",value:function(e){var t=this,i=e.data.id,a=e.newValue;this.arrayOriginal.find((function(e,o){return e.id===i&&(t.arrayOriginal[o].fecha_documento=a),null}))}},{key:"setButtonNumeroActual",value:function(e){var t=e.data.numero_documento,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"numeroDocumentoChange",value:function(e){var t=this,i=e.data.id,a=e.newValue;this.arrayOriginal.find((function(e,o){return e.id===i&&(t.arrayOriginal[o].numero_documento=a),null}))}},{key:"setButtonNitActual",value:function(e){var t=e.data.nit,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"nitYsedeChange",value:function(e){var t=this,i=e.data.id,a=e.newValue;this.arrayOriginal.find((function(e,o){return e.id===i&&(t.arrayOriginal[o].nit=a),null}))}},{key:"setButtonDetalleActual",value:function(e){var t=e.data.detalle,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"detalleActualChange",value:function(e){var t=this,i=e.data.id,a=e.newValue;this.arrayOriginal.find((function(e,o){return e.id===i&&(t.arrayOriginal[o].detalle=a),null}))}},{key:"setButtonBaseActual",value:function(e){var t=e.data.base,i=document.createElement("div"),a=document.createElement("label");return a.textContent="".formatoPrecio(t),i.appendChild(a),i}},{key:"baseActualChange",value:function(e){var t=this,i=e.data.id,a=e.newValue;this.arrayOriginal.find((function(e,o){return e.id===i&&(t.arrayOriginal[o].base=a),null}))}},{key:"setButtonValorActual",value:function(e){var t=e.data.valor,i=document.createElement("div"),a=document.createElement("label");return a.textContent="".formatoPrecio(t),i.appendChild(a),parseFloat(t)<0?this.valores_negativos+=parseFloat(t):parseFloat(t)>0&&(this.valores_positivos+=parseFloat(t)),i}},{key:"valorActualChange",value:function(e){var t=this,i=e.data.id,a=e.newValue;this.arrayOriginal.find((function(e,o){return e.id===i&&(t.arrayOriginal[o].valor=parseInt(a)),null})),this.successSeleccionar()}},{key:"calcularTotales",value:function(){var e,t=0,i=0;this.arrayOriginal.map((function(e){return parseInt(e.valor)<0?t+=parseInt(e.valor):i+=parseInt(e.valor),null})),this.getField("total_credito").setValue(t),this.getField("total_debito").setValue(i),e=t+i,this.getField("total_diferencia").setValue(e)}},{key:"setButtonCuentaActual",value:function(e){var t=e.data.codigo_cuenta,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"cuentaActualChange",value:function(e){var t=this,i=e.data.id,a=e.newValue;this.arrayOriginal.find((function(e,o){return e.id===i&&(t.arrayOriginal[o].cuenta=a),null}))}},{key:"setButtonFuenteActual",value:function(e){var t=e.data.documento_fuente,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"fuenteActualChange",value:function(e){var t=this,i=e.data.id,a=e.newValue;this.arrayOriginal.find((function(e,o){return e.id===i&&(t.arrayOriginal[o].documento_fuente=a),null}))}},{key:"setButtoCentroCostoActual",value:function(e){this.id_modificado=e.data.id;var t=e.data.codigo_centro_costo,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"centroCostoActualChange",value:function(e){var t=this;if(this.centro_costo=e,void 0===this.centro_costo.newValue||""===this.centro_costo.newValue)this.arrayOriginal.find((function(e,i){return e.id===t.id_modificado&&(t.arrayOriginal[i].codigo_centro_costo=t.centro_costo.oldValue),null})),this.successSeleccionar();else{var i={value:this.centro_costo.newValue};this.generalFormat.nombre_accion="1215-Servicio_digitar_documentos_predefinidos_busca_cod_centrocosto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.successCentroCosto,error:this.error_,general:this.generalFormat})}}},{key:"successCentroCosto",value:function(e){var t=this;200===e.estado_p?this.arrayOriginal.find((function(i,a){return i.id===t.id_modificado&&(t.arrayOriginal[a].codigo_centro_costo=e.data[0].codigo_centro_costo),null})):(this.arrayOriginal.find((function(e,i){return e.id===t.id_modificado&&(t.arrayOriginal[i].codigo_centro_costo=t.centro_costo.oldValue),null})),this.successSeleccionar())}},{key:"cambiarDocumento",value:function(){var e=this,t=this.getField("numero_documento").getValue();void 0!==t&&""!==t&&(this.arrayOriginal.map((function(t){return t.numero_documento=e.getField("numero_documento").getValue(),null})),this.successSeleccionar())}},{key:"cambiarFecha",value:function(){var e=this,t=this.getField("fecha").getValue();void 0!==t&&""!==t&&(this.arrayOriginal.map((function(t){return t.fecha_documento=e.getField("fecha").getValue(),null})),this.successSeleccionar())}},{key:"grabarMovimientosPred",value:function(){var e={data:this.arrayOriginal.map((function(e,t){switch(null){case e.documento_nit:e.documento_nit=".";break;case e.documento_banco:e.documento_banco=".";break;case e.niif:e.niif=".";break;case e.documento_niif:e.documento_niif=".";break;case e.detalle_niif:e.detalle_niif=".";break;case e.referencia:e.referencia=".";break;case e.contabilidad_placa_vehiculo_por_defecto:e.contabilidad_placa_vehiculo_por_defecto=".";break;case e.llave:e.llave=".";break;case e.numero_documento:e.numero_documento=".";break;case e.documento_fuente:e.documento_fuente="."}return{nSedeResponsable:e.sede_responsable,sTipoFuente:e.tipo_fuente,nNit:e.nit,nSede:e.sede,nNitResponsable:e.nit_responsable,sDeptoInterno:e.codigo_departamento_interno,nBase:e.base,sCentroCosto:e.codigo_centro_costo,nTarifa:e.tarifa,nValor:e.valor,sCodigoOrigen:e.codigo_origen,sItem:t+1,sFecha:e.fecha_documento,sVence:e.vence,sNiif:e.niif,sDocumentoNit:e.documento_nit,nValorNiif:e.valor_niif,sDetalleNiif:e.detalle_niif,nCodigoCuentaNiif:e.codigo_cuenta_niif,nCodigoCuenta:e.codigo_cuenta,sDocumentoNiif:e.documento_niif,sReferencia:e.referencia,sPlacaVehiculo:e.contabilidad_placa_vehiculo_por_defecto,sNumeroDocumento:e.numero_documento,sCodigoSucursal:e.codigo_sucursal,sCodigoDocumento:e.codigo_documento,sLlave:e.llave,sDetalle:e.detalle,sBanco:e.documento_banco,sDocumentoFuente:e.documento_fuente}}))};this.generalFormat.nombre_accion="1215-Servicio_digitar_documentos_predefinidos_crear_movimiento",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successGrabarMov,error:this.error_,general:this.generalFormat})}},{key:"successGrabarMov",value:function(e){200===e.estado_p&&this.successSeleccionar()}},{key:"validarFormatoFecha",value:function(e){return!(!e.match(/^\d{2,4}-\d{1,2}-\d{1,2}$/)||""===e)}},{key:"existeFecha",value:function(e){var t=e.split("-"),i=t[2],a=t[1],o=t[0],s=new Date(o,a,"0");return!(parseInt(a)>12||parseInt(a)<1)&&(!(i-0>s.getDate()-0)&&(i+""!=="0"&&"0_"!==i&&"__"!==i&&"00"!==i))}}]),i}(d.a.form);d.a.addController("dig_docs_pred",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(97),o=i(4),s=i(5),r=i(0),n=i(7),d=i(6),l=i(3),c=function(e){Object(n.a)(i,e);var t=Object(d.a)(i);function i(e){var a;return Object(o.a)(this,i),(a=t.call(this,e)).initForm=a.initForm.bind(Object(r.a)(a)),a.gridOptionsTabla=Object.assign({},a.gridOptions),a.validarBoton=a.validarBoton.bind(Object(r.a)(a)),a.validarBotonImportar=a.validarBotonImportar.bind(Object(r.a)(a)),a.actualizarTabla=a.actualizarTabla.bind(Object(r.a)(a)),a.peticionGenerica=a.peticionGenerica.bind(Object(r.a)(a)),a}return Object(s.a)(i,[{key:"initForm",value:function(){var e=this;this.getField("btn_cargar").setClick((function(){e.elegirBoton("cargar")})),this.getField("nombre").setOnChange(this.validarBoton),this.getField("nombre_sucursal").setOnChange(this.validarBoton),this.getField("btn_importar").setClick((function(){e.elegirBoton("importar")})),this.getField("btn_eliminar").setClick((function(){e.elegirBoton("eliminar")})),this.getField("numero_documento").setOnChange(this.validarBotonImportar)}},{key:"elegirBoton",value:function(e){var t=this;if(""!==this.getField("documento_id").getValue()&&""!==this.getField("sucursal_id").getValue()){var i={sucursal_id:this.getField("sucursal_id").getValue(),documento_id:this.getField("documento_id").getValue()},o={fecha:this.getField("fecha").getValue(),numero_documento:this.getField("numero_documento").getValue()};"cargar"===e?this.peticionGenerica(i,"1212-trae_todos_movimientos_predefinidos","GET",e):"importar"===e&&this.getField("fecha").valid()&&this.getField("numero_documento").valid()?this.peticionGenerica(Object.assign(Object(a.a)({},i),Object(a.a)({},o)),"1212-genera_movimientos_predefinidos","POST",e):"eliminar"===e&&(this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog((function(){t.eliminarRegistros(Object.assign(Object(a.a)({},i),Object(a.a)({},o)),"movimiento_predefinidos-eliminartodo","DELETE",e)})),this.getField("confirmModalCustom").toggle(!0))}}},{key:"validarBoton",value:function(){""!==this.getField("nombre").getValue()&&""!==this.getField("nombre_sucursal").getValue()?this.getField("btn_cargar").setDisabled(!1):(this.getField("btn_cargar").setDisabled(!0),this.getField("tabla_documentos").toggle(!1))}},{key:"peticionGenerica",value:function(e,t,i,a){var o=this;this.generalFormat.nombre_accion=t;var s=!0;"eliminar"===a&&(s=!1),this.service.send({endpoint:this.constant.formConfiguration(),method:i,body:e,success:function(e){o.respuestaGeneral(e,a)},error:this.error_,general:this.generalFormat,showMessage:s})}},{key:"respuestaGeneral",value:function(e,t){if(200===e.estado_p)switch(t){case"cargar":this.gridOptionsTabla.rowData=e.data,this.getField("tabla_documentos").initData(this.gridOptionsTabla);break;case"importar":this.actualizarTabla();break;case"eliminar":this.alertGeneral.toggle(!0,e.data.mensaje,"success"),this.getField("tabla_documentos").toggle(!1),this.getField("numero_documento").setValue("")}else"cargar"===t&&(this.alertGeneral.toggle(!0,"No hay configuracion para ese documento en esa sucursal.","error"),this.getField("btn_importar").setDisabled(!0)),"eliminar"===t&&(this.alertGeneral.toggle(!0,e.data.mensaje,"error"),this.getField("btn_importar").setDisabled(!0)),this.getField("tabla_documentos").toggle(!1),this.getField("btn_eliminar").setDisabled(!0),this.getField("numero_documento").setValue("")}},{key:"eliminarRegistros",value:function(e,t,i,a){this.getField("confirmModalCustom").toggle(!1),this.peticionGenerica(e,t,i,a)}},{key:"actualizarTabla",value:function(){if(""!==this.getField("documento_id").getValue()&&""!==this.getField("sucursal_id").getValue()){var e={sucursal_id:this.getField("sucursal_id").getValue(),documento_id:this.getField("documento_id").getValue()};this.peticionGenerica(e,"1212-trae_todos_movimientos_predefinidos","GET","cargar")}}},{key:"validarBotonImportar",value:function(){""!==this.getField("nombre").getValue()&&""!==this.getField("nombre_sucursal").getValue()&&""!==this.getField("numero_documento").getValue()?(this.getField("btn_importar").setDisabled(!1),this.getField("btn_eliminar").setDisabled(!1),this.getField("numero_documento").setError(!1,"")):(this.getField("btn_importar").setDisabled(!0),this.getField("btn_eliminar").setDisabled(!0))}}]),i}(l.a.form);l.a.addController("doc_predef_config",c),t.default=c},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.changImageText=o.changImageText.bind(Object(s.a)(o)),o.addArticulo=o.addArticulo.bind(Object(s.a)(o)),o.successAddArticulo=o.successAddArticulo.bind(Object(s.a)(o)),o.traerArticulosTodos=o.traerArticulosTodos.bind(Object(s.a)(o)),o.successTraerArticulo=o.successTraerArticulo.bind(Object(s.a)(o)),o.servicioActualizarNombreComercial=o.servicioActualizarNombreComercial.bind(Object(s.a)(o)),o.successNombreComercial=o.successNombreComercial.bind(Object(s.a)(o)),o.duplicarArticulo=o.duplicarArticulo.bind(Object(s.a)(o)),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.gridOptionsPortafolio=Object.assign({},o.gridOptions),o.gridOptionsPortafolio.onSelectionChanged=o.onSelectionChanged,o.gridOptionsCategorias=Object.assign({},o.gridOptions),o.gridOptionsProfesiones=Object.assign({},o.gridOptions),o.gridOptionsUsos=Object.assign({},o.gridOptions),o.gridOptionsMateriales=Object.assign({},o.gridOptions),o.gridOptionsColores=Object.assign({},o.gridOptions),o.gridOptionsFichaTecnica=Object.assign({},o.gridOptions),o.gridOptionsGarantia=Object.assign({},o.gridOptions),o.gridOptionsImagenes=Object.assign({},o.gridOptions),o.gridOptionsImagenes.onSelectionChanged=o.changImageText,o.gridOptionsRelacionados=Object.assign({},o.gridOptions),o.valorActualChange=o.valorActualChange.bind(Object(s.a)(o)),o.guardarValor=o.guardarValor.bind(Object(s.a)(o)),o.successGuardarValor=o.successGuardarValor.bind(Object(s.a)(o)),o.actualizarMarca=o.actualizarMarca.bind(Object(s.a)(o)),o.traerCategorias2=o.traerCategorias2.bind(Object(s.a)(o)),o.selectCategoria2=o.selectCategoria2.bind(Object(s.a)(o)),o.traerCategorias3=o.traerCategorias3.bind(Object(s.a)(o)),o.selectCategoria3=o.selectCategoria3.bind(Object(s.a)(o)),o.traerCategorias4=o.traerCategorias4.bind(Object(s.a)(o)),o.selectCategoria4=o.selectCategoria4.bind(Object(s.a)(o)),o.successActualizarCategorias=o.successActualizarCategorias.bind(Object(s.a)(o)),o.actualizarCategorias=o.actualizarCategorias.bind(Object(s.a)(o)),o.guardarArticuloProfesiones=o.guardarArticuloProfesiones.bind(Object(s.a)(o)),o.successArticuloProfesiones=o.successArticuloProfesiones.bind(Object(s.a)(o)),o.successTraerArticuloProfesiones=o.successTraerArticuloProfesiones.bind(Object(s.a)(o)),o.setButtonEliminarProfesion=o.setButtonEliminarProfesion.bind(Object(s.a)(o)),o.eliminarProfesion=o.eliminarProfesion.bind(Object(s.a)(o)),o.TraerArticuloProfesiones=o.TraerArticuloProfesiones.bind(Object(s.a)(o)),o.successEliminarProfesiones=o.successEliminarProfesiones.bind(Object(s.a)(o)),o.guardarArticuloUsos=o.guardarArticuloUsos.bind(Object(s.a)(o)),o.successGuardarArticuloUsos=o.successGuardarArticuloUsos.bind(Object(s.a)(o)),o.successTraerArticuloUsos=o.successTraerArticuloUsos.bind(Object(s.a)(o)),o.setButtonEliminarUso=o.setButtonEliminarUso.bind(Object(s.a)(o)),o.eliminarUso=o.eliminarUso.bind(Object(s.a)(o)),o.TraerArticuloUsos=o.TraerArticuloUsos.bind(Object(s.a)(o)),o.successEliminarUsos=o.successEliminarUsos.bind(Object(s.a)(o)),o.guardarArticuloMateriales=o.guardarArticuloMateriales.bind(Object(s.a)(o)),o.successArticuloMateriales=o.successArticuloMateriales.bind(Object(s.a)(o)),o.successTraerArticuloMateriales=o.successTraerArticuloMateriales.bind(Object(s.a)(o)),o.setButtonEliminarMaterial=o.setButtonEliminarMaterial.bind(Object(s.a)(o)),o.eliminarMaterial=o.eliminarMaterial.bind(Object(s.a)(o)),o.TraerArticuloMateriales=o.TraerArticuloMateriales.bind(Object(s.a)(o)),o.successEliminarMateriales=o.successEliminarMateriales.bind(Object(s.a)(o)),o.guardarArticuloColores=o.guardarArticuloColores.bind(Object(s.a)(o)),o.successArticuloColores=o.successArticuloColores.bind(Object(s.a)(o)),o.successTraerArticuloColores=o.successTraerArticuloColores.bind(Object(s.a)(o)),o.setButtonEliminarColor=o.setButtonEliminarColor.bind(Object(s.a)(o)),o.eliminarColor=o.eliminarColor.bind(Object(s.a)(o)),o.TraerArticuloColores=o.TraerArticuloColores.bind(Object(s.a)(o)),o.successEliminarColores=o.successEliminarColores.bind(Object(s.a)(o)),o.guardarArticuloFichasTecnicas=o.guardarArticuloFichasTecnicas.bind(Object(s.a)(o)),o.successArticuloFichasTecnicas=o.successArticuloFichasTecnicas.bind(Object(s.a)(o)),o.successTraerArticuloFichasTecnicas=o.successTraerArticuloFichasTecnicas.bind(Object(s.a)(o)),o.setButtonEliminarFichaTecnica=o.setButtonEliminarFichaTecnica.bind(Object(s.a)(o)),o.eliminarFichaTecnica=o.eliminarFichaTecnica.bind(Object(s.a)(o)),o.TraerArticuloFichasTecnicas=o.TraerArticuloFichasTecnicas.bind(Object(s.a)(o)),o.successEliminarFichasTecnicas=o.successEliminarFichasTecnicas.bind(Object(s.a)(o)),o.guardarArticuloGarantias=o.guardarArticuloGarantias.bind(Object(s.a)(o)),o.successArticuloGarantias=o.successArticuloGarantias.bind(Object(s.a)(o)),o.successTraerArticuloGarantias=o.successTraerArticuloGarantias.bind(Object(s.a)(o)),o.setButtonEliminarGarantia=o.setButtonEliminarGarantia.bind(Object(s.a)(o)),o.eliminarGarantia=o.eliminarGarantia.bind(Object(s.a)(o)),o.TraerArticuloGarantias=o.TraerArticuloGarantias.bind(Object(s.a)(o)),o.successEliminarGarantias=o.successEliminarGarantias.bind(Object(s.a)(o)),o.guardarArticuloImagenes=o.guardarArticuloImagenes.bind(Object(s.a)(o)),o.successArticuloImagenes=o.successArticuloImagenes.bind(Object(s.a)(o)),o.successTraerArticuloImagenes=o.successTraerArticuloImagenes.bind(Object(s.a)(o)),o.setButtonEliminarImagen=o.setButtonEliminarImagen.bind(Object(s.a)(o)),o.eliminarImagen=o.eliminarImagen.bind(Object(s.a)(o)),o.TraerArticuloImagenes=o.TraerArticuloImagenes.bind(Object(s.a)(o)),o.successEliminarImagenes=o.successEliminarImagenes.bind(Object(s.a)(o)),o.duplicarArticuloSend=o.duplicarArticuloSend.bind(Object(s.a)(o)),o.successDuplicarArticulo=o.successDuplicarArticulo.bind(Object(s.a)(o)),o.filaSeleccionada=[],o.sumarDias=o.sumarDias.bind(Object(s.a)(o)),o.buscarArticulosId=o.buscarArticulosId.bind(Object(s.a)(o)),o.successTraerArticuloId=o.successTraerArticuloId.bind(Object(s.a)(o)),o.successActualizarMarca=o.successActualizarMarca.bind(Object(s.a)(o)),o.TraerArticuloCategorias=o.TraerArticuloCategorias.bind(Object(s.a)(o)),o.successTraerArticuloCategorias=o.successTraerArticuloCategorias.bind(Object(s.a)(o)),o.confirmDeleteCustomProfesion=o.confirmDeleteCustomProfesion.bind(Object(s.a)(o)),o.confirmDeleteCustomUso=o.confirmDeleteCustomUso.bind(Object(s.a)(o)),o.confirmDeleteCustomMaterial=o.confirmDeleteCustomMaterial.bind(Object(s.a)(o)),o.confirmDeleteCustomColor=o.confirmDeleteCustomColor.bind(Object(s.a)(o)),o.confirmDeleteCustomFichaTecnica=o.confirmDeleteCustomFichaTecnica.bind(Object(s.a)(o)),o.confirmDeleteCustomGarantia=o.confirmDeleteCustomGarantia.bind(Object(s.a)(o)),o.confirmDeleteCustomImagen=o.confirmDeleteCustomImagen.bind(Object(s.a)(o)),o.setButtonSubir=o.setButtonSubir.bind(Object(s.a)(o)),o.subirArticulo=o.subirArticulo.bind(Object(s.a)(o)),o.successSubirArticulo=o.successSubirArticulo.bind(Object(s.a)(o)),o.actualizarDescripcion=o.actualizarDescripcion.bind(Object(s.a)(o)),o.successActualizarDescripcion=o.successActualizarDescripcion.bind(Object(s.a)(o)),o.buscarArticulosRelacionados=o.buscarArticulosRelacionados.bind(Object(s.a)(o)),o.successBuscarArticulosRelacionados=o.successBuscarArticulosRelacionados.bind(Object(s.a)(o)),o.successArticulosRelacionados=o.successArticulosRelacionados.bind(Object(s.a)(o)),o.setButtonEliminarRelacionado=o.setButtonEliminarRelacionado.bind(Object(s.a)(o)),o.eliminarRelacionado=o.eliminarRelacionado.bind(Object(s.a)(o)),o.confirmDeleteCustomRelacionado=o.confirmDeleteCustomRelacionado.bind(Object(s.a)(o)),o.successEliminarRelacionado=o.successEliminarRelacionado.bind(Object(s.a)(o)),o.relacionarArticulo=o.relacionarArticulo.bind(Object(s.a)(o)),o.actualizarPrecios=o.actualizarPrecios.bind(Object(s.a)(o)),o.successActualizarPrecios=o.successActualizarPrecios.bind(Object(s.a)(o)),o.actualizarProveedor=o.actualizarProveedor.bind(Object(s.a)(o)),o.successActualizarProveedor=o.successActualizarProveedor.bind(Object(s.a)(o)),o.cleanCamposCategoria2=o.cleanCamposCategoria2.bind(Object(s.a)(o)),o.cleanCamposCategorias=o.cleanCamposCategorias.bind(Object(s.a)(o)),o.cleanCamposCategoria4=o.cleanCamposCategoria4.bind(Object(s.a)(o)),o.cleanValid=o.cleanValid.bind(Object(s.a)(o)),o.cleanCampos=o.cleanCampos.bind(Object(s.a)(o)),o.actualizarCampa\u00f1a=o.actualizarCampa\u00f1a.bind(Object(s.a)(o)),o.successActualizarCampa\u00f1a=o.successActualizarCampa\u00f1a.bind(Object(s.a)(o)),o.servicioActualizarDescripcionTecnica=o.servicioActualizarDescripcionTecnica.bind(Object(s.a)(o)),o.successDescripcionTecnica=o.successDescripcionTecnica.bind(Object(s.a)(o)),o.traerDescripcionTecnica=o.traerDescripcionTecnica.bind(Object(s.a)(o)),o.successTraerDescripcionTecnica=o.successTraerDescripcionTecnica.bind(Object(s.a)(o)),o.setButtonDesactivar=o.setButtonDesactivar.bind(Object(s.a)(o)),o.desactivarArticulo=o.desactivarArticulo.bind(Object(s.a)(o)),o.successDesactivarArticulo=o.successDesactivarArticulo.bind(Object(s.a)(o)),o.successSubirOrden=o.successSubirOrden.bind(Object(s.a)(o)),o.successBajarOrden=o.successBajarOrden.bind(Object(s.a)(o)),o.setButtonSubirOrden=o.setButtonSubirOrden.bind(Object(s.a)(o)),o.setButtonBajarOrden=o.setButtonBajarOrden.bind(Object(s.a)(o)),o.accionSubir=o.accionSubir.bind(Object(s.a)(o)),o.accionBajar=o.accionBajar.bind(Object(s.a)(o)),o.cerrarModalPrecios=o.cerrarModalPrecios.bind(Object(s.a)(o)),o.servicioBuscarArticuloIdPrecios=o.servicioBuscarArticuloIdPrecios.bind(Object(s.a)(o)),o.successArticuloIdPrecios=o.successArticuloIdPrecios.bind(Object(s.a)(o)),o.setButtonSelectHome=o.setButtonSelectHome.bind(Object(s.a)(o)),o.estadosSiNo=o.estadosSiNo.bind(Object(s.a)(o)),o.setButtonSelectMenu=o.setButtonSelectMenu.bind(Object(s.a)(o)),o.successEstadosSiNo=o.successEstadosSiNo.bind(Object(s.a)(o)),o.successEstadosSiNoSelect=o.successEstadosSiNoSelect.bind(Object(s.a)(o)),o.modificarVisibleSiNo=o.modificarVisibleSiNo.bind(Object(s.a)(o)),o.successModificarVisibleSiNo=o.successModificarVisibleSiNo.bind(Object(s.a)(o)),o.setButtonModificarRelacionado=o.setButtonModificarRelacionado.bind(Object(s.a)(o)),o.modificarRelacionado=o.modificarRelacionado.bind(Object(s.a)(o)),o.modificarNombreComercialRelacionado=o.modificarNombreComercialRelacionado.bind(Object(s.a)(o)),o.successModificarNombreComercial=o.successModificarNombreComercial.bind(Object(s.a)(o)),o.changeIsVideo=o.changeIsVideo.bind(Object(s.a)(o)),o.actualizarMultiplosVender=o.actualizarMultiplosVender.bind(Object(s.a)(o)),o.successActualizarMultiplosVender=o.successActualizarMultiplosVender.bind(Object(s.a)(o)),o.selectOptions=[],o.id_orden="",o.id_delete=0,o.archivo=0,o.url_video="",o.archivoGarantia=0,o.archivoFicha=0,o.Categoria1="",o.CodCategoria1="",o.CodCategoria2="",o.CodCategoria3="",o.CodCategoria4="",o.Categoria1_id="",o.Categoria2_id="",o.Categoria3_id="",o.Categoria4_id="",o}return Object(o.a)(i,[{key:"initForm",value:function(){this.estadosSiNo(),this.getField("boton_actualizar_relacionado_modal_relacionado").setClick(this.modificarNombreComercialRelacionado),this.getField("agregar").setClick(this.addArticulo),this.getField("ver_todos").setClick(this.traerArticulosTodos),this.getField("duplicar").setVisible(!1),this.getField("duplicar").setClick(this.duplicarArticulo),this.getField("nombre_cat1").setOnChange(this.traerCategorias2),this.getField("cod_categoria_2").setOnChange(this.traerCategorias3),this.getField("cod_categoria_3").setOnChange(this.traerCategorias4),this.getField("cod_categoria_4").setOnChange(this.cleanValid),this.getField("codigo_marca_modal").setOnChange(this.cleanValid),this.getField("codigo_profesiones_modal").setOnChange(this.cleanValid),this.getField("codigo_usos_modal").setOnChange(this.cleanValid),this.getField("codigo_materiales_modal").setOnChange(this.cleanValid),this.getField("codigo_colores_modal").setOnChange(this.cleanValid),this.getField("codigo_producto_buscar").setOnChange(this.cleanValid),this.getField("producto").setOnChange(this.cleanValid),this.getField("codigo_cat1_modal").setOnChange(this.cleanValid),this.getField("grabar_marca").setClick(this.actualizarMarca),this.getField("grabar_categorias").setClick(this.actualizarCategorias),this.getField("grabar_profesion").setClick(this.guardarArticuloProfesiones),this.getField("profesiones_codigo_articulo").setOnChange(this.TraerArticuloProfesiones),this.getField("grabar_uso").setClick(this.guardarArticuloUsos),this.getField("usos_codigo_articulo").setOnChange(this.TraerArticuloUsos),this.getField("grabar_material").setClick(this.guardarArticuloMateriales),this.getField("codigo_producto_material").setOnChange(this.TraerArticuloMateriales),this.getField("grabar_color").setClick(this.guardarArticuloColores),this.getField("codigo_producto_color").setOnChange(this.TraerArticuloColores),this.getField("grabar_ficha").setClick(this.guardarArticuloFichasTecnicas),this.getField("codigo_producto_ficha").setOnChange(this.TraerArticuloFichasTecnicas),this.getField("grabar_garantia").setClick(this.guardarArticuloGarantias),this.getField("codigo_producto_garantia").setOnChange(this.TraerArticuloGarantias),this.getField("grabar_imagen").setClick(this.guardarArticuloImagenes),this.getField("es_video").setOnChange(this.changeIsVideo),this.getField("codigo_producto_imagen").setOnChange(this.TraerArticuloImagenes),this.getField("guardar").setClick(this.duplicarArticuloSend),this.getField("articulo_id_buscar").setOnChange(this.buscarArticulosId),this.getField("boton_grabar_modal_actualizar").setIdEntity(1),this.getField("boton_grabar_modal_actualizar").setClick(this.servicioActualizarNombreComercial),this.archivo=this.getField("archivo_imagen").getValue(),this.url_video=this.getField("url_video").getValue(),this.archivoFicha=this.getField("archivo_ficha").getValue(),this.archivoGarantia=this.getField("archivo_garantia").getValue(),this.getField("boton_actualizar_descripcion").setClick(this.actualizarDescripcion),this.getField("id_articulo_modal_relacionados").setOnChange(this.buscarArticulosRelacionados),this.getField("boton_agregar_relacionado").setClick(this.relacionarArticulo),this.getField("actualizar_precio").setClick(this.actualizarPrecios),this.getField("actualizar_proveedor").setClick(this.actualizarProveedor),this.getField("actualizar_multiplos_para_vender").setClick(this.actualizarMultiplosVender),this.getField("actualizar_campa\xf1a").setClick(this.actualizarCampa\u00f1a),this.getField("actualizar_descripcion_tecnica").setClick(this.servicioActualizarDescripcionTecnica),this.getField("articulo_id_modal_tecnica").setOnChange(this.traerDescripcionTecnica),this.getField("boton_cerrar_modal_precios").setClick(this.cerrarModalPrecios)}},{key:"changImageText",value:function(){var e=this.gridOptionsImagenes.api.getSelectedRows()[0].url_video;"."!==e&&""!==e&&null!==e?!1===this.getField("es_video").getValue()&&(this.getField("es_video").setValue(!0),this.getField("url_video").setVisible(!0),this.getField("archivo_imagen").setVisible(!1)):!0===this.getField("es_video").getValue()&&(this.getField("es_video").setValue(!1),this.getField("url_video").setVisible(!1),this.getField("archivo_imagen").setVisible(!0))}},{key:"changeIsVideo",value:function(){!1===this.getField("es_video").getValue()?(this.getField("url_video").setVisible(!0),this.getField("archivo_imagen").setVisible(!1)):(this.getField("url_video").setVisible(!1),this.getField("archivo_imagen").setVisible(!0))}},{key:"actualizarMultiplosVender",value:function(){if(this.getField("multiplos_para_vender").valid()&&""!==this.getField("articulo_id_modal_actualizar").getValue()){this.getField("proveedor").setError(!1,"* Este campo es requerido.");var e={articulo_id:this.getField("articulo_id_modal_actualizar").getValue(),multiplos_para_vender:this.getField("multiplos_para_vender").getValue()};this.generalFormat.nombre_accion="2090-permite_modificar_multiplo_articulo_ecommerce",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successActualizarMultiplosVender,error:this.error_,general:this.generalFormat})}else""===this.getField("multiplos_para_vender").getValue()&&this.getField("multiplos_para_vender").setError(!0,"* Este campo es requerido y num\xe9rico.")}},{key:"successActualizarMultiplosVender",value:function(e){200===e.estado_p&&(this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_actualizar").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("articulo_id_modal_actualizar").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_actualizar").getValue()),this.buscarArticulosId())}},{key:"actualizarProveedor",value:function(){if(""!==this.getField("proveedor").getValue()&&""!==this.getField("articulo_id_modal_actualizar").getValue()){this.getField("proveedor").setError(!1,"* Este campo es requerido.");var e={id:1111,principal:!1,articulo_id:this.getField("articulo_id_modal_actualizar").getValue(),proveedor:this.getField("proveedor").getValue()};this.generalFormat.nombre_accion="346-permite_modificar_proveedor_articulo_ecommerce",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successActualizarProveedor,error:this.error_,general:this.generalFormat})}else""===this.getField("proveedor").getValue()&&this.getField("proveedor").setError(!0,"* Este campo es requerido.")}},{key:"successActualizarProveedor",value:function(e){200===e.estado_p&&(this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_actualizar").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("articulo_id_modal_actualizar").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_actualizar").getValue()),this.buscarArticulosId())}},{key:"cleanValid",value:function(){this.getField("codigo_cat1_modal").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_2").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_3").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_4").setError(!1,"* Este campo es requerido."),this.getField("descripcion_modal_relacionados").setError(!1,"* Este campo es requerido."),this.getField("producto").setError(!1,"* Este campo es requerido."),this.getField("nombre_comercial_relacionado").setError(!1,"* Este campo es requerido."),this.getField("nombre_comercial_modal_actualizar").setError(!1,"* Este campo es requerido."),this.getField("descripcion_detallada_modal_actualizar").setError(!1,"* Este campo es requerido."),this.getField("precio_con_iva").setError(!1,"* Este campo es requerido."),this.getField("codigo_marca_modal").setError(!1,"* Este campo es requerido."),this.getField("codigo_profesiones_modal").setError(!1,"* Este campo es requerido."),this.getField("codigo_usos_modal").setError(!1,"* Este campo es requerido."),this.getField("codigo_materiales_modal").setError(!1,"* Este campo es requerido."),this.getField("codigo_colores_modal").setError(!1,"* Este campo es requerido."),this.getField("meses").setError(!1,"* Este campo es requerido."),this.getField("detalle_imagen").setError(!1,"* Este campo es requerido."),this.getField("codigo_producto_buscar").setError(!1,"* Este campo es requerido.")}},{key:"actualizarPrecios",value:function(){if(this.getField("precio_con_iva").getValue()>0){this.getField("precio_con_iva").setError(!1,"* Este campo es requerido.");var e={articulo_id:this.getField("articulo_id_modal_actualizar").getValue(),precio_con_iva:this.getField("precio_con_iva").getValue()};this.generalFormat.nombre_accion="346-permite_modificar_precio_articulo_ecommerce",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successActualizarPrecios,error:this.error_,general:this.generalFormat})}else 0!==this.getField("precio_con_iva").getValue()&&""!==this.getField("precio_con_iva").getValue()||this.getField("precio_con_iva").setError(!0,"* Este campo es requerido.")}},{key:"successActualizarPrecios",value:function(e){200===e.estado_p&&(this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_actualizar").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("articulo_id_modal_actualizar").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_actualizar").getValue()),this.buscarArticulosId())}},{key:"relacionarArticulo",value:function(){if(""!==this.getField("articulo_relacionado_id").getValue()&&this.getField("id_articulo_modal_relacionados").valid()&&""!==this.getField("nombre_comercial_relacionado").getValue()&&this.getField("nombre_comercial_relacionado").valid()&&""!==this.getField("producto").getValue()){this.getField("producto").setError(!1,"* Este campo es requerido."),this.getField("nombre_comercial_relacionado").setError(!1,"* Este campo es requerido.");var e={principal:!1,articulo_id:this.getField("id_articulo_modal_relacionados").getValue(),articulo_relacionado_id:this.getField("articulo_relacionado_id").getValue(),nombre_comercial:this.getField("nombre_comercial_relacionado").getValue()};this.generalFormat.nombre_accion="346-Permite_crear_articulo_relacionado",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successArticulosRelacionados,error:this.error_,general:this.generalFormat})}else""===this.getField("producto").getValue()?this.getField("producto").setError(!0,"* Este campo es requerido."):""===this.getField("nombre_comercial_relacionado").getValue()&&this.getField("nombre_comercial_relacionado").setError(!0,"* Este campo es requerido.")}},{key:"successArticulosRelacionados",value:function(e){200===e.estado_p&&(this.buscarArticulosRelacionados(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_relacionados").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("id_articulo_modal_relacionados").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_relacionados").getValue()),this.buscarArticulosId())}},{key:"buscarArticulosRelacionados",value:function(){if(this.getField("producto").setValue(""),this.getField("nombre_producto_relacionados").setValue(""),this.getField("nombre_comercial_relacionado").setValue(""),this.getField("id_articulo_modal_relacionados").valid()&&""!==this.getField("id_articulo_modal_relacionados").getValue()){var e={value:this.getField("id_articulo_modal_relacionados").getValue()};this.generalFormat.nombre_accion="346-Permite_buscar_articulos_relacionados_por_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successBuscarArticulosRelacionados,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successBuscarArticulosRelacionados",value:function(e){if(200===e.estado_p){this.gridOptionsRelacionados.rowData=e.model;var t=new Map;t.set("id",{field:"id",width:80}),t.set("nombre_producto_principal",{field:"nombre_producto_principal",width:250}),t.set("nombre_producto_relacionado",{field:"nombre_producto_relacionado",width:300}),t.set("nombre_comercial",{field:"nombre_comercial",width:250}),t.set("precio",{field:"precio",width:130}),t.set(5,{cellRenderer:this.setButtonSubirOrden,field:"subir",width:100}),t.set(6,{cellRenderer:this.setButtonBajarOrden,field:"bajar",width:100}),t.set("orden",{singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorActualChange,editable:!0,field:"orden",width:100}),t.set(8,{cellRenderer:this.setButtonEliminarRelacionado,field:"Accion Eliminar",width:100}),t.set(9,{cellRenderer:this.setButtonModificarRelacionado,field:"Accion Modificar",width:100}),this.getField("tabla_productos_relacionados").initData(this.gridOptionsRelacionados,t)}else this.getField("tabla_productos_relacionados").toggle(!1)}},{key:"valorActualChange",value:function(e){if(this.getField("tabla_productos_relacionados").cellValid(e.oldValue,e.newValue,/^[0-9]+$/,7)){if(e.oldValue!==e.newValue&&""!==e.newValue){var t=e.data.id,i=e.newValue;""!==i&&parseFloat(i)&&parseFloat(i)>=0&&parseFloat(i)<=1e6?(this.guardarValor(t,parseFloat(i)),this.gridOptionsRelacionados.rowData=[],this.getField("tabla_productos_relacionados").initData(this.gridOptionsRelacionados)):(this.alertGeneral.toggle(!0,"El campo no cumple con el formato deseado","error"),this.gridOptionsRelacionados.rowData=[],this.getField("tabla_productos_relacionados").initData(this.gridOptionsRelacionados),this.buscarArticulosRelacionados())}}else this.alertGeneral.toggle(!0,"El campo no cumple con el formato deseado","error"),this.gridOptionsRelacionados.rowData=[],this.getField("tabla_productos_relacionados").initData(this.gridOptionsRelacionados),this.buscarArticulosRelacionados()}},{key:"guardarValor",value:function(e,t){this.getField("orden").setValue(t);var i=e;if(""!==i&&""!==this.getField("orden").getValue()){var a={id:i,orden:this.getField("orden").getValue()};this.generalFormat.nombre_accion="346_Permite_cambiar_orden_producto_relacionado",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:a,success:this.successGuardarValor,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successGuardarValor",value:function(e){200===e.estado_p&&(this.alertGeneral.toggle(!0,"Acci\xf3n Exitosa","success"),this.buscarArticulosRelacionados())}},{key:"setButtonSubirOrden",value:function(e){var t=this,i=document.createElement("input"),a=e.data.orden;return i.onclick=function(){return t.accionSubir(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Subir"),1===a&&(i.setAttribute("style","width:60px;height: 20px%; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("disabled",!0)),i}},{key:"accionSubir",value:function(e){if(this.id_orden=e,""!==this.id_orden){var t={value:this.id_orden};this.generalFormat.nombre_accion="346-Sube_orden_producto_relacionado",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successSubirOrden,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successSubirOrden",value:function(e){200===e.estado_p&&(this.id_orden="",this.buscarArticulosRelacionados())}},{key:"setButtonBajarOrden",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.accionBajar(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Bajar"),i}},{key:"accionBajar",value:function(e){if(this.id_orden=e,""!==this.id_orden){var t={value:this.id_orden};this.generalFormat.nombre_accion="346-baja_orden_producto_relacionado",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successBajarOrden,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successBajarOrden",value:function(e){200===e.estado_p&&(this.id_orden="",this.buscarArticulosRelacionados())}},{key:"setButtonEliminarRelacionado",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarRelacionado(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarRelacionado",value:function(e){this.getField("id_articulo_relacionado").setValue(e),this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustomRelacionado),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustomRelacionado",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.getField("id_articulo_relacionado").getValue()){var e={id:this.getField("id_articulo_relacionado").getValue()};this.generalFormat.nombre_accion="346-Permite_eliminar_un_articulo_ecommerce_relacionado",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarRelacionado,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarRelacionado",value:function(e){200===e.estado_p&&(this.buscarArticulosRelacionados(),this.cleanCampos(),this.getField("producto").setValue(""),this.getField("nombre_producto_relacionados").setValue(""),this.getField("nombre_comercial_relacionado").setValue(""),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_relacionados").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("id_articulo_modal_relacionados").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_relacionados").getValue()),this.buscarArticulosId())}},{key:"setButtonModificarRelacionado",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.modificarRelacionado(e)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Modificar"),i}},{key:"modificarRelacionado",value:function(e){this.getField("modal_modificar_jaivana").handleClickOpen(),this.getField("codigo_producto_modal_modificar").setValue(this.getField("codigo_producto_modal_relacionados").getValue()),this.getField("nombre_producto_modal_midificar").setValue(this.getField("nombre_producto_modal_relacionados").getValue()),this.getField("alias_producto_modal_modificar").setValue(this.getField("alias_producto_modal_relacionados").getValue()),this.getField("marca_modal_modificar").setValue(this.getField("marca_modal_relacionados").getValue()),this.getField("desde_modal_modificar").setValue(this.getField("desde_modal_relacionados").getValue()),this.getField("hasta_modal_modificar").setValue(this.getField("hasta_modal_relacionados").getValue()),this.getField("articulo_id_modal_modificar").setValue(this.getField("id_articulo_modal_relacionados").getValue()),this.getField("nombre_relacionado_modal_relacionado").setValue(e.data.nombre_producto_relacionado),this.getField("nombre_comercial_relacionado_modal_relacionado").setValue(e.data.nombre_comercial),this.getField("precio_relacionado_modal_relacionado").setValue(e.data.precio),this.getField("articulo_id_producto_relacionado").setValue(e.data.id)}},{key:"modificarNombreComercialRelacionado",value:function(){if(this.getField("nombre_comercial_relacionado_modal_relacionado").setError(!1,"* Este campo es requerido"),""!==this.getField("articulo_id_producto_relacionado").getValue()&&this.getField("nombre_comercial_relacionado_modal_relacionado").valid()&&""!==this.getField("nombre_comercial_relacionado_modal_relacionado").getValue()){var e={id:this.getField("articulo_id_producto_relacionado").getValue(),nombre_comercial:this.getField("nombre_comercial_relacionado_modal_relacionado").getValue()};this.generalFormat.nombre_accion="346-modifica_nombre_comercial_producto_relacionado",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successModificarNombreComercial,error:this.error_,general:this.generalFormat})}else""===this.getField("nombre_comercial_relacionado_modal_relacionado").getValue()&&this.getField("nombre_comercial_relacionado_modal_relacionado").setError(!0,"* Este campo es requerido")}},{key:"successModificarNombreComercial",value:function(e){200===e.estado_p&&(this.getField("modal_modificar_jaivana").handleClose(),this.buscarArticulosRelacionados())}},{key:"actualizarDescripcion",value:function(){if(""!==this.getField("id_articulo_modal_relacionados").getValue()&&""!==this.getField("descripcion_modal_relacionados").getValue()){this.getField("descripcion_modal_relacionados").setError(!1,"* Este campo es requerido.");var e={id:1111,principal:!1,articulo_id:this.getField("id_articulo_modal_relacionados").getValue(),descripcion_productos_relacionados:this.getField("descripcion_modal_relacionados").getValue()};this.generalFormat.nombre_accion="346-Permite_modificar_descripcion_prod_relacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successActualizarDescripcion,error:this.error_,general:this.generalFormat})}else""===this.getField("descripcion_modal_relacionados").getValue()&&this.getField("descripcion_modal_relacionados").setError(!0,"* Este campo es requerido.")}},{key:"successActualizarDescripcion",value:function(e){200===e.estado_p&&(this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_relacionados").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("id_articulo_modal_relacionados").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_relacionados").getValue()),this.buscarArticulosId())}},{key:"cleanCampos",value:function(){this.getField("archivo_imagen").handleSave([]),this.getField("detalle_imagen").setValue(""),this.getField("url_video").setValue(""),this.getField("es_video").setValue(!1),this.getField("url_video").setVisible(!1),this.getField("archivo_imagen").setVisible(!0),this.getField("principal").setValue(!1),this.getField("archivo_garantia").handleSave([]),this.getField("meses").setValue(""),this.getField("archivo_ficha").handleSave([])}},{key:"buscarArticulosId",value:function(){if(""!==this.getField("nombre_producto_buscar").getValue()){var e={value:this.getField("articulo_id_buscar").getValue()};this.generalFormat.nombre_accion="Busca_todos_portafolio_ecommerce_producto_por_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerArticuloId,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successTraerArticuloId",value:function(e){if(e.model&&e.model.length>0){this.getField("detalle_imagen").setValue(""),this.getField("url_video").setValue(""),this.getField("es_video").setValue(!1),this.getField("url_video").setVisible(!1),this.getField("archivo_imagen").setVisible(!0),this.getField("archivo_ficha").setValue(""),this.getField("archivo_garantia").setValue(""),this.getField("archivo_imagen").setValue(""),this.getField("principal").setValue(!1),this.gridOptionsPortafolio.rowData=e.model;var t=new Map;t.set(13,{cellRenderer:this.setButtonSelectHome,field:"home_visible",width:150}),t.set(14,{cellRenderer:this.setButtonSelectMenu,field:"menu",width:150}),t.set(15,{cellRenderer:this.setButtonSubir,field:"Accion Subir",width:90}),t.set(16,{cellRenderer:this.setButtonDesactivar,field:"Accion Desactivar",width:100}),this.getField("tabla_productos").initData(this.gridOptionsPortafolio,t)}else this.getField("tabla_productos").toggle(!1),this.getField("duplicar").setVisible(!1)}},{key:"onSelectionChanged",value:function(){this.filaSeleccionada=this.gridOptionsPortafolio.api.getSelectedRows()}},{key:"addArticulo",value:function(){if(""!==this.getField("articulo_id_buscar").getValue()&&""!==this.getField("nombre_producto_buscar").getValue()&&""!==this.getField("codigo_producto_buscar").getValue()){this.getField("codigo_producto_buscar").setError(!1,"* Este campo es requerido.");var e={articulo_id:this.getField("articulo_id_buscar").getValue(),nombre_producto:this.getField("nombre_producto_buscar").getValue(),principal:!1};this.generalFormat.nombre_accion="346_Crear_en_portafolio_productos_ecommerce",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successAddArticulo,error:this.error_,general:this.generalFormat})}else""===this.getField("codigo_producto_buscar").getValue()&&this.getField("codigo_producto_buscar").setError(!0,"* Este campo es requerido.")}},{key:"successAddArticulo",value:function(e){200===e.estado_p&&this.buscarArticulosId()}},{key:"traerArticulosTodos",value:function(){this.generalFormat.nombre_accion="Busca_todos_portafolio_ecommerce_producto_ordenados_nombre_y_vigencias",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successTraerArticulo,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successTraerArticulo",value:function(e){if(e.model&&e.model.length>0){this.getField("detalle_imagen").setValue(""),this.getField("url_video").setValue(""),this.getField("es_video").setValue(!1),this.getField("url_video").setVisible(!1),this.getField("archivo_imagen").setVisible(!0),this.getField("archivo_ficha").setValue(""),this.getField("archivo_garantia").setValue(""),this.getField("archivo_imagen").setValue(""),this.getField("principal").setValue(!1),this.gridOptionsPortafolio.rowData=e.model;var t=new Map;t.set(13,{cellRenderer:this.setButtonSelectHome,field:"home_visible",width:150}),t.set(14,{cellRenderer:this.setButtonSelectMenu,field:"menu",width:150}),t.set(15,{cellRenderer:this.setButtonSubir,field:"Accion Subir",width:90}),t.set(16,{cellRenderer:this.setButtonDesactivar,field:"Accion Desactivar",width:100}),this.getField("tabla_productos").initData(this.gridOptionsPortafolio,t)}else this.getField("tabla_productos").toggle(!1),this.getField("duplicar").setVisible(!1)}},{key:"estadosSiNo",value:function(){this.generalFormat.nombre_accion="346-retorna_estados_sino",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successEstadosSiNoSelect,error:this.error_,general:this.generalFormat})}},{key:"successEstadosSiNoSelect",value:function(e){200===e.estado_p&&(this.selectOptions=e.model)}},{key:"successEstadosSiNo",value:function(){var e=document.createElement("option");e.setAttribute("value"," "),e.textContent="Ninguno";var t=[e];return this.selectOptions.map((function(e){var i=document.createElement("option");return i.setAttribute("value",parseInt(e.id)),i.textContent=e.descripcion,t.push(i),null})),t}},{key:"setButtonSelectMenu",value:function(e){var t=this,i=document.createElement("select"),a=document.createElement("div");a.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),i.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),i.onchange=function(i){return t.openModal(i,e)};var o=document.createElement("option");o.setAttribute("value"," "),o.textContent="Opciones",i.appendChild(o);var s=document.createElement("option");s.setAttribute("value",1),s.textContent="Productos Relacionados",i.appendChild(s);var r=document.createElement("option");r.setAttribute("value",2),r.textContent="Precios",i.appendChild(r);var n=document.createElement("option");n.setAttribute("value",3),n.textContent="Detalle",i.appendChild(n);var d=document.createElement("option");d.setAttribute("value",4),d.textContent="Actualizar",i.appendChild(d);var l=document.createElement("option");l.setAttribute("value",5),l.textContent="Descripci\xf3n T\xe9cnica",i.appendChild(l);var c=document.createElement("option");c.setAttribute("value",6),c.textContent="Marca",i.appendChild(c);var u=document.createElement("option");u.setAttribute("value",7),u.textContent="Categor\xedas",i.appendChild(u);var g=document.createElement("option");g.setAttribute("value",8),g.textContent="Profesiones",i.appendChild(g);var h=document.createElement("option");h.setAttribute("value",9),h.textContent="Usos",i.appendChild(h);var m=document.createElement("option");m.setAttribute("value",10),m.textContent="Materiales",i.appendChild(m);var _=document.createElement("option");_.setAttribute("value",11),_.textContent="Colores",i.appendChild(_);var b=document.createElement("option");b.setAttribute("value",12),b.textContent="Ficha T\xe9cnica",i.appendChild(b);var p=document.createElement("option");p.setAttribute("value",13),p.textContent="Garant\xeda",i.appendChild(p);var F=document.createElement("option");F.setAttribute("value",14),F.textContent="Im\xe1genes",i.appendChild(F);var v=document.createElement("option");return v.setAttribute("value",15),v.textContent="Campa\xf1a Google",i.appendChild(v),a.appendChild(i),a}},{key:"openModal",value:function(e,t){switch(e.target.value){case"1":this.getField("id_articulo_modal_relacionados").setValue(t.data.articulo_id),this.getField("modal_productos_relacionados").handleClickOpen(),this.gridOptionsPortafolio.api.deselectAll();break;case"2":this.getField("articulo_id_modal_precios").setValue(t.data.articulo_id),this.servicioBuscarArticuloIdPrecios(),this.getField("modal_precios").handleClickOpen(),this.gridOptionsPortafolio.api.deselectAll();break;case"3":this.getField("modal_descripcion").handleClickOpen(),this.gridOptionsPortafolio.api.deselectAll();break;case"4":this.getField("modal_actualizar_datos").handleClickOpen(),this.getField("articulo_id_modal_actualizar").setValue(t.data.articulo_id),this.gridOptionsPortafolio.api.deselectAll();break;case"5":this.getField("modal_descripcion_tecnica").handleClickOpen(),this.getField("articulo_id_modal_tecnica").setValue(t.data.articulo_id),this.gridOptionsPortafolio.api.deselectAll();break;case"6":this.getField("modal_marca").handleClickOpen(),this.getField("marca_articulo_id").setValue(t.data.articulo_id),this.gridOptionsPortafolio.api.deselectAll();break;case"7":this.getField("modal_categorias").handleClickOpen(),this.getField("categorias_articulo_id").setValue(t.data.articulo_id),this.getField("categorias_codigo_articulo").setValue(t.data.codigo_producto),this.TraerArticuloCategorias(),this.gridOptionsPortafolio.api.deselectAll();break;case"8":this.getField("modal_profesiones").handleClickOpen(),this.getField("profesiones_articulo_id").setValue(t.data.articulo_id),this.getField("profesiones_codigo_articulo").setValue(t.data.codigo_producto),this.gridOptionsPortafolio.api.deselectAll();break;case"9":this.getField("modal_usos").handleClickOpen(),this.getField("usos_articulo_id").setValue(t.data.articulo_id),this.getField("usos_codigo_articulo").setValue(t.data.codigo_producto),this.gridOptionsPortafolio.api.deselectAll();break;case"10":this.getField("modal_materiales").handleClickOpen(),this.getField("materiales_articulo_id").setValue(t.data.articulo_id),this.getField("codigo_producto_material").setValue(t.data.codigo_producto),this.gridOptionsPortafolio.api.deselectAll();break;case"11":this.getField("modal_colores").handleClickOpen(),this.getField("colores_articulo_id").setValue(t.data.articulo_id),this.getField("codigo_producto_color").setValue(t.data.codigo_producto),this.gridOptionsPortafolio.api.deselectAll();break;case"12":this.getField("modal_fichas").handleClickOpen(),this.getField("fichas_articulo_id").setValue(t.data.articulo_id),this.getField("codigo_producto_ficha").setValue(t.data.codigo_producto),this.gridOptionsPortafolio.api.deselectAll();break;case"13":this.getField("modal_garantias").handleClickOpen(),this.getField("garantias_articulo_id").setValue(t.data.articulo_id),this.getField("codigo_producto_garantia").setValue(t.data.codigo_producto),this.gridOptionsPortafolio.api.deselectAll();break;case"14":this.getField("modal_imagenes").handleClickOpen(),this.getField("imagenes_articulo_id").setValue(t.data.articulo_id),this.getField("codigo_producto_imagen").setValue(t.data.codigo_producto),this.gridOptionsPortafolio.api.deselectAll();break;case"15":this.getField("modal_modificar_campa\xf1a").handleClickOpen(),this.gridOptionsPortafolio.api.deselectAll();break;default:console.log("no existe Modal")}e.target.value=" "}},{key:"setButtonSelectHome",value:function(e){var t=this,i=e.data.visible_home_id,a=document.createElement("select"),o=document.createElement("div");o.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),a.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),a.onchange=function(i){return t.modificarVisibleSiNo(i,e.data)},a.setAttribute("id","mySelectOperario_");var s=this.successEstadosSiNo();return this.valor_idOpe=1,s.map((function(e){return a.appendChild(e),parseInt(e.value)===i&&(t.valor_idOpe=parseInt(e.value)),null})),o.appendChild(a),null===i||void 0===i?this.valido=!1:a.value=this.valor_idOpe,o}},{key:"modificarVisibleSiNo",value:function(e,t){if(this.getField("visible_home_id").setValue(e.target.value),""!==this.getField("visible_home_id").getValue()){var i={id:t.id,visible_home_id:this.getField("visible_home_id").getValue()};this.generalFormat.nombre_accion="346-Permite_modificar_visible_home_producto",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successModificarVisibleSiNo,error:this.error_,general:this.generalFormat})}}},{key:"successModificarVisibleSiNo",value:function(e){e.estado_p}},{key:"cerrarModalPrecios",value:function(){this.getField("articulo_id_modal_precios").setValue(""),this.getField("modal_precios").handleClose(),this.gridOptionsPortafolio.api.deselectAll()}},{key:"servicioBuscarArticuloIdPrecios",value:function(){if(""!==this.getField("articulo_id_modal_precios").getValue()){var e={value:this.getField("articulo_id_modal_precios").getValue()};this.generalFormat.nombre_accion="346-Retorna_un_articulo_por_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successArticuloIdPrecios,error:this.error_,general:this.generalFormat})}}},{key:"successArticuloIdPrecios",value:function(e){200===e.estado_p&&(this.getField("precio1_modal_precios").setValue(e.model[0].precio),this.getField("precio2_modal_precios").setValue(e.model[0].precio2),this.getField("precio3_modal_precios").setValue(e.model[0].precio3))}},{key:"servicioActualizarNombreComercial",value:function(){if(""!==this.getField("articulo_id_modal_actualizar").getValue()&&""!==this.getField("nombre_comercial_modal_actualizar").getValue()&&""!==this.getField("descripcion_detallada_modal_actualizar").getValue()){this.getField("nombre_comercial_modal_actualizar").setError(!1,"* Este campo es requerido."),this.getField("descripcion_detallada_modal_actualizar").setError(!1,"* Este campo es requerido.");var e={id:this.getField("articulo_id_modal_actualizar").getValue(),articulo_id:this.getField("articulo_id_modal_actualizar").getValue(),nombre_comercial:this.getField("nombre_comercial_modal_actualizar").getValue(),descripcion_detallada:this.getField("descripcion_detallada_modal_actualizar").getValue(),principal:!1};this.generalFormat.nombre_accion="346_Modifica_nombre_comercial_de_un_articulo",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successNombreComercial,error:this.error_,general:this.generalFormat})}else""===this.getField("nombre_comercial_modal_actualizar").getValue()?this.getField("nombre_comercial_modal_actualizar").setError(!0,"* Este campo es requerido."):""===this.getField("descripcion_detallada_modal_actualizar").getValue()&&this.getField("descripcion_detallada_modal_actualizar").setError(!0,"* Este campo es requerido.")}},{key:"successNombreComercial",value:function(e){200===e.estado_p&&(this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_actualizar").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("articulo_id_modal_actualizar").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_actualizar").getValue()),this.buscarArticulosId())}},{key:"actualizarMarca",value:function(){if(""!==this.getField("marca_articulo_id").getValue()&&""!==this.getField("marca_id").getValue()&&""!==this.getField("codigo_marca_modal").getValue()){this.getField("codigo_marca_modal").setError(!1,"* Este campo es requerido.");var e={id:1,articulo_id:this.getField("marca_articulo_id").getValue(),portafolio_ecommerce_marcas_id:this.getField("marca_id").getValue(),principal:!1};this.generalFormat.nombre_accion="346_Actualizar_la_marca_de_un_producto",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successActualizarMarca,error:this.error_,general:this.generalFormat})}else""===this.getField("codigo_marca_modal").getValue()&&this.getField("codigo_marca_modal").setError(!0,"* Este campo es requerido.")}},{key:"successActualizarMarca",value:function(e){200===e.estado_p&&(this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_marca").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("marca_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_marca").getValue()),this.buscarArticulosId())}},{key:"cleanCamposCategorias",value:function(){var e=[{text:"Ninguno",value:" ",campos_cambian:{}}];this.getField("cod_categoria_3").setOptions(e),this.getField("cod_categoria_4").setOptions(e)}},{key:"cleanCamposCategoria4",value:function(){this.getField("cod_categoria_4").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}])}},{key:"cleanCamposCategoria2",value:function(){var e=[{text:"Ninguno",value:" ",campos_cambian:{}}];this.getField("cod_categoria_2").setOptions(e),this.getField("cod_categoria_3").setOptions(e),this.getField("cod_categoria_4").setOptions(e)}},{key:"traerCategorias2",value:function(e){this.cleanCamposCategoria2();var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];if(this.getField("cod_categoria_3").setOptions(t),this.getField("cod_categoria_4").setOptions(t),""!==this.getField("nombre_cat1").getValue()){this.getField("codigo_cat1_modal").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_2").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_3").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_4").setError(!1,"* Este campo es requerido.");var i={value:this.getField("codigo_cat1_modal").getValue()};this.generalFormat.nombre_accion="346_Busca una categoria2 por codigo_cat1 exacto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.selectCategoria2,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"selectCategoria2",value:function(e){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.codigo_cat2,i.text=e.codigo_cat2+" - "+e.nombre,i.campos_cambian={nombre_cat2:e.nombre,categoria2_id:e.id},t.push(i)})),this.getField("cod_categoria_2").setOptions(t),""!==this.CodCategoria2&&(this.getField("cod_categoria_2").setValue(this.CodCategoria2),this.getField("categoria2_id").setValue(this.Categoria2_id)),this.CodCategoria2="",this.Categoria2_id=""}}},{key:"traerCategorias3",value:function(e){if(this.cleanCamposCategorias(),""!==this.getField("cod_categoria_2").getValue()){this.getField("codigo_cat1_modal").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_2").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_3").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_4").setError(!1,"* Este campo es requerido.");var t={value:this.getField("cod_categoria_2").getValue()};this.generalFormat.nombre_accion="346_Busca_una_categoria3_por_codigo_cat2_exacto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.selectCategoria3,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"selectCategoria3",value:function(e){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.codigo_cat3,i.text=e.codigo_cat3+" - "+e.nombre,i.campos_cambian={nombre_cat3:e.nombre,categoria3_id:e.id},t.push(i)})),this.getField("cod_categoria_3").setOptions(t),""!==this.CodCategoria3&&(this.getField("cod_categoria_3").setValue(this.CodCategoria3),this.getField("categoria3_id").setValue(this.Categoria3_id)),this.CodCategoria3="",this.Categoria3_id=""}}},{key:"traerCategorias4",value:function(e){if(this.cleanCamposCategoria4(),""!==this.getField("cod_categoria_3").getValue()){this.getField("codigo_cat1_modal").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_2").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_3").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_4").setError(!1,"* Este campo es requerido.");var t={value:this.getField("cod_categoria_3").getValue()};this.generalFormat.nombre_accion="346_Busca_una_categoria4_por_codigo_cat3_exacto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.selectCategoria4,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"selectCategoria4",value:function(e){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.codigo_cat4,i.text=e.codigo_cat4+" - "+e.nombre,i.campos_cambian={nombre_cat4:e.nombre,categoria4_id:e.id},t.push(i)})),this.getField("cod_categoria_4").setOptions(t),""!==this.CodCategoria4&&(this.getField("cod_categoria_4").setValue(this.CodCategoria4),this.getField("categoria4_id").setValue(this.Categoria4_id)),this.CodCategoria4="",this.Categoria4_id=""}}},{key:"actualizarCategorias",value:function(){if(this.getField("categorias_articulo_id").valid()&&""!==this.getField("categoria_id").getValue()&&""!==this.getField("categoria2_id").getValue()&&""!==this.getField("categoria3_id").getValue()&&""!==this.getField("categoria4_id").getValue()){this.getField("codigo_cat1_modal").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_2").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_3").setError(!1,"* Este campo es requerido."),this.getField("cod_categoria_4").setError(!1,"* Este campo es requerido.");var e={categoria1:this.getField("codigo_cat1_modal").getValue(),categoria_id:this.getField("categoria_id").getValue(),categoria2:this.getField("cod_categoria_2").getValue(),categoria2_id:this.getField("categoria2_id").getValue(),categoria3:this.getField("cod_categoria_3").getValue(),categoria3_id:this.getField("categoria3_id").getValue(),categoria4:this.getField("cod_categoria_4").getValue(),categoria4_id:this.getField("categoria4_id").getValue(),id:this.getField("categorias_articulo_id").getValue(),principal:!1};this.generalFormat.nombre_accion="346_permite_modificar_categoria_articulo",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successActualizarCategorias,error:this.error_,general:this.generalFormat})}else""===this.getField("codigo_cat1_modal").getValue()?this.getField("codigo_cat1_modal").setError(!0,"* Este campo es requerido."):""===this.getField("cod_categoria_2").getValue()?this.getField("cod_categoria_2").setError(!0,"* Este campo es requerido."):""===this.getField("cod_categoria_3").getValue()?this.getField("cod_categoria_3").setError(!0,"* Este campo es requerido."):""===this.getField("cod_categoria_4").getValue()&&this.getField("cod_categoria_4").setError(!0,"* Este campo es requerido.")}},{key:"successActualizarCategorias",value:function(e){200===e.estado_p&&(this.getField("codigo_cat1_modal").setValue(this.CodCategoria1),this.getField("nombre_cat1").setValue(this.Categoria1),this.getField("categoria_id").setValue(this.Categoria1_id),this.TraerArticuloCategorias(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_categoria").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("categorias_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_categoria").getValue()),this.buscarArticulosId())}},{key:"TraerArticuloCategorias",value:function(){if(this.getField("categorias_articulo_id").valid()&&""!==this.getField("categorias_articulo_id").getValue()){var e={value:this.getField("categorias_articulo_id").getValue()};this.generalFormat.nombre_accion="346_Trae_los_datos_de_articulo_incluyendo_categorias",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerArticuloCategorias,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successTraerArticuloCategorias",value:function(e){if(200===e.estado_p){this.gridOptionsCategorias.rowData=e.model;var t=new Map;this.Categoria1=e.model[0].nombre_categoria1,this.Categoria1_id=e.model[0].categoria1_id,this.CodCategoria1=e.model[0].codigo_categoria1,this.CodCategoria2=e.model[0].codigo_categoria2,this.CodCategoria3=e.model[0].codigo_categoria3,this.CodCategoria4=e.model[0].codigo_categoria4,this.Categoria2_id=e.model[0].categoria2_id,this.Categoria3_id=e.model[0].categoria3_id,this.Categoria4_id=e.model[0].categoria4_id,this.getField("codigo_cat1_modal").setValue(this.CodCategoria1),this.getField("nombre_cat1").setValue(this.Categoria1),this.getField("categoria_id").setValue(this.Categoria1_id),this.getField("tabla_productos_categorias").initData(this.gridOptionsCategorias,t)}else this.getField("tabla_productos_categorias").toggle(!1)}},{key:"guardarArticuloProfesiones",value:function(){if(""!==this.getField("profesiones_articulo_id").getValue()&&""!==this.getField("portafolio_profesion_id").getValue()&&""!==this.getField("codigo_profesiones_modal").getValue()){this.getField("codigo_profesiones_modal").setError(!1,"* Este campo es requerido.");var e={portafolio_profesion_id:this.getField("portafolio_profesion_id").getValue(),articulo_id:this.getField("profesiones_articulo_id").getValue(),principal:!1};this.generalFormat.nombre_accion="346_permite_crear_portafolio_productos_profesiones",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successArticuloProfesiones,error:this.error_,general:this.generalFormat})}else""===this.getField("codigo_profesiones_modal").getValue()&&this.getField("codigo_profesiones_modal").setError(!0,"* Este campo es requerido.")}},{key:"successArticuloProfesiones",value:function(e){200===e.estado_p&&(this.TraerArticuloProfesiones(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_profesion").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("profesiones_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_profesion").getValue()),this.buscarArticulosId())}},{key:"TraerArticuloProfesiones",value:function(){if(this.getField("profesiones_articulo_id").valid()&&""!==this.getField("profesiones_articulo_id").getValue()){var e={value:this.getField("profesiones_articulo_id").getValue()};this.generalFormat.nombre_accion="346_Busca_portafolio_producto_profesiones_por_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerArticuloProfesiones,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successTraerArticuloProfesiones",value:function(e){if(200===e.estado_p){this.gridOptionsProfesiones.rowData=e.model;var t=new Map;t.set(6,{cellRenderer:this.setButtonEliminarProfesion,field:"Accion Eliminar"}),this.getField("tabla_productos_profesiones").initData(this.gridOptionsProfesiones,t)}else this.getField("tabla_productos_profesiones").toggle(!1)}},{key:"setButtonEliminarProfesion",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarProfesion(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarProfesion",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustomProfesion),this.getField("confirmModalCustom").toggle(!0),this.getField("id_articulo_profesion").setValue(e)}},{key:"confirmDeleteCustomProfesion",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.getField("id_articulo_profesion").getValue()){var e={id:this.getField("id_articulo_profesion").getValue()};this.generalFormat.nombre_accion="346_Permite_eliminar_portafolio_productos_profesiones",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarProfesiones,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarProfesiones",value:function(e){200===e.estado_p&&(this.TraerArticuloProfesiones(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_profesion").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("profesiones_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_profesion").getValue()),this.buscarArticulosId())}},{key:"guardarArticuloUsos",value:function(){if(""!==this.getField("usos_articulo_id").getValue()&&""!==this.getField("portafolio_uso_id").getValue()&&""!==this.getField("codigo_usos_modal").getValue()){this.getField("codigo_usos_modal").setError(!1,"* Este campo es requerido.");var e={portafolio_uso_id:this.getField("portafolio_uso_id").getValue(),articulo_id:this.getField("usos_articulo_id").getValue(),principal:!1};this.generalFormat.nombre_accion="346_Permite_crear_portafolio_productos_usos",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successGuardarArticuloUsos,error:this.error_,general:this.generalFormat})}else""===this.getField("codigo_usos_modal").getValue()&&this.getField("codigo_usos_modal").setError(!0,"* Este campo es requerido.")}},{key:"successGuardarArticuloUsos",value:function(e){200===e.estado_p&&(this.TraerArticuloUsos(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_uso").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("usos_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_uso").getValue()),this.buscarArticulosId())}},{key:"TraerArticuloUsos",value:function(){if(this.getField("usos_articulo_id").valid()&&""!==this.getField("usos_articulo_id").getValue()){var e={value:this.getField("usos_articulo_id").getValue()};this.generalFormat.nombre_accion="346_Busca_portafolio_producto_usos_por_articuloid",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerArticuloUsos,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successTraerArticuloUsos",value:function(e){if(200===e.estado_p){this.gridOptionsUsos.rowData=e.model;var t=new Map;t.set(6,{cellRenderer:this.setButtonEliminarUso,field:"Accion Eliminar"}),this.getField("tabla_productos_usos").initData(this.gridOptionsUsos,t)}else this.getField("tabla_productos_usos").toggle(!1)}},{key:"setButtonEliminarUso",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarUso(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarUso",value:function(e){this.getField("id_articulo_uso").setValue(e),this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustomUso),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustomUso",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.getField("id_articulo_uso").getValue()){var e={id:this.getField("id_articulo_uso").getValue()};this.generalFormat.nombre_accion="346_Permite_eliminar_portafolio_productos_usos",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarUsos,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarUsos",value:function(e){200===e.estado_p&&(this.TraerArticuloUsos(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_uso").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("usos_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_uso").getValue()),this.buscarArticulosId())}},{key:"guardarArticuloMateriales",value:function(){if(""!==this.getField("portafolio_materiales_id").getValue()&&""!==this.getField("materiales_articulo_id").getValue()&&""!==this.getField("codigo_materiales_modal").getValue()){this.getField("codigo_materiales_modal").setError(!1,"* Este campo es requerido.");var e={articulo_id:this.getField("materiales_articulo_id").getValue(),portafolio_material_id:this.getField("portafolio_materiales_id").getValue(),principal:!1};this.generalFormat.nombre_accion="346_Permite_crear_portafolio_productos_materiales",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successArticuloMateriales,error:this.error_,general:this.generalFormat})}else""===this.getField("codigo_materiales_modal").getValue()&&this.getField("codigo_materiales_modal").setError(!0,"* Este campo es requerido.")}},{key:"successArticuloMateriales",value:function(e){200===e.estado_p&&(this.TraerArticuloMateriales(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_material").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("materiales_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_material").getValue()),this.buscarArticulosId())}},{key:"TraerArticuloMateriales",value:function(){if(this.getField("materiales_articulo_id").valid()&&""!==this.getField("materiales_articulo_id").getValue()){var e={value:this.getField("materiales_articulo_id").getValue()};this.generalFormat.nombre_accion="346_Busca_un_portafolio_productos_materiales_por_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerArticuloMateriales,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successTraerArticuloMateriales",value:function(e){if(e.model&&e.model.length>0){this.gridOptionsMateriales.rowData=e.model;var t=new Map;t.set(6,{cellRenderer:this.setButtonEliminarMaterial,field:"Accion Eliminar"}),this.getField("tabla_productos_materiales").initData(this.gridOptionsMateriales,t)}else this.getField("tabla_productos_materiales").toggle(!1)}},{key:"setButtonEliminarMaterial",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarMaterial(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarMaterial",value:function(e){this.getField("id_articulo_material").setValue(e),this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustomMaterial),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustomMaterial",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.getField("id_articulo_material").getValue()){var e={id:this.getField("id_articulo_material").getValue()};this.generalFormat.nombre_accion="346_Permite_eliminar_portafolio_productos_materiales",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarMateriales,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarMateriales",value:function(e){200===e.estado_p&&(this.TraerArticuloMateriales(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_material").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("materiales_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_material").getValue()),this.buscarArticulosId())}},{key:"guardarArticuloColores",value:function(){if(""!==this.getField("portafolio_colores_id").getValue()&&""!==this.getField("colores_articulo_id").getValue()&&""!==this.getField("codigo_colores_modal").getValue()){this.getField("codigo_colores_modal").setError(!1,"* Este campo es requerido.");var e={articulo_id:this.getField("colores_articulo_id").getValue(),portafolio_color_id:this.getField("portafolio_colores_id").getValue(),principal:!1};this.generalFormat.nombre_accion="346_Permite_crear_portafolio_productos_colores",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successArticuloColores,error:this.error_,general:this.generalFormat})}else""===this.getField("codigo_colores_modal").getValue()&&this.getField("codigo_colores_modal").setError(!0,"* Este campo es requerido.")}},{key:"successArticuloColores",value:function(e){200===e.estado_p&&(this.TraerArticuloColores(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_color").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("colores_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_color").getValue()),this.buscarArticulosId())}},{key:"TraerArticuloColores",value:function(){if(this.getField("colores_articulo_id").valid()&&""!==this.getField("colores_articulo_id").getValue()){var e={value:this.getField("colores_articulo_id").getValue()};this.generalFormat.nombre_accion="346_Busca_un_portafolio_productos_colores_por_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerArticuloColores,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successTraerArticuloColores",value:function(e){if(200===e.estado_p){this.gridOptionsColores.rowData=e.model;var t=new Map;t.set(5,{cellRenderer:this.setButtonEliminarColor,field:"Accion Eliminar"}),this.getField("tabla_productos_colores").initData(this.gridOptionsColores,t)}else this.getField("tabla_productos_colores").toggle(!1)}},{key:"setButtonEliminarColor",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarColor(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarColor",value:function(e){this.getField("id_articulo_color").setValue(e),this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustomColor),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustomColor",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.getField("id_articulo_color").getValue()){var e={id:this.getField("id_articulo_color").getValue()};this.generalFormat.nombre_accion="346_Permite_eliminar_portafolio_productos_colores",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarColores,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarColores",value:function(e){200===e.estado_p&&(this.TraerArticuloColores(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_color").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("colores_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_color").getValue()),this.buscarArticulosId())}},{key:"guardarArticuloFichasTecnicas",value:function(){if(this.archivoFicha!==this.getField("archivo_ficha").getValue()||0===this.archivoFicha||null===this.archivoFicha||this.archivoFicha!==[]){if(""!==this.getField("fichas_articulo_id").getValue()){var e={id:this.getField("fichas_articulo_id").getValue(),articulo_id:this.getField("fichas_articulo_id").getValue(),archivo:this.getField("archivo_ficha").getValue(),principal:!1};this.generalFormat.nombre_accion="346_Permite_crear_portafolio_productos_fichas-tecnicas",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successArticuloFichasTecnicas,error:this.error_,general:this.generalFormat,formData:!0})}}else this.alertGeneral.toggle(!0,"Debe cargar otra imagen","error")}},{key:"successArticuloFichasTecnicas",value:function(e){200===e.estado_p&&(this.TraerArticuloFichasTecnicas(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_ficha").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("fichas_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_ficha").getValue()),this.buscarArticulosId())}},{key:"TraerArticuloFichasTecnicas",value:function(){if(this.getField("fichas_articulo_id").valid()&&""!==this.getField("fichas_articulo_id").getValue()){var e={value:this.getField("fichas_articulo_id").getValue()};this.generalFormat.nombre_accion="346_Busca_portafolio_producto_fichas_tecnicas_por_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerArticuloFichasTecnicas,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successTraerArticuloFichasTecnicas",value:function(e){if(200===e.estado_p){this.gridOptionsFichaTecnica.rowData=e.model;var t=new Map;t.set(2,{cellRenderer:this.setButtonEliminarFichaTecnica,field:"Accion Eliminar"}),this.getField("tabla_productos_fichas").initData(this.gridOptionsFichaTecnica,t)}else this.getField("tabla_productos_fichas").toggle(!1),this.getField("archivo_ficha").handleSave([])}},{key:"setButtonEliminarFichaTecnica",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarFichaTecnica(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarFichaTecnica",value:function(e){this.getField("id_articulo_ficha").setValue(e),this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustomFichaTecnica),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustomFichaTecnica",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.getField("id_articulo_ficha").getValue()){var e={id:this.getField("id_articulo_ficha").getValue()};this.generalFormat.nombre_accion="346_Permite_Eliminar_portafolio_productos_fichas-tecnicas",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarFichasTecnicas,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarFichasTecnicas",value:function(e){200===e.estado_p&&(this.cleanCampos(),this.TraerArticuloFichasTecnicas(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_ficha").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("fichas_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_ficha").getValue()),this.buscarArticulosId())}},{key:"guardarArticuloGarantias",value:function(){if(this.archivoFicha!==this.getField("archivo_garantia").getValue())if(""!==this.getField("garantias_articulo_id").getValue()&&""!==this.getField("meses").getValue()&&this.getField("archivo_garantia").valid()){this.getField("meses").setError(!1,"* Este campo es requerido.");var e={articulo_id:this.getField("garantias_articulo_id").getValue(),meses:this.getField("meses").getValue(),principal:!1,archivo:this.getField("archivo_garantia").getValue()};this.generalFormat.nombre_accion="346_Permite_crear_portafolio_productos_garantias",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successArticuloGarantias,error:this.error_,general:this.generalFormat,formData:!0})}else""===this.getField("meses").getValue()&&this.getField("meses").setError(!0,"* Este campo es requerido.");else this.alertGeneral.toggle(!0,"Debe cargar otra imagen","error")}},{key:"successArticuloGarantias",value:function(e){200===e.estado_p&&(this.TraerArticuloGarantias(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_garantia").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("garantias_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_garantia").getValue()),this.buscarArticulosId())}},{key:"TraerArticuloGarantias",value:function(){if(this.getField("garantias_articulo_id").valid()&&""!==this.getField("garantias_articulo_id").getValue()){var e={value:this.getField("garantias_articulo_id").getValue()};this.generalFormat.nombre_accion="346_Busca_portafolio_producto_garantias_por_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerArticuloGarantias,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successTraerArticuloGarantias",value:function(e){if(200===e.estado_p){this.getField("archivo_garantia").setValue(e.data[0].archivo),this.gridOptionsGarantia.rowData=e.model;var t=new Map;t.set(3,{cellRenderer:this.setButtonEliminarGarantia,field:"Accion Eliminar"}),this.getField("tabla_productos_garantias").initData(this.gridOptionsGarantia,t)}else this.getField("tabla_productos_garantias").toggle(!1),this.getField("archivo_garantia").handleSave([]),this.getField("archivo_garantia").setValue("")}},{key:"setButtonEliminarGarantia",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarGarantia(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarGarantia",value:function(e){this.getField("id_articulo_garantia").setValue(e),this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustomGarantia),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustomGarantia",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.getField("id_articulo_garantia").getValue()){var e={id:this.getField("id_articulo_garantia").getValue()};this.generalFormat.nombre_accion="346_Permite_Eliminar_portafolio_productos_garantias",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarGarantias,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarGarantias",value:function(e){200===e.estado_p&&(this.cleanCampos(),this.TraerArticuloGarantias(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_garantia").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("garantias_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_garantia").getValue()),this.buscarArticulosId())}},{key:"guardarArticuloImagenes",value:function(){if(!1===this.getField("es_video").getValue()&&this.archivo===this.getField("archivo_imagen").getValue())this.alertGeneral.toggle(!0,"Debe cargar otra imagen","error");else if(!0===this.getField("es_video").getValue()&&this.url_video===this.getField("url_video").getValue())this.alertGeneral.toggle(!0,"Debe cargar otra url del video","error");else{var e=!1;if((!1===this.getField("es_video").getValue()&&""!==this.getField("detalle_imagen").getValue()&&""!==this.getField("imagenes_articulo_id").getValue()&&this.getField("principal").valid()||!0===this.getField("es_video").getValue()&&this.getField("url_video").valid()&&""!==this.getField("detalle_imagen").getValue()&&""!==this.getField("imagenes_articulo_id").getValue()&&this.getField("principal").valid())&&(e=!0),e){this.getField("detalle_imagen").setError(!1,"* Este campo es requerido.");var t={articulo_id:this.getField("imagenes_articulo_id").getValue(),detalle:this.getField("detalle_imagen").getValue(),principal:this.getField("principal").getValue()};!1===this.getField("es_video").getValue()?t.archivo=this.getField("archivo_imagen").getValue():t.url_video=this.getField("url_video").getValue(),this.generalFormat.nombre_accion="346_Permite_crear_portafolio_productos_imagenes",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.successArticuloImagenes,error:this.error_,general:this.generalFormat,formData:!0})}else""===this.getField("detalle_imagen").getValue()&&this.getField("detalle_imagen").setError(!0,"* Este campo es requerido.")}}},{key:"successArticuloImagenes",value:function(e){200===e.estado_p&&(this.TraerArticuloImagenes(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_imagen").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("imagenes_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_imagen").getValue()),this.buscarArticulosId())}},{key:"TraerArticuloImagenes",value:function(){if(this.getField("imagenes_articulo_id").valid()&&""!==this.getField("imagenes_articulo_id").getValue()){var e={value:this.getField("imagenes_articulo_id").getValue()};this.generalFormat.nombre_accion="346_Busca_todos_los_portafolio_producto_imagenes_por_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerArticuloImagenes,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successTraerArticuloImagenes",value:function(e){if(200===e.estado_p){this.gridOptionsImagenes.rowData=e.model;var t=new Map;t.set(5,{cellRenderer:this.setButtonEliminarImagen,field:"Accion Eliminar"}),this.getField("tabla_productos_imagenes").initData(this.gridOptionsImagenes,t),this.cleanCampos()}else this.getField("tabla_productos_imagenes").toggle(!1),this.getField("archivo_imagen").handleSave([]),this.getField("archivo_imagen").setValue("")}},{key:"setButtonEliminarImagen",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarImagen(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarImagen",value:function(e){this.getField("id_articulo_imagen").setValue(e),this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustomImagen),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustomImagen",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.getField("id_articulo_imagen").getValue()){var e={id:this.getField("id_articulo_imagen").getValue()};this.generalFormat.nombre_accion="346_Permite_Eliminar_portafolio_productos_imagenes",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarImagenes,error:this.error_,general:this.generalFormat})}}},{key:"successEliminarImagenes",value:function(e){200===e.estado_p&&(this.cleanCampos(),this.TraerArticuloImagenes(),this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_imagen").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("imagenes_articulo_id").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_imagen").getValue()),this.buscarArticulosId())}},{key:"sumarDias",value:function(e,t){return e.setDate(e.getDate()+t),e}},{key:"duplicarArticulo",value:function(){if(this.filaSeleccionada.length>0){this.getField("modal_duplicar").handleClickOpen(),this.getField("guardar").setIdEntity(1);var e=this.filaSeleccionada[0].vigencia_hasta.split("-"),t=new Date(e[0],e[1]-1,e[2]),i=this.sumarDias(t,1).toISOString(),a=this.sumarDias(t,1).toISOString();this.getField("vigencia_desde").setValue(i.split("T")[0]),this.getField("vigencia_hasta").setValue(a.split("T")[0]),this.gridOptionsPortafolio.api.deselectAll()}}},{key:"duplicarArticuloSend",value:function(){if(this.getField("articulo_id_buscar").setValue(""),this.getField("articulo_id_duplicar").valid()&&this.getField("vigencia_desde").valid()&&this.getField("vigencia_hasta").valid()&&this.getField("descripcion_detallada_duplicar").valid()&&this.getField("nombre_comercial_duplicar").valid()&&this.getField("precio_con_iva").valid()){var e={id:1,articulo_id:this.getField("articulo_id_duplicar").getValue(),vigencia_desde:this.getField("vigencia_desde").getValue(),vigencia_hasta:this.getField("vigencia_hasta").getValue(),precio_con_iva:this.getField("precio_con_iva").getValue(),nombre_comercial:this.getField("nombre_comercial_duplicar").getValue(),descripcion_detallada:this.getField("descripcion_detallada_duplicar").getValue(),principal:!1};this.generalFormat.nombre_accion="Duplica_portafolio_ecommerce_productos",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successDuplicarArticulo,error:this.error_,general:this.generalFormat})}}},{key:"successDuplicarArticulo",value:function(e){200===e.estado_p&&this.traerArticulosTodos()}},{key:"actualizarCampa\xf1a",value:function(){if(""!==this.getField("google_gtin").getValue()&&""!==this.getField("google_mnp").getValue()&&""!==this.getField("articulo_id_modal_campa\xf1a").getValue()){var e={id:1,articulo_id:this.getField("articulo_id_modal_campa\xf1a").getValue(),google_gtin:this.getField("google_gtin").getValue(),google_mnp:this.getField("google_mnp").getValue(),principal:!1};this.generalFormat.nombre_accion="346-Permite_actualizar_campos_google",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successActualizarCampa\u00f1a,error:this.error_,general:this.generalFormat})}else""===this.getField("google_gtin").getValue()?this.getField("google_gtin").setError(!0,"* Este campo es requerido."):""===this.getField("google_mnp").getValue()&&this.getField("google_mnp").setError(!0,"* Este campo es requerido.")}},{key:"successActualizarCampa\xf1a",value:function(e){200===e.estado_p?(this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_campa\xf1a").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("articulo_id_modal_campa\xf1a").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_campa\xf1a").getValue()),this.buscarArticulosId(),this.gridOptionsPortafolio.api.deselectAll()):this.gridOptionsPortafolio.api.deselectAll()}},{key:"setButtonSubir",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.subirArticulo(e.data.id,e.data.articulo_id,e.data.codigo_producto,e.data.nombre_producto)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Enviar"),i}},{key:"subirArticulo",value:function(e,t,i,a){if(this.getField("codigo_producto_buscar").setValue(i),this.getField("articulo_id_buscar").setValue(t),this.getField("nombre_producto_buscar").setValue(a),this.getField("id_subir").setValue(e),this.getField("id_subir").valid()){var o={value:this.getField("id_subir").getValue()};this.generalFormat.nombre_accion="346_Actualiza_datos_producto_en_elasticsearch",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:o,success:this.successSubirArticulo,error:this.error_,general:this.generalFormat})}}},{key:"successSubirArticulo",value:function(e){200===e.estado_p&&this.buscarArticulosId()}},{key:"traerDescripcionTecnica",value:function(){if(""!==this.getField("articulo_id_modal_tecnica").getValue()){var e={id:this.getField("articulo_id_modal_tecnica").getValue(),value:this.getField("articulo_id_modal_tecnica").getValue(),principal:!1};this.generalFormat.nombre_accion="Busca_todos_portafolio_ecommerce_producto_por_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerDescripcionTecnica,error:this.error_,general:this.generalFormat})}}},{key:"successTraerDescripcionTecnica",value:function(e){200===e.estado_p&&this.getField("descripcion_tecnica").setValue(e.model[0].descripcion_tecnica)}},{key:"servicioActualizarDescripcionTecnica",value:function(){if(""!==this.getField("articulo_id_modal_tecnica").getValue()&&""!==this.getField("descripcion_tecnica").getValue()){this.getField("descripcion_tecnica").setError(!1,"* Este campo es requerido.");var e={id:this.getField("articulo_id_modal_tecnica").getValue(),articulo_id:this.getField("articulo_id_modal_tecnica").getValue(),descripcion_tecnica:this.getField("descripcion_tecnica").getValue(),principal:!1};this.generalFormat.nombre_accion="346-Modifica_descripcion_tecnica_ecommerce_productos",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successDescripcionTecnica,error:this.error_,general:this.generalFormat})}else""===this.getField("descripcion_tecnica").getValue()&&this.getField("descripcion_tecnica").setError(!0,"* Este campo es requerido.")}},{key:"successDescripcionTecnica",value:function(e){200===e.estado_p&&(this.getField("codigo_producto_buscar").setValue(this.getField("codigo_producto_modal_tecnica").getValue()),this.getField("articulo_id_buscar").setValue(this.getField("articulo_id_modal_tecnica").getValue()),this.getField("nombre_producto_buscar").setValue(this.getField("nombre_producto_modal_tecnica").getValue()),this.buscarArticulosId())}},{key:"setButtonDesactivar",value:function(e){var t=this,i=e.data.estado,a=document.createElement("input");return a.onclick=function(){return t.desactivarArticulo(e.data.id,e.data.articulo_id,e.data.codigo_producto,e.data.nombre_producto)},a.setAttribute("id","button_aprove_"),a.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),a.setAttribute("type","button"),a.setAttribute("value","Desactivar"),"Inactivo"===i&&(a.setAttribute("style","width:100%;height: 100%; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),a.setAttribute("disabled",!0)),a}},{key:"desactivarArticulo",value:function(e,t,i,a){if(this.getField("codigo_producto_buscar").setValue(i),this.getField("articulo_id_buscar").setValue(t),this.getField("nombre_producto_buscar").setValue(a),this.getField("id_desactivar").setValue(e),this.getField("id_desactivar").valid()){var o={value:this.getField("id_desactivar").getValue()};this.generalFormat.nombre_accion="346-Permite_borrar_Producto_ecommerce",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:o,success:this.successDesactivarArticulo,error:this.error_,general:this.generalFormat})}}},{key:"successDesactivarArticulo",value:function(e){200===e.estado_p&&this.buscarArticulosId()}}]),i}(d.a.form);d.a.addController("ecommerce_productos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.selectTipoCategoria=o.selectTipoCategoria.bind(Object(s.a)(o)),o.changeTipo1=o.changeTipo1.bind(Object(s.a)(o)),o.changeTipo2=o.changeTipo2.bind(Object(s.a)(o)),o.changeTipo3=o.changeTipo3.bind(Object(s.a)(o)),o.changeTipo4=o.changeTipo4.bind(Object(s.a)(o)),o.contenedores=["drop1","servicioDRT"],o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("categoria").setOnChange(this.selectTipoCategoria),this.getField("categoria1_id").setOnChange(this.changeTipo1),this.getField("categoria2_id").setOnChange(this.changeTipo2),this.getField("categoria3_id").setOnChange(this.changeTipo3),this.getField("categoria4_id").setOnChange(this.changeTipo4)}},{key:"changeTipo1",value:function(){console.log("tipo1"),"1"!==this.getField("categoria").getValue()&&""!==this.getField("categoria1_id").getValue()&&null!==this.getField("categoria1_id").getValue()&&void 0!==this.getField("categoria1_id").getValue()&&this.getField("categoria").setValue("1")}},{key:"changeTipo2",value:function(){console.log("tipo2"),"2"!==this.getField("categoria").getValue()&&""!==this.getField("categoria2_id").getValue()&&null!==this.getField("categoria2_id").getValue()&&void 0!==this.getField("categoria2_id").getValue()&&this.getField("categoria").setValue("2")}},{key:"changeTipo3",value:function(){"3"!==this.getField("categoria").getValue()&&""!==this.getField("categoria3_id").getValue()&&null!==this.getField("categoria3_id").getValue()&&void 0!==this.getField("categoria3_id").getValue()&&(this.getField("categoria").setValue("3"),console.log("tipo3"))}},{key:"changeTipo4",value:function(){console.log("tipo4"),"4"!==this.getField("categoria").getValue()&&""!==this.getField("categoria4_id").getValue()&&null!==this.getField("categoria4_id").getValue()&&void 0!==this.getField("categoria4_id").getValue()&&this.getField("categoria").setValue("4")}},{key:"selectTipoCategoria",value:function(){var e=this.getField("categoria").getValue();this.getField("categoria1_codigo").setVisible(!1),this.getField("categoria1_codigo").setValue(""),this.getField("categoria1_nombre").setValue(""),this.getField("categoria1_id").setValue(""),this.getField("categoria1_nombre").setVisible(!1),this.getField("categoria1_id").setVisible(!1),this.getField("categoria2_codigo").setVisible(!1),this.getField("categoria2_codigo").setValue(""),this.getField("categoria2_nombre").setValue(""),this.getField("categoria2_id").setValue(""),this.getField("categoria2_nombre").setVisible(!1),this.getField("categoria2_id").setVisible(!1),this.getField("categoria3_codigo").setVisible(!1),this.getField("categoria3_codigo").setValue(""),this.getField("categoria3_nombre").setValue(""),this.getField("categoria3_id").setValue(""),this.getField("categoria3_nombre").setVisible(!1),this.getField("categoria3_id").setVisible(!1),this.getField("categoria4_codigo").setVisible(!1),this.getField("categoria4_codigo").setValue(""),this.getField("categoria4_nombre").setValue(""),this.getField("categoria4_id").setValue(""),this.getField("categoria4_nombre").setVisible(!1),this.getField("categoria4_id").setVisible(!1),"1"===e?(this.getField("categoria1_codigo").setVisible(!0),this.getField("categoria1_nombre").setVisible(!0),this.getField("categoria1_id").setVisible(!0)):"2"===e?(this.getField("categoria2_codigo").setVisible(!0),this.getField("categoria2_nombre").setVisible(!0),this.getField("categoria2_id").setVisible(!0)):"3"===e?(this.getField("categoria3_codigo").setVisible(!0),this.getField("categoria3_nombre").setVisible(!0),this.getField("categoria3_id").setVisible(!0)):"4"===e&&(this.getField("categoria4_codigo").setVisible(!0),this.getField("categoria4_nombre").setVisible(!0),this.getField("categoria4_id").setVisible(!0))}}]),i}(d.a.form);d.a.addController("ecomtextoscat",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.successConceptoFicha=o.successConceptoFicha.bind(Object(s.a)(o)),o.successFichaEnvasadoFinal=o.successFichaEnvasadoFinal.bind(Object(s.a)(o)),o.gridOptionsEnvasadoFinal=Object.assign({},o.gridOptions),o.setButtonGalonesEnvasados=o.setButtonGalonesEnvasados.bind(Object(s.a)(o)),o.galonesEnvasadosChange=o.galonesEnvasadosChange.bind(Object(s.a)(o)),o.successGalonesEnvasados=o.successGalonesEnvasados.bind(Object(s.a)(o)),o.uploadTbFichaEnvasadoFinal=o.uploadTbFichaEnvasadoFinal.bind(Object(s.a)(o)),o.CorregirEnvasado=o.CorregirEnvasado.bind(Object(s.a)(o)),o.successEnvasadoTotales=o.successEnvasadoTotales.bind(Object(s.a)(o)),o.uploadEnvasadoTotales=o.uploadEnvasadoTotales.bind(Object(s.a)(o)),o.setChangeButtonMatEmpaque=o.setChangeButtonMatEmpaque.bind(Object(s.a)(o)),o.setChangeButtonMatEmpaqueClick=o.setChangeButtonMatEmpaqueClick.bind(Object(s.a)(o)),o.successProductoTerminadoMatEmpq=o.successProductoTerminadoMatEmpq.bind(Object(s.a)(o)),o.gridOptionsPTMatEmpaque=Object.assign({},o.gridOptions),o.uploadModalMatEmpaque=o.uploadModalMatEmpaque.bind(Object(s.a)(o)),o.setButtonCantAgregada=o.setButtonCantAgregada.bind(Object(s.a)(o)),o.cantidadAgregadaChange=o.cantidadAgregadaChange.bind(Object(s.a)(o)),o.successCantidadAgregadaMatEmpq=o.successCantidadAgregadaMatEmpq.bind(Object(s.a)(o)),o.uploadProductoTerminado=o.uploadProductoTerminado.bind(Object(s.a)(o)),o.terminarEnvasado=o.terminarEnvasado.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnCorreccionEnvasado").setClick(this.CorregirEnvasado),this.getField("btnTerminar").setClick(this.terminarEnvasado);var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="450-Retorna_los_datos_de_la_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="450-Retorna_el_concepto_de_la_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successConceptoFicha,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="450-Retorna_fichas_envasado_final_fichaid",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successFichaEnvasadoFinal,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="450-Retorna_los_totales_del_envasado_final_por_el_id_de_la_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successEnvasadoTotales,error:this.error_,general:this.generalFormat})}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaItemsFicha").setVisible(!0),this.getField("listaItemsFicha").setItemsFichas(e.model)):this.getField("listaItemsFicha").setVisible(!1)}},{key:"successConceptoFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0&&this.getField("conceptoFicha").setValue(e.model[0].descripcion)}},{key:"successFichaEnvasadoFinal",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsEnvasadoFinal.rowData=[],this.getField("tbEnvasadoFichaFinal").initData(this.gridOptionsEnvasadoFinal);var t=new Map;t.set("cantidad_agregada",{cellRenderer:this.setButtonGalonesEnvasados,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.galonesEnvasadosChange,width:100,editable:!0,field:"cantidad_agregada"}),t.set("accion",{cellRenderer:this.setChangeButtonMatEmpaque,field:"Acci\xf3n"}),this.getField("tbEnvasadoFichaFinal").toggle(!0),this.gridOptionsEnvasadoFinal.rowData=e.model,this.gridOptionsEnvasadoFinal.paginationPageSize=100,this.getField("tbEnvasadoFichaFinal").initData(this.gridOptionsEnvasadoFinal,t)}else this.getField("tbEnvasadoFichaFinal").toggle(!1),this.getField("fieldAlert").toggle(!0,"No hay envasado","error")}},{key:"setButtonGalonesEnvasados",value:function(e){var t=e.data.cantidad_agregada,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t>=0?(a.textContent=t,"".formatoPrecio(e.data.cantidad_agregada)):(a.textContent=0,i.appendChild(a),i)}},{key:"galonesEnvasadosChange",value:function(e){var t=this.getField("tbEnvasadoFichaFinal").cellValid(e.oldValue,e.newValue,"^[0-9]");if(e.newValue<0&&(e.data.cantidad_agregada=0),t){this.getField("cantidad_agregada").setValue(e.newValue),this.getField("id_cantidad_agregada").setValue(e.data.id);var i={id:e.data.id,cantidad_agregada:this.getField("cantidad_agregada").getValue()};this.generalFormat.nombre_accion="450-Permite_cambiar_la_cantidad_agregada",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successGalonesEnvasados,error:this.error_,general:this.generalFormat})}}},{key:"successGalonesEnvasados",value:function(e){this.uploadTbFichaEnvasadoFinal(),200===e.estado_p&&(this.getField("cantidad_agregada").setValue(" "),this.uploadEnvasadoTotales(),this.uploadModalMatEmpaque())}},{key:"setChangeButtonMatEmpaque",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.setChangeButtonMatEmpaqueClick(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Material empaque"),i}},{key:"setChangeButtonMatEmpaqueClick",value:function(e){this.getField("modalMatEmpaque").handleClickOpen(),this.getField("id_cantidad_agregada").setValue(e.id);var t={value:e.id};this.generalFormat.nombre_accion="450-Retorna_material_empaque_producto_terminado",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successProductoTerminadoMatEmpq,error:this.error_,general:this.generalFormat})}},{key:"successProductoTerminadoMatEmpq",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsPTMatEmpaque.rowData=[],this.getField("tbMatEmpaque").initData(this.gridOptionsPTMatEmpaque);var t=new Map;t.set("cantidad_agregada",{cellRenderer:this.setButtonCantAgregada,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.cantidadAgregadaChange,width:100,editable:!0,field:"cantidad_agregada"}),t.set("nombre_unidad",{width:70,field:"nombre_unidad"}),this.getField("tbMatEmpaque").toggle(!0),this.gridOptionsPTMatEmpaque.rowData=e.model,this.gridOptionsPTMatEmpaque.paginationPageSize=100,this.getField("tbMatEmpaque").initData(this.gridOptionsPTMatEmpaque,t)}else this.getField("tbMatEmpaque").toggle(!1),this.getField("modalMatEmpaque").handleClose()}},{key:"setButtonCantAgregada",value:function(e){var t=e.data.cantidad_agregada,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t>=0?(a.textContent=t,"".formatoPrecio(e.data.cantidad_agregada)):(a.textContent=0,i.appendChild(a),i)}},{key:"cantidadAgregadaChange",value:function(e){var t=this.getField("tbMatEmpaque").cellValid(e.oldValue,e.newValue,"^[0-9]");if(e.newValue<0&&(e.data.agregar=0),t){this.getField("cantidad_agregada_matempq").setValue(e.newValue);var i={id:e.data.id,cantidad_agregada:this.getField("cantidad_agregada_matempq").getValue()};this.generalFormat.nombre_accion="450-Permite_actualizar_cantidad",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successCantidadAgregadaMatEmpq,error:this.error_,general:this.generalFormat})}}},{key:"successCantidadAgregadaMatEmpq",value:function(){this.uploadProductoTerminado()}},{key:"uploadTbFichaEnvasadoFinal",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="450-Retorna_fichas_envasado_final_fichaid",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successFichaEnvasadoFinal,error:this.error_,general:this.generalFormat})}},{key:"uploadEnvasadoTotales",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="450-Retorna_los_totales_del_envasado_final_por_el_id_de_la_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successEnvasadoTotales,error:this.error_,general:this.generalFormat})}},{key:"successEnvasadoTotales",value:function(e){this.getField("galones_resultantes").setValue(e.model[0].galones_resultantes),this.getField("total_cantidad_agregada").setValue(e.model[0].cantidad_agregada),this.getField("restante").setValue(e.model[0].restante)}},{key:"uploadModalMatEmpaque",value:function(){this.getField("modalMatEmpaque").handleClickOpen(),this.uploadProductoTerminado()}},{key:"uploadProductoTerminado",value:function(){var e={value:this.getField("id_cantidad_agregada").getValue()};this.generalFormat.nombre_accion="450-Retorna_material_empaque_producto_terminado",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successProductoTerminadoMatEmpq,error:this.error_,general:this.generalFormat})}},{key:"CorregirEnvasado",value:function(){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id);var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue()};this.generalFormat.nombre_accion="450-Permite_pasar_a_la_de_Correcion_de_Envasado",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}},{key:"terminarEnvasado",value:function(){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id);var e={};e=""!==this.getField("observacion").getValue()&&" "!==this.getField("observacion").getValue()?{id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),observacion:this.getField("observacion").getValue()}:{id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),observacion:" "},this.generalFormat.nombre_accion="450-Permite_pasar_a_la_actividad_de_Aprobacion_de_produccion_envasado",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);d.a.addController("envasado",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsB2BClientes=Object.assign({},o.gridOptions),o.tb_b2b_clientes_trer_todos=o.tb_b2b_clientes_trer_todos.bind(Object(s.a)(o)),o.successB2BClientesTodos=o.successB2BClientesTodos.bind(Object(s.a)(o)),o.setButtonClientesEnviarCLV=o.setButtonClientesEnviarCLV.bind(Object(s.a)(o)),o.funcionClickClientesEnviarCLV=o.funcionClickClientesEnviarCLV.bind(Object(s.a)(o)),o.clientesEnviarCLV=o.clientesEnviarCLV.bind(Object(s.a)(o)),o.successEnviarItemClientesEnviarCLV=o.successEnviarItemClientesEnviarCLV.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.tb_b2b_clientes_trer_todos()}},{key:"tb_b2b_clientes_trer_todos",value:function(){this.generalFormat.nombre_accion="enviar_clv_s_b2b_clientes_todos_autorizados",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",success:this.successB2BClientesTodos,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successB2BClientesTodos",value:function(e){if(200===e.estado_p)if(e.data.length>=1){this.getField("tb_b2b_clientes_trer_todos").toggle(!0),this.gridOptionsB2BClientes.rowData=e.data;var t=new Map;t.set("accion_enviar",{cellRenderer:this.setButtonClientesEnviarCLV,field:"Acci\xf3n",width:150}),this.getField("tb_b2b_clientes_trer_todos").initData(this.gridOptionsB2BClientes,t)}else this.getField("tb_b2b_clientes_trer_todos").toggle(!1),this.alertGeneral.toggle(!0,"No hay usuarios autorizados","error")}},{key:"setButtonClientesEnviarCLV",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.funcionClickClientesEnviarCLV(e.data.tercero_id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:110px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Enviar Contrase\xf1a"),i}},{key:"funcionClickClientesEnviarCLV",value:function(e){this.id_enviar=e,this.getField("confirmModalCustom").setTitleAndContent("Enviar Contrase\xf1a","\xbfDesea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.clientesEnviarCLV),this.getField("confirmModalCustom").toggle(!0)}},{key:"clientesEnviarCLV",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_enviar){var e={value:this.id_enviar};this.generalFormat.nombre_accion="enviar_clv_s_b2b_clientes_enviar_password",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successEnviarItemClientesEnviarCLV,error:this.error_,general:this.generalFormat})}}},{key:"successEnviarItemClientesEnviarCLV",value:function(e){200===e.estado_p&&this.tb_b2b_clientes_trer_todos()}}]),i}(d.a.form);d.a.addController("enviar_clv_de_acceso",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.handlerClickButton=o.handlerClickButton.bind(Object(s.a)(o)),o.consultarTurno=o.consultarTurno.bind(Object(s.a)(o)),o.successAsignar=o.successAsignar.bind(Object(s.a)(o)),o.cancelarTurno=o.cancelarTurno.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"setValueField",value:function(e,t){var i=this.getField(e);i&&i.setValue(t)}},{key:"initForm",value:function(){this.buttons.has("btn_show")&&this.buttons.get("btn_show").ref.current.setClick(this.handlerClickButton)}},{key:"handlerClickButton",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!0),this.buttons.get("btn_change").ref.current.setDisabled(!0),this.buttons.get("btn_delete").ref.current.setDisabled(!0),this.getField("codigo_articulo").setDisabled(!1),this.getField("btnConsultar").setVisible(!0),this.getField("btnConsultar").setDisabled(!1),this.getField("btnCancelar").setVisible(!0),this.getField("btnCancelar").setDisabled(!1),this.getField("btnConsultar").setClick(this.consultarTurno),this.getField("btnCancelar").setClick(this.cancelarTurno)}},{key:"cancelarTurno",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!1),this.buttons.get("btn_change").ref.current.setDisabled(!1),this.buttons.get("btn_delete").ref.current.setDisabled(!1),this.getField("codigo_articulo").setDisabled(!0),this.getField("btnConsultar").setVisible(!1),this.getField("btnConsultar").setDisabled(!0),this.getField("btnCancelar").setVisible(!1),this.getField("btnCancelar").setDisabled(!0),this.getField("tablaConsulta").toggle(!1)}},{key:"consultarTurno",value:function(){if(this.getField("codigo_articulo").valid()){var e=this.getField("codigo_articulo").getValue();this.service.send(this.getConstant().searchFormat().format(e,"btnConsultar","servicio",this.formId),"GET",void 0,this.successAsignar,this.error)}}},{key:"successAsignar",value:function(e){200===e.estado_p&&(this.gridOptions.rowData=e.model,this.getField("tablaConsulta").initData(this.gridOptions))}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.setearValorCarga=o.setearValorCarga.bind(Object(s.a)(o)),o.respuestaTabla=o.respuestaTabla.bind(Object(s.a)(o)),o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("nit_buscar_sedes").setOnChange(this.setearValorCarga)}},{key:"setearValorCarga",value:function(){if(""!==this.getField("sede").getValue()){var e={value:this.getField("nit").getValue()};this.generalFormat.nombre_accion="605_servicio_estado_cuenta_unificado_terceros_estadocuentauni",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.respuestaTabla,error:this.error_,general:this.generalFormat})}else this.limpiarCampos()}},{key:"respuestaTabla",value:function(e){if(200===e.estado_p){this.gridOptions.rowData=[],this.getField("estadoTB").initData(this.gridOptions);var t=new Map;this.gridOptions.rowData=e.model,this.getField("estadoTB").initData(this.gridOptions,t);var i=parseInt(this.getField("sede").getValue()),a=e.model.find((function(e){return e.sede===i}));this.getField("nombre").setValue(a.nombre),this.getField("direccion").setValue(a.direccion),this.getField("nombre_ciudad").setValue(a.nombre_ciudad),this.getField("telefonos").setValue(a.telefonos),this.getField("cupo").setValue(a.cupo),this.getField("xsaldo").setValue(a.xsaldo),this.getField("dias_pagos").setValue(a.dias_pagos),this.getField("diasv").setValue(a.diasv),this.getField("cartera").setValue(a.cartera),this.getField("dias").setValue(a.dias),this.getField("cupo_total").setValue(a.cupo_total),this.getField("saldo_total").setValue(a.xsaldo),this.getField("factor_pagare").setValue(a.factor_pagare),this.getField("verifica").setValue(a.verifica),this.getField("codigo_actividad_economica").setValue(a.codigo_actividad_economica),this.getField("nombre_actividad_economica").setValue(a.nombre_actividad_economica),this.getField("codigo_grupo_empresarial").setValue(a.codigo_grupo_empresarial),this.getField("estado_credito").setValue(a.estado_credito),this.getField("fecha_ingreso").setValue(a.fecha_ingreso),this.getField("codigo_vendedor").setValue(a.codigo_vendedor),this.getField("nombre_vendedor").setValue(a.nombre_vendedor),this.getField("cifin").setValue(a.cifin),this.getField("precios").setValue(a.precios),this.getField("mercaderista").setValue(a.mercaderista)}else this.getField("estadoTB").toggle(!1)}},{key:"limpiarCampos",value:function(){this.getField("nombre").setValue(""),this.getField("direccion").setValue(""),this.getField("nombre_ciudad").setValue(""),this.getField("telefonos").setValue(""),this.getField("cupo").setValue(""),this.getField("xsaldo").setValue(""),this.getField("dias_pagos").setValue(""),this.getField("diasv").setValue(""),this.getField("cartera").setValue(""),this.getField("dias").setValue(""),this.getField("cupo_total").setValue(""),this.getField("saldo_total").setValue(""),this.getField("factor_pagare").setValue(""),this.getField("verifica").setValue(""),this.getField("codigo_actividad_economica").setValue(""),this.getField("nombre_actividad_economica").setValue(""),this.getField("codigo_grupo_empresarial").setValue(""),this.getField("estado_credito").setValue(""),this.getField("fecha_ingreso").setValue(""),this.getField("codigo_vendedor").setValue(""),this.getField("nombre_vendedor").setValue(""),this.getField("cifin").setValue(""),this.getField("precios").setValue(""),this.getField("mercaderista").setValue(""),this.getField("estadoTB").toggle(!1)}}]),i}(d.a.form);d.a.addController("estadoCuentaUnif",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.setButtonDeleteAgregado=o.setButtonDeleteAgregado.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.deleteEspecification=o.deleteEspecification.bind(Object(s.a)(o)),o.tamanoDatos=0,o.id_item_add=0,o.cantidad_max=0,o.agregarCantidad=o.agregarCantidad.bind(Object(s.a)(o)),o.cantidadChange=o.cantidadChange.bind(Object(s.a)(o)),o.successAddItem=o.successAddItem.bind(Object(s.a)(o)),o.grabarItem=o.grabarItem.bind(Object(s.a)(o)),o.formato=o.formato.bind(Object(s.a)(o)),o.formato2=o.formato2.bind(Object(s.a)(o)),o.formato4=o.formato4.bind(Object(s.a)(o)),o.valido=!0,o.observacion="",o.etapa_id=0,o.lote="",o.abastecimiento="",o.gridOptions2=Object.assign({},o.gridOptions),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.traerDatosFichas=o.traerDatosFichas.bind(Object(s.a)(o)),o.etapaActualFicha=o.etapaActualFicha.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Etapas @Author: Juan David Nieto @Version: 1.01.0016"),this.traerDatosFichas(),this.getField("btnTerminarEtapa").setClick(this.grabarItem)}},{key:"traerDatosFichas",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_traer_datos_ficha_etapas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat})}},{key:"etapaActualFicha",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_produccion_fichas_items_etapa_actual",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat})}},{key:"successDatosFicha",value:function(e){var t=[];200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaFichaEtapas").setVisible(!0),t.push(e.data[0]),this.getField("listaFichaEtapas").setItemsFichas(t),this.etapaActualFicha()):(this.getField("listaFichaEtapas").setVisible(!1),this.etapaActualFicha())}},{key:"formato",value:function(e){return"".formatoPrecio(e.data.cantidad_galones)}},{key:"formato3",value:function(e){return"".formatoPrecio(e.data.cantidad_en_kilos)}},{key:"formato2",value:function(e){return"".formatoPrecio(e.data.cantidad_restante)}},{key:"formato4",value:function(e){var t=e.data.cantidad_agregada;null!==t&&0!==t||(this.valido=!1);var i=document.createElement("div"),a=document.createElement("label");return a.textContent="".formatoPrecio(t),i.appendChild(a),i}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p)if(e.model[0].items.length>0){this.gridOptions.rowData=[],this.getField("tablaEtapas").initData(this.gridOptions);var t=new Map;this.tamanoDatos=e.model[0].items.length,t.set("cantidad_galones",{cellRenderer:this.formato,cellStyle:{textAlign:"right"},field:"cantidad_galones",width:160}),t.set("lote",{field:"lote",width:120}),t.set("codigo",{field:"codigo",width:120}),t.set("cantidad_kilos",{field:"cantidad_kilos",width:150}),t.set("nombre_unidad",{field:"nombre_unidad",width:150}),t.set("bodega",{field:"bodega",width:130}),t.set("cantidad_en_kilos",{cellRenderer:this.formato3,cellStyle:{textAlign:"right"},field:"cantidad_en_kilos",width:160}),t.set("cantidad_restante",{cellRenderer:this.formato2,cellStyle:{textAlign:"right"},field:"cantidad_restante",width:160}),t.set("cantidad_agregada",{cellRenderer:this.formato4,cellStyle:{textAlign:"right",backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},singleClickEdit:!0,field:"cantidad_agregada",editable:!0,onCellValueChanged:this.cantidadChange,width:170}),this.gridOptions.rowData=e.model[0].items,this.getField("tablaEtapas").initData(this.gridOptions,t)}else this.getField("tablaEtapas").toggle(!1)}},{key:"setButtonDeleteAgregado",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteEspecification(i)},a.setAttribute("id","button_deleteAgregado_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Eliminar"),a}},{key:"deleteEspecification",value:function(e){this.successDeleteCustom=this.successDelete;var t={accion:"servicio",campo:"tablaAgregados",id_formulario:this.formId,id:e};this.data=t,this.getField("modalDelete").toggle(!0)}},{key:"successDelete",value:function(e){void 0!==e.estado_p&&200!==e.estado_p||(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.uploadTable())}},{key:"cantidadChange",value:function(e){var t=e.newValue;if(parseFloat(t)&&parseFloat(t)>0&&""!==t){var i=e.data.id;t<=e.data.cantidad_galones&&t<=e.data.cantidad_galones?this.agregarCantidad(t,i):(e.newValue=0,this.alertGeneral.toggle(!0,"El valor ingresado no puede superar el valor de Cantidad","error"),this.gridOptions.rowData[parseInt(e.node.id)][e.column.colId]=parseFloat(e.oldValue))}else parseFloat(e.oldValue)?this.gridOptions.rowData[parseInt(e.node.id)][e.column.colId]=parseFloat(e.oldValue):this.gridOptions.rowData[parseInt(e.node.id)][e.column.colId]=0,this.alertGeneral.toggle(!0,"El campo no cumple con el formato deseado","error")}},{key:"agregarCantidad",value:function(e,t){var i={produccion_fichas_id:this.props.data.id_ficha,produccion_fichas_items_id:t,cantidad:parseFloat(e)};this.generalFormat.nombre_accion="servicio_marcar_item_fichas_etapas_2",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successAddItem,error:this.error_,general:this.generalFormat})}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=e.data.cantidad_restante,o=document.createElement("input");return o.onclick=function(){return t.addEspecification(i,a)},o.setAttribute("id","button_delete_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Agregar"),o}},{key:"successAddItem",value:function(e){200===e.estado_p&&this.uploadTable()}},{key:"uploadTable",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_produccion_fichas_items_etapa_actual",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat})}},{key:"grabarItem",value:function(){var e={produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id,puntos:this.props.data.puntos};console.log("BODY ENVIADO ----\x3e",e),this.generalFormat.nombre_accion="servicio_marcarsigte_etapa_fichas_etapas_2",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);d.a.addController("EtaProd",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.keyUpDocument=o.keyUpDocument.bind(Object(s.a)(o)),o.changeId=o.changeId.bind(Object(s.a)(o)),o.onSuccessCharge=o.onSuccessCharge.bind(Object(s.a)(o)),o.error=o.error.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("nit_proveedor").setKeyUp(this.keyUpDocument),this.getField("nit_proveedor").setSelectionChanged=this.changeId,this.buttons.get("btn_change").ref.current.setSuccess(this.onSuccessSave.bind(this))}},{key:"keyUpDocument",value:function(e){13===(e.keyCode?e.keyCode:e.which)&&this.getField("verificacion").setValue("".calcularDigitoVerificacion(this.getField("nit_proveedor").getValue()))}},{key:"changeId",value:function(e){var t=this.getField("nit").getValue(),i=this.getField("sede").getValue();this.getField("nit").send(this.getField("nit").searchFormat().format(t+"/"+i,"sede","servicio",this.getFormId()),"GET",void 0,this.onSuccessCharge,this.error)}},{key:"onSuccessCharge",value:function(e){200===e.estado_p&&e.model.length>0&&(this.data=e.model[0],this.loadDataExternalForm(),this.getField("nit_proveedor").valid()&this.getField("verificacion").valid()&&this.getField("modal_facturacion_electronica").handleClose())}},{key:"onSuccessSave",value:function(){this.getField("modal_facturacion_electronica").handleClickOpen(),this.initForm()}},{key:"error",value:function(){}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.handlerClickSave=o.handlerClickSave.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.buttons.has("btn_save")&&this.buttons.get("btn_save").ref.current.setClick(this.handlerClickSave)}},{key:"handlerClickSave",value:function(){var e=parseInt(this.getField("finicio").getValue().split("-")[2]),t=parseInt(this.getField("finicio").getValue().split("-")[1]),i=parseInt(this.getField("finicio").getValue().split("-")[0]),a=parseInt(this.getField("ffinal").getValue().split("-")[2]),o=parseInt(this.getField("ffinal").getValue().split("-")[1]),s=parseInt(this.getField("ffinal").getValue().split("-")[0]),r=e+t+i,n=new Date,d=a+o+s;n.getFullYear()+(n.getMonth()+1)+n.getDate()>r?this.getField("finicio").setError(!0,"Esta fecha no puede ser menor a la fecha actual"):r>d?this.getField("ffinal").setError(!0,"Esta fecha no puede ser menor a la fecha inicial"):"T"!==this.getField("tipo_formato").getValue()&&"P"!==this.getField("tipo_formato").getValue()?this.getField("tipo_formato").setError(!0,"El valor de este campo debe ser T \xf3 P"):this.onClickSave()}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.dataTable=o.dataTable.bind(Object(s.a)(o)),o.successDataTableFamiliasAliasProd=o.successDataTableFamiliasAliasProd.bind(Object(s.a)(o)),o.onSelectionChangedItems=o.onSelectionChangedItems.bind(Object(s.a)(o)),o.gridOptionsFamiliaAliasProd=Object.assign({},o.gridOptions),o.gridOptionsFamiliaAliasProd.onSelectionChanged=o.onSelectionChangedItems,o.AbrirModalFamiliasAliasProducto=o.AbrirModalFamiliasAliasProducto.bind(Object(s.a)(o)),o.setButtonEliminar=o.setButtonEliminar.bind(Object(s.a)(o)),o.eliminarConfirmar=o.eliminarConfirmar.bind(Object(s.a)(o)),o.confirmDeleteCustomEliminar=o.confirmDeleteCustomEliminar.bind(Object(s.a)(o)),o.setButtonInactivar=o.setButtonInactivar.bind(Object(s.a)(o)),o.inactivar=o.inactivar.bind(Object(s.a)(o)),o.successInactivar=o.successInactivar.bind(Object(s.a)(o)),o.cleanTableDataFamilias=o.cleanTableDataFamilias.bind(Object(s.a)(o)),o.successEliminarItemFamilias=o.successEliminarItemFamilias.bind(Object(s.a)(o)),o.crearFamiliasAliasProductos=o.crearFamiliasAliasProductos.bind(Object(s.a)(o)),o.successCrearFamiliasAliasProd=o.successCrearFamiliasAliasProd.bind(Object(s.a)(o)),o.consultarArticulosAliasColores=o.consultarArticulosAliasColores.bind(Object(s.a)(o)),o.successArticulosAliasColores=o.successArticulosAliasColores.bind(Object(s.a)(o)),o.idEliminar=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("color").setOnChange(this.consultarArticulosAliasColores),this.getField("alias").setOnChange(this.consultarArticulosAliasColores),this.getField("tercero_id").setOnChange(this.dataTable),this.getField("agregar").setDisabled(!0),this.getField("agregar").setClick(this.AbrirModalFamiliasAliasProducto),this.getField("nombre_cliente").setOnChange(this.cleanTableDataFamilias),this.getField("agregar_familia").setClick(this.crearFamiliasAliasProductos)}},{key:"consultarArticulosAliasColores",value:function(){if(""!==this.getField("colores_id").getValue()&&""!==this.getField("articulo_familias_alias_id").getValue()){var e={alias:this.getField("alias").getValue(),color:this.getField("color").getValue()};this.generalFormat.nombre_accion="retorna_articulo_por_alias_color",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successArticulosAliasColores,error:this.error_,general:this.generalFormat})}}},{key:"successArticulosAliasColores",value:function(e){if(200===e.estado_p){if(e.data.length>=1){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.codigo,i.campos_cambian={articulo_id:e.id},t.push(i)})),this.getField("select_articulo_id").setOptions(t)}}else{this.getField("select_articulo_id").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}])}}},{key:"onSelectionChangedItems",value:function(){}},{key:"cleanTableDataFamilias",value:function(){this.getField("agregar").setDisabled(!0),this.gridOptionsFamiliaAliasProd.rowData=[],this.getField("tabla_familias_alias_productos").initData(this.gridOptionsFamiliaAliasProd),this.getField("tabla_familias_alias_productos").toggle(!1)}},{key:"dataTable",value:function(){if(""!==this.getField("tercero_id").getValue()){this.getField("agregar").setDisabled(!1);var e={value:this.getField("tercero_id").getValue()};this.generalFormat.nombre_accion="terceroid_articulos_fami_alias_cliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDataTableFamiliasAliasProd,error:this.error_,general:this.generalFormat})}}},{key:"successDataTableFamiliasAliasProd",value:function(e){if(200===e.estado_p){this.gridOptionsFamiliaAliasProd.rowData=e.model;var t=new Map;t.set("eliminar",{cellRenderer:this.setButtonEliminar,field:"eliminar",width:120}),t.set("activar",{cellRenderer:this.setButtonInactivar,field:"activar",width:120}),this.getField("tabla_familias_alias_productos").initData(this.gridOptionsFamiliaAliasProd,t)}else this.getField("tabla_familias_alias_productos").toggle(!1)}},{key:"setButtonEliminar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarConfirmar(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarConfirmar",value:function(e){this.idEliminar=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustomEliminar),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustomEliminar",value:function(){this.getField("confirmModalCustom").toggle(!1);var e={id:this.idEliminar};this.generalFormat.nombre_accion="elimina_un_articulo_familias_alias_clientes",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successEliminarItemFamilias,error:this.error_,general:this.generalFormat})}},{key:"successEliminarItemFamilias",value:function(e){200===e.estado_p&&(this.cleanTableDataFamilias(),this.dataTable())}},{key:"setButtonInactivar",value:function(e){var t=this,i=document.createElement("input"),a=e.data.estado_descripcion;return i.onclick=function(){return t.inactivar(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),"Activo"===a?i.setAttribute("value","Inactivar"):"Inactivo"===a&&i.setAttribute("value","Activar"),i}},{key:"inactivar",value:function(e){var t={id:e};this.generalFormat.nombre_accion="activa_un_articulo_familias_alias_clientes",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successInactivar,error:this.error_,general:this.generalFormat})}},{key:"successInactivar",value:function(e){200===e.estado_p&&this.dataTable()}},{key:"AbrirModalFamiliasAliasProducto",value:function(){""!==this.getField("nit").getValue()&&this.getField("modal_familias").handleClickOpen()}},{key:"crearFamiliasAliasProductos",value:function(){if(this.getField("precio").valid()&&this.getField("estados_activos_id").valid()&&this.getField("select_articulo_id").valid()&&""!==this.getField("tercero_id").getValue()){var e={articulo_familias_alias_id:this.getField("articulo_familias_alias_id").getValue(),articulo_id:this.getField("articulo_id").getValue(),tercero_id:this.getField("tercero_id").getValue(),precio:this.getField("precio").getValue(),estados_activos_id:this.getField("estados_activos_id").getValue()};this.generalFormat.nombre_accion="crea_articulo_familias_alias_cliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCrearFamiliasAliasProd,error:this.error_,general:this.generalFormat})}}},{key:"successCrearFamiliasAliasProd",value:function(e){200===e.estado_p&&(this.getField("modal_familias").handleClose(),this.cleanTableDataFamilias(),this.dataTable())}}]),i}(d.a.form);d.a.addController("familias_alias_prod",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initElementModal=function(){if(o.getField("codigo").valid()&o.getField("nombre").valid()&o.getField("articulo_id").valid()){var e={value:o.getField("articulo_id").getValue()};o.generalFormat.nombre_accion="servicio_traer_orden_formulas_prod",o.service.send({endpoint:o.constant.formConfiguration(),method:"GET",body:e,success:o.successNuevoOrden,error:o.error_,general:o.generalFormat})}else o.getField("modalFormulas").handleClose()},o.initForm=o.initForm.bind(Object(s.a)(o)),o.setButtonBajar=o.setButtonBajar.bind(Object(s.a)(o)),o.setButtonSubir=o.setButtonSubir.bind(Object(s.a)(o)),o.grabarDatos=o.grabarDatos.bind(Object(s.a)(o)),o.successPostSustituto=o.successPostSustituto.bind(Object(s.a)(o)),o.deleteEspecification=o.deleteEspecification.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.consultarEspecificaciones=o.consultarEspecificaciones.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.limpiar=o.limpiar.bind(Object(s.a)(o)),o.openModal=o.openModal.bind(Object(s.a)(o)),o.verificacionFabricado=o.verificacionFabricado.bind(Object(s.a)(o)),o.cambiarOrden=o.cambiarOrden.bind(Object(s.a)(o)),o.successChangeOrden=o.successChangeOrden.bind(Object(s.a)(o)),o.successNuevoOrden=o.successNuevoOrden.bind(Object(s.a)(o)),o.successSustituto=o.successSustituto.bind(Object(s.a)(o)),o.confirmDeleteCustom=o.confirmDeleteCustom.bind(Object(s.a)(o)),o.id_delete=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnConsultar").setClick(this.consultarEspecificaciones),this.getField("btnNuevo").setClick(this.openModal),this.getField("codigo").setOnChange(this.limpiar)}},{key:"verificacionFabricado",value:function(e){void 0!==e&&(this.getField("codigo").getValue()!==e.codigo?(this.getField("codigo_articulo").setError(!1,""),1===e.es_producto_fabricado_id?(this.getField("codigo_articulo").setError(!0,"* El art\xedculo debe ser creado por la empresa"),this.getField("nombre_articulo").setValue(""),this.getField("articulo_componente_id").setValue("")):this.getField("codigo_articulo").setError(!1,"")):(this.getField("codigo_articulo").setError(!0,"* El art\xedculo componente no puede ser el mismo"),this.getField("nombre_articulo").setValue(""),this.getField("articulo_componente_id").setValue("")))}},{key:"openModal",value:function(){this.getField("modalFormulas").handleClickOpen(this.initElementModal.bind(this))}},{key:"successNuevoOrden",value:function(e){200===e.estado_p&&(this.getField("orden").setValue(e.model[0].orden),this.getField("btnGrabar").setClick(this.grabarDatos),this.getField("codigo_articulo").setCustomSuccess(this.verificacionFabricado))}},{key:"consultarEspecificaciones",value:function(){if(2===parseInt(this.getField("es_producto_fabricado_id").getValue()))this.getField("codigo").setError(!0,"* El art\xedculo debe ser creado por la empresa"),this.getField("nombre").setValue(""),this.getField("articulo_id").setValue(""),this.getField("btnNuevo").setVisible(!1);else if(1===parseInt(this.getField("es_producto_fabricado_id").getValue())&&(this.getField("codigo").setError(!1,""),this.getField("codigo").valid()&this.getField("nombre").valid()&this.getField("articulo_id").valid())){var e={value:this.getField("articulo_id").getValue()};this.generalFormat.nombre_accion="servicio_traer_por_articulo_Y_id_formulas_productos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successSustituto,error:this.error_,general:this.generalFormat})}}},{key:"limpiar",value:function(){this.getField("btnNuevo").setVisible(!1),this.getField("tablaFormulaProductos").toggle(!1)}},{key:"successSustituto",value:function(e){if(this.getField("btnNuevo").setVisible(!0),void 0!==e.model)if(e.model.length>0){var t=new Map;t.set(0,{cellRenderer:this.setButtonDelete,field:"Operaci\xf3n 1"}),t.set(1,{cellRenderer:this.setButtonSubir,field:"Operaci\xf3n 2"}),t.set(2,{cellRenderer:this.setButtonBajar,field:"Operaci\xf3n 3"}),this.gridOptions.rowData=e.model,this.tamanoDatos=e.model.length,this.getField("tablaFormulaProductos").initData(this.gridOptions,t)}else this.getField("tablaFormulaProductos").toggle(!1)}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteEspecification(i)},a.setAttribute("id","button_delete_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Eliminar"),a}},{key:"setButtonSubir",value:function(e){var t=this,i=e.data.id,a=parseInt(e.node.id),o=document.createElement("input");return o.onclick=function(){return t.cambiarOrden(a,1)},o.setAttribute("id","button_subir_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Subir"),1===parseInt(e.data.orden)&&(o.setAttribute("style","width:100%; height: 100%; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),o.setAttribute("disabled",!0)),o}},{key:"setButtonBajar",value:function(e){var t=this,i=e.data.id,a=parseInt(e.node.id),o=document.createElement("input");return o.onclick=function(){return t.cambiarOrden(a,0)},o.setAttribute("id","button_bajar_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Bajar"),4!==parseInt(e.data.orden)&&5!==parseInt(e.data.orden)||(o.setAttribute("style","width:100%; height: 100%; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),o.setAttribute("disabled",!0)),o}},{key:"cambiarOrden",value:function(e,t){var i=1===t?{id_item_1:parseInt(this.gridOptions.api.getRowNode(e-1).data.id),id_item_2:parseInt(this.gridOptions.api.getRowNode(e).data.id)}:{id_item_1:parseInt(this.gridOptions.api.getRowNode(e).data.id),id_item_2:parseInt(this.gridOptions.api.getRowNode(e+1).data.id)};this.generalFormat.nombre_accion="servicio_cambiar_orden_formalasproductos",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successChangeOrden,error:this.error_,general:this.generalFormat})}},{key:"successChangeOrden",value:function(e){200===e.estado_p&&this.uploadTable()}},{key:"deleteEspecification",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustom),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustom",value:function(){this.getField("confirmModalCustom").toggle(!1);var e={id:this.id_delete};this.generalFormat.nombre_accion="servicio_eliminar_formulas_productos",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successDelete,error:this.error_,general:this.generalFormat})}},{key:"successDelete",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.uploadTable())}},{key:"grabarDatos",value:function(){if(this.getField("articulo_id").valid()&this.getField("codigo_articulo").valid()&this.getField("nombre_articulo").valid()&this.getField("etapa_id").valid()&this.getField("articulo_componente_id").valid()&this.getField("unidad_id").valid()&this.getField("cantidad").valid()&this.getField("orden").valid()){var e={articulo_id:this.getField("articulo_id").getValue(),etapa_id:this.getField("etapa_id").getValue(),articulo_componente_id:this.getField("articulo_componente_id").getValue(),unidad_id:this.getField("unidad_id").getValue(),cantidad:this.getField("cantidad").getValue(),orden:this.getField("orden").getValue()};this.generalFormat.nombre_accion="servicio_crear_formulas_productos",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successPostSustituto,error:this.error_,general:this.generalFormat})}}},{key:"successPostSustituto",value:function(e){200===e.estado_p&&(this.getField("modalFormulas").handleClose(),this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.getField("cantidad").setValue(""),this.getField("orden").setValue(""),this.getField("codigo_articulo").setValue(""),this.getField("unidad_id").setValue(" "),this.getField("etapa_id").setValue(" "),this.uploadTable())}},{key:"uploadTable",value:function(){if(this.getField("codigo").valid()&this.getField("nombre").valid()&this.getField("articulo_id").valid()){var e={value:this.getField("articulo_id").getValue()};this.generalFormat.nombre_accion="servicio_traer_por_articulo_Y_id_formulas_productos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successSustituto,error:this.error_,general:this.generalFormat})}}}]),i}(d.a.form);d.a.addController("FormProd",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).onSelectionChanged=function(){o.getField("modal_documento").handleClose()},o.error_=function(e){},o.depto_interno_defecto="",o.placa_defecto="",o.setDocumentoFuente=o.setDocumentoFuente.bind(Object(s.a)(o)),o.successPostCountOne=o.successPostCountOne.bind(Object(s.a)(o)),o.setBanco=o.setBanco.bind(Object(s.a)(o)),o.initForm=o.initForm.bind(Object(s.a)(o)),o.successDocumentMov=o.successDocumentMov.bind(Object(s.a)(o)),o.setBase=o.setBase.bind(Object(s.a)(o)),o.setNuevo=o.setNuevo.bind(Object(s.a)(o)),o.setTotal=o.setTotal.bind(Object(s.a)(o)),o.searchDoc=o.searchDoc.bind(Object(s.a)(o)),o.items=0,o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.deleteItem=o.deleteItem.bind(Object(s.a)(o)),o.validarFechas=o.validarFechas.bind(Object(s.a)(o)),o.validarFechas2=o.validarFechas2.bind(Object(s.a)(o)),o.grabarDatos=o.grabarDatos.bind(Object(s.a)(o)),o.guardarDatos=o.guardarDatos.bind(Object(s.a)(o)),o.limpiarConsecutivo=o.limpiarConsecutivo.bind(Object(s.a)(o)),o.limpiarComprobante=o.limpiarComprobante.bind(Object(s.a)(o)),o.setValueField=o.setValueField.bind(Object(s.a)(o)),o.numeroDocumento=o.numeroDocumento.bind(Object(s.a)(o)),o.successConfiguracion=o.successConfiguracion.bind(Object(s.a)(o)),o.cambioDeCuenta=o.cambioDeCuenta.bind(Object(s.a)(o)),o.cuentaIva=o.cuentaIva.bind(Object(s.a)(o)),o.successTraerConsecutivo=o.successTraerConsecutivo.bind(Object(s.a)(o)),o.traerConsecutivo=o.traerConsecutivo.bind(Object(s.a)(o)),o.cuentaRetencion=o.cuentaRetencion.bind(Object(s.a)(o)),o.successSelectIva=o.successSelectIva.bind(Object(s.a)(o)),o.successSelectRetencion=o.successSelectRetencion.bind(Object(s.a)(o)),o.successFechaBloqueo=o.successFechaBloqueo.bind(Object(s.a)(o)),o.validarFechasBloqueo=o.validarFechasBloqueo.bind(Object(s.a)(o)),o.sendSearchMov=o.sendSearchMov.bind(Object(s.a)(o)),o.dataToSend=[],o.fechaDocValida=!0,o.fecha_desde="",o.fecha_hasta="",o.gridOptions2=Object.assign({},o.gridOptions),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.validarMovimiento=o.validarMovimiento.bind(Object(s.a)(o)),o.cleanValid=o.cleanValid.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"setValueField",value:function(e,t){var i=this.getField(e);i&&i.setValue(t)}},{key:"initForm",value:function(){console.log("Grabaci\xf3n de Movimientos Contables @version 1.01.0011, @author Juan David Nieto"),this.getField("codigo_documento").setDisabled(!0),this.getField("cuenta_de_iva").setOnChange(this.cuentaIva),this.getField("cuenta_de_retefuente").setOnChange(this.cuentaRetencion),this.gridOptions2.onSelectionChanged=this.onSelectionChanged,this.getField("grabar")&&this.getField("grabar").setClick(this.grabarDatos),this.getField("maneja_documento")&&this.getField("maneja_documento").setOnChange(this.setDocumentoFuente),this.getField("sTipoFuente").setOnChange(this.setDocumentoFuente),this.getField("nBase")&&this.getField("nBase").setKeyUp(this.setTotal),this.getField("nTarifa")&&this.getField("nTarifa").setOnChange(this.setTotal),this.getField("es_modificable").setOnChange(this.numeroDocumento),this.getField("maneja_base")&&this.getField("maneja_base").setOnChange(this.setBase),this.getField("maneja_banco")&&this.getField("maneja_banco").setOnChange(this.setBanco),this.getField("guardar")&&(this.getField("guardar").setClick(this.guardarDatos),this.getField("guardar").setDisabled(!0)),this.getField("sBanco")&&this.getField("sBanco").setDisabled(!0),this.getField("buscar_doc")&&(this.getField("buscar_doc").setClick(this.searchDoc),this.getField("buscar_doc").setDisabled(!0)),this.getField("nuevo_documento").setOnChange(this.setNuevo),this.getField("nBase").setDisabled(!0),this.getField("nTarifa").setDisabled(!0),this.getField("fecha_documento").setDisabled(!0),this.getField("sVence").setDisabled(!0),this.getField("nValor").setDisabled(!0),this.getField("sLlave").setDisabled(!0),this.getField("total_debito").setValue(0),this.getField("total_credito").setValue(0),this.getField("total_diferencia").setValue(0),this.getField("sDocumentoFuente").setDisabled(!0),this.getField("nuevo_documento").setValue("S"),this.getField("comprobante").setDisabled(!0),this.getField("nombre_comprobante").setOnChange(this.traerConsecutivo),this.getField("nCodigoCuenta").setOnChange(this.cambioDeCuenta),this.getField("sCodigoSucursal").setCustomSuccess(this.validarFechasBloqueo),this.sendSearchMov("230-Busca las configuraciones_xml",this.successConfiguracion),this.sendSearchMov("Servicio_traer_tarifas_iva_grabacion",this.successSelectIva),this.getField("nombre_cuenta").setOnChange(this.validarMovimiento)}},{key:"cleanValid",value:function(){this.getField("movimiento").setError(!1,"* Cuenta mal configurada"),this.getField("tipo").setError(!1,"* Cuenta mal configurada"),this.getField("sCodigoSucursal").setError(!1,"* Este campo es requerido."),this.getField("nombre_sucursal").setError(!1,"* Este campo es requerido."),this.getField("comprobante").setError(!1,"* Este campo es requerido."),this.getField("nombre_comprobante").setError(!1,"* Este campo es requerido."),this.getField("codigo_documento").setError(!1,"* Este campo es requerido."),this.getField("nCodigoCuenta").setError(!1,"* Este campo es requerido."),this.getField("nombre_cuenta").setError(!1,"* Este campo es requerido."),this.getField("nNit").setError(!1,"* Este campo es requerido."),this.getField("nSede").setError(!1,"* Este campo es requerido."),this.getField("nombre").setError(!1,"* Este campo es requerido."),this.getField("nNitResponsable").setError(!1,"* Este campo es requerido."),this.getField("nSedeResponsable").setError(!1,"* Este campo es requerido."),this.getField("nombre_responsable").setError(!1,"* Este campo es requerido."),this.getField("sDeptoInterno").setError(!1,"* Este campo es requerido."),this.getField("nombre_dpto").setError(!1,"* Este campo es requerido."),this.getField("sCentroCosto").setError(!1,"* Este campo es requerido."),this.getField("nombre_costo").setError(!1,"* Este campo es requerido."),this.getField("fecha").setError(!1,"* Este campo es requerido."),this.getField("sDocumentoFuente").setError(!1,"* Este campo es requerido."),this.getField("sDetalle").setError(!1,"* Este campo es requerido."),this.getField("nBase").setError(!1,"* Este campo es requerido."),this.getField("nTarifa").setError(!1,"* Este campo es requerido."),this.getField("nValor").setError(!1,"* Este campo es requerido."),this.getField("maneja_documento").setError(!1,"* Este campo es requerido."),this.getField("maneja_banco").setError(!1,"* Este campo es requerido."),this.getField("fecha_documento").setError(!1,"* Este campo es requerido."),this.getField("maneja_base").setError(!1,"* Este campo es requerido."),this.getField("sTipoFuente").setError(!1,"* Este campo es requerido."),this.getField("nuevo_documento").setError(!1,"* Este campo es requerido."),this.getField("buscar_doc").setError(!1,"* Este campo es requerido."),this.getField("sVence").setError(!1,"* Este campo es requerido."),this.getField("sPlacaVehiculo").setError(!1,"* Este campo es requerido."),this.getField("modelo").setError(!1,"* Este campo es requerido."),this.getField("sBanco").setError(!1,"* Este campo es requerido."),this.getField("sLlave").setError(!1,"* Este campo es requerido."),this.getField("sReferencia").setError(!1,"* Este campo es requerido."),this.getField("fecha_desde").setError(!1,"* Este campo es requerido."),this.getField("fecha_hasta").setError(!1,"* Este campo es requerido."),this.getField("fecha_bloqueo").setError(!1,"* Este campo es requerido."),this.getField("modal_documento").setError(!1,"* Este campo es requerido."),this.getField("es_modificable").setError(!1,"* Este campo es requerido."),this.getField("cuenta_de_retefuente").setError(!1,"* Este campo es requerido."),this.getField("cuenta_de_iva").setError(!1,"* Este campo es requerido."),this.getField("iva_ventas").setError(!1,"* Este campo es requerido."),this.getField("nTarifaRetencion").setError(!1,"* Este campo es requerido."),this.getField("cuenta_de_retefuente").setError(!1,"* Este campo es requerido."),this.getField("cuenta_de_reteiva").setError(!1,"* Este campo es requerido."),this.getField("cuenta_de_reteica").setError(!1,"* Este campo es requerido.")}},{key:"validarMovimiento",value:function(){if(this.cleanValid(),this.getField("movimiento").setError(!1,"* Cuenta mal configurada"),this.getField("tipo").setError(!1,"* Cuenta mal configurada"),""!==this.getField("movimiento").getValue()&&""!==this.getField("tipo").getValue()){var e=this.getField("movimiento").getValue(),t=this.getField("tipo").getValue(),i=this.getField("maneja_documento_fuente").getValue();"S"===e?"S"===i&&"C"===t||"S"===i&&"P"===t||"N"===i&&"N"===t?(this.getField("movimiento").setError(!1,"* Cuenta mal configurada"),this.getField("tipo").setError(!1,"* Cuenta mal configurada"),this.getField("grabar").setDisabled(!1)):(this.getField("movimiento").setError(!0,"* Cuenta mal configurada"),this.getField("tipo").setError(!0,"* Cuenta mal configurada"),this.getField("grabar").setDisabled(!0)):"N"===e?(this.getField("movimiento").setError(!1,"* No Maneja Movimiento"),this.getField("grabar").setDisabled(!1)):(this.getField("movimiento").setError(!0,"* Cuenta mal configurada"),this.getField("tipo").setError(!0,"* Cuenta mal configurada"),this.getField("grabar").setDisabled(!0))}}},{key:"sendSearchMov",value:function(e,t){this.generalFormat.nombre_accion=e,this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",success:t,error:this.error_,general:this.generalFormat})}},{key:"limpiarComprobante",value:function(){this.getField("comprobante").setDisabled(!0),this.getField("nombre_sucursal").setValue(""),this.getField("comprobante").setValue(""),this.cleanValid()}},{key:"limpiarConsecutivo",value:function(){this.getField("nombre_comprobante").setValue(""),this.getField("codigo_documento").setValue(""),this.cleanValid()}},{key:"traerConsecutivo",value:function(){if(this.cleanValid(),""!==this.getField("nombre_comprobante").getValue()){var e={codigo_sucursal:this.getField("sCodigoSucursal").getValue(),codigo_documento:this.getField("comprobante").getValue(),fecha:this.getField("fecha").getValue()};this.generalFormat.nombre_accion="traerconsecutivo_documentos-230",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerConsecutivo,error:this.error_,general:this.generalFormat})}}},{key:"successTraerConsecutivo",value:function(e){200===e.estado_p&&(this.getField("codigo_documento").setValue(e.model[0].numero),this.getField("es_modificable").setValue(e.model[0].modificable))}},{key:"validarFechasBloqueo",value:function(e){if(this.cleanValid(),e&&void 0!==e[0]&&e[0].codigo_sucursal){this.getField("comprobante").setDisabled(!1);var t={value:e[0].codigo_sucursal};this.generalFormat.nombre_accion="servicio_traer_fechas_bloqueadas_por_sucursal",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successFechaBloqueo,error:this.error_,general:this.generalFormat})}else this.getField("comprobante").setDisabled(!0),this.limpiarComprobante()}},{key:"successFechaBloqueo",value:function(e){200===e.estado_p&&(this.getField("fecha_hasta").setValue(e.model[0].fecha_hasta),this.getField("fecha_desde").setValue(e.model[0].fecha_desde))}},{key:"successSelectIva",value:function(e){if(200===e.estado_p){var t=[{value:" ",text:"Ninguno"}],i=!1;if(e.model.forEach((function(e){var a={};a.value=parseInt(e.iva_ventas),a.text="iva_ventas:"+e.iva_ventas,a.campos_cambian={nTarifa:e.iva_ventas},t.push(a),100===e.iva_ventas&&(i=!0)})),!i){var a={value:100,text:"iva_ventas:100",campos_cambian:{nTarifa:100}};t.push(a)}this.getField("iva_ventas").setOptions(t)}}},{key:"successSelectRetencion",value:function(e){if(200===e.estado_p){var t=[],i=!1;if(e.model.forEach((function(e){var a={};a.value=parseInt(e.tarifa_ventas),a.text="tarifa_ventas:"+e.tarifa_ventas,a.campos_cambian={nTarifa:e.tarifa_ventas},t.push(a),100===e.tarifa_ventas&&(i=!0)})),!i){var a={value:100,text:"tarifa_ventas:100",campos_cambian:{nTarifa:100}};t.push(a)}this.getField("nTarifaRetencion").setOptions(t)}}},{key:"cuentaIva",value:function(){this.cleanValid(),"S"===this.getField("cuenta_de_iva").getValue()?(this.getField("iva_ventas").setVisible(!0),this.getField("iva_ventas").setValue(" "),this.getField("nTarifa").setValue(0),this.getField("nTarifa").setDisabled(!0)):this.getField("iva_ventas").setVisible(!1)}},{key:"cuentaRetencion",value:function(){this.cleanValid(),void 0!==this.getField("cuenta_de_retefuente")&&void 0!==this.getField("cuenta_de_reteiva")&&void 0!==this.getField("cuenta_de_reteica")&&("S"===this.getField("cuenta_de_retefuente").getValue()||"S"===this.getField("cuenta_de_reteiva").getValue()||"S"===this.getField("cuenta_de_reteica").getValue()?"S"===this.getField("cuenta_de_iva").getValue()?this.getField("nTarifa").setDisabled(!0):this.getField("nTarifa").setDisabled(!1):this.getField("nTarifa").setDisabled(!0),"N"===this.getField("cuenta_de_retefuente").getValue()&&"N"===this.getField("cuenta_de_reteiva").getValue()&&"N"===this.getField("cuenta_de_reteica").getValue()&&"N"===this.getField("cuenta_de_iva").getValue()&&this.getField("nTarifa").setValue(0))}},{key:"cambioDeCuenta",value:function(e){this.cleanValid(),this.getField("nCodigoCuenta").getValue().startsWith("5")||this.getField("nCodigoCuenta").getValue().startsWith("6")||this.getField("nCodigoCuenta").getValue().startsWith("15")?(this.getField("sPlacaVehiculo").setDisabled(!1),this.getField("sPlacaVehiculo").setValue(""),this.getField("modelo").setValue("")):(this.getField("sPlacaVehiculo").setDisabled(!0),this.getField("sPlacaVehiculo").setValue(this.placa_defecto),this.getField("modelo").setValue(".")),this.getField("nCodigoCuenta").getValue().startsWith("5")?(this.getField("sDeptoInterno").setValue(""),this.getField("nombre_dpto").setValue(""),this.getField("sDeptoInterno").setDisabled(!1)):(this.getField("sDeptoInterno").setValue(this.depto_interno_defecto),this.getField("nombre_dpto").setValue("."),this.getField("sDeptoInterno").setDisabled(!0))}},{key:"numeroDocumento",value:function(){this.cleanValid(),"S"===this.getField("es_modificable").getValue()?(this.getField("codigo_documento").setDisabled(!1),this.getField("codigo_documento").setValue("")):"N"===this.getField("es_modificable").getValue()&&(this.getField("codigo_documento").setDisabled(!0),""!==this.getField("codigo_documento").getValue()&&(parseInt(this.getField("codigo_documento").getValue())?this.getField("codigo_documento").setValue(parseInt(this.getField("codigo_documento").getValue())+1):this.getField("codigo_documento").setValue(this.getField("codigo_documento").getValue())))}},{key:"setNuevo",value:function(){this.cleanValid(),"S"===this.getField("nuevo_documento").getValue()?(this.getField("sDocumentoFuente").setDisabled(!1),this.getField("sVence").setDisabled(!1),this.getField("fecha_documento").setDisabled(!1),this.getField("buscar_doc").setDisabled(!0),this.getField("sDocumentoFuente").setValue(""),this.getField("sLlave").setValue(0)):(this.getField("buscar_doc").setDisabled(!1),this.getField("sVence").setDisabled(!0),this.getField("fecha_documento").setDisabled(!0),this.getField("sDocumentoFuente").setDisabled(!0),this.getField("sDocumentoFuente").setValue(""),this.getField("sLlave").setValue(""))}},{key:"searchDoc",value:function(){if(this.cleanValid(),this.getField("nNit").valid()&this.getField("nSede").valid()&this.getField("sTipoFuente").valid()&this.getField("tipo").valid())if(this.getField("nCodigoCuenta").valid()){var e=this.getField("nNit").getValue(),t=this.getField("nSede").getValue(),i=parseInt(this.getField("nCodigoCuenta").getValue());if("C"===this.getField("sTipoFuente").getValue()){console.log(this.getField("modal_documento")),this.getField("modal_documento").handleClickOpen();var a={nit:e,sede:t,cuenta:i};this.generalFormat.nombre_accion="traer_cartera_cliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:a,success:this.successDocumentMov,error:this.error_,general:this.generalFormat})}else if("P"===this.getField("sTipoFuente").getValue()){this.getField("modal_documento").handleClickOpen();var o={nit:e,sede:t,cuenta:parseInt(this.getField("nCodigoCuenta").getValue())};this.generalFormat.nombre_accion="traer_tercero_documento_fuente_proveedor_nit_sede2",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:o,success:this.successDocumentMov,error:this.error_,general:this.generalFormat})}else alert("El Nit y Sede seleccionados no manejan ning\xfan documento"),this.getField("buscar_doc").setDisabled(!0),this.getField("sDocumentoFuente").setValue(".")}else this.getField("buscar_doc").setDisabled(!0),this.getField("sDocumentoFuente").setValue(".")}},{key:"successConfiguracion",value:function(e){if(void 0!==e&&200===e.estado_p)for(var t in e.model)"contabilidad_placa_vehiculo_por_defecto"===e.model[t].propiedad?this.placa_defecto=e.model[t].valor:"contabilidad_dpto_interno_por_defecto"===e.model[t].propiedad&&(this.depto_interno_defecto=e.model[t].valor);this.successSelectIva()}},{key:"successDocumentMov",value:function(e){if(console.log("model == ",e.data),e.model.length>0){this.gridOptions2.rowData=e.data;var t=new Map;t.set("valor",{cellRenderer:function(e){return"".formatoPrecio(e.data.valor)},field:"valor"}),t.set("saldo",{cellRenderer:function(e){return"".formatoPrecio(e.data.saldo)},field:"saldo"}),this.getField("tabla_grabacion_mov").initData(this.gridOptions2,t)}else this.getField("modal_documento").handleClose()}},{key:"setTotal",value:function(){this.cleanValid();var e=(isNaN(parseFloat(this.getField("nBase").getValue()))?0:this.getField("nBase").getValue())*(isNaN(parseFloat(this.getField("nTarifa").getValue()))?0:this.getField("nTarifa").getValue())/100;console.log(this.getField("nBase").getValue()),this.getField("nBase").valid()&&(0===parseInt(e)?(console.log("nbase igual a cero ",e),this.getField("nValor").setValue(0)):(console.log("nbase !== a cero ",e),this.getField("nValor").setValue("".redondear(parseFloat(e),2))))}},{key:"setBase",value:function(){this.cleanValid();var e=this.getField("maneja_base").getValue();"S"===e?(this.getField("nBase").setDisabled(!1),this.getField("nTarifa").setDisabled(!1),this.getField("nValor").setDisabled(!0),this.getField("nBase").setValue(0),this.getField("nValor").setValue(0)):"N"===e&&(this.getField("nBase").setDisabled(!0),this.getField("nTarifa").setDisabled(!0),this.getField("nValor").setDisabled(!1),this.getField("nBase").setValue(0),this.getField("nTarifa").setValue(0),this.getField("nValor").setValue(0))}},{key:"grabarDatos",value:function(){if(this.getField("sCodigoSucursal").valid()&&this.getField("nombre_sucursal").valid()&&this.getField("fecha").valid()&&this.getField("comprobante").valid()&&this.getField("nombre_comprobante").valid()&&this.getField("codigo_documento").valid()&&"0"!==this.getField("codigo_documento").getValue()&&this.getField("nNit").valid()&&this.getField("nSede").valid()&&this.getField("nombre").valid()&&this.getField("nNitResponsable").valid()&&this.getField("nSedeResponsable").valid()&&this.getField("nombre_responsable").valid()&&this.getField("nCodigoCuenta").valid()&&this.getField("nombre_cuenta").valid()&&this.getField("movimiento").valid()&&this.getField("tipo").valid()&&this.getField("sDeptoInterno").valid()&&this.getField("nombre_dpto").valid()&&this.getField("sPlacaVehiculo").valid()&&this.getField("modelo").valid()&&this.getField("sCentroCosto").valid()&&this.getField("nombre_costo").valid()&&this.getField("sReferencia").valid()&&this.getField("sDetalle").valid()&&this.getField("sDocumentoFuente").valid()&&this.getField("fecha_documento").valid()&&this.getField("sVence").valid()&&this.getField("nBase").valid()){this.cleanValid(),this.getField("fecha").setError(!1,"");var e=0,t="",i=!1,a=!0;if("S"!==this.getField("nuevo_documento").getValue()?(i=!0,a=!0):(this.getField("fecha_documento")&&(t=this.getField("fecha_documento").getValue()),t.split("-"),this.validarFechas(this.getField("sVence").getValue(),this.getField("fecha_documento").getValue(),0)?(i=!0,this.getField("sVence").setError(!1,"")):(i=!1,this.getField("sVence").setError(!0,"* Esta fecha no puede ser menor a la fecha del documento fuente")),t.split("-"),this.validarFechas(this.getField("fecha_documento").getValue(),this.getField("fecha_documento").getValue(),1)?(a=!0,this.getField("fecha_documento").setError(!1,"")):(a=!1,this.getField("fecha_documento").setError(!0,"* Esta fecha no puede ser mayor a dos meses anteriores"))),i&&a&&(this.getField("sCodigoSucursal").valid()&this.getField("fecha").valid()&this.getField("nombre_sucursal").valid()&this.getField("comprobante").valid()&this.getField("nombre_comprobante").valid()&this.getField("codigo_documento").valid()&&e++,this.getField("sDeptoInterno").valid()&this.getField("nombre_dpto").valid()&this.getField("nNitResponsable").valid()&this.getField("nSedeResponsable").valid()&this.getField("nombre_responsable").valid()&&e++,this.getField("nNit").valid()&this.getField("nSede").valid()&this.getField("nombre").valid()&this.getField("sPlacaVehiculo").valid()&this.getField("modelo").valid()&&e++,this.getField("sDocumentoFuente").valid()&this.getField("nBase").valid()&this.getField("nTarifa").valid()&this.getField("nValor").valid()&&e++,this.getField("nCodigoCuenta").valid()&this.getField("nombre_cuenta").valid()&this.getField("movimiento").valid()&this.getField("sCentroCosto").valid()&this.getField("nombre_costo").valid()&&e++,""!==this.getField("fecha_desde").getValue()&&""!==this.getField("fecha_hasta").getValue()&&(this.validarFechas2(this.getField("fecha_desde").getValue(),this.getField("fecha").getValue())&&this.validarFechas2(this.getField("fecha").getValue(),this.getField("fecha_hasta").getValue())?e++:(this.getField("fecha").setError(!0,"* La fecha debe estar entre "+this.getField("fecha_desde").getValue()+" y "+this.getField("fecha_hasta").getValue()),this.alertGeneral.toggle(!0,"* La fecha debe estar entre "+this.getField("fecha_desde").getValue()+" y "+this.getField("fecha_hasta").getValue(),"error"))),e>=6)){var o=this.getField("maneja_documento").getValue(),s=isNaN(parseFloat(this.getField("total_debito").getValue()))?0:parseFloat(this.getField("total_debito").getValue()),r=isNaN(parseFloat(this.getField("total_credito").getValue()))?0:parseFloat(this.getField("total_credito").getValue());if(parseFloat(this.getField("nValor").getValue())>0){var n=s+parseFloat(this.getField("nValor").getValue());this.getField("total_debito").setValue("".redondear(n,2))}else{var d=r+parseFloat(this.getField("nValor").getValue());this.getField("total_credito").setValue("".redondear(d,2))}var l=parseFloat(this.getField("total_debito").getValue())+parseFloat(this.getField("total_credito").getValue());this.getField("total_diferencia").setValue(l);var c=this.getField("fecha").getValue(),u={},g=this.getField("nValor").getValue(),h=this.getField("nBase").getValue(),m=this.getField("nTarifa").getValue();u.nCodigoCuenta=parseInt(this.getField("nCodigoCuenta").getValue()),u.sCentroCosto=this.getField("sCentroCosto").getValue(),u.nBase=parseFloat(h),u.nValor=parseFloat(g),u.sCodigoSucursal=this.getField("sCodigoSucursal").getValue(),u.sCodigoDocumento=this.getField("comprobante").getValue(),u.NumeroDocumento=this.getField("codigo_documento").getValue(),"S"===this.getField("es_modificable").getValue()?u.sNumeroDocumento=this.getField("codigo_documento").getValue():u.sNumeroDocumento="0",u.nNit=this.getField("nNit").getValue(),u.nNitResponsable=this.getField("nNitResponsable").getValue(),u.nSede=parseInt(this.getField("nSede").getValue()),u.nSedeResponsable=parseInt(this.getField("nSedeResponsable").getValue()),u.sBanco=this.getField("sBanco").getValue(),u.sDeptoInterno=this.getField("sDeptoInterno").getValue(),u.sDocumentoNiif=".",u.sNiif="N",u.sLlave="S"===o?this.getField("sLlave").getValue():"0",u.nCodigoCuentaNiif=0,u.sCodigoUsuario="gda",u.sCodigoOrigen="CONTA",u.sItem=this.items,u.nValorNiif=0,u.sDocumentoNit=".",u.sDetalleNiif=".",u.sDetalle=this.getField("sDetalle").getValue(),u.sTipoFuente=this.getField("sTipoFuente").getValue(),u.sDocumentoFuente=this.getField("sDocumentoFuente").getValue(),u.sFecha=c,u.sVence=this.getField("sVence").getValue(),u.nTarifa=parseFloat(m),u.sReferencia=this.getField("sReferencia").getValue(),u.sPlacaVehiculo=this.getField("sPlacaVehiculo").getValue(),u.nombre_cuenta=this.getField("nombre_cuenta").getValue(),u.movimiento=this.getField("movimiento").getValue(),u.tipo=this.getField("tipo").getValue(),u.nombre_dpto=this.getField("nombre_dpto").getValue(),u.modelo=this.getField("modelo").getValue(),u.nombre_costo=this.getField("nombre_costo").getValue(),u.nombre=this.getField("nombre").getValue(),u.nombre_responsable=this.getField("nombre_responsable").getValue(),u.cuenta_de_retefuente=this.getField("cuenta_de_retefuente").getValue(),u.cuenta_de_iva=this.getField("cuenta_de_iva").getValue(),u.cuenta_de_reteiva=this.getField("cuenta_de_reteiva").getValue(),u.cuenta_de_reteica=this.getField("cuenta_de_reteica").getValue(),u.maneja_base=this.getField("maneja_base").getValue(),this.dataToSend.push(u),this.updateTable(),0===l?this.getField("guardar").setDisabled(!1):this.getField("guardar").setDisabled(!0),this.items=this.items+1,this.limpiarCampos()}}else"0"===this.getField("codigo_documento").getValue()?(this.getField("codigo_documento").setError(!0,"El campo ** Nro documento debe ser diferente de 0 **."),this.alertGeneral.toggle(!0,"Alguno de los campos requeridos no est\xe1 diligenciado correctamente","error")):this.alertGeneral.toggle(!0,"Alguno de los campos requeridos no est\xe1 diligenciado correctamente","error")}},{key:"guardarDatos",value:function(){this.cleanValid();var e={data:this.dataToSend};this.generalFormat.nombre_accion="230-Crea un movimiento copiando los datos de un movimiento base",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successPostCountOne,error:this.error_,general:this.generalFormat})}},{key:"successPostCountOne",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.limpiar())}},{key:"limpiarCampos",value:function(){for(var e in this.cleanValid(),this.refs)"sCodigoSucursal"!==e&&"es_modificable"!==e&&"nombre_sucursal"!==e&&"comprobante"!==e&&"nombre_comprobante"!==e&&"codigo_documento"!==e&&"fecha"!==e&&"nNit"!==e&&"nSede"!==e&&"nombre"!==e&&"nNitResponsable"!==e&&"nSedeResponsable"!==e&&"nombre_responsable"!==e&&"fecha_documento"!==e&&"sVence"!==e&&"iva_ventas"!==e&&"nTarifaRetencion"!==e&&"fecha_desde"!==e&&"fecha_hasta"!==e?this.getField(e).valueDefault&&null!==this.getField(e).valueDefault&&void 0!==this.getField(e).valueDefault&&""!==this.getField(e).valueDefault?this.getField(e).setValue(this.getField(e).valueDefault):void 0!==this.getField(e).setValue&&"total_debito"!==e&&"fecha"!==e&&"total_credito"!==e&&"total_diferencia"!==e&&this.getField(e).setValue(""):"iva_ventas"!==e&&"nTarifaRetencion"!==e||this.getField(e).setValue(" ");this.getField("buscar_doc").setDisabled(!0),this.getField("nuevo_documento").setValue("S")}},{key:"limpiar",value:function(){for(var e in this.cleanValid(),this.refs)this.getField(e)&&null!==this.getField(e).valueDefault&&void 0!==this.getField(e).valueDefault&&""!==this.getField(e).valueDefault?this.getField(e).setValue(this.getField(e).valueDefault):void 0!==this.getField(e).setValue&&"fecha"!==e&&this.getField(e).setValue("");this.getField("guardar").setDisabled(!0),this.items=0,this.getField("sBanco").setDisabled(!0),this.getField("buscar_doc").setDisabled(!0),this.getField("comprobante").setDisabled(!0),this.getField("tabla_movimiento").toggle(!1),this.dataToSend=[],this.getField("nuevo_documento").setValue("S"),this.getField("total_debito").setValue(0),this.getField("total_credito").setValue(0),this.getField("total_diferencia").setValue(0)}},{key:"setDocumentoFuente",value:function(){this.cleanValid(),"N"===this.getField("maneja_documento").getValue()||"."===this.getField("sTipoFuente").getValue()||"N"===this.getField("sTipoFuente").getValue()?(this.getField("sDocumentoFuente").setValue("."),this.getField("sDocumentoFuente").setDisabled(!0),this.getField("sVence").setDisabled(!0),this.getField("fecha_documento").setDisabled(!0),this.getField("buscar_doc").setDisabled(!0),this.getField("sLlave").setValue(0),this.getField("nuevo_documento").setDisabled(!0)):"S"===this.getField("maneja_documento").getValue()&&(this.getField("sDocumentoFuente").setDisabled(!1),this.getField("sVence").setDisabled(!1),this.getField("fecha_documento").setDisabled(!1),this.getField("buscar_doc").setDisabled(!0),this.getField("sDocumentoFuente").setValue(""),this.getField("sLlave").setValue(0),this.getField("nuevo_documento").setDisabled(!1))}},{key:"setBanco",value:function(){this.cleanValid(),"N"===this.getField("maneja_banco").getValue()?(this.getField("sBanco").setDisabled(!0),this.getField("sBanco").setValue(".")):"S"===this.getField("maneja_banco").getValue()?this.getField("sBanco").setDisabled(!1):(this.getField("sBanco").setDisabled(!0),this.getField("sBanco").setValue(""))}},{key:"updateTable",value:function(){if(this.cleanValid(),0!==this.dataToSend.length){var e=new Map;e.set(0,{cellRenderer:this.setButtonDelete,width:120,sortable:!1,filter:!1,field:"Operaci\xf3n 1"}),e.set("nValor",{cellRenderer:function(e){return"".formatoPrecio(e.data.nValor)},width:120,field:"N Valor"}),e.set("nBase",{cellRenderer:function(e){return"".formatoPrecio(e.data.nBase)},width:120,field:"N Base"}),this.gridOptions.rowData=this.dataToSend,this.getField("tabla_movimiento").initData(this.gridOptions,e)}else this.getField("nValor").setValue(0),this.getField("total_debito").setValue(0),this.getField("total_credito").setValue(0),this.getField("total_diferencia").setValue(0),this.getField("tabla_movimiento").toggle(!1)}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=parseInt(e.node.id),o=document.createElement("input");return o.onclick=function(){return t.deleteItem(a)},o.setAttribute("id","button_delete_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Eliminar"),o}},{key:"deleteItem",value:function(e){for(var t=[],i=0;i<this.dataToSend.length;i++)if(i!==e)t.push(this.dataToSend[i]);else{for(var a in this.dataToSend[i])void 0!==this.getField(a)&&"nTarifa"!==a&&"nBase"!==a&&"nValor"!==a&&"sCodigoSucursal"!==a&&"nombre_ucursal"!==a&&"comprobante"!==a&&"nombre_comprobante"!==a&&this.getField(a).setValue(this.dataToSend[i][a]);this.getField("nTarifa").setValue(this.dataToSend[i].nTarifa),this.getField("nBase").setValue(this.dataToSend[i].nBase),this.getField("nValor").setValue(this.dataToSend[i].nValor),this.getField("iva_ventas").setValue(this.dataToSend[i].nTarifa),this.dataToSend[i].nValor<0?this.getField("total_credito").setValue(parseFloat(this.getField("total_credito").getValue())-parseFloat(this.dataToSend[i].nValor)):this.getField("total_debito").setValue(parseFloat(this.getField("total_debito").getValue())-parseFloat(this.dataToSend[i].nValor));var o=parseFloat(this.getField("total_debito").getValue())+parseFloat(this.getField("total_credito").getValue());this.getField("total_diferencia").setValue(o),0===o?this.getField("guardar").setDisabled(!1):this.getField("guardar").setDisabled(!0)}this.dataToSend=t,this.updateTable(),this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success")}},{key:"validarFechas",value:function(e,t,i){this.cleanValid();var a=parseInt(e.split("-")[2]),o=parseInt(e.split("-")[1]),s=parseInt(e.split("-")[0]),r=!0;if(1===i){var n=new Date,d=n.getFullYear(),l=n.getMonth()+1,c=n.getDate();r=s>d||s===d&&(o>l-2||o===l-2&&a>=c)}else{var u=parseInt(t.split("-")[2]),g=parseInt(t.split("-")[1]),h=parseInt(t.split("-")[0]);r=s>h||s===h&&(o>g||o===g&&a>=u)}return r}},{key:"validarFechas2",value:function(e,t){this.cleanValid();var i=parseInt(t.split("-")[2]),a=parseInt(t.split("-")[1]),o=parseInt(t.split("-")[0]),s=parseInt(e.split("-")[2]),r=parseInt(e.split("-")[1]),n=parseInt(e.split("-")[0]);return o>n||o===n&&(a>r||a===r&&i>=s)}}]),i}(d.a.form);d.a.addController("grabarmovcontable",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=i(109),c=i.n(l),u=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).verifyFile=function(e,t){o.getField("upload_file").setDisabled(!0);var i=c.a.read(e,{type:"binary",cellDates:!0,cellStyles:!0}),a=i.SheetNames[0],s=i.Sheets[a],r=c.a.utils.sheet_to_json(s),n=new Map;if(o.colsReadXlsx=Object.keys(r[0]),o.tamColRead=o.colsReadXlsx.length,o.tamColRead===o.titleXls.length?r.map((function(e,t){return 0===o.titlesError&&(o.JSONdata.set(t,e),o.titleXls.map((function(i,a){if(void 0!==e[i]){if("sederesponsable"!==i&&"sede"!==i&&"tarifa"!==i&&"base"!==i||isNaN(Number(e[i]))&&(n={Errores:"Valor no permitido en "+i+", en la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n)),"codigo_sucursal"===i&&o.colCodigosSucursal.set(e[i],o.colCodigosSucursal.get(e[i])?"".concat(o.colCodigosSucursal.get(e[i]),t+","):t+","),"centro_costo"===i&&o.colCentrosCosto.set(e[i],o.colCentrosCosto.get(e[i])?"".concat(o.colCentrosCosto.get(e[i]),t+","):t+","),"codigo_documento"===i&&o.colCodigosDocumento.set(e[i],o.colCodigosDocumento.get(e[i])?"".concat(o.colCodigosDocumento.get(e[i]),t+","):t+","),"codigo_cuenta"===i&&o.colCuentas.set(e[i],o.colCuentas.get(e[i])?"".concat(o.colCuentas.get(e[i]),t+","):t+","),"nit"===i&&o.colNitsSedes.set(e[i]+"."+parseInt(e.sede),o.colNitsSedes.get(e[i]+"."+e.sede)?"".concat(o.colNitsSedes.get(e[i]+"."+e.sede),t+","):t+","),"nitresponsable"===i&&o.colNitsSedesResp.set(e[i]+"."+e.sederesponsable,o.colNitsSedesResp.get(e[i]+"."+e.sederesponsable)?"".concat(o.colNitsSedesResp.get(e[i]+"."+e.sederesponsable),t+","):t+","),"base"===i&&(o.mBase+=parseFloat(e.base)),"tarifa"===i&&(o.mTarifa+=parseFloat(e.tarifa)),"valor"===i&&(""!==e.valor&&void 0!==e.valor&&null!==e.valor?(o.mValor=o.mValor+parseFloat(e.valor),console.log("es cero mValor",parseFloat(o.mValor))):(n={Errores:"Valor no permitido, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n))),"fecha"===i)if(void 0===e[i]||e[i]instanceof Date)if(e[i]instanceof Date){var s=e[i].getDay(),r=e[i].getMonth(),d=e[i].getFullYear()+"/"+r+"/"+s,l=o.validarFormatoFecha(d),c=o.existeFecha(d);l&&c||(n={Errores:"Fecha no permitida, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n))}else n={Errores:"Fecha no encontrada, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n);else{var u=e[i].replace(/-/g,"/"),g=o.validarFormatoFecha(u),h=o.existeFecha(u);g&&h||(n={Errores:"Fecha no permitida, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n))}if("vence"===i)if(void 0===e[i]||e[i]instanceof Date&&"vence"!==e[i])if(e[i]instanceof Date){var m=e[i].getDay(),_=e[i].getMonth(),b=e[i].getFullYear()+"/"+_+"/"+m,p=o.validarFormatoFecha(b),F=o.existeFecha(b);p&&F||(n={Errores:"Fecha no permitida, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n))}else n={Errores:"Fecha no encontrada, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n);else{var v=e[i].replace(/-/g,"/"),f=o.validarFormatoFecha(v),C=o.existeFecha(v);f&&C||(n={Errores:"Fecha no permitida, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n))}}else n={Errores:"No se encontro "+i+", En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n);return null}))),null})):o.tamColRead>o.titleXls.length?(n={Errores:"El n\xfamero de columnas es mayor al que es requerido"},o.errorTitleXLS2.push(n)):(n={Errores:"El n\xfamero de columnas es menor al que es requerido"},o.errorTitleXLS2.push(n)),r.map((function(e,t){return 0===o.titlesError&&(o.JSONdata.set(t,e),o.titleXls.map((function(i,a){if(void 0!==e[i]){if("sederesponsable"!==i&&"sede"!==i&&"tarifa"!==i&&"base"!==i||isNaN(Number(e[i]))&&(n={Errores:"Valor no permitido en "+i+", en la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n)),"codigo_sucursal"===i&&o.colCodigosSucursal.set(e[i],o.colCodigosSucursal.get(e[i])?"".concat(o.colCodigosSucursal.get(e[i]),t+","):t+","),"centro_costo"===i&&o.colCentrosCosto.set(e[i],o.colCentrosCosto.get(e[i])?"".concat(o.colCentrosCosto.get(e[i]),t+","):t+","),"codigo_documento"===i&&o.colCodigosDocumento.set(e[i],o.colCodigosDocumento.get(e[i])?"".concat(o.colCodigosDocumento.get(e[i]),t+","):t+","),"codigo_cuenta"===i&&o.colCuentas.set(e[i],o.colCuentas.get(e[i])?"".concat(o.colCuentas.get(e[i]),t+","):t+","),"nit"===i&&o.colNitsSedes.set(e[i]+"."+parseInt(e.sede),o.colNitsSedes.get(e[i]+"."+e.sede)?"".concat(o.colNitsSedes.get(e[i]+"."+e.sede),t+","):t+","),"nitresponsable"===i&&o.colNitsSedesResp.set(e[i]+"."+e.sederesponsable,o.colNitsSedesResp.get(e[i]+"."+e.sederesponsable)?"".concat(o.colNitsSedesResp.get(e[i]+"."+e.sederesponsable),t+","):t+","),"base"===i&&(o.mBase+=parseFloat(e.base)),"tarifa"===i&&(o.mTarifa+=parseFloat(e.tarifa)),"valor"===i&&(""!==e.valor?o.mValor=parseFloat(o.mValor)+parseFloat(e.valor):(n={Errores:"Valor no permitido, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n))),"fecha"===i)if(void 0===e[i]||e[i]instanceof Date)if(e[i]instanceof Date){var s=e[i].getDay(),r=e[i].getMonth(),d=e[i].getFullYear()+"/"+r+"/"+s,l=o.validarFormatoFecha(d),c=o.existeFecha(d);l&&c||(n={Errores:"Fecha no permitida, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n))}else n={Errores:"Fecha no encontrada, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n);else{var u=e[i].replace(/-/g,"/"),g=o.validarFormatoFecha(u),h=o.existeFecha(u);g&&h||(n={Errores:"Fecha no permitida, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n))}if("vence"===i)if(void 0===e[i]||e[i]instanceof Date&&"vence"!==e[i])if(e[i]instanceof Date){var m=e[i].getDay(),_=e[i].getMonth(),b=e[i].getFullYear()+"/"+_+"/"+m,p=o.validarFormatoFecha(b),F=o.existeFecha(b);p&&F||(n={Errores:"Fecha no permitida, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n))}else n={Errores:"Fecha no encontrada, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n);else{var v=e[i].replace(/-/g,"/"),f=o.validarFormatoFecha(v),C=o.existeFecha(v);f&&C||(n={Errores:"Fecha no permitida, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n))}}else n={Errores:"No se encontro "+i+", En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n);return null}))),null})),n.size>0){var d=[];n.forEach((function(e,t){d={Errores:e},o.errorTitleXLS2.push(d)}))}o.errorTitleXLS2.length>0&&(o.mValor=-1,o.success(o.errorTitleXLS2)),console.log("mValor fijado 2 decimales---",Math.abs(parseFloat(o.mValor.toFixed(2)))),o.mValor.toFixed(2)/2>-.01&&o.mValor<0?(o.mValor=Math.round(o.mValor),console.log("entro al if val",o.mValor)):o.mValor>0&&o.mValor.toFixed(2)/2<.01&&(o.mValor=Math.round(o.mValor),console.log("entro al else val",o.mValor)),console.log("mValor del condiicional--------",o.mValor);var l=document.getElementById("upload_file_label");0===Math.abs(o.mValor)?(l.textContent=t,o.verifyData()):-1!==o.mValor&&(console.log("entro al else menos uno",o.mValor),o.getField("progress_upload").setVisible(!1),n={Errores:"Error, El valor total es distinto de Cero"},o.errorTitleXLS2.push(n),o.success(o.errorTitleXLS2)),o.getField("upload_file").setDisabled(!1)},o.success=function(e){e.length>0?(o.gridOptions.rowData=e,o.getField("tabla_error").initData(o.gridOptions),o.getField("progress_upload").setVisible(!1)):(o.getField("tabla_error").toggle(!1),o.getField("progress_upload").setVisible(!1))},o.success=o.success.bind(Object(s.a)(o)),o.contadorNitSede=0,o.contadorNitSedeResp=0,o.contadorCentroCosto=0,o.contadorCodSucursal=0,o.contadorCuenta=0,o.contadorCodDocumento=0,o.successCuenta=o.successCuenta.bind(Object(s.a)(o)),o.successCodigoDocumento=o.successCodigoDocumento.bind(Object(s.a)(o)),o.successCodigoSucursal=o.successCodigoSucursal.bind(Object(s.a)(o)),o.successNitySede=o.successNitySede.bind(Object(s.a)(o)),o.successCentroCosto=o.successCentroCosto.bind(Object(s.a)(o)),o.initForm=o.initForm.bind(Object(s.a)(o)),o.verifyFile=o.verifyFile.bind(Object(s.a)(o)),o.uploadFile=o.uploadFile.bind(Object(s.a)(o)),o.verificarNitYSede=o.verificarNitYSede.bind(Object(s.a)(o)),o.validateResponse=o.validateResponse.bind(Object(s.a)(o)),o.verificarNitYSedeResp=o.verificarNitYSedeResp.bind(Object(s.a)(o)),o.successNitySedeResp=o.successNitySedeResp.bind(Object(s.a)(o)),o.successPost=o.successPost.bind(Object(s.a)(o)),o.rawsError=new Map,o.subirDatos=!0,o.errorFinales=new Map,o.JSONdata=new Map,o.mensajesError=new Map,o.mensajesError.set("centrocosto","Error en Centro Costo, "),o.mensajesError.set("codigodocumento","Error en C\xf3digo Documento, "),o.mensajesError.set("codigosucursal","Error en C\xf3digo Sucursal, "),o.mensajesError.set("nitsede","Error en Nit y Sede, "),o.mensajesError.set("nitsederesp","Error en Nit y Sede Responsable, "),o.mensajesError.set("cuenta","Error en Cuenta, "),o.mensajesError.set("centrocosto500","Error 500 en Centro Costo, "),o.mensajesError.set("codigodocumento500","Error 500 en C\xf3digo Documento, "),o.mensajesError.set("codigosucursal500","Error 500 en C\xf3digo Sucursal, "),o.mensajesError.set("nitsede500","Error 500 en Nit y Sede, "),o.mensajesError.set("nitsederesp500","Error 500 en Nit y Sede Responsable, "),o.mensajesError.set("cuenta500","Error 500 en Cuenta, "),o.mensajesError.set("centrocosto502","Error 502 en Centro Costo, "),o.mensajesError.set("codigodocumento502","Error 502 en C\xf3digo Documento, "),o.mensajesError.set("codigosucursal502","Error 502 en C\xf3digo Sucursal, "),o.mensajesError.set("nitsede502","Error 502 en Nit y Sede, "),o.mensajesError.set("nitsederesp502","Error 502 en Nit y Sede Responsable, "),o.mensajesError.set("cuenta502","Error 502 en Cuenta, "),o.mValor=0,o.colNitsSedes=new Map,o.colNitsSedesResp=new Map,o.colCodigosSucursal=new Map,o.colCentrosCosto=new Map,o.colCodigosDocumento=new Map,o.colCuentas=new Map,o.errorTitleXLS=new Map,o.errorTitleXLS2=[],o.valueValidate=new Map,o.dataToSend=[],o.colunmasCC=[],o.colunmasCD=[],o.colunmasCS=[],o.colunmasC=[],o.colunmasNS=[],o.colunmasNSR=[],o.titleXls=["codigo_sucursal","centro_costo","fecha","codigo_documento","numero_documento","codigo_cuenta","nit","sede","nitresponsable","sederesponsable","dpto_interno","detalle","base","tarifa","valor","niif","tipo_fuente","numero_fuente","banco","vence"],o.titleXLSsend=["sCodigoSucursal","sCentroCosto","sFecha","sCodigoDocumento","sNumeroDocumento","nCodigoCuenta","nNit","nSede","nNitResponsable","nSedeResponsable","sDeptoInterno","sDetalle","nBase","nTarifa","nValor","sNiif","sTipoFuente","sDocumentoFuente","sBanco","sVence"],o.titlesError=0,o.tamColRead=0,o.colsReadXlsx=[],o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Importar Datos, @version: 3.0.0, @author: Mario A Sepulveda"),this.getField("upload_file")&&this.getField("upload_file").setOnChange(this.uploadFile),this.getField("progress_upload")&&this.getField("progress_upload").setVisible(!1)}},{key:"uploadFile",value:function(e){document.getElementById("upload_file_label").textContent="",this.getField("tabla_error").toggle(!1),this.limpiarDatos();var t=e.target.files[0],i=new FileReader,a=this.verifyFile,o=this.getField;i.onloadend=function(e){var i=e.target.result;o("progress_upload").setVisible(!0),a(i,t.name)},t&&i.readAsBinaryString(t)}},{key:"limpiarDatos",value:function(){this.contadorNitSede=0,this.contadorNitSedeResp=0,this.contadorCentroCosto=0,this.contadorCodSucursal=0,this.contadorCuenta=0,this.contadorCodDocumento=0,this.rawsError=new Map,this.errorFinales=new Map,this.JSONdata=new Map,this.subirDatos=!0,this.mValor=0,this.colNitsSedes=new Map,this.colNitsSedesResp=new Map,this.colCodigosSucursal=new Map,this.colCentrosCosto=new Map,this.colCodigosDocumento=new Map,this.colCuentas=new Map,this.errorTitleXLS=new Map,this.errorTitleXLS2=[],this.valueValidate=new Map,this.dataToSend=[],this.colunmasCC=[],this.colunmasCD=[],this.colunmasCS=[],this.colunmasC=[],this.colunmasNS=[],this.colunmasNSR=[],this.titleXls=["codigo_sucursal","centro_costo","fecha","codigo_documento","numero_documento","codigo_cuenta","nit","sede","nitresponsable","sederesponsable","dpto_interno","detalle","base","tarifa","valor","niif","tipo_fuente","numero_fuente","banco","vence"],this.titleXLSsend=["sCodigoSucursal","sCentroCosto","sFecha","sCodigoDocumento","sNumeroDocumento","nCodigoCuenta","nNit","nSede","nNitResponsable","nSedeResponsable","sDeptoInterno","sDetalle","nBase","nTarifa","nValor","sNiif","sTipoFuente","sDocumentoFuente","sBanco","sVence"],this.titlesError=0,this.tamColRead=0,this.colsReadXlsx=[]}},{key:"verifyData",value:function(){var e=this,t=new Map;this.colCentrosCosto.forEach((function(t,i){e.verificarCentroCosto(i)})),this.colCodigosSucursal.forEach((function(t,i){e.verificarCodigoSucursal(i)})),this.colCodigosDocumento.forEach((function(t,i){e.verificarCodigoDocumento(i)})),this.colCuentas.forEach((function(t,i){e.verificarCuenta(i)})),this.colNitsSedesResp.forEach((function(i,a){var o=a.split(".");parseInt(o[1])?e.verificarNitYSedeResp(o[0],parseInt(o[1])):(t={Errores:"Error en SedesResp, fila "+i},e.errorTitleXLS2.push(t))})),this.colNitsSedes.forEach((function(i,a){var o=a.split(".");parseInt(o[1])?e.verificarNitYSede(o[0],parseInt(o[1])):(t={Errores:"Error en Sede, fila "+i},e.errorTitleXLS2.push(t))})),this.errorTitleXLS2.length>0&&this.success(this.errorTitleXLS2)}},{key:"validateResponse",value:function(e){var t=this,i=!0;this.valueValidate.set(e,void 0!==this.valueValidate.get(e)?this.valueValidate.get(e)+1:1),void 0!==this.valueValidate.get("nitsede")&&this.colNitsSedes.size===this.valueValidate.get("nitsede")||(i=!1),void 0!==this.valueValidate.get("nitsederesp")&&this.colNitsSedesResp.size===this.valueValidate.get("nitsederesp")||(i=!1),void 0!==this.valueValidate.get("cuenta")&&this.colCuentas.size===this.valueValidate.get("cuenta")||(i=!1),void 0!==this.valueValidate.get("codigosucursal")&&this.colCodigosSucursal.size===this.valueValidate.get("codigosucursal")||(i=!1),void 0!==this.valueValidate.get("codigodocumento")&&this.colCodigosDocumento.size===this.valueValidate.get("codigodocumento")||(i=!1),void 0!==this.valueValidate.get("centrocosto")&&this.colCentrosCosto.size===this.valueValidate.get("centrocosto")||(i=!1),i&&(this.getField("upload_file").setDisabled(!1),this.rawsError.size>0?(this.rawsError.forEach((function(e,i){void 0!==e&&(e.indexOf&&e.indexOf(",")?e.split(",").map((function(e){return" "!==e&&""!==e&&void 0!==i?t.errorFinales.set(e,t.errorFinales.get(e)?t.errorFinales.get(e)+t.mensajesError.get(i):t.mensajesError.get(i)):t.errorFinales.set(e,"Error en alg\xfan servicio"),null})):void 0!==i?t.errorFinales.set(e,"Error en alg\xfan servicio"):t.errorFinales.set(e,t.errorFinales.get(e)?t.errorFinales.get(e)+t.mensajesError.get(i):t.mensajesError.get(i)))})),this.JSONdata.forEach((function(e,i){if(t.errorFinales.get(i.toString())){var a=parseInt(i)+2;e={Errores:t.errorFinales.get(i.toString())+"fila "+a},t.dataToSend.push(e)}}))):this.subirDatos&&(this.guardarDatos(this.JSONdata),this.subirDatos=!1),this.success(this.dataToSend))}},{key:"verificarCentroCosto",value:function(e){if(""!==e){this.generalFormat.nombre_accion="152-importar_datos_centros_costos_codigo_exacto";var t={value:e+""};this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successCentroCosto,error:this.error_,general:this.generalFormat})}else this.successCentroCosto()}},{key:"successCentroCosto",value:function(e){this.contadorCentroCosto++,e.data.errorModel?this.rawsError.set("centrocosto",void 0!==this.rawsError.get("centrocosto")?this.rawsError.get("centrocosto")+this.colCentrosCosto.get(e.data.errorModel):this.colCentrosCosto.get(e.data.errorModel)):500===e.estado_p?this.rawsError.set("centrocosto500",void 0!==this.rawsError.get("centrocosto500")?this.rawsError.get("centrocosto500")+this.contadorCentroCosto:this.contadorCentroCosto):502===e.estado_p&&this.rawsError.set("centrocosto502",void 0!==this.rawsError.get("centrocosto502")?this.rawsError.get("centrocosto502")+this.contadorCentroCosto:this.contadorCentroCosto),this.validateResponse("centrocosto")}},{key:"verificarCodigoSucursal",value:function(e){if(""!==e){this.generalFormat.nombre_accion="152-importar_datos_sucursal_codigo_exacto";var t={value:e+""};this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successCodigoSucursal,error:this.error_,general:this.generalFormat})}else this.successCodigoSucursal()}},{key:"successCodigoSucursal",value:function(e){this.contadorCodSucursal++,e.data.errorModel?this.rawsError.set("codigosucursal",void 0!==this.rawsError.get("codigosucursal")?this.rawsError.get("codigosucursal")+this.colCodigosSucursal.get(e.data.errorModel):this.colCodigosSucursal.get(e.data.errorModel)):500===e.estado_p?this.rawsError.set("codigosucursal500",void 0!==this.rawsError.get("codigosucursal500")?this.rawsError.get("codigosucursal500")+this.contadorCodSucursal:this.contadorCodSucursal):502===e.estado_p&&this.rawsError.set("codigosucursal502",void 0!==this.rawsError.get("codigosucursal502")?this.rawsError.get("codigosucursal502")+this.contadorCodSucursal:this.contadorCodSucursal),this.validateResponse("codigosucursal")}},{key:"verificarNitYSede",value:function(e,t){if(""!==e&&""!==t){var i={nit:e,sede:t};this.generalFormat.nombre_accion="152-importar_terceros_validar_datos_nit_sede",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.successNitySede,error:this.error_,general:this.generalFormat})}else this.successNitySede()}},{key:"successNitySede",value:function(e){if(this.contadorNitSede++,e.data.errores){var t="";e.data.errores?(t=e.data.errores.nit+"."+e.data.errores.sede,this.rawsError.set("nitsede",void 0!==this.rawsError.get("nitsede")?this.rawsError.get("nitsede")+this.colNitsSedes.get(t):this.colNitsSedes.get(t))):500===e.estado_p?this.rawsError.set("nitsede500",void 0!==this.rawsError.get("nitsede500")?this.rawsError.get("nitsede500")+this.contadorNitSede+",":this.contadorNitSede+","):502===e.estado_p&&this.rawsError.set("nitsede502",void 0!==this.rawsError.get("nitsede502")?this.rawsError.get("nitsede502")+this.contadorNitSede+",":this.contadorNitSede+",")}this.validateResponse("nitsede")}},{key:"verificarNitYSedeResp",value:function(e,t){if(""!==e&&""!==t){var i={nit:e,sede:t};this.generalFormat.nombre_accion="152-importar_terceros_validar_datos_nit_sede",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.successNitySedeResp,error:this.error_,general:this.generalFormat})}else this.successNitySedeResp()}},{key:"successNitySedeResp",value:function(e){if(this.contadorNitSedeResp++,e.data.errores){var t="";e.data.errores?(t=e.data.errores.nit+"."+e.data.errores.sede,this.rawsError.set("nitsederesp",void 0!==this.rawsError.get("nitsederesp")?this.rawsError.get("nitsederesp")+this.colNitsSedesResp.get(t):this.colNitsSedesResp.get(t))):this.rawsError.set("nitsederesp500",void 0!==this.rawsError.get("nitsederesp500")?this.rawsError.get("nitsederesp500")+this.contadorNitSedeResp+",":this.contadorNitSedeResp+",")}else(e.data.errores||502===e.estado_p)&&this.rawsError.set("nitsederesp502",void 0!==this.rawsError.get("nitsederesp502")?this.rawsError.get("nitsederesp502")+this.contadorNitSedeResp+",":this.contadorNitSedeResp+",");this.validateResponse("nitsederesp")}},{key:"verificarCodigoDocumento",value:function(e){if(""!==e){var t={value:e+""};this.generalFormat.nombre_accion="traer_tercero_comprobante_codigo_exacto2",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successCodigoDocumento,error:this.error_,general:this.generalFormat})}else this.successCodigoDocumento()}},{key:"successCodigoDocumento",value:function(e){this.contadorCodDocumento++,e.data.errorModel?this.rawsError.set("codigodocumento",void 0!==this.rawsError.get("codigodocumento")?this.rawsError.get("codigodocumento")+this.colCodigosDocumento.get(e.data.errorModel):this.colCodigosDocumento.get(e.data.errorModel)):500===e.estado_p?this.rawsError.set("codigodocumento500",void 0!==this.rawsError.get("codigodocumento500")?this.rawsError.get("codigodocumento")+this.contadorCodDocumento:this.contadorCodDocumento):502===e.estado_p&&this.rawsError.set("codigodocumento502",void 0!==this.rawsError.get("codigodocumento502")?this.rawsError.get("codigodocumento")+this.contadorCodDocumento:this.contadorCodDocumento),this.validateResponse("codigodocumento")}},{key:"verificarCuenta",value:function(e){if(""!==e){var t={value:e+""};this.generalFormat.nombre_accion="152-importar_datos_bancos_cuentas_codigo_exacto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successCuenta,error:this.error_,general:this.generalFormat})}else this.successCuenta()}},{key:"successCuenta",value:function(e){this.contadorCuenta++,e.data.errorModel?this.rawsError.set("cuenta",void 0!==this.rawsError.get("cuenta")?this.rawsError.get("cuenta")+this.colCuentas.get(parseInt(e.data.errorModel)):this.colCuentas.get(parseInt(e.data.errorModel))):500===e.estado_p?this.rawsError.set("cuenta500",void 0!==this.rawsError.get("cuenta500")?this.rawsError.get("cuenta500")+this.contadorCuenta:this.contadorCuenta):502===e.estado_p&&this.rawsError.set("cuenta502",void 0!==this.rawsError.get("cuenta502")?this.rawsError.get("cuenta502")+this.contadorCuenta:this.contadorCuenta),this.validateResponse("cuenta")}},{key:"error_",value:function(e){this.rawsError.set("500","Uno de los servicios fallo en la solicitud")}},{key:"guardarDatos",value:function(e){var t=this,i=[];e.forEach((function(e,a){var o={};t.titleXls.map((function(i,a){if("niif"===i){var s=e[i],r=Number(e.valor);"N"===s?(o.nValorNiff=0,o.nValor=r):(o.nValor=0,isNaN(Number(r))?o.nValorNiff=0:o.nValorNiff=r)}else o[t.titleXLSsend[a]]="nitresponsable"===i||"nit"===i?e[i].toString():e[i];return"sede"!==i&&"sederesponsable"!==i||(o[t.titleXLSsend[a]]=parseInt(e[i])),null})),o.sCodigoOrigen="CONTA",o.sItem=a,o.sCodigoUsuario="gda",o.sDocumentoNit=".",o.sDetalleNiif=".",o.sDocumentoNiif=".",o.sLlave="0",o.nValorNiif=0,o.nCodigoCuentaNiif=0,o.sDocumentoNiif=".",o.sNumeroDocumento=e.numero_documento.toString(),o.sReferencia=".",o.sPlacaVehiculo=".",o.sNiif="N",i.push(o)}));var a={data:i};this.generalFormat.nombre_accion="152-importar_datos_movimiento_crearmultiple",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:a,success:this.successPost,error:this.error_,general:this.generalFormat})}},{key:"successPost",value:function(e){if(200===e.estado_p)this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success");else{var t={};for(var i in e.errores)t={Errores:e.errores[i]},this.errorTitleXLS2.push(t);this.success(this.errorTitleXLS2)}this.getField("progress_upload").setVisible(!1)}},{key:"validarFormatoFecha",value:function(e){return!(!e.match(/^\d{2,4}\/\d{1,2}\/\d{1,2}$/)||""===e)}},{key:"existeFecha",value:function(e){var t=e.split("/"),i=t[2],a=t[1],o=t[0];return!(i-0>new Date(o,a,"0").getDate()-0)}}]),i}(d.a.form);d.a.addController("ImpDat",u),t.default=u},,function(e,t){},function(e,t){},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=i(109),c=i.n(l),u=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).verifyFile=function(e,t){var i=c.a.read(e,{type:"binary",cellDates:!0,cellStyles:!0}),a=i.SheetNames[0],s=i.Sheets[a],r=c.a.utils.sheet_to_json(s),n=new Map;if(r.map((function(e,t){return 0===o.titlesError&&(o.JSONdata.set(t,e),o.titleXls.map((function(i,a){if(void 0!==e[i]){if("codigo_sucursal"===i&&o.colCodigosSucursal.set(e[i],o.colCodigosSucursal.get(e[i])?"".concat(o.colCodigosSucursal.get(e[i]),t+","):t+","),"centro_costo"===i&&o.colCentrosCosto.set(e[i],o.colCentrosCosto.get(e[i])?"".concat(o.colCentrosCosto.get(e[i]),t+","):t+","),"codigo_documento"===i&&o.colCodigosDocumento.set(e[i],o.colCodigosDocumento.get(e[i])?"".concat(o.colCodigosDocumento.get(e[i]),t+","):t+","),"codigo_cuenta"===i&&o.colCuentas.set(e[i],o.colCuentas.get(e[i])?"".concat(o.colCuentas.get(e[i]),t+","):t+","),"nit"===i&&o.colNitsSedes.set(e[i]+"."+e.sede,o.colNitsSedes.get(e[i]+"."+e.sede)?"".concat(o.colNitsSedes.get(e[i]+"."+e.sede),t+","):t+","),"nitresponsable"===i&&o.colNitsSedesResp.set(e[i]+"."+e.sederesponsable,o.colNitsSedesResp.get(e[i]+"."+e.sederesponsable)?"".concat(o.colNitsSedesResp.get(e[i]+"."+e.sederesponsable),t+","):t+","),"base"===i&&(o.mBase+=parseFloat(e.base)),"tarifa"===i&&(o.mTarifa+=parseFloat(e.tarifa)),"valor"===i&&(o.mValor=parseInt(o.mValor)+parseInt(e.valor)),"fecha"===i)if(void 0!==e[i]){var s=e[i].replace(/-/g,"/"),r=o.validarFormatoFecha(s),d=o.existeFecha(s);r&&d||(n={Errores:"Fecha no permitida, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n))}else n={Errores:"Fecha no encontrada, En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n);e[i+"_1"]&&n.set(i,"Columna "+i+" repetida")}else n={Errores:"No se encontro "+i+", En la fila "+parseInt(t+2)+" Columna "+parseInt(a+1)},o.errorTitleXLS2.push(n);return null}))),null})),n.size>0){var d=[];n.forEach((function(e,t){d={Errores:e},o.errorTitleXLS2.push(d)}))}o.errorTitleXLS2.length>0&&(o.mValor=-1,o.success(o.errorTitleXLS2));var l=document.getElementById("datos_label");0===o.mValor?(l.textContent=t,o.verifyData()):-1!==o.mValor&&(o.getField("progress_file").setVisible(!1),alert("Error, El valor total es distinto de Cero"))},o.success=function(e){e.length>0?(o.gridOptions.rowData=e,o.getField("tabla_error").initData(o.gridOptions),o.getField("progress_file").setVisible(!1)):(o.getField("tabla_error").toggle(!1),o.getField("progress_file").setVisible(!1))},o.success=o.success.bind(Object(s.a)(o)),o.successCuenta=o.successCuenta.bind(Object(s.a)(o)),o.successCodigoDocumento=o.successCodigoDocumento.bind(Object(s.a)(o)),o.successCodigoSucursal=o.successCodigoSucursal.bind(Object(s.a)(o)),o.successNitySede=o.successNitySede.bind(Object(s.a)(o)),o.successCentroCosto=o.successCentroCosto.bind(Object(s.a)(o)),o.initForm=o.initForm.bind(Object(s.a)(o)),o.verifyFile=o.verifyFile.bind(Object(s.a)(o)),o.uploadFile=o.uploadFile.bind(Object(s.a)(o)),o.verificarNitYSede=o.verificarNitYSede.bind(Object(s.a)(o)),o.validateResponse=o.validateResponse.bind(Object(s.a)(o)),o.verificarNitYSedeResp=o.verificarNitYSedeResp.bind(Object(s.a)(o)),o.successNitySedeResp=o.successNitySedeResp.bind(Object(s.a)(o)),o.successPost=o.successPost.bind(Object(s.a)(o)),o.rawsError=new Map,o.errorFinales=new Map,o.JSONdata=new Map,o.mValor=0,o.colNitsSedes=new Map,o.colNitsSedesResp=new Map,o.colCodigosSucursal=new Map,o.colCentrosCosto=new Map,o.colCodigosDocumento=new Map,o.colCuentas=new Map,o.errorTitleXLS=new Map,o.errorTitleXLS2=[],o.valueValidate=new Map,o.dataToSend=[],o.colunmasCC=[],o.colunmasCD=[],o.colunmasCS=[],o.colunmasC=[],o.colunmasNS=[],o.colunmasNSR=[],o.titleXls=["codigo_sucursal","centro_costo","fecha","codigo_documento","numero_documento","codigo_cuenta","nit","sede","nitresponsable","sederesponsable","dpto_interno","detalle","base","tarifa","valor","niif","tipo_fuente","numero_fuente","banco"],o.titleXLSsend=["sCodigoSucursal","sCentroCosto","sFecha","sCodigoDocumento","sNumeroDocumento","nCodigoCuenta","nNit","nSede","nNitResponsable","nSedeResponsable","sDeptoInterno","sDetalle","nBase","nTarifa","nValor","sNiif","sTipoFuente","sDocumentoFuente","sBanco"],o.titlesError=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("datos")&&this.getField("datos").setOnChange(this.uploadFile)}},{key:"uploadFile",value:function(e){if(this.getField("nombre_archivo").valid()&this.getField("detalle_archivo").valid()&this.getField("observaciones").valid()&this.getField("fecha_integracion").valid()){var t=parseInt(this.getField("fecha_integracion").getValue().split("-")[2])+parseInt(this.getField("fecha_integracion").getValue().split("-")[1])+parseInt(this.getField("fecha_integracion").getValue().split("-")[0]),i=new Date;if(i.getFullYear()+(i.getMonth()+1)+i.getDate()>t)this.getField("fecha_integracion").setError(!0,"Fecha no puede ser menor a la actual");else{var a=60*parseInt(this.getField("hora_integracion").getValue().split(":")[0])+parseInt(this.getField("hora_integracion").getValue().split(":")[1]);if(60*i.getHours()+i.getMinutes()+5>a)this.getField("hora_integracion").setError(!0,"La hora no puede ser menor a la actual");else{this.limpiarDatos(),this.getField("progress_file").setVisible(!0);var o=e.target.files[0],s=new FileReader,r=this.verifyFile;s.onloadend=function(e){var t=e.target.result;r(t,o.name)},o&&s.readAsBinaryString(o)}}}}},{key:"limpiarDatos",value:function(){this.rawsError=new Map,this.errorFinales=new Map,this.JSONdata=new Map,this.mValor=0,this.colNitsSedes=new Map,this.colNitsSedesResp=new Map,this.colCodigosSucursal=new Map,this.colCentrosCosto=new Map,this.colCodigosDocumento=new Map,this.colCuentas=new Map,this.errorTitleXLS=new Map,this.errorTitleXLS2=[],this.valueValidate=new Map,this.dataToSend=[],this.colunmasCC=[],this.colunmasCD=[],this.colunmasCS=[],this.colunmasC=[],this.colunmasNS=[],this.colunmasNSR=[],this.titleXls=["codigo_sucursal","centro_costo","fecha","codigo_documento","numero_documento","codigo_cuenta","nit","sede","nitresponsable","sederesponsable","dpto_interno","detalle","base","tarifa","valor","niif","tipo_fuente","numero_fuente","banco"],this.titleXLSsend=["sCodigoSucursal","sCentroCosto","sFecha","sCodigoDocumento","sNumeroDocumento","nCodigoCuenta","nNit","nSede","nNitResponsable","nSedeResponsable","sDeptoInterno","sDetalle","nBase","nTarifa","nValor","sNiif","sTipoFuente","sDocumentoFuente","sBanco"],this.titlesError=0}},{key:"verifyData",value:function(){var e=this;this.colCentrosCosto.forEach((function(t,i){e.verificarCentroCosto(i)})),this.colCodigosSucursal.forEach((function(t,i){e.verificarCodigoSucursal(i)})),this.colCodigosDocumento.forEach((function(t,i){e.verificarCodigoDocumento(i)})),this.colCuentas.forEach((function(t,i){e.verificarCuenta(i)})),this.colNitsSedesResp.forEach((function(t,i){var a=i.split(".");e.verificarNitYSedeResp(a[0],a[1])})),this.colNitsSedes.forEach((function(t,i){var a=i.split(".");e.verificarNitYSede(a[0],a[1])}))}},{key:"validateResponse",value:function(e){var t=this,i=!0;this.valueValidate.set(e,void 0!==this.valueValidate.get(e)?this.valueValidate.get(e)+1:1),void 0!==this.valueValidate.get("nitsede")&&this.colNitsSedes.size===this.valueValidate.get("nitsede")||(i=!1),void 0!==this.valueValidate.get("nitsederesp")&&this.colNitsSedesResp.size===this.valueValidate.get("nitsederesp")||(i=!1),void 0!==this.valueValidate.get("cuenta")&&this.colCuentas.size===this.valueValidate.get("cuenta")||(i=!1),void 0!==this.valueValidate.get("codigosucursal")&&this.colCodigosSucursal.size===this.valueValidate.get("codigosucursal")||(i=!1),void 0!==this.valueValidate.get("codigodocumento")&&this.colCodigosDocumento.size===this.valueValidate.get("codigodocumento")||(i=!1),void 0!==this.valueValidate.get("centrocosto")&&this.colCentrosCosto.size===this.valueValidate.get("centrocosto")||(i=!1),i&&(this.rawsError.size>0?(this.rawsError.forEach((function(e,i){"centrocosto"===i&&e.split(",").map((function(e){return" "!==e&&""!==e&&t.errorFinales.set(e,t.errorFinales.get(e)?t.errorFinales.get(e)+"Error en Centro Costo, ":"Error en Centro Costo, "),null}));"codigodocumento"===i&&e.split(",").map((function(e){return" "!==e&&""!==e&&t.errorFinales.set(e,t.errorFinales.get(e)?t.errorFinales.get(e)+"Error en Codigo Documento, ":"Error en Codigo Documento, "),null}));"codigosucursal"===i&&e.split(",").map((function(e){return" "!==e&&""!==e&&t.errorFinales.set(e,t.errorFinales.get(e)?t.errorFinales.get(e)+"Error en Codigo Sucursal, ":"Error en Codigo Sucursal, "),null}));"nitsede"===i&&e.split(",").map((function(e){return" "!==e&&""!==e&&t.errorFinales.set(e,t.errorFinales.get(e)?t.errorFinales.get(e)+"Error en Nit y Sede, ":"Error en Nit y Sede, "),null}));"nitsederesp"===i&&e.split(",").map((function(e){return" "!==e&&""!==e&&t.errorFinales.set(e,t.errorFinales.get(e)?t.errorFinales.get(e)+"Error en Nit y Sede Responsable, ":"Error en Nit y Sede Responsable, "),null}));"cuenta"===i&&e.split(",").map((function(e){return" "!==e&&""!==e&&t.errorFinales.set(e,t.errorFinales.get(e)?t.errorFinales.get(e)+"Error en Cuenta, ":"Error en Cuenta, "),null}));return null})),this.JSONdata.forEach((function(e,i){if(t.errorFinales.get(i.toString())){var a=parseInt(i)+2;e={Errores:t.errorFinales.get(i.toString())+"fila "+a},t.dataToSend.push(e)}}))):this.guardarDatos(this.JSONdata),this.success(this.dataToSend))}},{key:"verificarCentroCosto",value:function(e){""!==e?this.service.send(this.getConstant().searchFormat().format(e,"datos","boton_servicio",this.formId),"GET",void 0,this.successCentroCosto,this.error_):this.successCentroCosto()}},{key:"successCentroCosto",value:function(e){e.errorModel&&this.rawsError.set("centrocosto",void 0!==this.rawsError.get("centrocosto")?this.rawsError.get("centrocosto")+this.colCentrosCosto.get(e.errorModel):this.colCentrosCosto.get(e.errorModel)),this.validateResponse("centrocosto")}},{key:"verificarCodigoSucursal",value:function(e){""!==e?this.service.send(this.getConstant().searchFormat().format(e,"tabla_error","enter_servicio",this.formId),"GET",void 0,this.successCodigoSucursal,this.error_CodigoSucursal):this.successCodigoSucursal()}},{key:"successCodigoSucursal",value:function(e){e.errorModel&&this.rawsError.set("codigosucursal",void 0!==this.rawsError.get("codigosucursal")?this.rawsError.get("codigosucursal")+this.colCodigosSucursal.get(e.errorModel):this.colCodigosSucursal.get(e.errorModel)),this.validateResponse("codigosucursal")}},{key:"verificarNitYSede",value:function(e,t){""!==e&&""!==t?this.service.send(this.getConstant().searchFormat().format(e+"/"+t,"datos","f9_servicio",this.formId),"GET",void 0,this.successNitySede,this.error_):this.successNitySede()}},{key:"successNitySede",value:function(e){if(e.errorModel){var t=e.errorModel.replace("/",".");this.rawsError.set("nitsede",void 0!==this.rawsError.get("nitsede")?this.rawsError.get("nitsede")+this.colNitsSedes.get(t):this.colNitsSedes.get(t))}this.validateResponse("nitsede")}},{key:"verificarNitYSedeResp",value:function(e,t){""!==e&&""!==t?this.service.send(this.getConstant().searchFormat().format(e+"/"+t,"datos","f9_servicio",this.formId),"GET",void 0,this.successNitySedeResp,this.error_):this.successNitySedeResp()}},{key:"successNitySedeResp",value:function(e){if(e.errorModel){var t=e.errorModel.replace("/",".");this.rawsError.set("nitsederesp",void 0!==this.rawsError.get("nitsederesp")?this.rawsError.get("nitsederesp")+this.colNitsSedesResp.get(t):this.colNitsSedesResp.get(t))}this.validateResponse("nitsederesp")}},{key:"verificarCodigoDocumento",value:function(e){""!==e?this.service.send(this.getConstant().searchFormat().format(e,"datos","enter_servicio",this.formId),"GET",void 0,this.successCodigoDocumento,this.error_):this.successCodigoDocumento()}},{key:"successCodigoDocumento",value:function(e){e.errorModel&&this.rawsError.set("codigodocumento",void 0!==this.rawsError.get("codigodocumento")?this.rawsError.get("codigodocumento")+this.colCodigosDocumento.get(e.errorModel):this.colCodigosDocumento.get(e.errorModel)),this.validateResponse("codigodocumento")}},{key:"verificarCuenta",value:function(e){""!==e?this.service.send(this.getConstant().searchFormat().format(e,"tabla_error","servicio",this.formId),"GET",void 0,this.successCuenta,this.error_):this.successCuenta()}},{key:"successCuenta",value:function(e){e.errorModel&&this.rawsError.set("cuenta",void 0!==this.rawsError.get("cuenta")?this.rawsError.get("cuenta")+this.colCuentas.get(e.errorModel):this.colCuentas.get(e.errorModel)),this.validateResponse("cuenta")}},{key:"error_",value:function(e){}},{key:"guardarDatos",value:function(e){var t=this,i=[];e.forEach((function(e,a){var o={};t.titleXls.map((function(i,a){if("niif"===i){var s=e[i],r=e.valor;"N"===s?o.nValorNiff=0:(o.nValor=0,o.nValorNiff=r)}else o[t.titleXLSsend[a]]="nitresponsable"===i||"nit"===i?e[i].toString():e[i];return null})),o.sCodigoOrigen="CONTA",o.sItem=a,o.sCodigoUsuario="gda",o.sDocumentoNit=".",o.sDetalleNiif=".",o.sDocumentoNiif=".",o.sLlave="0",o.nValorNiif=0,o.nCodigoCuentaNiif=0,o.sDocumentoNiif=".",o.sReferencia=".",o.sPlacaVehiculo=".",o.sNiif="N",i.push(o)}));var a={id_formulario:this.formId,accion:"servicio",campo:"datos",datos:JSON.stringify({data:i}),nombre_archivo:this.getField("nombre_archivo").getValue(),detalle_archivo:this.getField("detalle_archivo").getValue(),observaciones:this.getField("observaciones").getValue(),fecha_integracion:this.getField("fecha_integracion").getValue()+" "+this.getField("hora_integracion").getValue(),servicio_id:34,verbo_http:"POST"};this.service.send(this.getConstant().formSave(),"POST",a,this.successPost,this.error_)}},{key:"successPost",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.getField("nombre_archivo").setValue(""),this.getField("detalle_archivo").setValue(""),this.getField("observaciones").setValue("")),this.getField("progress_file").setVisible(!1)}},{key:"validarFormatoFecha",value:function(e){return!(!e.match(/^\d{2,4}\/\d{1,2}\/\d{1,2}$/)||""===e)}},{key:"existeFecha",value:function(e){var t=e.split("/"),i=t[2],a=t[1],o=t[0];return!(i-0>new Date(o,a,"0").getDate()-0)}}]),i}(d.a.form);t.default=u},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.inactivarReserva=o.inactivarReserva.bind(Object(s.a)(o)),o.successInactivar=o.successInactivar.bind(Object(s.a)(o)),o.verificar=o.verificar.bind(Object(s.a)(o)),o.successVerificar=o.successVerificar.bind(Object(s.a)(o)),o.successfin=o.successfin.bind(Object(s.a)(o)),o.token="",o.successInactivaCola=o.successInactivaCola.bind(Object(s.a)(o)),o.traerTablaLog=o.traerTablaLog.bind(Object(s.a)(o)),o.succesTraerTabla=o.succesTraerTabla.bind(Object(s.a)(o)),o.activarReserva=o.activarReserva.bind(Object(s.a)(o)),o.succesActivar=o.succesActivar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.generalFormat.nombre_accion="399-Servicio_reserva_pedidos_inactivo_cola",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successInactivaCola,error:this.error_,general:this.generalFormat}),this.getField("btn_activar").setClick(this.activarReserva),this.getField("ver_log").setClick(this.traerTablaLog),this.getField("btn_inactivar").setClick(this.inactivarReserva),this.getField("ver_log_dos").setClick(this.traerTablaLog)}},{key:"successInactivaCola",value:function(e){200===e.estado_p?(this.getField("btn_inactivar").setVisible(!1),this.getField("ver_log_dos").setVisible(!1),this.getField("btn_activar").setVisible(!0),this.getField("ver_log").setVisible(!0)):(this.getField("btn_activar").setVisible(!1),this.getField("ver_log").setVisible(!1),this.getField("btn_inactivar").setVisible(!0),this.getField("ver_log_dos").setVisible(!0))}},{key:"activarReserva",value:function(){this.getField("tabla_log").toggle(!1);this.generalFormat.nombre_accion="399-Servicio_inactivar_reserva_btn_activar",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:{},success:this.succesActivar,error:this.error_,general:this.generalFormat})}},{key:"succesActivar",value:function(e){if(200===e.estado_p){this.generalFormat.nombre_accion="399-Servicio_reserva_pedidos_inactivo_cola",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successInactivaCola,error:this.error_,general:this.generalFormat})}}},{key:"traerTablaLog",value:function(){this.generalFormat.nombre_accion="399-Servicio_reserva_pedidos_ver_log",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.succesTraerTabla,error:this.error_,general:this.generalFormat})}},{key:"succesTraerTabla",value:function(e){if(200===e.estado_p){this.gridOptions.rowData=[],this.getField("tabla_log").initData(this.gridOptions);var t=new Map;this.gridOptions.rowData=e.data,this.getField("tabla_log").initData(this.gridOptions,t)}else this.getField("tabla_log").toggle(!1)}},{key:"inactivarReserva",value:function(){this.generalFormat.nombre_accion="399-Servicio_reserva_pedidos_generar_token",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successInactivar,error:this.error_,general:this.generalFormat})}},{key:"successInactivar",value:function(e){200===e.estado_p&&(this.token=e.data.codigo_verificacion,this.getField("codigo_verificacion").setValue(""),this.getField("modal_verificar").handleClickOpen(this.verificar.bind(this)))}},{key:"verificar",value:function(){this.getField("btn_verificar").setClick(this.successVerificar)}},{key:"successVerificar",value:function(){if(console.log("entro a verificar",this.token),this.getField("codigo_verificacion").getValue()===this.token&&void 0!==this.token){console.log("entro al if de successInactivar",this.token);var e={codigo_verificacion:this.getField("codigo_verificacion").getValue()};this.generalFormat.nombre_accion="399-Servicio_inactivar_reserva_inactivar",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successfin,error:this.error_,general:this.generalFormat})}else this.getField("codigo_verificacion").setError(!0,"El C\xf3digo de verificaci\xf3n no coincide")}},{key:"successfin",value:function(e){if(200===e.estado_p){this.getField("modal_verificar").handleClose(),this.getField("tabla_log").toggle(!1);this.generalFormat.nombre_accion="399-Servicio_reserva_pedidos_inactivo_cola",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successInactivaCola,error:this.error_,general:this.generalFormat})}}}]),i}(d.a.form);d.a.addController("inac_reser",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).onClick=function(){var e=!0;for(var t in o.refs)void 0===o.getField(t).valid||o.getField(t).valid()||(e=!1);if(e){var i=o.getField("opciones").getValue(),a=o.getField("codigo").getValue();o.service.send(o.getConstant().searchFormat().format(i+"/"+a,"btnConsultarInformes","servicio",o.formId),"GET",void 0,o.success,o.error_)}},o.success=function(e){e.model.length>0?(o.gridOptions.rowData=e.model,o.getField("tb_informes_terceros").initData(o.gridOptions)):o.getField("tb_informes_terceros").toggle(!1)},o.initForm=o.initForm.bind(Object(s.a)(o)),o.onClick=o.onClick.bind(Object(s.a)(o)),o.limpiar=o.limpiar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnConsultarInformes")&&this.getField("btnConsultarInformes").setClick(this.onClick),this.getField("codigo")&&this.getField("codigo").setOnChange(this.limpiar)}},{key:"limpiar",value:function(){this.getField("txtNombreOrigen").setValue(""),this.getField("tb_informes_terceros").toggle(!1)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.arrayClientes=[],o.gridOptionsTablaClientes=Object.assign({},o.gridOptions),o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o.respuestaAgregarClientes=o.respuestaAgregarClientes.bind(Object(s.a)(o)),o.traerListadoClientes=o.traerListadoClientes.bind(Object(s.a)(o)),o.respuestaTraerListadoClientes=o.respuestaTraerListadoClientes.bind(Object(s.a)(o)),o.mostrarTablaClientes=o.mostrarTablaClientes.bind(Object(s.a)(o)),o.setButtonAutorizar=o.setButtonAutorizar.bind(Object(s.a)(o)),o.setButtonActivar_Inactivar=o.setButtonActivar_Inactivar.bind(Object(s.a)(o)),o.setButtonGenerarClave=o.setButtonGenerarClave.bind(Object(s.a)(o)),o.accionAutorizar=o.accionAutorizar.bind(Object(s.a)(o)),o.accionActivar_Inactivar=o.accionActivar_Inactivar.bind(Object(s.a)(o)),o.accionGenerarClave=o.accionGenerarClave.bind(Object(s.a)(o)),o.respuestaAccionGenerarClave=o.respuestaAccionGenerarClave.bind(Object(s.a)(o)),o.ventanaGenerarClave=o.ventanaGenerarClave.bind(Object(s.a)(o)),o.ocultarTablaClientes=o.ocultarTablaClientes.bind(Object(s.a)(o)),o.grabarAutorizacion=o.grabarAutorizacion.bind(Object(s.a)(o)),o.respuestaGrabarAutorizacion=o.respuestaGrabarAutorizacion.bind(Object(s.a)(o)),o.cerrarModalAurorizar=o.cerrarModalAurorizar.bind(Object(s.a)(o)),o.limpiarCamposModalAutorizar=o.limpiarCamposModalAutorizar.bind(Object(s.a)(o)),o.ventanaActivar_Inactivar=o.ventanaActivar_Inactivar.bind(Object(s.a)(o)),o.respuestaAccionActivar_Inactivar=o.respuestaAccionActivar_Inactivar.bind(Object(s.a)(o)),o.obtenerFechaActual=o.obtenerFechaActual.bind(Object(s.a)(o)),o.limpiarError=o.limpiarError.bind(Object(s.a)(o)),o.fechaActual="",o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("cancelar").setClick(this.limpiarCampos),this.getField("agregar").setSuccess(this.respuestaAgregarClientes),this.getField("cancelar_autorizacion").setClick(this.cerrarModalAurorizar),this.getField("grabar_autorizacion").setClick(this.grabarAutorizacion),this.obtenerFechaActual(),this.traerListadoClientes()}},{key:"obtenerFechaActual",value:function(){var e=new Date;if(e.getMonth()+1<10){var t="0".concat(e.getMonth()+1);this.fechaActual=e.getFullYear()+"-"+t+"-"+e.getDate()}else this.fechaActual=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"limpiarCampos",value:function(){this.getField("nit").setValue(""),this.getField("tercero_id").setValue(""),this.getField("sede").setValue(""),this.getField("nombre_cliente").setValue(""),this.getField("telefono").setValue(""),this.getField("codigo_usuario").setValue(""),this.getField("email").setValue(""),this.traerListadoClientes()}},{key:"traerListadoClientes",value:function(){this.generalFormat.nombre_accion="trae_clientes_todos-b2b_jaivana_clientes",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.respuestaTraerListadoClientes,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"respuestaTraerListadoClientes",value:function(e){200===e.estado_p?this.arrayClientes=e.data:this.arrayClientes=[],this.mostrarTablaClientes()}},{key:"mostrarTablaClientes",value:function(){if(this.arrayClientes.length>0){this.gridOptionsTablaClientes.rowData=this.arrayClientes;var e=new Map;e.set("Acci\xf3n Autorizar",{field:"Acci\xf3n Autorizar",cellRenderer:this.setButtonAutorizar,width:150}),e.set("Activar - Innactivar",{field:"Activar - Innactivar",cellRenderer:this.setButtonActivar_Inactivar,width:200}),e.set("Generar Clave",{field:"Generar Clave",cellRenderer:this.setButtonGenerarClave,width:150}),this.getField("tabla_clientes").initData(this.gridOptionsTablaClientes,e)}else this.getField("tabla_clientes").toggle(!1)}},{key:"setButtonAutorizar",value:function(e){var t=this,i=document.createElement("input");return i.setAttribute("id","id_autorizar"),i.setAttribute("value","Autorizar"),i.setAttribute("type","button"),!0===e.data.autorizado?(i.setAttribute("style","width:90px;height: 20px; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("disabled",!0)):(i.onclick=function(){return t.accionAutorizar(e.data)},i.setAttribute("style","width:90px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("value","Autorizar")),i}},{key:"setButtonActivar_Inactivar",value:function(e){var t=this,i=document.createElement("input"),a="Activar";return 1===e.data.estadoactivo_id&&(a="Inactivar"),i.onclick=function(){return t.ventanaActivar_Inactivar(e.data)},i.setAttribute("id","id_activar_inactivar"),i.setAttribute("style","width:100px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value",a),i}},{key:"setButtonGenerarClave",value:function(e){var t=this,i=document.createElement("input");return i.setAttribute("id","id_generar"),i.setAttribute("type","button"),i.setAttribute("value","Generar"),!0===e.data.autorizado&&1===e.data.estadoactivo_id?(i.onclick=function(){return t.ventanaGenerarClave(e.data)},i.setAttribute("style","width:90px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer")):(i.setAttribute("style","width:90px;height: 20px; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("disabled",!0)),i}},{key:"accionAutorizar",value:function(e){this.obtenerFechaActual(),this.getField("fecha").setValue(this.fechaActual),!1===e.autorizado&&(this.getField("id").setValue(e.id),this.getField("modal_autorizar").handleClickOpen())}},{key:"ventanaActivar_Inactivar",value:function(e){var t=this,i="\xbfDesea activar este cliente?",a="Activar";1===e.estadoactivo_id&&(i="\xbfDesea Inactivar este cliente?",a="Inactivar"),this.getField("confirmModalCustom").setTitleAndContent(a,i),this.getField("confirmModalCustom").setClickDialog((function(){return t.accionActivar_Inactivar(e)})),this.getField("confirmModalCustom").toggle(!0)}},{key:"accionActivar_Inactivar",value:function(e){var t=1;1===e.estadoactivo_id&&(t=2);var i={id:e.id,estado_activo_id:t};this.generalFormat.nombre_accion="permite_activar_b2b_jaivana_clientes",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.respuestaAccionActivar_Inactivar,error:this.error_,general:this.generalFormat})}},{key:"respuestaAccionActivar_Inactivar",value:function(e){200===e.estado_p&&this.traerListadoClientes(),this.getField("confirmModalCustom").toggle(!1)}},{key:"ventanaGenerarClave",value:function(e){var t=this;!0===e.autorizado&&(this.getField("confirmModalCustom").setTitleAndContent("Generar Clave","\xbfDesea generar la clave para este cliente?"),this.getField("confirmModalCustom").setClickDialog((function(){return t.accionGenerarClave(e)})),this.getField("confirmModalCustom").toggle(!0))}},{key:"accionGenerarClave",value:function(e){var t={id:e.id};this.generalFormat.nombre_accion="permite_generarClave_b2b_jaivana_clientes",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.respuestaAccionGenerarClave,error:this.error_,general:this.generalFormat})}},{key:"respuestaAccionGenerarClave",value:function(e){200===e.estado_p&&this.traerListadoClientes(),this.getField("confirmModalCustom").toggle(!1)}},{key:"respuestaAgregarClientes",value:function(e){200===e.estado_p?this.limpiarCampos():this.alertGeneral.toggle(!0,e.mensaje,"error")}},{key:"ocultarTablaClientes",value:function(){this.getField("tabla_clientes").toggle(!1)}},{key:"cerrarModalAurorizar",value:function(){this.getField("modal_autorizar").handleClose(),this.limpiarCamposModalAutorizar()}},{key:"grabarAutorizacion",value:function(){var e=this.getField("detalle").getValue().substring(3,this.getField("detalle").getValue().length-5);if(""!==this.getField("fecha").getValue()&&""!==e&&""!==this.getField("id").getValue()){var t={id:this.getField("id").getValue(),detalle:e,autorizado:!0};this.generalFormat.nombre_accion="permite_autorizar_b2b_jaivana_clientes",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.respuestaGrabarAutorizacion,error:this.error_,general:this.generalFormat})}else""===e&&this.getField("detalle").setError(!0,"* Debe ingresar el detalle de la autorizaci\xf3n.")}},{key:"respuestaGrabarAutorizacion",value:function(e){200===e.estado_p&&(this.getField("modal_autorizar").handleClose(),this.limpiarCamposModalAutorizar())}},{key:"limpiarCamposModalAutorizar",value:function(){this.getField("detalle").setValue(""),this.getField("id").setValue(""),this.getField("modal_autorizar").handleClose(),this.limpiarError(),this.traerListadoClientes()}},{key:"limpiarError",value:function(){this.getField("detalle").setError(!1,"")}}]),i}(d.a.form);d.a.addController("ingr_cli",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.itemsFichas=o.itemsFichas.bind(Object(s.a)(o)),o.successItemsFichas=o.successItemsFichas.bind(Object(s.a)(o)),o.gridOptionsItemFichas=Object.assign({},o.gridOptions),o.totalKilos=o.totalKilos.bind(Object(s.a)(o)),o.successTotalkilos=o.successTotalkilos.bind(Object(s.a)(o)),o.modalEnvase=o.modalEnvase.bind(Object(s.a)(o)),o.gridOptionsTbEnvase=Object.assign({},o.gridOptions),o.guardarEnvase=o.guardarEnvase.bind(Object(s.a)(o)),o.successGuardarEnvase=o.successGuardarEnvase.bind(Object(s.a)(o)),o.productosDelEnvasado=o.productosDelEnvasado.bind(Object(s.a)(o)),o.successProductosDelEnvasado=o.successProductosDelEnvasado.bind(Object(s.a)(o)),o.gridOptionsProductosEnvasado=Object.assign({},o.gridOptions),o.setChangeProductosEnvasado=o.setChangeProductosEnvasado.bind(Object(s.a)(o)),o.setChangeProductosEnvasadoclick=o.setChangeProductosEnvasadoclick.bind(Object(s.a)(o)),o.successProductosDelEnvasadoClick=o.successProductosDelEnvasadoClick.bind(Object(s.a)(o)),o.cancelarEnvase=o.cancelarEnvase.bind(Object(s.a)(o)),o.iniciarProceso=o.iniciarProceso.bind(Object(s.a)(o)),o.cantidadxEnvasar=o.cantidadxEnvasar.bind(Object(s.a)(o)),o.successCantidadxEnvasar=o.successCantidadxEnvasar.bind(Object(s.a)(o)),o.formato2=o.formato2.bind(Object(s.a)(o)),o.formato3=o.formato3.bind(Object(s.a)(o)),o.retornaDatosFicha=o.retornaDatosFicha.bind(Object(s.a)(o)),o.retornaCantidadEnvasar=o.retornaCantidadEnvasar.bind(Object(s.a)(o)),o.retornaKilosGalones=o.retornaKilosGalones.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnAgregarEnvase").setClick(this.modalEnvase),this.getField("btnGuardarEnvase").setClick(this.guardarEnvase),this.getField("btnCancelarEnvase").setClick(this.cancelarEnvase),this.getField("btnIniciar").setClick(this.iniciarProceso),this.retornaDatosFicha()}},{key:"retornaDatosFicha",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_traer_datos_ficha_iniciar_proceso",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"retornaCantidadEnvasar",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="6-Retorna_la_cantidad_por_envasar",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successCantidadxEnvasar,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"retornaKilosGalones",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="6-Traer_total_items_kilos_galones",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTotalkilos,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successDatosFicha",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.getField("listaIniciar").setVisible(!0),this.getField("listaIniciar").setItemsFichas(e.model);var t=e.model;this.getField("puntos").setValue(t[0].puntos),this.itemsFichas()}else this.getField("listaIniciar").setVisible(!1);this.retornaCantidadEnvasar(),this.retornaKilosGalones()}},{key:"itemsFichas",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="6-Retorna_los_items_de_la_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successItemsFichas,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successItemsFichas",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.getField("tablaIniciar").toggle(!0),this.gridOptionsItemFichas.rowData=e.model,this.gridOptionsItemFichas.paginationPageSize=100;var t=new Map;t.set("cantidad_kilos",{cellRenderer:this.formato2,cellStyle:{textAlign:"right"},field:"cantidad_kilos"}),t.set("cantidad_galones",{cellRenderer:this.formato3,cellStyle:{textAlign:"right"},field:"cantidad_galones"}),this.getField("tablaIniciar").initData(this.gridOptionsItemFichas,t),this.gridOptionsItemFichas.api.selectIndex(0,!0,!0),this.totalKilos(),this.productosDelEnvasado()}else this.getField("tablaIniciar").toggle(!1)}},{key:"formato2",value:function(e){var t=document.createElement("label");return t.textContent="".formatoPrecio(e.data.cantidad_kilos),5===e.data.etapa_id?e.data.cantidad_galones>e.data.saldo_bodega_puntos&&t.setAttribute("style","color: Red"):e.data.cantidad_galones>e.data.saldo_bodega_materia_prima&&t.setAttribute("style","color: Red"),t}},{key:"formato3",value:function(e){var t=document.createElement("label");return t.textContent="".formatoPrecio(e.data.cantidad_galones),5===e.data.etapa_id?e.data.cantidad_galones>e.data.saldo_bodega_puntos&&t.setAttribute("style","color: Red"):e.data.cantidad_galones>e.data.saldo_bodega_materia_prima&&t.setAttribute("style","color: Red"),t}},{key:"totalKilos",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="6-Traer_total_items_kilos_galones",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTotalkilos,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successTotalkilos",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=e.model;this.getField("total_kilos").setValue(t[0].total_kilos)}else this.getField("total_kilos").setValue(0),this.alertGeneral.toggle(!0,"Ficha Libre","warning")}},{key:"modalEnvase",value:function(){this.getField("modalEnvase").handleClickOpen(),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("produccion_kit_id").setValue(""),this.getField("codigo_producto").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("factor").setValue(""),this.getField("cantidad").setValue(""),this.getField("kit").setValue(""),this.getField("descripcion").setValue(""),this.getField("articulo_id").setValue(""),this.getField("es_envasado_id").setValue("")}},{key:"guardarEnvase",value:function(){if(""!==this.getField("cantidad").getValue()&&" "!==this.getField("cantidad").getValue()){this.getField("cantidad").setError(!1,"");var e={produccion_fichas_id:this.props.data.id_ficha,articulo_id:this.getField("articulo_id").getValue(),cantidad:this.getField("cantidad").getValue(),produccion_kit_id:this.getField("produccion_kit_id").getValue()};this.generalFormat.nombre_accion="6-Crea_una_ficha_envasado",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successGuardarEnvase,error:this.error_,general:this.generalFormat})}else this.getField("cantidad").valid()&&""===this.getField("cantidad").getValue()&&this.getField("cantidad").setError(!0,"Este campo es requerido")}},{key:"successGuardarEnvase",value:function(e){200===e.estado_p?(this.getField("fieldAlert").toggle(!0,"Ficha envasado creada exitosamente","success"),this.getField("modalEnvase").handleClose(),this.productosDelEnvasado()):this.getField("fieldAlert").toggle(!0,"La ficha envasado no pudo ser creada","error")}},{key:"cancelarEnvase",value:function(){this.getField("modalEnvase").handleClose()}},{key:"productosDelEnvasado",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="6-Retorna_fichas_envasado_por_ficha_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successProductosDelEnvasado,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successProductosDelEnvasado",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.getField("TbProductosDelEnvasado").toggle(!0),this.gridOptionsProductosEnvasado.rowData=e.model,this.gridOptionsProductosEnvasado.paginationPageSize=100;var t=new Map;t.set("accion",{cellRenderer:this.setChangeProductosEnvasado,field:"Acci\xf3n"}),this.getField("TbProductosDelEnvasado").initData(this.gridOptionsProductosEnvasado,t),this.gridOptionsProductosEnvasado.api.selectIndex(0,!0,!0),this.cantidadxEnvasar()}else this.getField("TbProductosDelEnvasado").toggle(!1),this.getField("fieldAlert").toggle(!0,"No hay envasado","error"),this.cantidadxEnvasar()}},{key:"cantidadxEnvasar",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="6-Retorna_la_cantidad_por_envasar",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successCantidadxEnvasar,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successCantidadxEnvasar",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=e.model;this.getField("cantidad_a_producir").setValue(t[0].cantidad_a_producir),this.getField("total_envasado").setValue(t[0].total_envasado),this.getField("restante_envasar").setValue(t[0].restante_envasar)}}},{key:"setChangeProductosEnvasado",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.setChangeProductosEnvasadoclick(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"setChangeProductosEnvasadoclick",value:function(e){var t={id:e.id};this.generalFormat.nombre_accion="6-Elimina_una_ficha_envasado",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.successProductosDelEnvasadoClick,error:this.error_,general:this.generalFormat})}},{key:"successProductosDelEnvasadoClick",value:function(e){200===e.estado_p&&this.productosDelEnvasado()}},{key:"iniciarProceso",value:function(){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id);var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue()};this.generalFormat.nombre_accion="6-Inicia_el_proceso",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);d.a.addController("InPro",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsTablaClientesNuevos=Object.assign({},o.gridOptions),o.traerTodosClientesNuevos=o.traerTodosClientesNuevos.bind(Object(s.a)(o)),o.respuestaClientesNuevos=o.respuestaClientesNuevos.bind(Object(s.a)(o)),o.crearTabla=o.crearTabla.bind(Object(s.a)(o)),o.setButtonIntegrar=o.setButtonIntegrar.bind(Object(s.a)(o)),o.integrar=o.integrar.bind(Object(s.a)(o)),o.respuestaIntegrar=o.respuestaIntegrar.bind(Object(s.a)(o)),o.refrescar=o.refrescar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.traerTodosClientesNuevos(!0),this.getField("refrescar").setClick(this.refrescar)}},{key:"refrescar",value:function(){this.traerTodosClientesNuevos(!0)}},{key:"traerTodosClientesNuevos",value:function(e){this.generalFormat.nombre_accion="trae_todos_cotizacionClientesNuevos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.respuestaClientesNuevos,error:this.error_,general:this.generalFormat,showMessage:e})}},{key:"respuestaClientesNuevos",value:function(e){200===e.estado_p&&e.data.length>0?this.crearTabla(e.data):this.getField("tabla_cotizaciones").toggle(!1)}},{key:"crearTabla",value:function(e){this.gridOptionsTablaClientesNuevos.rowData=e;var t=new Map;t.set("Integrar",{field:"Integrar",cellRenderer:this.setButtonIntegrar,width:150}),this.getField("tabla_cotizaciones").initData(this.gridOptionsTablaClientesNuevos,t)}},{key:"setButtonIntegrar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.integrar(e.data.numero)},i.setAttribute("id","boton_integrar"),i.setAttribute("style","width:90px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Integrar"),i}},{key:"integrar",value:function(e){var t={numero_pedido:e};this.generalFormat.nombre_accion="permite_integrar_cotizacionClientesNuevos",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.respuestaIntegrar,error:this.error_,general:this.generalFormat})}},{key:"respuestaIntegrar",value:function(e){this.traerTodosClientesNuevos(!1)}}]),i}(d.a.form);d.a.addController("intcot",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsDocModulos=Object.assign({},o.gridOptions),o.retornaInterfacesModulos=o.retornaInterfacesModulos.bind(Object(s.a)(o)),o.successRetornaInterfacesModulos=o.successRetornaInterfacesModulos.bind(Object(s.a)(o)),o.fechaActual=0,o.fechaDesde=o.fechaDesde.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.retornaInterfacesModulos(),this.fechaActual=new Date,this.fechaDesde()}},{key:"fechaDesde",value:function(){if(0!==this.fechaActual){var e=this.fechaActual.getMonth()+1,t=this.fechaActual.getFullYear()+"-"+e+"-1",i=Date.parse(t),a=new Date(i).toISOString();this.getField("fecha_desde").setValue(a.split("T")[0])}}},{key:"retornaInterfacesModulos",value:function(){this.generalFormat.nombre_accion="doc-modulos_s_interfasesmodulos_todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",success:this.successRetornaInterfacesModulos,error:this.error_,general:this.generalFormat})}},{key:"successRetornaInterfacesModulos",value:function(e){200===e.estado_p&&(e.data.length>=1?(this.getField("tb_doc_modulos").toggle(!0),this.gridOptionsDocModulos.rowData=e.data,this.getField("tb_doc_modulos").initData(this.gridOptionsDocModulos)):this.getField("tb_doc_modulos").toggle(!1))}}]),i}(d.a.form);d.a.addController("doc-modulos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsPedidosProspectos=Object.assign({},o.gridOptions),o.tbTraerPedidosProspectos=o.tbTraerPedidosProspectos.bind(Object(s.a)(o)),o.successtbTraerPedidosProspectos=o.successtbTraerPedidosProspectos.bind(Object(s.a)(o)),o.setButtonIntegrar=o.setButtonIntegrar.bind(Object(s.a)(o)),o.funcionClickIntegrar=o.funcionClickIntegrar.bind(Object(s.a)(o)),o.integrar=o.integrar.bind(Object(s.a)(o)),o.successIntegrar=o.successIntegrar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.tbTraerPedidosProspectos(!0),this.getField("btn_refrescar_tabla").setClick(this.tbTraerPedidosProspectos)}},{key:"tbTraerPedidosProspectos",value:function(e){this.generalFormat.nombre_accion="cot_clientes_nuevos_s_clientes_nuevos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",success:this.successtbTraerPedidosProspectos,error:this.error_,general:this.generalFormat,showMessage:e})}},{key:"successtbTraerPedidosProspectos",value:function(e){if(200===e.estado_p)if(e.data.length>=1){this.getField("tb_cot_clientes_nuevos").toggle(!0),this.gridOptionsPedidosProspectos.rowData=e.data;var t=new Map;t.set("accion",{cellRenderer:this.setButtonIntegrar,field:"accion",width:150}),this.getField("tb_cot_clientes_nuevos").initData(this.gridOptionsPedidosProspectos,t)}else this.getField("tb_cot_clientes_nuevos").toggle(!1);else this.getField("tb_cot_clientes_nuevos").toggle(!1)}},{key:"setButtonIntegrar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.funcionClickIntegrar(e.data.numero)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:110px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Integrar"),i}},{key:"funcionClickIntegrar",value:function(e){this.id_enviar=e,this.getField("confirmModalCustom").setTitleAndContent("Integrar","\xbfDesea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.integrar),this.getField("confirmModalCustom").toggle(!0)}},{key:"integrar",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_enviar){var e={numero_pedido:this.id_enviar};this.generalFormat.nombre_accion="cot_clientes_nuevos_s_integrarpedidoprospecto",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successIntegrar,error:this.error_,general:this.generalFormat})}}},{key:"successIntegrar",value:function(e){this.tbTraerPedidosProspectos(!1)}}]),i}(d.a.form);d.a.addController("cot_clientes_nuevos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.traerRegistros=o.traerRegistros.bind(Object(s.a)(o)),o.respuestaTraerRegistros=o.respuestaTraerRegistros.bind(Object(s.a)(o)),o.setButtonIntegrar=o.setButtonIntegrar.bind(Object(s.a)(o)),o.IntegrarProspecto=o.IntegrarProspecto.bind(Object(s.a)(o)),o.respuestaIntegrarProspecto=o.respuestaIntegrarProspecto.bind(Object(s.a)(o)),o.gridIntegraciones=Object.assign({},o.gridOptions),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.traerRegistros(),this.getField("refrescar").setSuccess(this.respuestaTraerRegistros)}},{key:"traerRegistros",value:function(){this.generalFormat.nombre_accion="terceros_pendientes_sinintegrar",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.respuestaTraerRegistros,error:this.error_,general:this.generalFormat})}},{key:"respuestaTraerRegistros",value:function(e){if(200===e.estado_p){this.getField("tabla_integraciones").toggle(!0),this.gridIntegraciones.rowData=e.data,this.gridIntegraciones.paginationPageSize=15;var t=new Map;t.set(3,{cellRenderer:this.setButtonIntegrar,field:"Integrar",width:150}),this.getField("tabla_integraciones").initData(this.gridIntegraciones,t)}else this.getField("tabla_integraciones").toggle(!1)}},{key:"setButtonIntegrar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.IntegrarProspecto(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Integrar"),i}},{key:"IntegrarProspecto",value:function(e){if(this.getField("nitsx_sedes_pendientes_id").setValue(e),""!==this.getField("nitsx_sedes_pendientes_id").getValue()){var t={nitsx_sedes_pendientes_id:this.getField("nitsx_sedes_pendientes_id").getValue()};this.generalFormat.nombre_accion="terceros_pendientes_integrarcliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.respuestaIntegrarProspecto,error:this.error_,general:this.generalFormat})}}},{key:"respuestaIntegrarProspecto",value:function(e){200===e.estado_p&&this.traerRegistros()}}]),i}(d.a.form);d.a.addController("inte-prospect",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.itemsFichas=o.itemsFichas.bind(Object(s.a)(o)),o.successItemFichas=o.successItemFichas.bind(Object(s.a)(o)),o.tamanoDatos=0,o.openModalGrabar=o.openModalGrabar.bind(Object(s.a)(o)),o.grabarItem=o.grabarItem.bind(Object(s.a)(o)),o.successGrabarItem=o.successGrabarItem.bind(Object(s.a)(o)),o.etapa_id=0,o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.deleteEspecification=o.deleteEspecification.bind(Object(s.a)(o)),o.succesEliminarItem=o.succesEliminarItem.bind(Object(s.a)(o)),o.setButtonSubir=o.setButtonSubir.bind(Object(s.a)(o)),o.cambiarOrden=o.cambiarOrden.bind(Object(s.a)(o)),o.successChangeOrden=o.successChangeOrden.bind(Object(s.a)(o)),o.setButtonBajar=o.setButtonBajar.bind(Object(s.a)(o)),o.setSelectBodega=o.setSelectBodega.bind(Object(s.a)(o)),o.valueChange=o.valueChange.bind(Object(s.a)(o)),o.setSelectMaquina=o.setSelectMaquina.bind(Object(s.a)(o)),o.grabarBodega=o.grabarBodega.bind(Object(s.a)(o)),o.selectOptions=[],o.traerBodegas=o.traerBodegas.bind(Object(s.a)(o)),o.successtraerBodegas=o.successtraerBodegas.bind(Object(s.a)(o)),o.grabarBodega=o.grabarBodega.bind(Object(s.a)(o)),o.successGrabarBodega=o.successGrabarBodega.bind(Object(s.a)(o)),o.grabarTodo=o.grabarTodo.bind(Object(s.a)(o)),o.cancelarFicha=o.cancelarFicha.bind(Object(s.a)(o)),o.modalEnvase=o.modalEnvase.bind(Object(s.a)(o)),o.guardarEnvase=o.guardarEnvase.bind(Object(s.a)(o)),o.successGuardarEnvase=o.successGuardarEnvase.bind(Object(s.a)(o)),o.productosDelEnvasado=o.productosDelEnvasado.bind(Object(s.a)(o)),o.successProductosDelEnvasado=o.successProductosDelEnvasado.bind(Object(s.a)(o)),o.gridOptionsProductosEnvasado=Object.assign({},o.gridOptions),o.cantidadxEnvasar=o.cantidadxEnvasar.bind(Object(s.a)(o)),o.successCantidadxEnvasar=o.successCantidadxEnvasar.bind(Object(s.a)(o)),o.setChangeProductosEnvasado=o.setChangeProductosEnvasado.bind(Object(s.a)(o)),o.setChangeProductosEnvasadoclick=o.setChangeProductosEnvasadoclick.bind(Object(s.a)(o)),o.successProductosDelEnvasadoClick=o.successProductosDelEnvasadoClick.bind(Object(s.a)(o)),o.gridOptionsMaterialEmpaque=Object.assign({},o.gridOptions),o.setChangeArticuloMaterialEmpaque=o.setChangeArticuloMaterialEmpaque.bind(Object(s.a)(o)),o.setChangeArticuloMaterialEmpaqueClick=o.setChangeArticuloMaterialEmpaqueClick.bind(Object(s.a)(o)),o.successArticuloMaterialEmpaqueClick=o.successArticuloMaterialEmpaqueClick.bind(Object(s.a)(o)),o.formato3=o.formato3.bind(Object(s.a)(o)),o.envasadoInicialMaterialEmpaque=o.envasadoInicialMaterialEmpaque.bind(Object(s.a)(o)),o.successEnvasadoInicialMaterialEmpaque=o.successEnvasadoInicialMaterialEmpaque.bind(Object(s.a)(o)),o.gridOptionsEnvasadoInicialMaterialEmpaque=Object.assign({},o.gridOptions),o.setChangeEnvasadoIniMatEmpaque=o.setChangeEnvasadoIniMatEmpaque.bind(Object(s.a)(o)),o.setChangeEnvasadoInicialclick=o.setChangeEnvasadoInicialclick.bind(Object(s.a)(o)),o.successProductosDelEnvasadoInicialClick=o.successProductosDelEnvasadoInicialClick.bind(Object(s.a)(o)),o.modalEnvaseIniMatEmpaque=o.modalEnvaseIniMatEmpaque.bind(Object(s.a)(o)),o.successDataProductos=o.successDataProductos.bind(Object(s.a)(o)),o.GrabarEnvIniMatEmpaque=o.GrabarEnvIniMatEmpaque.bind(Object(s.a)(o)),o.successGrabarEnvIniMatEmpaque=o.successGrabarEnvIniMatEmpaque.bind(Object(s.a)(o)),o.setButtonCantidadAgregada=o.setButtonCantidadAgregada.bind(Object(s.a)(o)),o.cantidadAgregadaChange=o.cantidadAgregadaChange.bind(Object(s.a)(o)),o.successCantidadAgregada=o.successCantidadAgregada.bind(Object(s.a)(o)),o.setButtonCantidadMe=o.setButtonCantidadMe.bind(Object(s.a)(o)),o.cantidadChangeMe=o.cantidadChangeMe.bind(Object(s.a)(o)),o.successCantidadChangeMe=o.successCantidadChangeMe.bind(Object(s.a)(o)),o.setButtonCantidadGalones=o.setButtonCantidadGalones.bind(Object(s.a)(o)),o.cantidadKilosChange=o.cantidadKilosChange.bind(Object(s.a)(o)),o.successCantidadKilosChange=o.successCantidadKilosChange.bind(Object(s.a)(o)),o.uploadSelectProductos=o.uploadSelectProductos.bind(Object(s.a)(o)),o.datosBodega=o.datosBodega.bind(Object(s.a)(o)),o.successtraerBodegasSelect=o.successtraerBodegasSelect.bind(Object(s.a)(o)),o.datosBodegaMatEmpaque=o.datosBodegaMatEmpaque.bind(Object(s.a)(o)),o.successDatosBodegaMatEmpaque=o.successDatosBodegaMatEmpaque.bind(Object(s.a)(o)),o.setButtonSaldos=o.setButtonSaldos.bind(Object(s.a)(o)),o.verSaldos=o.verSaldos.bind(Object(s.a)(o)),o.successVerSaldos=o.successVerSaldos.bind(Object(s.a)(o)),o.gridOptionsSaldos=Object.assign({},o.gridOptions),o.retornaDatosFicha=o.retornaDatosFicha.bind(Object(s.a)(o)),o.retornaEnvasado=o.retornaEnvasado.bind(Object(s.a)(o)),o.retornaCantidadEnvasar=o.retornaCantidadEnvasar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnAgregar").setClick(this.openModalGrabar),this.getField("btnAgregarItem").setClick(this.grabarItem),this.getField("btnGrabar").setClick(this.grabarTodo),this.getField("btnCancelar").setClick(this.cancelarFicha),this.getField("btnAgregarEnvase").setClick(this.modalEnvase),this.getField("btnGuardarEnvase").setClick(this.guardarEnvase),this.getField("btnAgregarEnvIniMatEmpaque").setClick(this.modalEnvaseIniMatEmpaque),this.getField("btnGrabarEnvIniMatEmpaque").setClick(this.GrabarEnvIniMatEmpaque),this.getField("articulo_id").setOnChange(this.datosBodega),this.getField("articulo_id_matEmpaque").setOnChange(this.datosBodegaMatEmpaque),this.retornaDatosFicha()}},{key:"retornaDatosFicha",value:function(){this.traerBodegas();var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="1-Busca_una_ficha_por_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat})}},{key:"retornaEnvasado",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="1-Retorna_fichas_envasado_por_ficha_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDataProductos,error:this.error_,general:this.generalFormat})}},{key:"retornaCantidadEnvasar",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="1-Retorna_la_cantidad_por_envasar",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successCantidadxEnvasar,error:this.error_,general:this.generalFormat})}},{key:"datosBodega",value:function(){if(""!==this.getField("articulo_id").getValue()&&" "!==this.getField("articulo_id").getValue()){var e={value:this.getField("articulo_id").getValue()};this.generalFormat.nombre_accion="1-Trae_el_saldo_referente_al_producto_para_el_select_de_bodegas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successtraerBodegasSelect,error:this.error_,general:this.generalFormat})}}},{key:"successtraerBodegasSelect",value:function(e){var t=[{text:"Ninguno",value:"",campos_cambian:{}}];200===e.estado_p?(e.data.forEach((function(e){var i={};i.value=e.id,i.text="".concat(e.nombre_bodega," , saldo = ").concat(e.saldo),i.campos_cambian={codigo_bodegaCod:e.codigo_bodega},t.push(i)})),this.getField("codigo_bodega_MPItems").setOptions(t)):this.getField("codigo_bodega_MPItems").setOptions(t)}},{key:"datosBodegaMatEmpaque",value:function(){if(""!==this.getField("articulo_id_matEmpaque").getValue()&&" "!==this.getField("articulo_id_matEmpaque").getValue()){var e={value:this.getField("articulo_id_matEmpaque").getValue()};this.generalFormat.nombre_accion="1-Trae_el_saldo_referente_al_producto_para_el_select_de_bodegas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosBodegaMatEmpaque,error:this.error_,general:this.generalFormat})}}},{key:"successDatosBodegaMatEmpaque",value:function(e){var t=[{text:"Ninguno",value:"",campos_cambian:{}}];200===e.estado_p?(e.data.forEach((function(e){var i={};i.value=e.id,i.text="".concat(e.nombre_bodega," , saldo = ").concat(e.saldo),i.campos_cambian={codigo_bodegaCodME:e.codigo_bodega},t.push(i)})),this.getField("codigo_bodegaMe").setOptions(t)):this.getField("codigo_bodegaMe").setOptions(t)}},{key:"uploadSelectProductos",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="1-Retorna_fichas_envasado_por_ficha_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDataProductos,error:this.error_,general:this.generalFormat})}},{key:"successDataProductos",value:function(e){var t=[{text:"Ninguno",value:"",campos_cambian:{}}];200===e.estado_p?(e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.codigo+"  "+e.nombre,i.campos_cambian={produccion_fichas_envasado_inicial_id:e.id},t.push(i)})),this.getField("producto_terminado").setOptions(t)):this.getField("producto_terminado").setOptions(t)}},{key:"GrabarEnvIniMatEmpaque",value:function(){var e={produccion_fichas_id:this.props.data.id_ficha,articulo_id:this.getField("articulo_id_matEmpaque").getValue(),cantidad:this.getField("cantidad_matEmpaque").getValue(),produccion_fichas_envasado_inicial_id:this.getField("produccion_fichas_envasado_inicial_id").getValue(),codigo_bodega:this.getField("codigo_bodegaCodME").getValue()};this.generalFormat.nombre_accion="1-Permite_crear_un_material_de_empaque",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successGrabarEnvIniMatEmpaque,error:this.error_,general:this.generalFormat})}},{key:"successGrabarEnvIniMatEmpaque",value:function(e){200===e.estado_p&&(this.getField("modalEnIniMatEmpaque").handleClose(),this.envasadoInicialMaterialEmpaque())}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("lista_items_produccion").setVisible(!0),this.getField("lista_items_produccion").setItemsFichas(e.model),this.itemsFichas()):this.getField("lista_items_produccion").setVisible(!1),this.retornaEnvasado(),this.retornaCantidadEnvasar()}},{key:"itemsFichas",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="1-Retorna_los_items_de_la_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successItemFichas,error:this.error_,general:this.generalFormat})}},{key:"successItemFichas",value:function(e){if(this.getField("articulo_id").setValue(" "),200===e.estado_p){this.gridOptions.rowData=[],this.getField("tablaItems").initData(this.gridOptions);var t=new Map;this.tamanoDatos=e.model.length,t.set(0,{cellRenderer:this.setButtonDelete,width:70,field:"Operaci\xf3n 1"}),t.set(1,{cellRenderer:this.setButtonSubir,width:70,field:"Operaci\xf3n 2"}),t.set(2,{cellRenderer:this.setButtonBajar,width:70,field:"Operaci\xf3n 3"}),t.set("saldos",{cellRenderer:this.setButtonSaldos,field:"Saldos"}),t.set("orden",{cellStyle:{textAlign:"right"},width:50,field:"orden"}),t.set("nombre_unidad",{cellStyle:{textAlign:"right"},width:90,field:"nombre_unidad"}),t.set("actualizarbodega",{cellRenderer:this.setSelectBodega,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},width:150,field:"actualizar_bodega"}),t.set("saldo1",{cellRenderer:this.formato,cellStyle:{textAlign:"right"},field:"Saldo 1"}),t.set("codigo_producto",{cellRenderer:this.formatoCodigo,field:"codigo_producto"}),t.set("cantidad_galones",{cellRenderer:this.setButtonCantidadGalones,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.cantidadKilosChange,width:100,editable:!0,field:"cantidad_galones"}),t.set("cantidad_kilos",{cellRenderer:this.formato3,cellStyle:{textAlign:"right"},field:"cantidad_kilos"}),this.gridOptions.rowData=e.model,this.getField("tablaItems").initData(this.gridOptions,t),this.productosDelEnvasado()}else this.tamanoDatos=0,this.getField("tablaItems").toggle(!1)}},{key:"setButtonSaldos",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.verSaldos(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Ver saldo"),i}},{key:"verSaldos",value:function(e){this.getField("modalSaldos").handleClickOpen(),this.getField("codigo_articulo").setValue(e.codigo_producto),this.getField("nombre_articulo").setValue(e.nombre_articulo);var t={value:e.articulo_id};this.generalFormat.nombre_accion="1-Trae_el_saldo_referente_al_producto_para_el_select_de_bodegas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successVerSaldos,error:this.error_,general:this.generalFormat})}},{key:"successVerSaldos",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.gridOptionsSaldos.rowData=[],this.getField("TbBodegaSaldo").initData(this.gridOptionsSaldos),this.getField("TbBodegaSaldo").toggle(!0),this.gridOptionsSaldos.rowData=e.model,this.gridOptionsSaldos.paginationPageSize=100,this.getField("TbBodegaSaldo").initData(this.gridOptionsSaldos)):(this.getField("TbBodegaSaldo").toggle(!1),this.getField("fieldAlert").toggle(!0,"No se encuentra ning\xfan saldo","error"))}},{key:"setButtonCantidadGalones",value:function(e){var t=e.data.cantidad_galones,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t>=0?(a.textContent="".formatoPrecio(t),!0===e.data.saldo_insuficiente&&a.setAttribute("style","color:Red")):(a.textContent=0,!0===e.data.saldo_insuficiente&&a.setAttribute("style","color:Red")),i.appendChild(a),i}},{key:"cantidadKilosChange",value:function(e){this.getField("cantidad_kilos").setValue(e.data.cantidad_galones);var t={id:e.data.id,cantidad:this.getField("cantidad_kilos").getValue()};this.generalFormat.nombre_accion="1-Permite_cambiar_la_cantidad_de_kilos_de_una_ficha_items",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successCantidadKilosChange,error:this.error_,general:this.generalFormat})}},{key:"successCantidadKilosChange",value:function(e){200===e.estado_p&&(this.getField("cantidad_kilos").setValue(" "),this.itemsFichas())}},{key:"formato3",value:function(e){console.log("Formato 3 antes",e.data.saldo_insuficiente);var t=document.createElement("label");return t.textContent="".formatoPrecio(e.data.cantidad_kilos),!0===e.data.saldo_insuficiente&&(t.setAttribute("style","color: Red"),console.log("Formato 3 despues",e.data.saldo_insuficiente)),t}},{key:"openModalGrabar",value:function(){this.getField("ModalItemFichas").handleClickOpen()}},{key:"grabarItem",value:function(){if(this.getField("articulo_id").valid()&&this.getField("nombre").valid()&&this.getField("cantidad").valid()&this.getField("codigo").valid()&&this.getField("etapa_id").valid()){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("abastecimiento").setValue(1),this.getField("observacion").setValue(".");var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),etapa_id:this.getField("etapa_id").getValue(),articulo_id:this.getField("articulo_id").getValue(),cantidad:this.getField("cantidad").getValue(),abastecimiento:this.getField("abastecimiento").getValue(),observacion:this.getField("observacion").getValue(),codigo_bodega:this.getField("codigo_bodegaCod").getValue()};this.generalFormat.nombre_accion="1-Produccion_fichas_items_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successGrabarItem,error:this.error_,general:this.generalFormat})}}},{key:"successGrabarItem",value:function(e){200===e.estado_p?(this.getField("fieldAlert").toggle(!0,"Se agrego el item correctamente","success"),this.getField("codigo").setValue(""),this.getField("nombre").setValue(""),this.getField("cantidad").setValue(""),this.getField("etapa_id").setValue(""),this.getField("orden").setValue(""),this.getField("ModalItemFichas").handleClose(),this.itemsFichas()):this.getField("fieldAlert").toggle(!0,"No se agrego el item correctamente","error")}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteEspecification(i)},a.setAttribute("id","button_delete_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","X"),a}},{key:"deleteEspecification",value:function(e){var t={id:e};this.generalFormat.nombre_accion="1-Eliminar_produccion_fichas_items",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.succesEliminarItem,error:this.error_,general:this.generalFormat})}},{key:"succesEliminarItem",value:function(e){200===e.estado_p?(this.getField("fieldAlert").toggle(!0,"Se elimino el item correctamente","success"),this.itemsFichas()):this.getField("fieldAlert").toggle(!0,"No se elimino el item correctamente","error")}},{key:"setButtonSubir",value:function(e){var t=this,i=e.data.subir,a=e.data.id,o=parseInt(e.node.id),s=document.createElement("div"),r=document.createElement("input");return r.onclick=function(){return t.cambiarOrden(o,1,a)},r.setAttribute("id","button_subir_"+a),r.setAttribute("class","buttonStyle"),r.setAttribute("type","button"),r.setAttribute("value","\u2191"),i||(r.setAttribute("style","width:100%;height: 100%; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("disabled",!0)),s.appendChild(r),r}},{key:"cambiarOrden",value:function(e,t,i){var a={id:i,opcion:1===t?"subir":"bajar"};this.generalFormat.nombre_accion="1-Permite_cambiar_en_oden_de_una_ficha_items",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:a,success:this.successChangeOrden,error:this.error_,general:this.generalFormat})}},{key:"successChangeOrden",value:function(e){200===e.estado_p?(this.getField("fieldAlert").toggle(!0,"Se cambio el orden del item correctamente","success"),this.itemsFichas(),this.getField("opcion").setValue("")):this.getField("fieldAlert").toggle(!0,"No se cambio el orden del item correctamente","error")}},{key:"setButtonBajar",value:function(e){var t=this,i=e.data.bajar,a=e.data.id,o=parseInt(e.node.id),s=document.createElement("input");return s.onclick=function(){return t.cambiarOrden(o,0,a)},s.setAttribute("id","button_bajar_"+a),s.setAttribute("class","buttonStyle"),s.setAttribute("type","button"),s.setAttribute("value","\u2193"),i||(s.setAttribute("style","width:100%; height: 100%; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),s.setAttribute("disabled",!0)),s}},{key:"traerBodegas",value:function(){this.generalFormat.nombre_accion="1-Busca_los_datos_de_las_bodegas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successtraerBodegas,error:this.error_,general:this.generalFormat})}},{key:"successtraerBodegas",value:function(e){200===e.estado_p?this.selectOptions=e.model:this.getField("fieldAlert").toggle(!0,"No se tienen bodegas para mostrar","error")}},{key:"setSelectBodega",value:function(e){var t=this,i=e.data.codigo_bodega,a=document.createElement("select"),o=document.createElement("div");o.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),a.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),a.onchange=function(i){return t.valueChange(i,e.data.id)};var s=this.setSelectMaquina();return this.valor_idMaq=1,s.map((function(e){return a.appendChild(e),e.value===i&&(t.valor_idMaq=e.value),null})),o.appendChild(a),null===i||void 0===i?this.valido=!1:a.value=this.valor_idMaq,o}},{key:"valueChange",value:function(e,t){var i=parseInt(e.target.value);isNaN(i)?this.itemsFichas():this.grabarBodega(t,i)}},{key:"setSelectMaquina",value:function(){var e=document.createElement("option");e.setAttribute("value"," "),e.textContent="Ninguno";var t=[e];return this.selectOptions.map((function(e){var i=document.createElement("option");return i.setAttribute("value",e.codigo_bodega),i.textContent=e.nombre_bodega,t.push(i),null})),t}},{key:"grabarBodega",value:function(e,t){this.getField("codigo_bodega_tbItems").setValue(t);var i={id:e,codigo_bodega:this.getField("codigo_bodega_tbItems").getValue()};this.generalFormat.nombre_accion="1-Permite_cambiar_la_bodega_de_una_ficha_items",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successGrabarBodega,error:this.error_,general:this.generalFormat})}},{key:"successGrabarBodega",value:function(e){200===e.estado_p?(this.getField("fieldAlert").toggle(!0,"Se actualizo la bodega correctamente","success"),this.itemsFichas()):this.getField("fieldAlert").toggle(!0,"No se actualizo la bodega correctamente","error")}},{key:"grabarTodo",value:function(){if(this.tamanoDatos>0){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id);var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue()};this.generalFormat.nombre_accion="1-Permite_grabar_continuar_a_la_siguiente_etapa",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}else this.alertGeneral.toggle(!0,"Debe haber m\xednimo un producto agregado","error")}},{key:"cancelarFicha",value:function(){if(""!==this.getField("observaciones_cancelacion").getValue()&&" "!==this.getField("observaciones_cancelacion").getValue()){this.getField("observaciones_cancelacion").setError(!1,""),this.getField("id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id);var e={id_formulario:this.formId,id:this.getField("id").getValue(),observaciones_cancelacion:this.getField("observaciones_cancelacion").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue()};this.generalFormat.nombre_accion="1-Permite_cancelar_observacion_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}else this.getField("fieldAlert").toggle(!0,"El campo observac\xf3n es requerido","error")}},{key:"modalEnvase",value:function(){this.getField("modalEnvase").handleClickOpen(),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("produccion_kit_id").setValue(""),this.getField("codigo_producto").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("factor").setValue(""),this.getField("kit").setValue(""),this.getField("descripcion").setValue(""),this.getField("id_articulo").setValue(""),this.getField("es_envasado_id").setValue("")}},{key:"guardarEnvase",value:function(){if(""!==this.getField("cantidad_envasado").getValue()&&" "!==this.getField("cantidad_envasado").getValue()){this.getField("cantidad_envasado").setError(!1,"");var e={produccion_fichas_id:this.props.data.id_ficha,articulo_id:this.getField("id_articulo").getValue(),cantidad:this.getField("cantidad_envasado").getValue(),produccion_kit_id:this.getField("produccion_kit_id").getValue()};this.generalFormat.nombre_accion="1-Crea_una_ficha_envasado",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successGuardarEnvase,error:this.error_,general:this.generalFormat})}else this.getField("cantidad_envasado").valid()&&""===this.getField("cantidad_envasado").getValue()&&this.getField("cantidad_envasado").setError(!0,"Este campo es requerido")}},{key:"successGuardarEnvase",value:function(e){200===e.estado_p?(this.getField("fieldAlert").toggle(!0,"Ficha envasado creada exitosamente","success"),this.getField("modalEnvase").handleClose(),this.productosDelEnvasado(),this.uploadSelectProductos()):this.getField("fieldAlert").toggle(!0,"La ficha envasado no pudo ser creada","error")}},{key:"productosDelEnvasado",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="1-Retorna_fichas_envasado_por_ficha_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successProductosDelEnvasado,error:this.error_,general:this.generalFormat})}},{key:"successProductosDelEnvasado",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsProductosEnvasado.rowData=[],this.getField("TbProductosDelEnvasado").initData(this.gridOptionsProductosEnvasado),this.getField("TbProductosDelEnvasado").toggle(!0),this.gridOptionsProductosEnvasado.rowData=e.model,this.gridOptionsProductosEnvasado.paginationPageSize=100;var t=new Map;t.set("cantidad",{cellRenderer:this.setButtonCantidadAgregada,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.cantidadAgregadaChange,width:100,editable:!0,field:"cantidad"}),t.set("accion",{cellRenderer:this.setChangeProductosEnvasado,width:70,field:"Acci\xf3n"}),this.getField("TbProductosDelEnvasado").initData(this.gridOptionsProductosEnvasado,t),this.cantidadxEnvasar(),this.envasadoInicialMaterialEmpaque()}else this.getField("TbProductosDelEnvasado").toggle(!1),this.getField("fieldAlert").toggle(!0,"No hay envasado","error"),this.cantidadxEnvasar()}},{key:"setButtonCantidadAgregada",value:function(e){var t=e.data.cantidad,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t>=0?a.textContent="".formatoPrecio(t):(a.textContent=0,!0===e.data.saldo_insuficiente&&a.setAttribute("style","color:Red")),i.appendChild(a),i}},{key:"cantidadAgregadaChange",value:function(e){var t=this.getField("TbProductosDelEnvasado").cellValid(e.oldValue,e.newValue,"^[0-9]");if(e.newValue<0&&(e.data.cantidad=0),t){this.getField("cantidadProductoTerminado").setValue(e.newValue);var i={id:e.data.id,cantidad:this.getField("cantidadProductoTerminado").getValue()};this.generalFormat.nombre_accion="1-Permite_cambiar_la_cantidad_del_registro",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successCantidadAgregada,error:this.error_,general:this.generalFormat})}}},{key:"successCantidadAgregada",value:function(e){200===e.estado_p&&(this.getField("cantidadProductoTerminado").setValue(" "),this.productosDelEnvasado())}},{key:"cantidadxEnvasar",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="1-Retorna_la_cantidad_por_envasar",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successCantidadxEnvasar,error:this.error_,general:this.generalFormat})}},{key:"successCantidadxEnvasar",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=e.model;this.getField("total_envasado").setValue(t[0].total_envasado),this.getField("restante_envasar").setValue(t[0].restante_envasar)}}},{key:"envasadoInicialMaterialEmpaque",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="1-Retorna_el_material_de_empaque_por_el_id_de_la_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successEnvasadoInicialMaterialEmpaque,error:this.error_,general:this.generalFormat})}},{key:"successEnvasadoInicialMaterialEmpaque",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsEnvasadoInicialMaterialEmpaque.rowData=[],this.getField("tbEnvasadoIniMatEmpaque").initData(this.gridOptionsEnvasadoInicialMaterialEmpaque);var t=new Map;t.set("cantidad",{cellRenderer:this.setButtonCantidadMe,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.cantidadChangeMe,width:100,editable:!0,field:"cantidad"}),t.set("accion",{cellRenderer:this.setChangeEnvasadoIniMatEmpaque,width:70,field:"Acci\xf3n"}),this.getField("tbEnvasadoIniMatEmpaque").toggle(!0),this.gridOptionsEnvasadoInicialMaterialEmpaque.rowData=e.model,this.gridOptionsEnvasadoInicialMaterialEmpaque.paginationPageSize=100,this.getField("tbEnvasadoIniMatEmpaque").initData(this.gridOptionsEnvasadoInicialMaterialEmpaque,t)}else this.getField("tbEnvasadoIniMatEmpaque").toggle(!1),this.getField("fieldAlert").toggle(!0,"No hay envasado material empaque","error")}},{key:"setButtonCantidadMe",value:function(e){var t=e.data.cantidad,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t>=0?(a.textContent="".formatoPrecio(t),!0===e.data.saldo_insuficiente&&a.setAttribute("style","color:Red")):(a.textContent=0,!0===e.data.saldo_insuficiente&&a.setAttribute("style","color:Red")),i.appendChild(a),i}},{key:"cantidadChangeMe",value:function(e){var t=this.getField("tbEnvasadoIniMatEmpaque").cellValid(e.oldValue,e.newValue,"^[0-9]");if(e.newValue<0&&(e.data.cantidad=0),t){this.getField("cantidadMaterialEmpaque").setValue(e.newValue);var i={id:e.data.id,cantidad:this.getField("cantidadMaterialEmpaque").getValue()};this.generalFormat.nombre_accion="1-Permite_cambiar_la_cantidadTb2MatEmpaque",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successCantidadChangeMe,error:this.error_,general:this.generalFormat})}}},{key:"successCantidadChangeMe",value:function(e){200===e.estado_p&&(this.getField("cantidadMaterialEmpaque").setValue(" "),this.envasadoInicialMaterialEmpaque())}},{key:"setChangeEnvasadoIniMatEmpaque",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.setChangeEnvasadoInicialclick(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","X"),i}},{key:"setChangeEnvasadoInicialclick",value:function(e){var t={id:e.id};this.generalFormat.nombre_accion="1-Permite_eliminar_un_material_de_empaque",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.successProductosDelEnvasadoInicialClick,error:this.error_,general:this.generalFormat})}},{key:"successProductosDelEnvasadoInicialClick",value:function(e){200===e.estado_p&&this.envasadoInicialMaterialEmpaque()}},{key:"setChangeProductosEnvasado",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.setChangeProductosEnvasadoclick(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","X"),i}},{key:"setChangeProductosEnvasadoclick",value:function(e){var t={id:e.id};this.generalFormat.nombre_accion="1-Elimina_una_ficha_envasado",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.successProductosDelEnvasadoClick,error:this.error_,general:this.generalFormat})}},{key:"successProductosDelEnvasadoClick",value:function(e){200===e.estado_p&&(this.productosDelEnvasado(),this.uploadSelectProductos())}},{key:"setChangeArticuloMaterialEmpaque",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.setChangeArticuloMaterialEmpaqueClick(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"setChangeArticuloMaterialEmpaqueClick",value:function(e){var t={id:e.id};this.generalFormat.nombre_accion="1-Permite_eliminar_un_material_de_empaque",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.successArticuloMaterialEmpaqueClick,error:this.error_,general:this.generalFormat})}},{key:"successArticuloMaterialEmpaqueClick",value:function(e){200===e.estado_p&&this.uploadTable()}},{key:"modalEnvaseIniMatEmpaque",value:function(){this.getField("modalEnIniMatEmpaque").handleClickOpen(),this.getField("codigo_producto_matEmpaque").setValue(""),this.getField("nombre_producto_matEmpaque").setValue(""),this.getField("articulo_id_matEmpaque").setValue(""),this.getField("cantidad_matEmpaque").setValue(""),this.getField("producto_terminado").setValue(""),this.getField("produccion_fichas_envasado_inicial_id").setValue("")}}]),i}(d.a.form);d.a.addController("InvDes",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.traerKitsProduccion=o.traerKitsProduccion.bind(Object(s.a)(o)),o.successKitsProduccion=o.successKitsProduccion.bind(Object(s.a)(o)),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.gridOptionsKitsProduccion=Object.assign({},o.gridOptions),o.gridOptionsKitsProduccion.onSelectionChanged=o.onSelectionChanged,o.gridOptionsKitsComponentes=Object.assign({},o.gridOptions),o.setButtonSeleccionar=o.setButtonSeleccionar.bind(Object(s.a)(o)),o.seleccionarItem=o.seleccionarItem.bind(Object(s.a)(o)),o.traerComponentesKits=o.traerComponentesKits.bind(Object(s.a)(o)),o.successComponentesKits=o.successComponentesKits.bind(Object(s.a)(o)),o.setButtonEliminar=o.setButtonEliminar.bind(Object(s.a)(o)),o.eliminarItem=o.eliminarItem.bind(Object(s.a)(o)),o.modalAgregarComponenteKits=o.modalAgregarComponenteKits.bind(Object(s.a)(o)),o.agregarComponenteKits=o.agregarComponenteKits.bind(Object(s.a)(o)),o.successAgregarComponenteKits=o.successAgregarComponenteKits.bind(Object(s.a)(o)),o.closeModalComponentes=o.closeModalComponentes.bind(Object(s.a)(o)),o.confirmDeleteCustomItem=o.confirmDeleteCustomItem.bind(Object(s.a)(o)),o.successDeleteItem=o.successDeleteItem.bind(Object(s.a)(o)),o.cleanCantidadFactor=o.cleanCantidadFactor.bind(Object(s.a)(o)),o.filaSeleccionada=[],o.id_delete=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Kits Componentes @version 1.01.0018, @author Mario A. Sep\xfalveda"),this.traerKitsProduccion(),this.getField("agregar").setVisible(!1),this.getField("agregar").setClick(this.modalAgregarComponenteKits),this.getField("agregar_componente").setClick(this.agregarComponenteKits),this.getField("cancelar").setClick(this.closeModalComponentes),this.getField("codigo_articulo").setOnChange(this.cleanCantidadFactor)}},{key:"onSelectionChanged",value:function(){this.filaSeleccionada=this.gridOptionsKitsProduccion.api.getSelectedRows(),this.filaSeleccionada[0].id!==this.getField("produccion_kits_id").getValue()&&""!==this.getField("produccion_kits_id").getValue()&&(this.getField("agregar").setVisible(!1),this.getField("tabla_kits_componentes").toggle(!1))}},{key:"cleanCantidadFactor",value:function(){this.getField("cantidad").setValue(""),this.getField("factor").setValue("")}},{key:"traerKitsProduccion",value:function(){this.generalFormat.nombre_accion="390-Retorna_kits_todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successKitsProduccion,error:this.error_,general:this.generalFormat})}},{key:"successKitsProduccion",value:function(e){if(200===e.estado_p)if(e.model&&e.model.length>0){var t=[];e.model.find((function(e){return 1===e.estadoactivo_id&&t.push(e),null})),this.gridOptionsKitsProduccion.rowData=t;var i=new Map;i.set("seleccionar",{cellRenderer:this.setButtonSeleccionar,field:"seleccionar",width:150}),this.getField("tabla_componentes").initData(this.gridOptionsKitsProduccion,i)}else this.getField("tabla_componentes").toggle(!1)}},{key:"setButtonSeleccionar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.seleccionarItem(e)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:100px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Seleccionar"),i}},{key:"seleccionarItem",value:function(e){this.getField("tabla_kits_componentes").toggle(!1),this.getField("agregar").setVisible(!0),this.getField("produccion_kits_id").setValue(e.data.id),this.traerComponentesKits()}},{key:"traerComponentesKits",value:function(){if(""!==this.getField("produccion_kits_id").getValue()){var e={value:this.getField("produccion_kits_id").getValue()};this.generalFormat.nombre_accion="390-Retorna_componentes_kit_kitid",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successComponentesKits,error:this.error_,general:this.generalFormat})}}},{key:"successComponentesKits",value:function(e){if(200===e.estado_p)if(e.model&&e.model.length>0){this.gridOptionsKitsComponentes.rowData=e.model;var t=new Map;t.set("eliminar",{cellRenderer:this.setButtonEliminar,field:"eliminar",width:150}),this.getField("tabla_kits_componentes").initData(this.gridOptionsKitsComponentes,t)}else this.getField("tabla_kits_componentes").toggle(!1)}},{key:"setButtonEliminar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarItem(e)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarItem",value:function(e){this.id_delete=e.data.id,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustomItem),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustomItem",value:function(){this.getField("confirmModalCustom").toggle(!1);var e={id:this.id_delete};this.generalFormat.nombre_accion="390-Elimina_componentes_kits",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successDeleteItem,error:this.error_,general:this.generalFormat})}},{key:"successDeleteItem",value:function(e){200===e.estado_p&&(this.traerComponentesKits(),this.id_delete=0)}},{key:"modalAgregarComponenteKits",value:function(){this.getField("modal_componentes").handleClickOpen(),this.cleanCantidadFactor()}},{key:"agregarComponenteKits",value:function(){if(this.getField("codigo_articulo").valid()&&this.getField("descripcion_articulo").valid()&&this.getField("cantidad").valid()&&this.getField("factor").valid()&&""!==this.getField("produccion_kits_id").getValue()&&""!==this.getField("articulo_id").getValue()){var e={produccion_kits_id:this.getField("produccion_kits_id").getValue(),articulo_id:this.getField("articulo_id").getValue(),cantidad:this.getField("cantidad").getValue(),factor:this.getField("factor").getValue()};this.generalFormat.nombre_accion="390-Crea_componentes_kits",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successAgregarComponenteKits,error:this.error_,general:this.generalFormat})}}},{key:"successAgregarComponenteKits",value:function(e){200===e.estado_p&&this.closeModalComponentes()}},{key:"closeModalComponentes",value:function(){this.getField("modal_componentes").handleClose(),this.traerComponentesKits()}}]),i}(d.a.form);d.a.addController("kits_componentes",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.agregarCliente=o.agregarCliente.bind(Object(s.a)(o)),o.initModal=o.initModal.bind(Object(s.a)(o)),o.descuentoChange=o.descuentoChange.bind(Object(s.a)(o)),o.guardarCliente=o.guardarCliente.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.mostrarProductos=o.mostrarProductos.bind(Object(s.a)(o)),o.mostrarProductosBodegas=o.mostrarProductosBodegas.bind(Object(s.a)(o)),o.successProductosClientes=o.successProductosClientes.bind(Object(s.a)(o)),o.successDatosClientes2=o.successDatosClientes2.bind(Object(s.a)(o)),o.addProdutoACliente=o.addProdutoACliente.bind(Object(s.a)(o)),o.totalProducto=o.totalProducto.bind(Object(s.a)(o)),o.successDatosClientes=o.successDatosClientes.bind(Object(s.a)(o)),o.setButtonValorActual=o.setButtonValorActual.bind(Object(s.a)(o)),o.setButtonDeleteProducto=o.setButtonDeleteProducto.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.formatearPrecios=o.formatearPrecios.bind(Object(s.a)(o)),o.successUploadTable=o.successUploadTable.bind(Object(s.a)(o)),o.buscarClientes=o.buscarClientes.bind(Object(s.a)(o)),o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.eliminarProducto=o.eliminarProducto.bind(Object(s.a)(o)),o.confirmDeleteCustom=o.confirmDeleteCustom.bind(Object(s.a)(o)),o.mostrarClientes=o.mostrarClientes.bind(Object(s.a)(o)),o.successDatosClientes3=o.successDatosClientes3.bind(Object(s.a)(o)),o.limpiarValidacion=o.limpiarValidacion.bind(Object(s.a)(o)),o.abrirAgregarProductos=o.abrirAgregarProductos.bind(Object(s.a)(o)),o.buscarProductos=o.buscarProductos.bind(Object(s.a)(o)),o.initModalBodegas=o.initModalBodegas.bind(Object(s.a)(o)),o.codigoFacturacion=o.codigoFacturacion.bind(Object(s.a)(o)),o.successGuardarDescuento=o.successGuardarDescuento.bind(Object(s.a)(o)),o.initModalProductos=o.initModalProductos.bind(Object(s.a)(o)),o.successGuardarCliente=o.successGuardarCliente.bind(Object(s.a)(o)),o.guardarProducto=o.guardarProducto.bind(Object(s.a)(o)),o.addProductoCliente=o.addProductoCliente.bind(Object(s.a)(o)),o.successGuardarProducto=o.successGuardarProducto.bind(Object(s.a)(o)),o.formatearNombre=o.formatearNombre.bind(Object(s.a)(o)),o.validarExistenciaCliente=o.validarExistenciaCliente.bind(Object(s.a)(o)),o.consultarExistenciasBodegas=o.consultarExistenciasBodegas.bind(Object(s.a)(o)),o.successModificarDescuento=o.successModificarDescuento.bind(Object(s.a)(o)),o.calcularDigitoNit=o.calcularDigitoNit.bind(Object(s.a)(o)),o.validarDescuentoMax=o.validarDescuentoMax.bind(Object(s.a)(o)),o.successValidarDescuentoMax=o.successValidarDescuentoMax.bind(Object(s.a)(o)),o.successValidarDescuento=o.successValidarDescuento.bind(Object(s.a)(o)),o.seguir=!1,o.gridOptionsTercerosSede=Object.assign({},o.gridOptions),o.pedidosPendientes=o.pedidosPendientes.bind(Object(s.a)(o)),o.precio_cliente="",o.id_cliente=0,o.cliente_id=0,o.dataCliente=[],o.totalCantidadProductos=0,o.gridOptionsProducto=Object.assign({},o.gridOptions),o.gridOptionsProductoBodegas=Object.assign({},o.gridOptions),o.nitCliente="",o.sedeCliente=0,o.preciosCliente="",o.arrayTabla="",o.precio_base=0,o.totalProducto2=o.totalProducto2.bind(Object(s.a)(o)),o.traerDepartamentos=o.traerDepartamentos.bind(Object(s.a)(o)),o.successTraerDepartamentos=o.successTraerDepartamentos.bind(Object(s.a)(o)),o.traerCiudades=o.traerCiudades.bind(Object(s.a)(o)),o.successTraerCiudades=o.successTraerCiudades.bind(Object(s.a)(o)),o.opciones=[{text:"Ninguno",value:"",campos_cambian:{}}],o.traerPaises=o.traerPaises.bind(Object(s.a)(o)),o.successTraerPaises=o.successTraerPaises.bind(Object(s.a)(o)),o.traerProductosCoincidenciaNombreCoincidenciaMarca=o.traerProductosCoincidenciaNombreCoincidenciaMarca.bind(Object(s.a)(o)),o.gridOptionsProductos=Object.assign({},o.gridOptions),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.gridOptionsProductos.onSelectionChanged=o.onSelectionChanged,o.filaSeleccionadaGrid=[],o.habilitarBusquedaNombreMarca=o.habilitarBusquedaNombreMarca.bind(Object(s.a)(o)),o.mensajeErrorProducto=o.mensajeErrorProducto.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Lista Clientes @version: 1.01.0017, @author: Juan David Nietoo"),this.pedidosPendientes(),this.getField("pedidos_pendientes").setClick(this.pedidosPendientes),this.getField("btnAgregarCliente").setClick(this.guardarCliente),this.getField("paises_id").setOnChange(this.traerDepartamentos),this.getField("departamento_geografico_id").setOnChange(this.traerCiudades),this.getField("btnNuevoFerri").setClick(this.agregarCliente),this.getField("tercero_id_sede").setOnChange(this.buscarClientes),this.getField("cliente").setOnChange(this.limpiarCampos),this.getField("btnBuscarProductoBodegas").setClick(this.buscarProductos),this.getField("nit").setOnBlur(this.calcularDigitoNit),this.getField("nombre_producto_bodegas").setOnChange(this.consultarExistenciasBodegas),this.getField("bt_buscar_por_nombre_marca").setSuccess(this.traerProductosCoincidenciaNombreCoincidenciaMarca),this.getField("modalAgregarProducto").setCloseButton(this.mensajeErrorProducto),this.traerPaises()}},{key:"mensajeErrorProducto",value:function(){this.getField("producto").setError(!1,"El nombre del producto es requerido")}},{key:"traerPaises",value:function(){this.generalFormat.nombre_accion="288-paises_todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",success:this.successTraerPaises,error:this.error_,general:this.generalFormat})}},{key:"successTraerPaises",value:function(e){if(200===e.estado_p&&e.data.length>=1){var t=[],i=0;e.data.map((function(a){return 1===a.estadoactivo_id&&t.push(e.data[i]),i+=1,null}));var a=[{text:"Ninguno",value:"",campos_cambian:{}}];t.forEach((function(e){var t={};t.value="".concat(e.id),t.text="".concat(e.nombre),t.campos_cambian={},a.push(t)})),this.getField("paises_id").setOptions(a)}else this.getField("ciudad_id").setOptions(this.opciones),this.getField("departamento_geografico_id").setOptions(this.opciones),this.getField("paises_id").setOptions(this.opciones)}},{key:"pedidosPendientes",value:function(){this.getField("cliente").setValue(""),this.getField("nombre_cliente").setValue(""),this.getField("sede_cliente").setValue("");this.generalFormat.nombre_accion="servicio_traer_resumen_productos_pendientes_ferricentro",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.mostrarClientes,error:this.error_,general:this.generalFormat})}},{key:"validarDescuentoMax",value:function(e){if(e>=1){var t={value:e};this.generalFormat.nombre_accion="terceros_id-288",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successValidarDescuentoMax,error:this.error_,general:this.generalFormat})}}},{key:"successValidarDescuentoMax",value:function(e){200===e.estado_p?(this.getField("precios_cliente").setValue(e.data[0].precios),this.getField("nit").setValue(e.data[0].nit),this.getField("sede").setValue(e.data[0].sede),this.getField("precios").setValue(e.data[0].precios),this.getField("codigo").setValue(this.getField("producto").getValue()),this.precio_cliente=e.data[0].precios,this.getField("precios_cliente").setValue(e.data[0].precios),void 0!==this.getField("precios_cliente").getValue()&&""!==this.getField("precios_cliente").getValue()?(this.getField("producto").setDisabled(!1),this.getField("producto").setError(!1,"No hay una lista de precios configurada"),this.getField("precios_cliente").setError(!1,"No hay una lista de precios configurada")):(this.getField("producto").setError(!0,"No hay una lista de precios configurada"),this.getField("precios_cliente").setError(!0,"No hay una lista de precios configurada"))):this.alertGeneral.toggle(!0,"Error validando descuento","error")}},{key:"successValidarDescuento",value:function(e){if(200===e.estado_p){if(this.getField("descuento").setError(!1,"* Descuento no autorizado."),this.seguir&&this.getField("cantidad").valid()&this.getField("nombre_producto").valid()&this.getField("producto").valid()&this.getField("precio").valid()&this.getField("descuento").valid()&this.getField("total_producto_agregar").valid())if(this.getField("precio").getValue()>=this.precio_base){var t={nitsx_sedes_id:this.getField("nitsx_sedes_id").getValue(),articulo_id:this.getField("articulo_id").getValue(),cantidad:this.getField("cantidad").getValue(),descuento:this.getField("descuento").getValue(),precio:this.getField("precio").getValue(),precios:this.precio_cliente};this.getField("btnAgregarDatosCliente").setDisabled(!0),this.generalFormat.nombre_accion="servicio_guardar_producto_a_cliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.successGuardarProducto,error:this.error_,general:this.generalFormat})}else this.getField("precio").setError(!0,"El precio debe ser mayor al precio base")}else this.getField("descuento").setError(!0,"* Descuento no autorizado.")}},{key:"calcularDigitoNit",value:function(){if(this.getField("nit").valid()){var e="".calcularDigitoVerificacion(this.getField("nit").getValue());this.getField("verifica").setValue(e)}}},{key:"traerDepartamentos",value:function(){if(""!==this.getField("paises_id").getValue()&&" "!==this.getField("paises_id").getValue()){var e={value:this.getField("paises_id").getValue()};this.generalFormat.nombre_accion="288-depto_por_pais_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerDepartamentos,error:this.error_,general:this.generalFormat})}else this.getField("departamento_geografico_id").setOptions(this.opciones),this.getField("ciudad_id").setOptions(this.opciones)}},{key:"successTraerDepartamentos",value:function(e){if(200===e.estado_p&&e.data.length>=1){var t=[],i=0;e.data.map((function(a){return 1===a.estadoactivo_id&&t.push(e.data[i]),i+=1,null}));var a=[{text:"Ninguno",value:"",campos_cambian:{}}];t.forEach((function(e){var t={};t.value="".concat(e.id),t.text="".concat(e.nombre),t.campos_cambian={},a.push(t)})),this.getField("departamento_geografico_id").setOptions(a),this.getField("departamento_geografico_id").setValue("")}else this.getField("departamento_geografico_id").setOptions(this.opciones)}},{key:"traerCiudades",value:function(){if(""!==this.getField("departamento_geografico_id").getValue()&&" "!==this.getField("departamento_geografico_id").getValue()){var e={value:this.getField("departamento_geografico_id").getValue()};this.generalFormat.nombre_accion="288-ciudades_por_depto_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerCiudades,error:this.error_,general:this.generalFormat})}else this.getField("ciudad_id").setOptions(this.opciones)}},{key:"successTraerCiudades",value:function(e){if(200===e.estado_p&&e.data.length>=1){var t=[],i=0;e.data.map((function(a){return 1===a.estadoactivo_id&&t.push(e.data[i]),i+=1,null})),console.log("Ciudades: ",t);var a=[{text:"Ninguno",value:"",campos_cambian:{}}];t.forEach((function(e){var t={};t.value="".concat(e.id),t.text="".concat(e.nombre),t.campos_cambian={},a.push(t)})),this.getField("ciudad_id").setOptions(a),this.getField("ciudad_id").setValue("")}else this.getField("ciudad_id").setOptions(this.opciones);if(200===e.estado_p)if(e.data.length>0){var o=[{text:"Ninguno",value:"",campos_cambian:{}}];e.data.forEach((function(e){var t={};t.value="".concat(e.id),t.text="".concat(e.nombre),t.campos_cambian={},o.push(t)})),this.getField("ciudad_id").setOptions(o)}else this.getField("ciudad_id").setOptions(this.opciones);else this.getField("ciudad_id").setOptions(this.opciones)}},{key:"buscarProductos",value:function(){this.getField("nit_buscar").setValue(""),this.getField("modalTodasBodegas").handleClickOpen(this.initModalBodegas)}},{key:"mostrarProductosBodegas",value:function(e){void 0!==e.data&&e.data.length>0?(this.gridOptionsProductoBodegas.rowData=e.data,this.getField("tablaTodasBodegas").initData(this.gridOptionsProductoBodegas)):(this.getField("tablaTodasBodegas").toggle(!1),this.alertGeneral.toggle(!0,"No se encontraron bodegas","error"))}},{key:"initModalBodegas",value:function(){this.generalFormat.nombre_accion="288_retorna_codigo_fact_usuario",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.codigoFacturacion,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"codigoFacturacion",value:function(e){200===e.estado_p?this.getField("codigo_facturacion").setValue(e.data[0].codigo_facturacion):this.getField("codigo_facturacion").setValue("")}},{key:"consultarExistenciasBodegas",value:function(){if(""!==this.getField("codigo_bodega_producto").getValue()&&""!==this.getField("producto_inicial").getValue()){var e={codigo:this.getField("codigo_bodega_producto").getValue(),codigo_facturacion:this.getField("codigo_facturacion").getValue()};this.generalFormat.nombre_accion="288_Retorna_existencia_prod_en_bodegas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.mostrarProductosBodegas,error:this.error_,general:this.generalFormat})}else this.getField("tablaTodasBodegas").toggle(!1)}},{key:"limpiarCampos",value:function(){""===this.getField("nit_buscar").getValue()&&""===this.getField("tercero_id_sede").getValue()&&(this.getField("tablaClientes").toggle(!1),this.getField("tablaProductos").toggle(!1))}},{key:"buscarClientes",value:function(){var e="";if(""!==this.getField("tercero_id_sede").getValue()&&"."!==this.getField("tercero_id_sede").getValue()&&this.getField("tercero_id_sede").getValue()>=1){e="servicio_traer_datos_cliente_por_id";var t={value:this.getField("tercero_id_sede").getValue()};this.generalFormat.nombre_accion=e,this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.mostrarClientes,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"mostrarClientes",value:function(e){if(200===e.estado_p){var t=new Map;t.set("productos",{cellRenderer:this.setButtonDelete,width:110,sortable:!1,filter:!1,field:"productos"}),t.set("total",{cellRenderer:function(e){return"".formatoPrecio(e.data.total)},field:"total"}),t.set("sede",{width:90,field:"sede"}),t.set("documento",{width:120,field:"documento"}),t.set("fecha",{width:120,field:"fecha"}),this.gridOptions.rowData=e.data,this.getField("tablaClientes").initData(this.gridOptions,t)}else this.getField("tablaClientes").toggle(!1)}},{key:"setButtonDelete",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.mostrarProductos(e)},i.setAttribute("id","button_delete_"+e.id),i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Productos"),i}},{key:"mostrarProductos",value:function(e){this.totalCantidadProductos=0,this.precio_cliente=e.data.precios,this.id_cliente=e.data.id,this.cliente_id=e.data.id,this.getField("precios_cliente").setValue(e.data.precios);var t={value:e.data.id};this.generalFormat.nombre_accion="servicio_traer_datos_cliente_por_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successDatosClientes2,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successProductosClientes",value:function(e){var t="";200===e.estado_p&&(t=e.model),this.getField("modalProducto").handleClickOpen(this.initModalProductos,t)}},{key:"uploadTable",value:function(){this.totalCantidadProductos=0;var e={value:this.id_cliente};this.generalFormat.nombre_accion="servicio_traer_productos_por_cliente_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successUploadTable,error:this.error_,general:this.generalFormat,showMessage:!1}),this.getField("tercero_id_sede").setValue(this.id_cliente)}},{key:"successUploadTable",value:function(e){if(200===e.estado_p){this.gridOptionsProducto.rowData=[],this.getField("tablaProductos").initData(this.gridOptionsProducto);var t=new Map;for(var i in t.set("precio",{cellRenderer:function(e){return"".formatoPrecio(e.data.precio)},field:"precio"}),t.set("total",{cellRenderer:this.setButtonValorActual,field:"total"}),t.set("accion",{cellRenderer:this.setButtonDeleteProducto,sortable:!1,filter:!1,field:"acci\xf3n"}),e.model[0].modificar_descuento&&t.set("descuento",{cellRenderer:function(e){return e.data.descuento},cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},editable:!0,onCellValueChanged:this.descuentoChange,sortable:!0,filter:!1,field:"descuento"}),this.gridOptionsProducto.rowData=e.model,this.getField("tablaProductos").initData(this.gridOptionsProducto,t),e.model)this.totalCantidadProductos+=parseFloat(e.model[i].total);isNaN(this.totalCantidadProductos)?this.getField("total_producto").setValue(0):this.getField("total_producto").setValue(this.totalCantidadProductos.toFixed(2))}else this.getField("tablaProductos").toggle(!1),this.getField("total_producto").setValue(0)}},{key:"descuentoChange",value:function(e){var t=this.getField("tablaProductos").cellValid(e.oldValue,e.newValue,/^(\d{1,3})(\.\d{1,4})?$/,7);if(t){var i=e.newValue,a={id:e.data.id,descuento:parseFloat(i)};this.generalFormat.nombre_accion="servicio_traer_descuento_ferricentro_caja",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:a,success:this.successGuardarDescuento,error:this.error_,general:this.generalFormat})}else null!==t&&this.initModalProductos()}},{key:"successGuardarDescuento",value:function(e){this.uploadTable()}},{key:"successDatosClientes3",value:function(e){200===e.estado_p&&(e.data.total="".formatoPrecio(e.data.total),this.getField("listaProductos").setItemsFichas(this.dataCliente))}},{key:"agregarCliente",value:function(){this.getField("modalClientes").handleClickOpen(this.initModal)}},{key:"initModal",value:function(){}},{key:"limpiarValidacion",value:function(){this.getField("nombre").setDisabled(!0),this.getField("email").setDisabled(!0),this.getField("telefonos").setDisabled(!0)}},{key:"validarExistenciaCliente",value:function(e){!e||void 0!==e.length&&0!==e.length?(this.precio_cliente=e[0].precios,this.getField("precios_cliente").setValue(this.precio_cliente),this.getField("nombre").setDisabled(!0),this.getField("email").setDisabled(!0),this.getField("telefonos").setDisabled(!0)):(this.getField("nombre").setDisabled(!1),this.getField("email").setDisabled(!1),this.getField("telefonos").setDisabled(!1))}},{key:"formatearNombre",value:function(){if(""!==this.getField("nombre").getValue()){var e=this.getField("nombre").getValue();e=e.toUpperCase(),this.getField("nombre").setValue(e)}}},{key:"guardarCliente",value:function(){if(this.getField("nit").valid()&&this.getField("verifica").valid()&&this.getField("tipo_documento_id").valid()&&this.getField("nombre").valid()&&this.getField("paises_id").valid()&&this.getField("departamento_geografico_id").valid()&&this.getField("ciudad_id").valid()&&this.getField("direccion").valid()&&this.getField("telefonos").valid()&&this.getField("email").valid()&&this.getField("codigo_vendedor").valid()&&this.getField("nombre_vendedor").valid()){var e={nit:this.getField("nit").getValue(),nombre:this.getField("nombre").getValue(),telefonos:this.getField("telefonos").getValue(),email:this.getField("email").getValue(),ciudad_id:this.getField("ciudad_id").getValue(),departamento_geografico_id:this.getField("departamento_geografico_id").getValue(),paises_id:this.getField("paises_id").getValue(),direccion:this.getField("direccion").getValue(),tipo_documento_id:this.getField("tipo_documento_id").getValue(),verifica:this.getField("verifica").getValue(),codigo_vendedor:this.getField("codigo_vendedor").getValue()};this.generalFormat.nombre_accion="servicio_crear_cliente_ferricentro",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successGuardarCliente,error:this.error_,general:this.generalFormat})}}},{key:"successGuardarCliente",value:function(e){if(200===e.estado_p){this.id_cliente=e.data[0].nid,this.precio_cliente=e.data[0].precios,this.getField("precios_cliente").setValue(this.precio_cliente);var t={value:this.id_cliente};this.generalFormat.nombre_accion="servicio_traer_datos_cliente_por_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successDatosClientes2,error:this.error_,general:this.generalFormat,showMessage:!1}),this.getField("modalClientes").handleClose()}}},{key:"abrirAgregarProductos",value:function(){var e={value:this.id_cliente};this.generalFormat.nombre_accion="servicio_traer_datos_cliente_por_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosClientes2,error:this.error_,general:this.generalFormat,showMessage:!1}),this.getField("modalClientes").handleClose()}},{key:"initModalProductos",value:function(e){if(this.getField("nit_buscar").setValue(0),this.getField("btnAgregarProducto").setClick&&this.getField("btnAgregarProducto").setClick(this.guardarProducto),void 0!==e&&null!==e&&e.length>0){for(var t in this.totalCantidadProductos=0,e)this.totalCantidadProductos+=parseFloat(e[t].total);this.gridOptionsProducto.rowData=[],this.getField("tablaProductos").initData(this.gridOptionsProducto);var i=new Map;i.set("total",{cellRenderer:this.setButtonValorActual,field:"total"}),i.set("cantidad",{cellRenderer:function(e){return"".formatoPrecio(e.data.cantidad)},field:"cantidad"}),i.set("precio",{cellRenderer:function(e){return"".formatoPrecio(e.data.precio)},field:"precio"}),e[0].modificar_descuento&&i.set("descuento",{cellRenderer:function(e){return e.data.descuento},cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},editable:!0,onCellValueChanged:this.descuentoChange,sortable:!1,filter:!1,field:"descuento"}),i.set("accion",{cellRenderer:this.setButtonDeleteProducto,sortable:!1,filter:!1,field:"acci\xf3n"}),this.gridOptionsProducto.rowData=e,this.getField("tablaProductos").initData&&this.getField("tablaProductos").initData(this.gridOptionsProducto,i),isNaN(this.totalCantidadProductos)?this.getField("total_producto").setValue&&this.getField("total_producto").setValue(0):this.getField("total_producto").setValue&&this.getField("total_producto").setValue(this.totalCantidadProductos.toFixed(2)),void 0!==this.dataCliente[0]&&(this.dataCliente[0].total="".formatoPrecio(this.dataCliente[0].total))}else this.getField("total_producto").setValue(0);this.getField("listaProductos").setItemsFichas&&this.getField("listaProductos").setItemsFichas(this.dataCliente)}},{key:"successDatosClientes2",value:function(e){if(200===e.estado_p){var t=[];t.push(e.data[0]),this.dataCliente=t,this.getField("cliente").setValue(this.dataCliente[0].documento),this.getField("sede_cliente").setValue(this.dataCliente[0].sede),this.getField("nombre_cliente").setValue(this.dataCliente[0].nombre_cliente),this.nitCliente=this.dataCliente.nit,this.sedeCliente=this.dataCliente.sede,this.preciosCliente=this.dataCliente.precios,this.cliente_id=e.data[0].id;var i={value:this.cliente_id};this.generalFormat.nombre_accion="servicio_traer_productos_por_cliente_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.successProductosClientes,error:this.error_,general:this.generalFormat})}}},{key:"setButtonDeleteProducto",value:function(e){var t=this,i=e.data.id,a=document.createElement("div"),o=document.createElement("input");return o.onclick=function(){return t.eliminarProducto(i)},o.setAttribute("id","button_Add_"+i),a.setAttribute("id","div_Add_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Eliminar"),a.appendChild(o),a}},{key:"eliminarProducto",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustom),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustom",value:function(){this.getField("confirmModalCustom").toggle(!1);var e={id:this.id_delete};this.generalFormat.nombre_accion="servicio_eliminar_producto_a_cliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successDelete,error:this.error_,general:this.generalFormat})}},{key:"successDelete",value:function(e){void 0!==e.estado_p&&200!==e.estado_p||(this.totalCantidadProductos=0,this.uploadTable())}},{key:"setButtonValorActual",value:function(e){var t=e.data.total;return"".formatoPrecio(t)}},{key:"guardarProducto",value:function(){this.getField("nombre_marca").setValue("."),this.getField("nit_buscar").setValue(0);var e={value:this.cliente_id};this.generalFormat.nombre_accion="servicio_traer_datos_cliente_por_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosClientes,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successDatosClientes",value:function(e){var t=[];if(200===e.estado_p){t.push(e.data[0]);this.generalFormat.nombre_accion="servicio_traer_permiso_descuento_ferricentro",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successModificarDescuento,error:this.error_,general:this.generalFormat})}this.getField("modalAgregarProducto").handleClickOpen(this.addProductoCliente,t),this.getField("nombre_marca").setKeyUp(this.habilitarBusquedaNombreMarca),this.getField("producto").setOnBlur(this.habilitarBusquedaNombreMarca),this.getField("producto").setDisabled(!0),this.getField("cantidad").setValue(0),this.getField("descuento").setValue(0),this.getField("marca").setValue(0),this.getField("precio").setValue(0)}},{key:"successModificarDescuento",value:function(e){200===e.estado_p?e.model[0].modificar_descuento?this.getField("descuento").setDisabled(!1):(this.getField("descuento").setDisabled(!1),this.getField("descuento").setValue(0)):this.getField("modalAgregarProducto").handleClose()}},{key:"addProductoCliente",value:function(e){this.getField("nit_buscar").setValue(0),this.getField("precio").setKeyUp(this.totalProducto2),this.getField("cantidad").setKeyUp(this.totalProducto),this.getField("descuento").setKeyUp(this.totalProducto),this.getField("nitsx_sedes_id").setValue(this.id_cliente),this.getField("precios_cliente").setValue(this.precio_cliente),this.getField("nombre_producto").setOnChange(this.formatearPrecios),this.validarDescuentoMax(this.cliente_id),""!==e&&e.length>0&&(this.getField("total_items").setValue(e[0].total_items),this.getField("total_general_cliente").setValue(e[0].total_general.toFixed(2))),this.getField("btnAgregarDatosCliente").setClick(this.addProdutoACliente),this.getField("listaAgregarProducto").setItemsFichas(e)}},{key:"formatearPrecios",value:function(){this.getField("descuento").setValue(0),this.precio_base=this.getField("precio").getValue(),""!==this.getField("precio").getValue()&&this.getField("precio").setValue(this.getField("precio").getValue()),0===parseInt(this.getField("precio").getValue())&&(this.getField("cantidad").setValue(0),this.getField("descuento").setValue(0),this.getField("total_producto_agregar").setValue(0)),""!==this.getField("existencia").getValue()&&this.getField("existencia").setValue(this.getField("existencia").getValue()),""!==this.getField("precio_mas_iva").getValue()&&this.getField("precio_mas_iva").setValue(this.getField("precio_mas_iva").getValue())}},{key:"totalProducto2",value:function(){if(this.getField("descuento").setValue(0),""!==this.getField("precio").getValue()&&" "!==this.getField("precio").getValue())if(parseFloat(this.getField("precio").getValue())<parseFloat(this.precio_base))this.getField("precio").setError(!0,"El precio deber ser mayor al precio base");else{if(this.getField("precio").setError(!1,""),this.getField("precio_mas_iva").setValue("".precioTotalIvaCantidadDecimal(this.getField("precio").getValue(),this.getField("tarifa_iva").getValue(),0,1)),""!==this.getField("cantidad").getValue()&&""!==this.getField("descuento").getValue()&&""!==this.getField("precio").getValue()){var e="".precioTotalIvaCantidadDecimal(this.getField("precio").getValue(),this.getField("tarifa_iva").getValue(),this.getField("descuento").getValue(),this.getField("cantidad").getValue());this.getField("total_producto_agregar").setValue(e.toFixed(2))}else{var t="".precioTotalIvaCantidadDecimal(this.getField("precio").getValue(),this.getField("tarifa_iva").getValue(),0,this.getField("cantidad").getValue());this.getField("total_producto_agregar").setValue(t.toFixed(2))}parseFloat(this.getField("cantidad").getValue())>parseFloat(this.getField("existencia").getValue())?(this.seguir=!1,this.getField("cantidad").setError(!0,"* Este valor no puede ser mayor a las existencias")):(this.seguir=!0,this.getField("cantidad").setError(!1,""),this.getField("cantidad").valid(),this.getField("descuento").valid())}}},{key:"totalProducto",value:function(){if(""!==this.getField("precio").getValue()&&" "!==this.getField("precio").getValue())if(parseFloat(this.getField("precio").getValue())<parseFloat(this.precio_base))this.getField("precio").setError(!0,"El precio deber ser mayor al precio base");else{if(this.getField("precio").setError(!1,""),this.getField("precio_mas_iva").setValue("".precioTotalIvaCantidadDecimal(this.getField("precio").getValue(),this.getField("tarifa_iva").getValue(),0,1)),""!==this.getField("cantidad").getValue()&&""!==this.getField("descuento").getValue()&&""!==this.getField("precio").getValue()){var e="".precioTotalIvaCantidadDecimal(this.getField("precio").getValue(),this.getField("tarifa_iva").getValue(),this.getField("descuento").getValue(),this.getField("cantidad").getValue());this.getField("total_producto_agregar").setValue(e.toFixed(2))}else{var t="".precioTotalIvaCantidadDecimal(this.getField("precio").getValue(),this.getField("tarifa_iva").getValue(),0,this.getField("cantidad").getValue());this.getField("total_producto_agregar").setValue(t.toFixed(2))}parseFloat(this.getField("cantidad").getValue())>parseFloat(this.getField("existencia").getValue())?(this.seguir=!1,this.getField("cantidad").setError(!0,"* Este valor no puede ser mayor a las existencias")):(this.seguir=!0,this.getField("cantidad").setError(!1,""),this.getField("cantidad").valid(),this.getField("descuento").valid())}}},{key:"addProdutoACliente",value:function(){var e={nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue(),descuento:this.getField("descuento").getValue(),codigo:this.getField("producto").getValue(),precios:this.getField("precios").getValue()};this.getField("descuento").getValue()>=1?(this.generalFormat.nombre_accion="valida_descuento-288",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successValidarDescuento,error:this.error_,general:this.generalFormat})):(this.generalFormat.nombre_accion="valida_descuento-288",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successValidarDescuento,error:this.error_,general:this.generalFormat,showMessage:!1}))}},{key:"successGuardarProducto",value:function(e){this.getField("nit_buscar").setValue(0),this.getField("btnAgregarDatosCliente").setDisabled(!1),200===e.estado_p&&(this.getField("modalAgregarProducto").handleClose(),this.totalCantidadProductos=0,this.uploadTable())}},{key:"traerProductosCoincidenciaNombreCoincidenciaMarca",value:function(e){if(console.log("Data productos",e),e.data.length>1){this.getField("modal_productos").handleClickOpen(),this.gridOptionsProductos.rowData=e.data;var t=new Map;this.getField("tb_productos").initData(this.gridOptionsProductos,t)}else 1===e.data.length&&(this.getField("modal_productos").handleClose(),this.getField("tb_productos").toggle(!1),this.getField("producto").setValue(e.data[0].codigo),this.getField("nombre_marca").setValue("."),this.getField("marca").setValue(e.data[0].marca),this.getField("tarifa_iva").setValue(e.data[0].tarifa_iva),this.getField("precio").setValue(e.data[0].precio),this.getField("precio_mas_iva").setValue(e.data[0].precio_mas_iva),this.getField("referencia").setValue(e.data[0].referencia),this.getField("presenta").setValue(e.data[0].presenta),this.getField("existencia").setValue(e.data[0].existencia),this.getField("articulo_id").setValue(e.data[0].id),this.getField("nombre_producto").setValue(e.data[0].nombre))}},{key:"onSelectionChanged",value:function(){this.filaSeleccionadaGrid=this.gridOptionsProductos.api.getSelectedRows(),this.getField("producto").setValue(this.filaSeleccionadaGrid[0].codigo),this.getField("nombre_marca").setValue("."),this.getField("marca").setValue(this.filaSeleccionadaGrid[0].marca),this.getField("tarifa_iva").setValue(this.filaSeleccionadaGrid[0].tarifa_iva),this.getField("precio").setValue(this.filaSeleccionadaGrid[0].precio),this.getField("precio_mas_iva").setValue(this.filaSeleccionadaGrid[0].precio_mas_iva),this.getField("referencia").setValue(this.filaSeleccionadaGrid[0].referencia),this.getField("presenta").setValue(this.filaSeleccionadaGrid[0].presenta),this.getField("presenta").setValue(this.filaSeleccionadaGrid[0].presenta),this.getField("existencia").setValue(this.filaSeleccionadaGrid[0].existencia),this.getField("articulo_id").setValue(this.filaSeleccionadaGrid[0].id),this.getField("nombre_producto").setValue(this.filaSeleccionadaGrid[0].nombre),this.getField("modal_productos").handleClose()}},{key:"habilitarBusquedaNombreMarca",value:function(){"."!==this.getField("nombre_marca").getValue()&&""!==this.getField("nombre_marca").getValue()&&""!==this.getField("producto").getValue()?this.getField("bt_buscar_por_nombre_marca").setDisabled(!1):""===this.getField("producto").getValue()?(this.getField("bt_buscar_por_nombre_marca").setDisabled(!0),this.getField("producto").setError(!0,"El nombre del producto es requerido")):"."===this.getField("nombre_marca").getValue()&&this.getField("bt_buscar_por_nombre_marca").setDisabled(!0)}}]),i}(d.a.form);d.a.addController("ListaClient",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.keyUpDocument=o.keyUpDocument.bind(Object(s.a)(o)),o.changeId=o.changeId.bind(Object(s.a)(o)),o.onSuccessCharge=o.onSuccessCharge.bind(Object(s.a)(o)),o.error=o.error.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("nit_proveedor").setKeyUp(this.keyUpDocument),this.getField("nit_proveedor").setSelectionChanged=this.changeId,this.buttons.get("btn_change").ref.current.setSuccess(this.onSuccessSave.bind(this))}},{key:"keyUpDocument",value:function(e){13===(e.keyCode?e.keyCode:e.which)&&this.getField("verificacion").setValue("".calcularDigitoVerificacion(this.getField("nit_proveedor").getValue()))}},{key:"changeId",value:function(e){var t=this.getField("nit").getValue(),i=this.getField("sede").getValue();this.getField("nit").send(this.getField("nit").searchFormat.format(t+"/"+i,"sede","servicio",this.getFormId()),"GET",void 0,this.onSuccessCharge,this.error)}},{key:"onSuccessCharge",value:function(e){200===e.estado_p&&e.model.length>0&&(this.data=e.model[0],this.loadDataExternalForm(),this.getField("nit_proveedor").valid()&this.getField("verificacion").valid()&&this.getField("modal_manejo_clientes").handleClose())}},{key:"error",value:function(){}},{key:"onSuccessSave",value:function(){this.getField("modal_manejo_clientes").handleClickOpen(),this.initForm()}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.keyUpDocument=o.keyUpDocument.bind(Object(s.a)(o)),o.changeId=o.changeId.bind(Object(s.a)(o)),o.onSuccessCharge=o.onSuccessCharge.bind(Object(s.a)(o)),o.error=o.error.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("nit_proveedor").setKeyUp(this.keyUpDocument),this.getField("nit_proveedor").setSelectionChanged=this.changeId,this.buttons.get("btn_change").ref.current.setSuccess(this.onSuccessSave.bind(this))}},{key:"keyUpDocument",value:function(e){13===(e.keyCode?e.keyCode:e.which)&&this.getField("verificacion").setValue("".calcularDigitoVerificacion(this.getField("nit_proveedor").getValue()))}},{key:"changeId",value:function(e){var t=this.getField("nit").getValue(),i=this.getField("sede").getValue();this.getField("nit").send(this.getField("nit").searchFormat.format(t+"/"+i,"sede","servicio",this.getFormId()),"GET",void 0,this.onSuccessCharge,this.error)}},{key:"onSuccessCharge",value:function(e){200===e.estado_p&&e.model.length>0&&(this.data=e.model[0],this.loadDataExternalForm(),this.getField("nit_proveedor").valid()&this.getField("verificacion").valid()&&this.getField("modal_manejo_proveedores").handleClose())}},{key:"onSuccessSave",value:function(){this.getField("modal_manejo_proveedores").handleClickOpen(),this.initForm()}},{key:"error",value:function(){}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.etapasFicha=o.etapasFicha.bind(Object(s.a)(o)),o.successEtapasFicha=o.successEtapasFicha.bind(Object(s.a)(o)),o.successtraerOperarios=o.successtraerOperarios.bind(Object(s.a)(o)),o.selectOperario=[],o.setSelectOperario=o.setSelectOperario.bind(Object(s.a)(o)),o.successOperarios=o.successOperarios.bind(Object(s.a)(o)),o.valueChangeOperario=o.valueChangeOperario.bind(Object(s.a)(o)),o.guardarOperarioSeleccionado=o.guardarOperarioSeleccionado.bind(Object(s.a)(o)),o.successGuardarOperarioSeleccionado=o.successGuardarOperarioSeleccionado.bind(Object(s.a)(o)),o.successtraerMaquinas=o.successtraerMaquinas.bind(Object(s.a)(o)),o.selectMaquinas=[],o.setSelectMaquina=o.setSelectMaquina.bind(Object(s.a)(o)),o.successMaquina=o.successMaquina.bind(Object(s.a)(o)),o.valueChangeMaquina=o.valueChangeMaquina.bind(Object(s.a)(o)),o.guardarMaquinaSeleccionada=o.guardarMaquinaSeleccionada.bind(Object(s.a)(o)),o.successGuardarMaquinaSeleccionada=o.successGuardarMaquinaSeleccionada.bind(Object(s.a)(o)),o.successtraerRecipientes=o.successtraerRecipientes.bind(Object(s.a)(o)),o.selectRecipientes=[],o.setSelectRecipiente=o.setSelectRecipiente.bind(Object(s.a)(o)),o.successRecipiente=o.successRecipiente.bind(Object(s.a)(o)),o.valueChangeRecipiente=o.valueChangeRecipiente.bind(Object(s.a)(o)),o.guardarRecipienteSeleccionado=o.guardarRecipienteSeleccionado.bind(Object(s.a)(o)),o.successGuardarRecipienteSeleccionado=o.successGuardarRecipienteSeleccionado.bind(Object(s.a)(o)),o.pesoChange=o.pesoChange.bind(Object(s.a)(o)),o.setPeso=o.setPeso.bind(Object(s.a)(o)),o.terminarEtapa=o.terminarEtapa.bind(Object(s.a)(o)),o.traerDatosFicha=o.traerDatosFicha.bind(Object(s.a)(o)),o.retornarOperarios=o.retornarOperarios.bind(Object(s.a)(o)),o.retornaMaquinas=o.retornaMaquinas.bind(Object(s.a)(o)),o.retornaRecipientes=o.retornaRecipientes.bind(Object(s.a)(o)),o.terminarFicha=o.terminarFicha.bind(Object(s.a)(o)),o.validarCeldasVacias=[],o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnTerminar").setClick(this.terminarEtapa),this.getField("cancelar_ficha").setSuccess(this.terminarFicha),this.traerDatosFicha()}},{key:"terminarFicha",value:function(e){200===e.estado_p&&this.successCloseEstage(e)}},{key:"traerDatosFicha",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="259-Busca_una_ficha_por_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat})}},{key:"retornarOperarios",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="259-Retorna_todos_los_produccion_operarios",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successtraerOperarios,error:this.error_,general:this.generalFormat})}},{key:"retornaMaquinas",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="259-Retorna_todas_las_maquinas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successtraerMaquinas,error:this.error_,general:this.generalFormat})}},{key:"retornaRecipientes",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="259-Retorna_todos_los_recipientes",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successtraerRecipientes,error:this.error_,general:this.generalFormat})}},{key:"successDatosFicha",value:function(e){this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.retornarOperarios(),200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("lista_datos_ficha").setVisible(!0),this.getField("lista_datos_ficha").setItemsFichas(e.model)):this.getField("lista_datos_ficha").setVisible(!1)}},{key:"etapasFicha",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="259-Retorna_las_etapas_de_la_ficha_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successEtapasFicha,error:this.error_,general:this.generalFormat})}},{key:"successEtapasFicha",value:function(e){if(200===e.estado_p){var t=new Map;t.set("operario",{cellRenderer:this.setSelectOperario,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},field:"operario"}),t.set("nombre_maquina",{cellRenderer:this.setSelectMaquina,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},field:"nombre_maquina"}),t.set("nombre_recipiente",{cellRenderer:this.setSelectRecipiente,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},field:"nombre_recipiente"}),t.set("peso",{cellRenderer:this.setPeso,cellStyle:{textAlign:"right"},field:"peso"}),this.validarCeldasVacias=e.model,this.gridOptions.rowData=e.model,this.getField("TbEtapasFicha").initData(this.gridOptions,t)}else this.getField("TbEtapasFicha").toggle(!1)}},{key:"successtraerOperarios",value:function(e){this.retornaMaquinas(),200===e.estado_p?this.selectOperario=e.model:this.getField("fieldAlert").toggle(!0,"No se tienen operarios para mostrar","error")}},{key:"setSelectOperario",value:function(e){var t=this,i=e.data.operario_id,a=document.createElement("select"),o=document.createElement("div");o.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),a.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),a.onchange=function(i){return t.valueChangeOperario(i,e.data)},a.setAttribute("id","mySelectOperario_");var s=this.successOperarios();return this.valor_idOpe=1,s.map((function(e){return a.appendChild(e),parseInt(e.value)===i&&(t.valor_idOpe=parseInt(e.value)),null})),o.appendChild(a),null!==i&&void 0!==i&&(a.value=this.valor_idOpe),o}},{key:"successOperarios",value:function(e){var t=document.createElement("option");t.setAttribute("value"," "),t.textContent="Ninguno";var i=[t];return this.selectOperario.map((function(e){var t=document.createElement("option");return t.setAttribute("value",parseInt(e.id)),t.textContent=e.nombre,i.push(t),null})),i}},{key:"valueChangeOperario",value:function(e,t){var i=t.id,a=parseInt(e.target.value);this.guardarOperarioSeleccionado(i,a)}},{key:"guardarOperarioSeleccionado",value:function(e,t){var i={id:e,usuario_id:t};this.generalFormat.nombre_accion="259-Actualiza_operario_en_la_etapa_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successGuardarOperarioSeleccionado,error:this.error_,general:this.generalFormat})}},{key:"successGuardarOperarioSeleccionado",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.etapasFicha())}},{key:"successtraerMaquinas",value:function(e){this.retornaRecipientes(),200===e.estado_p?this.selectMaquinas=e.model:this.getField("fieldAlert").toggle(!0,"No se tienen maquinas para mostrar","error")}},{key:"setSelectMaquina",value:function(e){var t=this,i=e.data.maquina_id,a=document.createElement("select"),o=document.createElement("div");o.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),a.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),a.onchange=function(i){return t.valueChangeMaquina(i,e.data)},a.setAttribute("id","mySelectOperario_");var s=this.successMaquina();return this.valor_idMaq=1,s.map((function(e){return a.appendChild(e),parseInt(e.value)===i&&(t.valor_idMaq=parseInt(e.value)),null})),o.appendChild(a),null!==i&&void 0!==i&&(a.value=this.valor_idMaq),o}},{key:"successMaquina",value:function(e){var t=document.createElement("option");t.setAttribute("value"," "),t.textContent="Ninguno";var i=[t];return this.selectMaquinas.map((function(e){var t=document.createElement("option");return t.setAttribute("value",parseInt(e.id)),t.textContent=e.nombre,i.push(t),null})),i}},{key:"valueChangeMaquina",value:function(e,t){var i=t.id,a=parseInt(e.target.value);this.guardarMaquinaSeleccionada(i,a)}},{key:"guardarMaquinaSeleccionada",value:function(e,t){var i={id:e,maquina_id:t};this.generalFormat.nombre_accion="259-Permite_modificar_la_maquina_de_una_etapa",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successGuardarMaquinaSeleccionada,error:this.error_,general:this.generalFormat})}},{key:"successGuardarMaquinaSeleccionada",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.etapasFicha())}},{key:"successtraerRecipientes",value:function(e){200===e.estado_p?(this.selectRecipientes=e.model,this.etapasFicha()):(this.getField("fieldAlert").toggle(!0,"No se tienen recipientes para mostrar","error"),this.etapasFicha())}},{key:"setSelectRecipiente",value:function(e){var t=this,i=e.data.recipiente_id,a=document.createElement("select"),o=document.createElement("div");o.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),a.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),a.onchange=function(i){return t.valueChangeRecipiente(i,e.data)},a.setAttribute("id","mySelectOperario_");var s=this.successRecipiente();return this.valor_idRec=1,s.map((function(e){return a.appendChild(e),parseInt(e.value)===i&&(t.valor_idRec=parseInt(e.value)),null})),o.appendChild(a),null!==i&&void 0!==i&&(a.value=this.valor_idRec),o}},{key:"successRecipiente",value:function(e){var t=document.createElement("option");t.setAttribute("value"," "),t.textContent="Ninguno";var i=[t];return this.selectRecipientes.map((function(e){var t=document.createElement("option");return t.setAttribute("value",parseInt(e.id)),t.textContent=e.nombre,i.push(t),null})),i}},{key:"valueChangeRecipiente",value:function(e,t){var i=t.id,a=parseInt(e.target.value);this.guardarRecipienteSeleccionado(i,a)}},{key:"guardarRecipienteSeleccionado",value:function(e,t){var i={id:e,recipiente_id:t,peso:this.peso};this.generalFormat.nombre_accion="259-Permite_modificar_el_recipiente_de_una_etapa",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successGuardarRecipienteSeleccionado,error:this.error_,general:this.generalFormat})}},{key:"successGuardarRecipienteSeleccionado",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.etapasFicha())}},{key:"setPeso",value:function(e){var t=e.data.peso,i=document.createElement("div"),a=document.createElement("label");return a.textContent="".formatoPrecio(t),i.appendChild(a),i}},{key:"pesoChange",value:function(e){if(e.oldValue!==parseFloat(e.newValue)){var t=e.data.nombre_recipiente;""!==e.newValue&&parseFloat(e.newValue)?""!==t&&null!==t?(this.peso=parseFloat(e.newValue),this.guardarRecipienteSeleccionado(this.peso)):(this.gridOptions.rowData[parseInt(e.node.id)][e.column.colId]=e.oldValue,this.getField("TbEtapasFicha").refresh(this.gridOptions),this.alertGeneral.toggle(!0,"Debe seleccionar primero un recipiente","error")):("0"!==e.newValue?this.alertGeneral.toggle(!0,"El campo no cumple con el formato deseado","error"):this.alertGeneral.toggle(!0,"El valor debe ser mayor a cero","error"),this.gridOptions.rowData[parseInt(e.node.id)][e.column.colId]=e.oldValue,this.getField("TbEtapasFicha").refresh(this.gridOptions))}}},{key:"terminarEtapa",value:function(){var e=this;this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha);var t=!0;if(this.validarCeldasVacias.map((function(i,a){return null!==e.validarCeldasVacias[a].operario&&null!==e.validarCeldasVacias[a].nombre_maquina&&null!==e.validarCeldasVacias[a].nombre_recipiente&&"Ninguno"!==e.validarCeldasVacias[a].operario&&"Ninguno"!==e.validarCeldasVacias[a].nombre_maquina&&"Ninguno"!==e.validarCeldasVacias[a].nombre_recipiente&&void 0!==e.validarCeldasVacias[a].operario&&void 0!==e.validarCeldasVacias[a].nombre_maquina&&void 0!==e.validarCeldasVacias[a].nombre_recipiente||(e.alertGeneral.toggle(!0,"Hay campos vacios en la tabla, selecciones una opci\xf3n diferente a 'Ninguno'","error"),t=!1),null})),t){var i={id_formulario:this.formId,proceso_id:this.getField("proceso_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),produccion_fichas_id:this.getField("produccion_fichas_id").getValue()};this.generalFormat.nombre_accion="259-cancela_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}}]),i}(d.a.form);d.a.addController("AsignacionMaquinas",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnActualizar").setSuccess(this.successChange.bind(this)),this.getField("btnActualizar2").setSuccess(this.successChange.bind(this)),this.getField("btnActualizar3").setSuccess(this.successChange.bind(this)),this.getField("btnActualizar4").setSuccess(this.successChange.bind(this))}},{key:"successChange",value:function(e){200===e.estado_p&&this.getField("fieldAlert").toggle(!0,"Acci\xf3n exitosa","success")}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).keyUpDocument=o.keyUpDocument.bind(Object(s.a)(o)),o.initForm=o.initForm.bind(Object(s.a)(o)),o.changeId=o.changeId.bind(Object(s.a)(o)),o.onSuccessCharge=o.onSuccessCharge.bind(Object(s.a)(o)),o.error=o.error.bind(Object(s.a)(o)),o.onBlur=o.onBlur.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("nit_proveedor").setKeyUp(this.keyUpDocument),this.getField("nit_proveedor").setSelectionChanged=this.changeId,this.getField("btn_guardar").setSuccess(this.onSuccessSave.bind(this)),this.getField("nom1").setOnBlur(this.onBlur),this.getField("nom2").setOnBlur(this.onBlur),this.getField("ape1").setOnBlur(this.onBlur),this.getField("ape2").setOnBlur(this.onBlur)}},{key:"onBlur",value:function(e){this.getField("nombre").setValue(this.getField("nom1").getValue()+" "+this.getField("nom2").getValue()+" "+this.getField("ape1").getValue()+" "+this.getField("ape2").getValue())}},{key:"keyUpDocument",value:function(e){if(13===(e.keyCode?e.keyCode:e.which)){var t=this.getField("nit_proveedor").getValue();this.getField("verificacion").setValue("".calcularDigitoVerificacion(t))}}},{key:"changeId",value:function(e){var t=this.getField("nit").getValue(),i=this.getField("sede").getValue();this.getField("nit").send(this.getField("nit").searchFormat.format(t+"/"+i,"sede","servicio",this.getFormId()),"GET",void 0,this.onSuccessCharge,this.error)}},{key:"onSuccessCharge",value:function(e){200===e.estado_p&&e.model.length>0&&(this.data=e.model[0],this.loadDataExternalForm(),this.getField("nit_proveedor").valid()&this.getField("verificacion").valid()&&(this.getField("modal_modificar_terceros").handleClose(),this.getField("verifica").setValue(this.getField("verificacion").getValue()),this.getField("btn_guardar").setDisabled(!1)))}},{key:"error",value:function(){}},{key:"onSuccessSave",value:function(){this.getField("modal_modificar_terceros").handleClickOpen(),this.initForm()}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successItemFichas=o.successItemFichas.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.service.send(this.getConstant().searchFormat().format(this.props.data.id_ficha,"listaCalidadMolienda","servicio",this.formId),"GET",void 0,this.successItemFichas,this.error_)}},{key:"autorizarAjustesID",value:function(){var e={accion:"servicio",campo:"btnAjustesID",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,actividad_id:this.props.data.actividad_id,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id};this.service.send(this.getConstant().formSave(),"POST",e,this.successCloseEstage,this.error_)}},{key:"autorizarFicha",value:function(){if(this.valido){var e={accion:"servicio",campo:"btnAutorizar",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,actividad_id:this.props.data.actividad_id,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id};this.service.send(this.getConstant().formSave(),"POST",e,this.successCloseEstage,this.error_)}else this.alertGeneral.toggle(!0,"Faltan item por digitar Valor Actual","error")}},{key:"envasarFicha",value:function(){if(this.valido){var e={accion:"servicio",campo:"btnEnvasar",id_formulario:this.formId,produccion_fichas_id:this.props.data.id_ficha,actividad_id:this.props.data.actividad_id,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id};this.service.send(this.getConstant().formSave(),"POST",e,this.successCloseEstage,this.error_)}else this.alertGeneral.toggle(!0,"Faltan item por digitar Valor Actual","error")}},{key:"uploadTable",value:function(){this.valido=!0,this.service.send(this.getConstant().searchFormat().format(this.idficha,"tablaCalidadMolienda","servicio",this.formId),"GET",void 0,this.successTablaItemFichas,this.error_)}},{key:"successItemFichas",value:function(e){200===e.estado_p&&(this.getField("listaCalidadMolienda").setItemsFichas(e.model),this.idficha=e.model[0].id)}},{key:"successProximoConteo",value:function(e){200===e.estado_p&&this.getField("conteo").setValue(e.model[0].conteo)}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p){var t=new Map;t.set("valor_actual",{cellRenderer:this.setButtonValorActual,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px"},singleClickEdit:!0,onCellValueChanged:this.valorActualChange,editable:!0,field:"Valor actual"}),t.set("observaciones",{cellRenderer:this.setButtonObservacion,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px"},singleClickEdit:!0,onCellValueChanged:this.observacionChange,editable:!0,field:"Observaciones"}),this.gridOptions.rowData=e.model,this.getField("tablaCalidadMolienda").initData(this.gridOptions,t)}else this.getField("tablaCalidadMolienda").toggle(!1)}},{key:"valorActualChange",value:function(e){if(e.oldValue!==e.newValue){var t=e.data.id,i=e.newValue;""!==i&&parseFloat(i)&&parseFloat(i)>0?this.guardarValor(t,parseFloat(i)):(this.alertGeneral.toggle(!0,"El campo no cumple con el formato deseado","error"),this.gridOptions.rowData[parseInt(e.node.id)][e.column.colId]=e.oldValue,this.getField("tablaCalidad").refresh(this.gridOptions))}}},{key:"observacionChange",value:function(e){if(e.oldValue!==e.newValue){var t=e.data.id,i=e.newValue;""!==i&&this.guardarObservacion(t,i)}}},{key:"setButtonValorActual",value:function(e){var t=e.data.valor_actual;null!==t&&0!==t||(this.valido=!1);var i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"setValorActual",value:function(e,t,i){this.id_valor_actual=e,this.valMax=i,this.valMin=t,this.getField("modalCalidad").handleClickOpen(this.openModalGrabar.bind(this))}},{key:"openModalGrabar",value:function(){this.getField("btnGuardarValor").setClick(this.guardarValor)}},{key:"guardarValor",value:function(e,t){var i={accion:"f9_servicio",campo:"tablaCalidad",id_formulario:this.formId,valor_digitado:t,id:e};this.service.send(this.getConstant().formSave(),"PUT",i,this.successGrabarValorActual,this.error_)}},{key:"successGrabarValorActual",value:function(e){200===e.estado_p&&this.uploadTable()}},{key:"setButtonObservacion",value:function(e){var t=e.data.observaciones,i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"setObservacion",value:function(e,t){this.id_observacion=e,this.getField("modalObservacion").handleClickOpen(this.openModalGrabarOb.bind(this))}},{key:"openModalGrabarOb",value:function(){this.getField("btnGuardarObservacion").setClick(this.guardarObservacion)}},{key:"guardarObservacion",value:function(e,t){var i={accion:"enter_servicio",campo:"tablaCalidad",id_formulario:this.formId,observaciones:t,id:e};this.service.send(this.getConstant().formSave(),"PUT",i,this.successGrabarObservacion,this.error_)}},{key:"successGrabarObservacion",value:function(e){200===e.estado_p&&this.uploadTable()}},{key:"ajusteFicha",value:function(){var e={accion:"servicio",campo:"btnAjuste",id_formulario:this.formId,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.service.send(this.getConstant().formSave(),"POST",e,this.successCloseEstage,this.error_)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).onSelectionChanged=function(){o.getField("modal_notas").handleClose()},o.success=function(e){e.model.length>0?(o.gridOptions.rowData=e.model,o.getField("table_config").initData(o.gridOptions)):o.getField("table_config").toggle(!1)},o.error_=function(e){},o.UploadTable=function(){o.service.send(o.getConstant().searchFormat().format("","table_config","servicio",o.formId),"GET",void 0,o.success,o.error_)},o.searchDocument=o.searchDocument.bind(Object(s.a)(o)),o.successDocument=o.successDocument.bind(Object(s.a)(o)),o.save=o.save.bind(Object(s.a)(o)),o.initForm=o.initForm.bind(Object(s.a)(o)),o.setCheckbox=o.setCheckbox.bind(Object(s.a)(o)),o.saveAll=o.saveAll.bind(Object(s.a)(o)),o.dataCount=[],o.limpiarTodo=o.limpiarTodo.bind(Object(s.a)(o)),o.dataToSend=[],o.cancelAll=o.cancelAll.bind(Object(s.a)(o)),o.successPostCountOne=o.successPostCountOne.bind(Object(s.a)(o)),o.successCount1=o.successCount1.bind(Object(s.a)(o)),o.successCountsSave=o.successCountsSave.bind(Object(s.a)(o)),o.setValueField=o.setValueField.bind(Object(s.a)(o)),o.gridOptions2=Object.assign({},o.gridOptions),o.gridOptions3=Object.assign({},o.gridOptions),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.formatoFecha=o.formatoFecha.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"setValueField",value:function(e,t){var i=this.getField(e);i&&i.setValue(t)}},{key:"initForm",value:function(){this.getField("buscar_documento")&&this.getField("buscar_documento").setClick(this.searchDocument),this.getField("nit")&&this.getField("nit").setOnChange(this.limpiarTodo),this.getField("boton_grabar")&&this.getField("boton_grabar").setClick(this.save),this.getField("grabar_todo")&&this.getField("grabar_todo").setClick(this.saveAll),this.getField("debito")&&this.getField("debito").setOnChange(this.setCheckbox),this.getField("cancel")&&this.getField("cancel").setClick(this.cancelAll),this.gridOptions2.onSelectionChanged=this.onSelectionChanged}},{key:"cancelAll",value:function(){this.dataCount=[],this.dataToSend=[],this.limpiarFormulario(),this.getField("nit").setDisabled(!1),this.getField("codigo_concepto").setDisabled(!1),this.getField("valor_total").setDisabled(!1),this.getField("buscar_documento").setDisabled(!1),this.getField("boton_grabar").setDisabled(!1),this.getField("detalle_concepto").setDisabled(!1),this.getField("tabla_cartera").toggle(!1)}},{key:"limpiarTodo",value:function(){for(var e in this.refs)"nit"!==e&&"sede"!==e&&"nombre"!==e&&"direccion"!==e&&void 0!==this.getField(e).setValue&&this.getField(e).setValue("")}},{key:"setCheckbox",value:function(){var e=this.getField("debito").getValue();"D"===e?(this.getField("abono").setVisible(!0),this.getField("cargo").setVisible(!1)):"C"===e&&(this.getField("cargo").setVisible(!0),this.getField("abono").setVisible(!1))}},{key:"searchDocument",value:function(){if(this.getField("nit").valid()&&this.getField("sede").valid()){var e={nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="codigo_documento_fuente_negativo",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDocument,error:this.error_,general:this.generalFormat})}}},{key:"successDocument",value:function(e){if(e.data){if(1===e.data.length){var t=new Map;t.set("valor",{cellRenderer:function(e){return"".formatoPrecio(e.data.valor)},field:"valor"}),t.set("saldo",{cellRenderer:function(e){return"".formatoPrecio(e.data.saldo)},field:"saldo"}),this.gridOptions2.rowData=e.data,this.getField("tabla_documento_negativo").initData(this.gridOptions2,t)}else if(e.data.length>1){var i=new Map;i.set("valor",{cellRenderer:function(e){return"".formatoPrecio(e.data.valor)},field:"valor"}),i.set("saldo",{cellRenderer:function(e){return"".formatoPrecio(e.data.saldo)},field:"saldo"}),this.gridOptions2.rowData=e.data,this.getField("tabla_documento_negativo").initData(this.gridOptions2,i),this.getField("modal_notas").handleClickOpen()}this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success")}}},{key:"save",value:function(){if(this.getField("cuenta_concepto").valid()&this.getField("cuenta_documento").valid()&this.getField("valor_total").valid()&0===this.dataCount.length){this.getField("nit").setDisabled(!0),this.getField("codigo_concepto").setDisabled(!0),this.getField("valor_total").setDisabled(!0),this.getField("buscar_documento").setDisabled(!0),this.getField("boton_grabar").setDisabled(!0),this.getField("detalle_concepto").setDisabled(!0);var e={value:this.getField("cuenta_documento").getValue()+""};this.generalFormat.nombre_accion="traer_cuenta_codigo_exacto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successCount1,error:this.error_,general:this.generalFormat})}}},{key:"successCount1",value:function(e){if(void 0===e.estado_p||200===e.estado_p){this.getField("cuenta_concepto").setError(!1,"");var t=this.getField("debito").getValue();e.model[0].valor="D"===t?-this.getField("valor_total").getValue():this.getField("valor_total").getValue(),this.dataCount.push(e.model[0]);var i={value:this.getField("cuenta_concepto").getValue()+""};this.generalFormat.nombre_accion="traer_cuenta_codigo_exacto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.successCountsSave,error:this.error_,general:this.generalFormat})}else this.getField("cuenta_concepto").setError(!0,"* No se ha encontrado la cuenta."),this.dataCount=[]}},{key:"successCountsSave",value:function(e){if(void 0===e.estado_p||200===e.estado_p){this.getField("cuenta_documento").setError(!1,""),this.getField("nit").setDisabled(!0),this.getField("codigo_concepto").setDisabled(!0),this.getField("valor_total").setDisabled(!0),this.getField("buscar_documento").setDisabled(!0),this.getField("boton_grabar").setDisabled(!0),this.getField("detalle_concepto").setDisabled(!0);var t=this.getField("debito").getValue();e.model[0].valor="D"===t?this.getField("valor_total").getValue():-this.getField("valor_total").getValue(),this.dataCount.push(e.model[0]),this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success")}else this.getField("cuenta_documento").setError(!0,"* No se ha encontrado la cuenta."),this.dataCount=[];this.showTable(this.dataCount)}},{key:"showTable",value:function(e){var t=new Map;t.set("valor",{cellRenderer:function(e){return"".formatoPrecio(e.data.valor)},field:"valor"}),this.gridOptions3.rowData=e,this.getField("tabla_cartera").initData(this.gridOptions3,t)}},{key:"formatoFecha",value:function(e){return e.setDate(e.getDate()),e}},{key:"saveAll",value:function(){var e=this,t=(new Date).toISOString();if(this.getField("sFecha").setValue(t.split("T")[0]),2===this.dataCount.length){var i={};this.dataToSend=[],this.dataCount.map((function(t,a){return i.nCodigoCuenta=parseInt(t.codigo_cuenta),i.sCentroCosto=e.getField("sucursal_documento").getValue()+"",i.nBase=0,i.nValor=parseFloat(t.valor),i.sCodigoSucursal="0101",i.sCodigoDocumento="NC",i.sNumeroDocumento="0",i.nNit=e.getField("nit").getValue(),i.nNitResponsable=e.getField("nit").getValue(),i.nSede=parseInt(e.getField("sede").getValue()),i.nSedeResponsable=parseInt(e.getField("sede").getValue()),i.sBanco=".",i.sDeptoInterno="9999",i.sDocumentoNiif=".",i.sNiif="N",i.sLlave=e.getField("id_documento").getValue(),i.nCodigoCuentaNiif=0,i.sCodigoUsuario="gda",i.sCodigoOrigen="CONTA",i.sItem=a,i.nValorNiif=0,i.sDocumentoNit=".",i.sDetalleNiif=".",i.sDetalle=e.getField("detalle_concepto").getValue(),i.sTipoFuente=".",i.sDocumentoFuente=e.getField("numero").getValue(),i.sFecha=e.getField("sFecha").getValue(),i.nTarifa=0,e.dataToSend.push(i),i={},null})),this.getField("grabar_todo").setDisabled(!0);var a={id_formulario:this.formId,accion:"servicio",campo:"grabar_todo",data:this.dataToSend};this.generalFormat.nombre_accion="guardar_notas_cartera",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:a,success:this.successPostCountOne,error:this.error_,general:this.generalFormat})}}},{key:"successPostCountOne",value:function(e){void 0!==e.estado_p&&200!==e.estado_p||(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.dataCount=[],this.dataToSend=[],this.limpiarFormulario(),this.getField("nit").setDisabled(!1),this.getField("codigo_concepto").setDisabled(!1),this.getField("valor_total").setDisabled(!1),this.getField("buscar_documento").setDisabled(!1),this.getField("boton_grabar").setDisabled(!1),this.getField("detalle_concepto").setDisabled(!1),this.getField("tabla_cartera").toggle(!1),this.getField("grabar_todo").setDisabled(!1)),this.getField("grabar_todo").setDisabled(!1)}},{key:"limpiarFormulario",value:function(){for(var e in this.refs)this.getField(e).valueDefault&&null!==this.getField(e).valueDefault&&void 0!==this.getField(e).valueDefault&&""!==this.getField(e).valueDefault&&this.setValue?this.setValue(this.getField(e).valueDefault):void 0!==this.getField(e).setValue&&this.getField(e).setValue("");this.getField("abono").setVisible(!1),this.getField("abono").setValue("Abono"),this.getField("cargo").setVisible(!1),this.getField("cargo").setValue("Cargo")}},{key:"onClick",value:function(){}}]),i}(d.a.form);d.a.addController("notasCartera",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.keyUpDocument=o.keyUpDocument.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.setButtonEdit=o.setButtonEdit.bind(Object(s.a)(o)),o.modificar=o.modificar.bind(Object(s.a)(o)),o.cerrarModal=o.cerrarModal.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("nit_proveedor").setKeyUp(this.keyUpDocument),this.buttons.get("btn_change").ref.current.setSuccess(this.onSuccessSave.bind(this))}},{key:"keyUpDocument",value:function(e){if(13===(e.keyCode?e.keyCode:e.which)){var t=this.getField("nit_proveedor").getValue();this.service.send(this.getConstant().searchFormat().format(t,"nit_proveedor","enter_servicio",this.formId),"GET",void 0,this.uploadTable,this.error_),this.getField("verificacion").setValue("".calcularDigitoVerificacion(this.getField("nit_proveedor").getValue()))}}},{key:"error_",value:function(){}},{key:"uploadTable",value:function(e){if(e){var t=new Map;t.set("opcion",{cellRenderer:this.setButtonEdit}),this.gridOptions.rowData=e.model,this.getField("tablaOtros").initData(this.gridOptions,t)}}},{key:"setButtonEdit",value:function(e){var t=this,i=e.data.id,a=e.data.nit,o=e.data.sede,s=document.createElement("input");return s.onclick=function(){return t.modificar(a,o)},s.setAttribute("id","button_modify_"+i),s.setAttribute("class","buttonStyle"),s.setAttribute("type","button"),s.setAttribute("value","Modificar"),s}},{key:"modificar",value:function(e,t){this.service.send(this.getConstant().searchFormat().format(e+"/"+t,"tablaOtros","servicio",this.formId),"GET",void 0,this.cerrarModal,this.error_)}},{key:"cerrarModal",value:function(e){200===e.estado_p&&(this.getField("modalOtros").handleClose(),this.data=e.model[0],this.loadDataExternalForm())}},{key:"onSuccessSave",value:function(){this.getField("modalOtros").handleClickOpen(),this.initForm()}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.uploadPagoProveedores=o.uploadPagoProveedores.bind(Object(s.a)(o)),o.loadPagoProveedores=o.loadPagoProveedores.bind(Object(s.a)(o)),o.gridOptionsCarteraProveedor=Object.assign({},o.gridOptions),o.valorRetencionChange=o.valorRetencionChange.bind(Object(s.a)(o)),o.valorAbonoChange=o.valorAbonoChange.bind(Object(s.a)(o)),o.setButtonAbono=o.setButtonAbono.bind(Object(s.a)(o)),o.valorDescuentoChange=o.valorDescuentoChange.bind(Object(s.a)(o)),o.setButtonDescuento=o.setButtonDescuento.bind(Object(s.a)(o)),o.contar=0,o.setChange=o.setChange.bind(Object(s.a)(o)),o.change=o.change.bind(Object(s.a)(o)),o.abrirModal=o.abrirModal.bind(Object(s.a)(o)),o.loadConceptosPago=o.loadConceptosPago.bind(Object(s.a)(o)),o.gridOptionsConceptosPago=Object.assign({},o.gridOptions),o.setButtonValorCero=o.setButtonValorCero.bind(Object(s.a)(o)),o.valorCeroChange=o.valorCeroChange.bind(Object(s.a)(o)),o.totalNeto=o.totalNeto.bind(Object(s.a)(o)),o.limpiar=o.limpiar.bind(Object(s.a)(o)),o.ocultarTbCarteraProveedores=o.ocultarTbCarteraProveedores.bind(Object(s.a)(o)),o.abrirModalSucursal=o.abrirModalSucursal.bind(Object(s.a)(o)),o.loadModalSucursal=o.loadModalSucursal.bind(Object(s.a)(o)),o.gridOptionsTbsucursal=Object.assign({},o.gridOptions),o.selectedProveedorTable=o.selectedProveedorTable.bind(Object(s.a)(o)),o.gridOptionsTbsucursal.onSelectionChanged=o.selectedProveedorTable,o.arrayI=[],o.arrayC=[],o.arrayPagos=[],o.arrayCheque=[],o.guardarArrays=o.guardarArrays.bind(Object(s.a)(o)),o.successPostCountOne=o.successPostCountOne.bind(Object(s.a)(o)),o.abrirModalCheques=o.abrirModalCheques.bind(Object(s.a)(o)),o.loadModalCheques=o.loadModalCheques.bind(Object(s.a)(o)),o.gridOptionsTbcheques=Object.assign({},o.gridOptions),o.agregarCheque=o.agregarCheque.bind(Object(s.a)(o)),o.numReg=-2,o.dataArray=[],o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.deleteEspecification=o.deleteEspecification.bind(Object(s.a)(o)),o.limpiarCheque=o.limpiarCheque.bind(Object(s.a)(o)),o.valorChequeoChange=o.valorChequeChange.bind(Object(s.a)(o)),o.contarNumeroCheques=0,o.validarFechas=o.validarFechas.bind(Object(s.a)(o)),o.setButtonRetencion=o.setButtonRetencion.bind(Object(s.a)(o)),o.limpiarTodo=o.limpiarTodo.bind(Object(s.a)(o)),o.gridOptionsCarteraProveedor.onSelectionChanged=o.funcionVacia,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnconsultar").setClick(this.uploadPagoProveedores),this.getField("abonos").setOnChange(this.totalNeto),this.getField("retenciones").setOnChange(this.totalNeto),this.getField("descuentos").setOnChange(this.totalNeto),this.getField("conceptosPago").setOnChange(this.totalNeto),this.getField("btncancelar").setClick(this.limpiar),this.getField("totalNeto").setOnChange(this.ocultarTbCarteraProveedores),this.getField("btngrabar").setClick(this.abrirModalSucursal),this.getField("btncheques").setClick(this.abrirModalCheques),this.getField("btnagregarcheque").setClick(this.agregarCheque),this.getField("btncancelarcheque").setClick(this.limpiarCheque),this.getField("nit").setOnChange(this.limpiarTodo);this.generalFormat.nombre_accion="360-Retornar_los_registros_de_conceptos_pago",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.loadConceptosPago,error:this.error_,general:this.generalFormat})}},{key:"limpiarTodo",value:function(){for(var e in this.refs)"nit"!==e&&"sede"!==e&&"nombre_cliente"!==e&&"TbCarteraProveedor"!==e&&void 0!==this.getField(e).setValue&&this.getField(e).setValue("")}},{key:"funcionVacia",value:function(){}},{key:"loadConceptosPago",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=new Map;t.set("valor",{cellRenderer:this.setButtonValorCero,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorCeroChange,width:100,editable:!0,field:"valor"}),this.getField("TbConceptosPago").toggle(!0),this.gridOptionsConceptosPago.rowData=e.model,this.getField("TbConceptosPago").initData(this.gridOptionsConceptosPago,t),this.gridOptionsConceptosPago.api.selectIndex(0,!0,!0)}}},{key:"setButtonValorCero",value:function(e){var t=e.data.valor,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t.length<=17?(a.textContent=t,"".formatoPrecio(e.data.valor)):(a.textContent=0,i.appendChild(a),i)}},{key:"valorCeroChange",value:function(e){if(this.getField("TbConceptosPago").cellValid(e.oldValue,e.newValue,"^[0-9_-]"))if(e.newValue.length<=17){var t=e.newValue;""!==this.getField("conceptosPago").getValue()?this.getField("conceptosPago").setValue(parseInt(this.getField("conceptosPago").getValue())+parseInt(t)):this.getField("conceptosPago").setValue(t)}else e.newValue.length>17&&(e.data.valor=0,this.alertGeneral.toggle(!0,"Valor NO puede ser mayor a 17 caracteres","error"));if(0!==e.oldValue&&void 0!==e.oldValue){var i=e.oldValue;this.getField("conceptosPago").setValue(parseInt(this.getField("conceptosPago").getValue())-parseInt(i))}}},{key:"uploadPagoProveedores",value:function(){if(""!==this.getField("nit").getValue()&&" "!==this.getField("nit").getValue()){this.getField("nit").setError(!1,"");var e={value:this.getField("nit").getValue()};this.generalFormat.nombre_accion="360-Retorna_los_registros_de_cartera_proveedores_seg\xfan_el_nit_y_sede",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.loadPagoProveedores,error:this.error_,general:this.generalFormat})}else this.getField("nit").setError(!0,"Este campo es requerido")}},{key:"loadPagoProveedores",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=new Map;t.set("abono",{cellRenderer:this.setButtonAbono,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorAbonoChange,width:100,editable:!0,field:"abono"}),t.set("retencion",{cellRenderer:this.setButtonRetencion,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorRetencionChange,width:100,editable:!0,field:"retencion"}),t.set("descuento",{cellRenderer:this.setButtonDescuento,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorDescuentoChange,width:100,editable:!0,field:"descuento"}),t.set("accion",{cellRenderer:this.setChange,field:"Acci\xf3n"}),t.set("saldo",{cellRenderer:function(e){return"".formatoPrecio(e.data.saldo)},cellStyle:{textAlign:"right",field:"saldo"}}),t.set("valor",{cellRenderer:function(e){return"".formatoPrecio(e.data.valor)},cellStyle:{textAlign:"right",field:"valor"}}),this.getField("TbCarteraProveedor").toggle(!0),this.gridOptionsCarteraProveedor.rowData=e.model,this.getField("TbCarteraProveedor").initData(this.gridOptionsCarteraProveedor,t),this.gridOptionsCarteraProveedor.api.selectIndex(0,!0,!0)}}},{key:"setButtonRetencion",value:function(e){var t=e.data.retencion,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t.length<=15&&t>0?(a.textContent=t,"".formatoPrecio(e.data.retencion)):(a.textContent=0,i.appendChild(a),i)}},{key:"valorRetencionChange",value:function(e){var t=this.getField("TbCarteraProveedor").cellValid(e.oldValue,e.newValue,"^[0-9]");if(e.newValue<0&&(e.data.retencion=0),e.newValue>0&&void 0===e.oldValue||e.newValue>0&&e.oldValue>=0){if(t){if((void 0===e.data.descuento&&void 0===e.data.abono&&0===e.oldValue&&e.newValue.length<=15||"0"===e.data.descuento&&"0"===e.data.abono&&e.newValue.length<=15||void 0===e.data.descuento&&"0"===e.data.abono&&e.newValue.length<=15||"0"===e.data.descuento&&void 0===e.data.abono&&e.newValue.length<=15||void 0===e.data.descuento&&void 0===e.data.abono&&"0"===e.oldValue&&e.newValue.length<=15)&&(this.contar=this.contar+1,this.getField("totalNumDocumentos").setValue(this.contar)),0!==e.oldValue&&void 0!==e.oldValue){var i=e.oldValue;this.getField("retenciones").setValue(parseInt(this.getField("retenciones").getValue())-parseInt(i))}if(e.newValue.length<=15){var a=e.newValue;""!==this.getField("retenciones").getValue()?this.getField("retenciones").setValue(parseInt(this.getField("retenciones").getValue())+parseInt(a)):this.getField("retenciones").setValue(a)}else e.newValue.length>15&&(e.data.retencion=0,("0"===e.data.descuento&&"0"===e.data.abono||void 0===e.data.descuento&&void 0===e.data.abono&&e.oldValue>"0"||void 0===e.data.descuento&&"0"===e.data.abono||"0"===e.data.descuento&&void 0===e.data.abono&&e.oldValue>"0")&&(this.contar=this.contar-1,this.getField("totalNumDocumentos").setValue(this.contar)),this.alertGeneral.toggle(!0,"Retenciones NO puede ser mayor a 15 caracteres","error"))}}else if("0"===e.newValue&&t&&(("0"===e.data.descuento&&"0"===e.data.abono||void 0===e.data.descuento&&void 0===e.data.abono&&e.oldValue>"0"||void 0===e.data.descuento&&"0"===e.data.abono||"0"===e.data.descuento&&void 0===e.data.abono&&e.oldValue>"0")&&(this.contar=this.contar-1,this.getField("totalNumDocumentos").setValue(this.contar)),e.oldValue>0)){var o=e.oldValue;""!==this.getField("retenciones").getValue()?this.getField("retenciones").setValue(parseInt(this.getField("retenciones").getValue())-parseInt(o)):this.getField("retenciones").setValue(o)}}},{key:"setButtonAbono",value:function(e){var t=e.data.abono,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t<=e.data.saldo?(a.textContent=t,"".formatoPrecio(e.data.abono)):(a.textContent=0,i.appendChild(a),i)}},{key:"valorAbonoChange",value:function(e){var t=this.getField("TbCarteraProveedor").cellValid(e.oldValue,e.newValue,"^[0-9]");if("0"!==e.newValue){if(t){if((void 0===e.data.descuento&&0===e.data.retencion&&void 0===e.oldValue&&e.newValue<=e.data.saldo||"0"===e.data.descuento&&"0"===e.data.retencion&&"0"===e.oldValue&&e.newValue<=e.data.saldo||void 0===e.data.descuento&&0===e.data.retencion&&"0"===e.oldValue&&e.newValue<=e.data.saldo||void 0===e.data.descuento&&"0"===e.data.retencion&&"0"===e.oldValue&&e.newValue<=e.data.saldo||void 0===e.data.descuento&&0===e.data.retencion&&0===e.oldValue&&e.newValue<=e.data.saldo)&&(this.contar=this.contar+1,this.getField("totalNumDocumentos").setValue(this.contar)),0!==e.oldValue&&void 0!==e.oldValue){var i=e.oldValue;this.getField("abonos").setValue(parseInt(this.getField("abonos").getValue())-parseInt(i))}if(e.newValue<=e.data.saldo){var a=e.newValue;""!==this.getField("abonos").getValue()?this.getField("abonos").setValue(parseInt(this.getField("abonos").getValue())+parseInt(a)):this.getField("abonos").setValue(a)}else e.newValue>e.data.saldo&&(e.data.abono=0,this.alertGeneral.toggle(!0,"Abono NO puede ser mayor a saldo","error"))}}else if("0"===e.newValue&&t&&((void 0===e.data.descuento&&0===e.data.retencion&&e.oldValue>"0"||"0"===e.data.descuento&&"0"===e.data.retencion&&e.oldValue>"0"||void 0===e.data.descuento&&"0"===e.data.retencion&&e.oldValue>"0"||void 0===e.data.descuento&&"0"===e.data.retencion&&e.oldValue>void 0)&&(this.contar=this.contar-1,this.getField("totalNumDocumentos").setValue(this.contar)),e.oldValue>0)){var o=e.oldValue;""!==this.getField("abonos").getValue()?this.getField("abonos").setValue(parseInt(this.getField("abonos").getValue())-parseInt(o)):this.getField("abonos").setValue(o)}}},{key:"setButtonDescuento",value:function(e){var t=e.data.descuento,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t.length<=13&&t>0?(a.textContent=t,"".formatoPrecio(e.data.descuento)):(a.textContent=0,i.appendChild(a),i)}},{key:"valorDescuentoChange",value:function(e){var t=this.getField("TbCarteraProveedor").cellValid(e.oldValue,e.newValue,"^[0-9]");if(e.newValue<0&&(e.data.descuento=0),e.newValue>0&&void 0===e.oldValue||e.newValue>0&&e.oldValue>=0){if(t){if((void 0===e.data.abono&&0===e.data.retencion&&void 0===e.oldValue&&e.newValue.length<=13||"0"===e.data.abono&&"0"===e.data.retencion&&"0"===e.oldValue&&e.newValue.length<=13||void 0===e.data.abono&&0===e.data.retencion&&"0"===e.oldValue&&e.newValue.length<=13||void 0===e.data.abono&&"0"===e.data.retencion&&"0"===e.oldValue&&e.newValue.length<=13)&&(this.contar=this.contar+1,this.getField("totalNumDocumentos").setValue(this.contar)),0!==e.oldValue&&void 0!==e.oldValue){var i=e.oldValue;this.getField("descuentos").setValue(parseInt(this.getField("descuentos").getValue())-parseInt(i))}if(e.newValue.length<=13){var a=e.newValue;""!==this.getField("descuentos").getValue()?this.getField("descuentos").setValue(parseInt(this.getField("descuentos").getValue())+parseInt(a)):this.getField("descuentos").setValue(a)}else e.newValue.length>13&&(e.data.descuento=0,(void 0===e.data.abono&&0===e.data.retencion&&e.oldValue>"0"||"0"===e.data.abono&&"0"===e.data.retencion&&e.oldValue>"0"||void 0===e.data.abono&&"0"===e.data.retencion&&e.oldValue>"0")&&(this.contar=this.contar-1,this.getField("totalNumDocumentos").setValue(this.contar)),this.alertGeneral.toggle(!0,"Descuentos NO puede ser mayor a 13 caracteres","error"))}}else if("0"===e.newValue&&t&&((void 0===e.data.abono&&0===e.data.retencion&&e.oldValue>"0"||"0"===e.data.abono&&"0"===e.data.retencion&&e.oldValue>"0"||void 0===e.data.abono&&"0"===e.data.retencion&&e.oldValue>"0")&&(this.contar=this.contar-1,this.getField("totalNumDocumentos").setValue(this.contar)),e.oldValue>0)){var o=e.oldValue;""!==this.getField("descuentos").getValue()?this.getField("descuentos").setValue(parseInt(this.getField("descuentos").getValue())-parseInt(o)):this.getField("descuentos").setValue(o)}}},{key:"setChange",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.change(e.data.id)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Ver detalle"),i}},{key:"change",value:function(e){var t={value:e};this.generalFormat.nombre_accion="360-retorna_el_campo_texto_de_cartera_proveedores",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.abrirModal,error:this.error_,general:this.generalFormat})}},{key:"abrirModal",value:function(e){var t=this;200===e.estado_p&&void 0!==e.model&&e.model.length>0&&(this.getField("modal_cartera_texto").handleClickOpen(),e.model.forEach((function(e,i){0===i&&t.getField("texto").setValue(e.texto),1===i&&t.getField("numero").setValue(e.numero),2===i&&t.getField("fecha").setValue(e.fecha),3===i&&t.getField("valor").setValue(e.valor),4===i&&t.getField("saldo").setValue(e.saldo)})))}},{key:"totalNeto",value:function(){var e=0,t=0,i=0,a=0;""!==this.getField("abonos").getValue()&&(e=this.getField("abonos").getValue()),""!==this.getField("descuentos").getValue()&&(t=this.getField("descuentos").getValue()),""!==this.getField("retenciones").getValue()&&(i=this.getField("retenciones").getValue()),""!==this.getField("conceptosPago").getValue()&&(a=this.getField("conceptosPago").getValue()),this.getField("totalNeto").setValue(e-t-i-a)}},{key:"limpiar",value:function(){this.getField("nit").setValue(""),this.getField("sede").setValue(""),this.getField("nombre_proveedor").setValue(""),this.getField("abonos").setValue(""),this.getField("descuentos").setValue(""),this.getField("retenciones").setValue(""),this.getField("totalNumDocumentos").setValue(""),this.getField("conceptosPago").setValue(""),this.getField("totalNeto").setValue(""),this.getField("abonar").setValue(""),this.getField("observaciones").setValue(""),this.getField("totalChequesValor").setValue(""),this.getField("totalChequesValor2").setValue("")}},{key:"ocultarTbCarteraProveedores",value:function(){var e=this;""!==this.getField("totalNeto").getValue()?this.getField("totalNeto").setError(!1,""):(this.getField("TbCarteraProveedor").toggle(!1),this.contar=0,this.gridOptionsConceptosPago.rowData.forEach((function(t){void 0!==t.valor&&(t.valor=0,e.initForm())})),this.dataArray=[],this.getField("Tbcheques").toggle(!1))}},{key:"abrirModalSucursal",value:function(){if(""!==this.getField("nit").getValue()&&" "!==this.getField("nit").getValue()&&""!==this.getField("sede").getValue()&&" "!==this.getField("sede").getValue()&&""!==this.getField("nombre_proveedor").getValue()&&" "!==this.getField("nombre_proveedor").getValue()&&""!==this.getField("abonos").getValue()&&" "!==this.getField("abonos").getValue()&&""!==this.getField("retenciones").getValue()&&" "!==this.getField("retenciones").getValue()&&""!==this.getField("descuentos").getValue()&&" "!==this.getField("descuentos").getValue()&&""!==this.getField("totalNeto").getValue()&&" "!==this.getField("totalNeto").getValue()&&""!==this.getField("abonar").getValue()&&" "!==this.getField("abonar").getValue()&&""!==this.getField("totalNumDocumentos").getValue()&&" "!==this.getField("totalNumDocumentos").getValue()&&""!==this.getField("conceptosPago").getValue()&&" "!==this.getField("conceptosPago").getValue()&&""!==this.getField("observaciones").getValue()&&" "!==this.getField("observaciones").getValue()){this.getField("nit").setError(!1,"");this.generalFormat.nombre_accion="360-Retorna_datos_la_sucursal_presente_en_sucursal_configuracion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.loadModalSucursal,error:this.error_,general:this.generalFormat})}else this.getField("nit").valid()&&""===this.getField("nit").getValue()&&this.getField("nit").setError(!0,"Este campo es requerido"),this.getField("sede").valid()&&""===this.getField("sede").getValue()&&this.getField("sede").setError(!0,"Este campo es requerido"),this.getField("nombre_proveedor").valid()&&""===this.getField("nombre_proveedor").getValue()&&this.getField("nombre_proveedor").setError(!0,"Este campo es requerido"),this.getField("abonos").valid()&&""===this.getField("abonos").getValue()&&this.getField("abonos").setError(!0,"Este campo es requerido"),this.getField("retenciones").valid()&&""===this.getField("retenciones").getValue()&&this.getField("retenciones").setError(!0,"Este campo es requerido"),this.getField("descuentos").valid()&&""===this.getField("descuentos").getValue()&&this.getField("descuentos").setError(!0,"Este campo es requerido"),this.getField("totalNeto").valid()&&""===this.getField("totalNeto").getValue()&&this.getField("totalNeto").setError(!0,"Este campo es requerido"),this.getField("abonar").valid()&&""===this.getField("abonar").getValue()&&this.getField("abonar").setError(!0,"Este campo es requerido"),this.getField("observaciones").valid()&&""===this.getField("observaciones").getValue()&&this.getField("observaciones").setError(!0,"Este campo es requerido"),this.getField("totalNumDocumentos").valid()&&""===this.getField("totalNumDocumentos").getValue()&&this.getField("totalNumDocumentos").setError(!0,"Este campo es requerido"),this.getField("conceptosPago").valid()&&""===this.getField("conceptosPago").getValue()&&this.getField("conceptosPago").setError(!0,"Este campo es requerido")}},{key:"loadModalSucursal",value:function(e){console.log("datasucu",e),200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("modal_sucursal").handleClickOpen(),this.getField("Tbsucursal").toggle(!0),this.gridOptionsTbsucursal.rowData=e.model,this.getField("Tbsucursal").initData(this.gridOptionsTbsucursal,this.configCell)):this.getField("Tbsucursal").toggle(!1)}},{key:"selectedProveedorTable",value:function(e){var t=this;if(void 0===e||void 0!==e&&200===e.estado_p||405===e.estado_p){var i=this.gridOptionsTbsucursal.api.getSelectedRows();if(void 0!==i&&i.length&&i.length>0&&void 0!==i[0].id){var a={cuenta:this.getField("abonar").getValue(),observaciones:this.getField("observaciones").getValue(),total_neto:this.getField("totalNeto").getValue(),total_abono:this.getField("abonos").getValue(),total_retencion:this.getField("retenciones").getValue(),total_descuentos:this.getField("descuentos").getValue(),nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue(),sucursal:i[0].codigo_sucursal};this.arrayPagos.push(a),this.gridOptionsCarteraProveedor.rowData.forEach((function(e){if(void 0!==e.abono||void 0!==e.descuento||0!==parseInt(e.retencion)){void 0===e.abono&&(e.abono=0),void 0===e.descuento&&(e.descuento=0);var i={id:e.id,numero:e.numero,sucursal:e.codigo_sucursal,contable:e.contable,abono:parseInt(e.abono),retencion:parseInt(e.retencion),descuentos:parseInt(e.descuento)};t.arrayI.push(i)}})),this.gridOptionsConceptosPago.rowData.forEach((function(e){if(void 0!==e.valor){var i={cuenta:e.codigo_cuenta,valor:parseInt(e.valor)};t.arrayC.push(i)}})),this.gridOptionsTbcheques.rowData.forEach((function(e){if(void 0!==e.banco){var i={tercero_id:e.tercero_id,bancos_cuentas_terceros_id:e.bancos_cuentas_terceros_id,valor:parseInt(e.valor),fecha_para:e.fecha};t.arrayCheque.push(i)}}))}this.guardarArrays()}}},{key:"guardarArrays",value:function(){var e={pagosi:this.arrayI,pagosc:this.arrayC,pagos:this.arrayPagos,cheques:this.arrayCheque};this.generalFormat.nombre_accion="360-Grabar_cartera_proveedores",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successPostCountOne,error:this.error_,general:this.generalFormat})}},{key:"successPostCountOne",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.getField("modal_sucursal").handleClose(),this.limpiar())}},{key:"abrirModalCheques",value:function(){this.loadModalCheques()}},{key:"loadModalCheques",value:function(e){this.getField("totalChequesValor").setValue(this.getField("totalChequesValor2").getValue()),this.getField("modalCheques").handleClickOpen();var t=new Map;t.set("tercero_id",{cellRenderer:this.setButtonBanco,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorBancoChange,width:100,editable:!0,field:"valor"}),t.set("bancos_cuentas_terceros_id",{cellRenderer:this.setButtonBanco,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorBancoChange,width:100,editable:!0,field:"valor"}),t.set("fecha",{cellRenderer:this.setButtonBanco,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorBancoChange,width:100,editable:!0,field:"valor"}),t.set("valor",{cellRenderer:this.setButtonBanco,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorBancoChange,width:100,editable:!0,field:"valor"}),t.set("banco",{cellRenderer:this.setButtonBanco,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorBancoChange,width:100,editable:!0,field:"valor"}),t.set("accion",{cellRenderer:this.setButtonDelete,field:"Acci\xf3n"}),this.getField("Tbcheques").toggle(!0),this.gridOptionsTbcheques.rowData=e,this.getField("Tbcheques").initData(this.gridOptionsTbcheques,t),this.agregarCheque()}},{key:"agregarCheque",value:function(){this.getField("fecha").setError(!1,"");var e="",t=!1;if(""!==this.getField("fechaCheque")&&(this.getField("fechaCheque")&&(e=this.getField("fechaCheque").getValue()),e.split("-"),this.validarFechas(this.getField("fechaCheque").getValue(),this.getField("fechaCheque").getValue(),2)?(t=!0,this.getField("fechaCheque").setError(!1,"")):(t=!1,this.getField("fechaCheque").setError(!0,"* Esta fecha debe ser mayor o igual a la fecha actual"))),!0===t){this.numReg+=1;var i={numregisto:this.numReg,tercero_id:this.getField("terceros_id").getValue(),bancos_cuentas_terceros_id:this.getField("bancos_cuentas_terceros_id").getValue(),banco:this.getField("banco_cuentas_terceros").getValue(),fecha:this.getField("fechaCheque").getValue(),valor:this.getField("valorCheque").getValue()};if(""!==i.banco){this.dataArray.push(i);var a=new Map;a.set("accion",{cellRenderer:this.setButtonDelete,field:"Acci\xf3n"}),this.gridOptionsTbcheques.rowData=this.dataArray,this.getField("Tbcheques").initData(this.gridOptionsTbcheques,a),this.valorChequeChange(i)}else if(i.banco.length>0){var o=new Map;o.set("accion",{cellRenderer:this.setButtonDelete,field:"Acci\xf3n"}),this.gridOptionsTbcheques.rowData=this.dataArray,this.getField("Tbcheques").initData(this.gridOptionsTbcheques,o)}}this.getField("fechaCheque").setValue("")}},{key:"setButtonDelete",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.deleteEspecification(e)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"deleteEspecification",value:function(e){var t=e.data.numregisto,i=e.data.valor;""!==this.getField("totalChequesValor").getValue()&&(this.getField("totalChequesValor").setValue(parseInt(this.getField("totalChequesValor").getValue())-parseInt(i)),this.getField("totalChequesValor2").setValue(parseInt(this.getField("totalChequesValor2").getValue())-parseInt(i)));var a=this.dataArray,o=[];a.forEach((function(e,i,a){parseInt(t)!==parseInt(e.numregisto)&&o.push(e)})),this.dataArray=o,this.getField("fieldAlert").toggle(!0,"Informaci\xf3n eliminada exitosamente","success");var s=new Map;s.set("accion",{cellRenderer:this.setButtonDelete,field:"Acci\xf3n"}),this.gridOptionsTbcheques.rowData=this.dataArray,this.getField("Tbcheques").initData(this.gridOptionsTbcheques,s)}},{key:"limpiarCheque",value:function(){this.getField("banco_cuentas_terceros").setValue(""),this.getField("fechaCheque").setValue(""),this.getField("valorCheque").setValue(""),this.getField("terceros_id").setValue(""),this.getField("bancos_cuentas_terceros_id").setValue("")}},{key:"valorChequeChange",value:function(e){if(""!==e.valor){var t=e.valor;""!==this.getField("totalChequesValor").getValue()?this.getField("totalChequesValor").setValue(parseInt(this.getField("totalChequesValor").getValue())+parseInt(t)):this.getField("totalChequesValor").setValue(t)}this.getField("totalChequesValor2").setValue(this.getField("totalChequesValor").getValue())}},{key:"validarFechas",value:function(e,t){var i=parseInt(e.split("-")[2]),a=parseInt(e.split("-")[1]),o=parseInt(e.split("-")[0]),s=!0;if(i>=parseInt(e.split("-")[2])){var r=new Date,n=r.getFullYear(),d=r.getMonth()+1,l=r.getDate();s=o>n||o===n&&(a>d||a===d&&i>=l)}return s}}]),i}(d.a.form);d.a.addController("pagoProveedores",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.retornarCodigosFacturacion=o.retornarCodigosFacturacion.bind(Object(s.a)(o)),o.successRetornarCodigosFacturacion=o.successRetornarCodigosFacturacion.bind(Object(s.a)(o)),o.gridOptionsCodigosFacturacion=Object.assign({},o.gridOptions),o.gridOptionsCodigosFacturacion.onSelectionChanged=o.onSelectionChangedCodigosFacturacion,o.openModalPedidos=o.openModalPedidos.bind(Object(s.a)(o)),o.openModalProductos=o.openModalProductos.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.retornarCodigosFacturacion(),this.getField("codigo_facturacion").setOnChange(this.openModalPedidos),this.getField("productos").setClick(this.openModalProductos)}},{key:"retornarCodigosFacturacion",value:function(){this.generalFormat.nombre_accion="traer_codigos_facturacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successRetornarCodigosFacturacion,error:this.error_,general:this.generalFormat})}},{key:"successRetornarCodigosFacturacion",value:function(e){if(e.model&&e.model.length>0){this.gridOptionsCodigosFacturacion.rowData=e.model;var t=new Map;this.getField("tabla_codigos").initData(this.gridOptionsCodigosFacturacion,t)}else this.getField("tabla_codigos").toggle(!1),this.alertGeneral.toggle(!0,"El usuario no posee codigos de facturaci\xf3n","error")}},{key:"openModalPedidos",value:function(){this.getField("modal_pedido").handleClickOpen(),this.gridOptionsCodigosFacturacion.api.deselectAll()}},{key:"openModalProductos",value:function(){this.getField("nit").valid()&&this.getField("sede").valid()&&this.getField("nombre").valid()&&this.getField("buscar").valid()&&this.getField("direccion").valid()&&this.getField("telefonos").valid()&&this.getField("nciudad").valid()&&this.getField("codigo_ciudad").valid()&&this.getField("codigo_vendedor").valid()&&this.getField("nvendedor").valid()&&this.getField("tasa_cambio").valid()&&(this.getField("tasa_cambio_modal").setValue(this.getField("tasa_cambio").getValue()),this.getField("modal_productos").handleClickOpen())}}]),i}(d.a.form);d.a.addController("pedidoMercancia",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).enterServicioTerceros=function(e){switch(e.keyCode?e.keyCode:e.which){case 120:if(""!==o.getField("nit").getValue()){var t={value:o.getField("nit").getValue(),estado:"A"};o.generalFormat.nombre_accion="364-busca_tercero_por_nombre",o.service.send({endpoint:o.constant.formConfiguration(),method:"GET",body:t,success:o.successTercerosF9,error:o.error_,general:o.generalFormat})}break;case 13:if(""!==o.getField("nit").getValue()&&o.getField("nit").getValue()>0){var i={nit:o.getField("nit").getValue(),estado:"A"};o.generalFormat.nombre_accion="retorna_terceros_nitexacto_sedes",o.service.send({endpoint:o.constant.formConfiguration(),method:"GET",body:i,success:o.successTerceros,error:o.error_,general:o.generalFormat})}}},o.initForm=o.initForm.bind(Object(s.a)(o)),o.searchTercero=o.searchTercero.bind(Object(s.a)(o)),o.successSearchTercero=o.successSearchTercero.bind(Object(s.a)(o)),o.onSelectionChangedCodigosFacturacion=o.onSelectionChangedCodigosFacturacion.bind(Object(s.a)(o)),o.gridOptionsCodigosFacturacion=Object.assign({},o.gridOptions),o.gridOptionsCodigosFacturacion.onSelectionChanged=o.onSelectionChangedCodigosFacturacion,o.gridOptionsBodegasItem=Object.assign({},o.gridOptions),o.setPrecioListaProspectos=o.setPrecioListaProspectos.bind(Object(s.a)(o)),o.onSelectionChangedTerceros=o.onSelectionChangedTerceros.bind(Object(s.a)(o)),o.gridOptionsTerceros=Object.assign({},o.gridOptions),o.gridOptionsTerceros.onSelectionChanged=o.onSelectionChangedTerceros,o.abrirModalContactos=o.abrirModalContactos.bind(Object(s.a)(o)),o.successAbrirModalContactos=o.successAbrirModalContactos.bind(Object(s.a)(o)),o.setButtonEliminarContacto=o.setButtonEliminarContacto.bind(Object(s.a)(o)),o.eliminarContactosConfirmar=o.eliminarContactosConfirmar.bind(Object(s.a)(o)),o.confirmDeleteContactoEliminar=o.confirmDeleteContactoEliminar.bind(Object(s.a)(o)),o.gridOptionsContactos=Object.assign({},o.gridOptions),o.clearCampos=o.clearCampos.bind(Object(s.a)(o)),o.openModalProducto=o.openModalProducto.bind(Object(s.a)(o)),o.savePedido=o.savePedido.bind(Object(s.a)(o)),o.successSavePedido=o.successSavePedido.bind(Object(s.a)(o)),o.loadPreciosCliente=o.loadPreciosCliente.bind(Object(s.a)(o)),o.successLoadPreciosCliente=o.successLoadPreciosCliente.bind(Object(s.a)(o)),o.loadCodigoFacturacion=o.loadCodigoFacturacion.bind(Object(s.a)(o)),o.successLoadCodigoFacturacion=o.successLoadCodigoFacturacion.bind(Object(s.a)(o)),o.clearCamposProducto=o.clearCamposProducto.bind(Object(s.a)(o)),o.loadItemPrecio=o.loadItemPrecio.bind(Object(s.a)(o)),o.validarDespachoMinimo=o.validarDespachoMinimo.bind(Object(s.a)(o)),o.successValidarDespachoMinimo=o.successValidarDespachoMinimo.bind(Object(s.a)(o)),o.successLoadItemPrecio=o.successLoadItemPrecio.bind(Object(s.a)(o)),o.loadBodegasItem=o.loadBodegasItem.bind(Object(s.a)(o)),o.successLoadBodegasItem=o.successLoadBodegasItem.bind(Object(s.a)(o)),o.setButtonEliminarItem=o.setButtonEliminarItem.bind(Object(s.a)(o)),o.setButtonModificarItem=o.setButtonModificarItem.bind(Object(s.a)(o)),o.modificarItem=o.modificarItem.bind(Object(s.a)(o)),o.eliminarItem=o.eliminarItem.bind(Object(s.a)(o)),o.eliminarItemConfirmar=o.eliminarItemConfirmar.bind(Object(s.a)(o)),o.valueOrdenCotizacion=o.valueOrdenCotizacion.bind(Object(s.a)(o)),o.agregarItems=o.agregarItems.bind(Object(s.a)(o)),o.validarCostosItem=o.validarCostosItem.bind(Object(s.a)(o)),o.calcularDV=o.calcularDV.bind(Object(s.a)(o)),o.onSelectionChangedItems=o.onSelectionChangedItems.bind(Object(s.a)(o)),o.gridOptionsTablaItems=Object.assign({},o.gridOptions),o.gridOptionsTablaItems.onSelectionChanged=o.onSelectionChangedItems,o.agregarDescuentoItem=o.agregarDescuentoItem.bind(Object(s.a)(o)),o.recuperarDepto=o.recuperarDepto.bind(Object(s.a)(o)),o.successRecuperarDepto=o.successRecuperarDepto.bind(Object(s.a)(o)),o.recuperarCiudades=o.recuperarCiudades.bind(Object(s.a)(o)),o.successRecuperarCiudades=o.successRecuperarCiudades.bind(Object(s.a)(o)),o.crearPedido=o.crearPedido.bind(Object(s.a)(o)),o.CloseModalProductos=o.CloseModalProductos.bind(Object(s.a)(o)),o.recalcularPrecios=o.recalcularPrecios.bind(Object(s.a)(o)),o.recalcularPreciosLista=o.recalcularPreciosLista.bind(Object(s.a)(o)),o.recalcularPreciosCantidad=o.recalcularPreciosCantidad.bind(Object(s.a)(o)),o.cleanValid=o.cleanValid.bind(Object(s.a)(o)),o.cleanRecalcular=o.cleanRecalcular.bind(Object(s.a)(o)),o.cleanRecalcularCant=o.cleanRecalcularCant.bind(Object(s.a)(o)),o.enterServicioTerceros=o.enterServicioTerceros.bind(Object(s.a)(o)),o.successTerceros=o.successTerceros.bind(Object(s.a)(o)),o.successTercerosF9=o.successTercerosF9.bind(Object(s.a)(o)),o.selectDirecciones=o.selectDirecciones.bind(Object(s.a)(o)),o.successDirecciones=o.successDirecciones.bind(Object(s.a)(o)),o.rowSelectedPedido=o.rowSelectedPedido.bind(Object(s.a)(o)),o.aplicarDescuentoBloque=o.aplicarDescuentoBloque.bind(Object(s.a)(o)),o.successDescuentoBloque=o.successDescuentoBloque.bind(Object(s.a)(o)),o.currencyFormatterPrecioSinIva=o.currencyFormatterPrecioSinIva.bind(Object(s.a)(o)),o.formatNumberPrecioSinIva=o.formatNumberPrecioSinIva.bind(Object(s.a)(o)),o.buscarNitPendiente=o.buscarNitPendiente.bind(Object(s.a)(o)),o.successBuscarNitPendiente=o.successBuscarNitPendiente.bind(Object(s.a)(o)),o.crearNitPendiente=o.crearNitPendiente.bind(Object(s.a)(o)),o.currencyFormatterPrecioTotal=o.currencyFormatterPrecioTotal.bind(Object(s.a)(o)),o.formatNumberPrecioTotal=o.formatNumberPrecioTotal.bind(Object(s.a)(o)),o.agregarNuevoPendiente=o.agregarNuevoPendiente.bind(Object(s.a)(o)),o.successAgregarNuevoPendiente=o.successAgregarNuevoPendiente.bind(Object(s.a)(o)),o.setTipoNegocioProspecto=o.setTipoNegocioProspecto.bind(Object(s.a)(o)),o.setSucursalesProspectos=o.setSucursalesProspectos.bind(Object(s.a)(o)),o.cerrarModalContactos=o.cerrarModalContactos.bind(Object(s.a)(o)),o.confirmCloseAlertModal=o.confirmCloseAlertModal.bind(Object(s.a)(o)),o.validarDescuentoMaximo=o.validarDescuentoMaximo.bind(Object(s.a)(o)),o.successValidarDescuentoMax=o.successValidarDescuentoMax.bind(Object(s.a)(o)),o.auxiliarArray=[],o.arrayOrigin=[],o.dAgregado=[],o.arrayDataCheckBox=[],o.datosCodigos=[],o.nuevoArray=[],o.datosArray=[],o.modificarArray=[],o.arrayTemporal=[],o.id_delete=0,o.idEliminarContacto=0,o.TipoNegociosProspecto="",o.cantidadDespacho=!1,o.codigoNegocio="",o.itemEnEdicion="",o.btnCerrarModal=!1,o.valorPedido=0,o.totalIvaItems=0,o.subtotalItems=0,o.cantidad=0,o.bodegaIngreso="",o.bodegaSeleccionada="",o.arrayContarItems=[],o.setDiasVigencia=o.setDiasVigencia.bind(Object(s.a)(o)),o.fechaEntrega=o.fechaEntrega.bind(Object(s.a)(o)),o.successFechaEntrega=o.successFechaEntrega.bind(Object(s.a)(o)),o.retornaBodegasPorCodigoFacturacion=o.retornaBodegasPorCodigoFacturacion.bind(Object(s.a)(o)),o.successBodegasCodFac=o.successBodegasCodFac.bind(Object(s.a)(o)),o.cerrarEdicionModal=o.cerrarEdicionModal.bind(Object(s.a)(o)),o.conservaBodegaSeleccionada=o.conservaBodegaSeleccionada.bind(Object(s.a)(o)),o.gridOptionsProductos=Object.assign({},o.gridOptions),o.modalCodigoProducto=o.modalCodigoProducto.bind(Object(s.a)(o)),o.setButtonBodega1=o.setButtonBodega1.bind(Object(s.a)(o)),o.setButtonBodega2=o.setButtonBodega2.bind(Object(s.a)(o)),o.setButtonBodega3=o.setButtonBodega3.bind(Object(s.a)(o)),o.setButtonBodega4=o.setButtonBodega4.bind(Object(s.a)(o)),o.setButtonBodega5=o.setButtonBodega5.bind(Object(s.a)(o)),o.setButtonBodega6=o.setButtonBodega6.bind(Object(s.a)(o)),o.setButtonBodega7=o.setButtonBodega7.bind(Object(s.a)(o)),o.setButtonBodega8=o.setButtonBodega8.bind(Object(s.a)(o)),o.setButtonBodega9=o.setButtonBodega9.bind(Object(s.a)(o)),o.setButtonBodega10=o.setButtonBodega10.bind(Object(s.a)(o)),o.confirmarItemsModalProducto=o.confirmarItemsModalProducto.bind(Object(s.a)(o)),o.tablaCodigoProducto=o.tablaCodigoProducto.bind(Object(s.a)(o)),o.successTablaCodigoProducto=o.successTablaCodigoProducto.bind(Object(s.a)(o)),o.closeModalListar=o.closeModalListar.bind(Object(s.a)(o)),o.estadoModalListar=!1,o.loadTablaItems=o.loadTablaItems.bind(Object(s.a)(o)),o.setButtonCodigo=o.setButtonCodigo.bind(Object(s.a)(o)),o.setButtonNombre=o.setButtonNombre.bind(Object(s.a)(o)),o.setButtonBodegas=o.setButtonBodegas.bind(Object(s.a)(o)),o.llamarModalListar=o.llamarModalListar.bind(Object(s.a)(o)),o.loadTabla=!1,o.idProducto="",o.registroSeleccionado="",o.estadoTablaProductosBodegas=[],o.productoModalListar="",o.campo1ModalListar="",o.campo2ModalListar="",o.setBodega="",o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Pedidos @version 1.01.0017, @author Juan David Nieto"),this.loadCodigoFacturacion(),this.getField("sucursales_pendientes").setCustomSuccess(this.setSucursalesProspectos),this.getField("lista_precios_prospectos").setCustomSuccess(this.setPrecioListaProspectos),this.getField("tipo_negocio_id").setCustomSuccess(this.setTipoNegocioProspecto),this.getField("agregar_contactos").setSuccess(this.abrirModalContactos),this.getField("cancelar_contactos").setClick(this.cerrarModalContactos),this.getField("cancelar_nuevo").setClick(this.cerrarModalContactos),this.getField("btn_contactos").setClick(this.abrirModalContactos),this.getField("documento_nuevo").setOnBlur(this.calcularDV),this.getField("pais_id").setOnChange(this.recuperarDepto),this.getField("departamento_geografico_id").setOnChange(this.recuperarCiudades),this.getField("agregar_nuevo").setClick(this.agregarNuevoPendiente),this.getField("boton_agregar_item").setDisabled(!0),this.getField("cantidad_item_364").setOnChange(this.recalcularPreciosCantidad),this.getField("codigo_bodega_item").setOnChange(this.recalcularPreciosCantidad),this.getField("codigo_bodega_item").setOnChange(this.loadItemPrecio),this.getField("boton_productos").setClick(this.openModalProducto),this.getField("boton_grabar").setClick(this.savePedido),this.getField("codigo_id_producto").setOnChange(this.loadPreciosCliente),this.getField("nombre_producto").setOnChange(this.clearCamposProducto),this.getField("cantidad_item_364").setOnBlur(this.loadItemPrecio),this.getField("orden_cotizacion").setOnChange(this.valueOrdenCotizacion),this.getField("boton_agregar_item").setSuccess(this.validarCostosItem),this.getField("modal_producto").setCloseButton(this.cerrarEdicionModal),this.getField("boton_aceptar").setClick(this.CloseModalProductos),this.getField("descuento_item").setOnChange(this.recalcularPrecios),this.getField("descuento_item").setOnBlur(this.validarDescuentoMaximo),this.getField("precio_lista").setOnChange(this.recalcularPreciosLista),this.getField("codigo_producto").setOnChange(this.cleanValid),this.getField("observaciones").setOnChange(this.cleanValid),this.getField("clase_de_pedido").setOnChange(this.cleanValid),this.getField("orden_de_compra").setOnChange(this.cleanValid),this.getField("detalle_item").setOnChange(this.cleanValid),this.getField("cantidad_item_364").setOnChange(this.cleanValid),this.getField("precio_lista").setOnChange(this.cleanValid),this.getField("nit").setOnChange(this.cleanValid),this.getField("nit").setOnChange(this.clearCampos),this.getField("nit").setKeyUp(this.enterServicioTerceros),this.getField("sede").setOnChange(this.cleanValid),this.getField("nombre").setOnChange(this.searchTercero),this.getField("precio_lista").setOnChange(this.cleanRecalcular),this.getField("cantidad_item_364").setOnChange(this.cleanRecalcularCant),this.getField("descuento_general").setVisible(!1),this.getField("aplicar_descuento").setVisible(!1),this.getField("aplicar_descuento").setClick(this.aplicarDescuentoBloque),this.getField("numero_de_item").setOnChange(this.fechaEntrega),this.getField("codigo_bodega_item").setOnChange(this.conservaBodegaSeleccionada),this.getField("listar_productos").setClick(this.modalCodigoProducto),this.getField("buscar_productos").setClick(this.tablaCodigoProducto),this.getField("modal_codigo_producto").setCloseButton(this.closeModalListar),this.getField("codigo_grupo_producto").setOnChange(this.llamarModalListar)}},{key:"llamarModalListar",value:function(){""!==this.getField("codigo_grupo_producto").getValue()&&(this.estadoModalListar=!1)}},{key:"closeModalListar",value:function(){!0===this.estadoModalListar&&""!==this.idProducto&&" "!==this.idProducto&&(this.openModalProducto(),this.getField("codigo_id_producto").setValue(this.idProducto))}},{key:"tablaCodigoProducto",value:function(){if(this.estadoRefrescarTbCodProd=!1,this.productoModalListar=this.getField("producto_modal_cod_producto").getValue(),this.campo1ModalListar=this.getField("campo1").getValue(),this.campo2ModalListar=this.getField("campo2").getValue(),""!==this.getField("producto_modal_cod_producto").getValue()&&" "!==this.getField("producto_modal_cod_producto").getValue()){this.getField("producto_modal_cod_producto").setError(!1,"");var e=this.getField("producto_modal_cod_producto").getValue(),t=this.getField("campo1").getValue(),i=this.getField("campo2").getValue(),a="".concat(e,",").concat(t,",").concat(i).replace(",,",","),o=this.bodegaIngreso.split(",");if(o.length<=10){var s={nombres:a,bodegas:this.bodegaIngreso};this.generalFormat.nombre_accion="364-pedidos-traer_producto_bodegas_autorizadas_facturacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:s,success:this.successTablaCodigoProducto,error:this.error_,general:this.generalFormat})}else{this.alertGeneral.toggle(!0,"Bodegas configuradas ".concat(o.length,", s\xf3lo se permiten seleccionar las primeras 10 columnas"),"warning");var r={nombres:a,bodegas:this.bodegaIngreso};this.generalFormat.nombre_accion="364-pedidos-traer_producto_bodegas_autorizadas_facturacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:r,success:this.successTablaCodigoProducto,error:this.error_,general:this.generalFormat})}}else this.getField("producto_modal_cod_producto").setError(!0,"* Este campo es requerido.")}},{key:"successTablaCodigoProducto",value:function(e){if(this.estadoTablaProductosBodegas=[],200===e.estado_p&&e.data.length>=1){this.estadoTablaProductosBodegas&&(this.estadoTablaProductosBodegas=e),this.getField("tb_codigo_producto").toggle(!1);var t=new Map;this.gridOptionsProductos.rowData=this.estadoTablaProductosBodegas.data;var i=e.data[0],a=Object.keys(i),o=a.length-3,s=a[3],r=a[4],n=a[5],d=a[6],l=a[7],c=a[8],u=a[9],g=a[10],h=a[11],m=a[12];1===o&&t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:520}),2===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:280}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:280})),3===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:190}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:190}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:190})),4===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:180}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:180}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:180}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:180})),5===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:170}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:170}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:170}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:170}),t.set(l,{cellRenderer:this.setButtonBodega5,field:l,width:170})),6===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:160}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:160}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:160}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:160}),t.set(l,{cellRenderer:this.setButtonBodega5,field:l,width:160}),t.set(c,{cellRenderer:this.setButtonBodega6,field:c,width:160})),7===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:150}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:150}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:150}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:150}),t.set(l,{cellRenderer:this.setButtonBodega5,field:l,width:150}),t.set(c,{cellRenderer:this.setButtonBodega6,field:c,width:150}),t.set(u,{cellRenderer:this.setButtonBodega7,field:u,width:150})),8===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:140}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:140}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:140}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:140}),t.set(l,{cellRenderer:this.setButtonBodega5,field:l,width:140}),t.set(c,{cellRenderer:this.setButtonBodega6,field:c,width:140}),t.set(u,{cellRenderer:this.setButtonBodega7,field:u,width:140}),t.set(g,{cellRenderer:this.setButtonBodega8,field:g,width:140})),9===o&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:130}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:130}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:130}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:130}),t.set(l,{cellRenderer:this.setButtonBodega5,field:l,width:130}),t.set(c,{cellRenderer:this.setButtonBodega6,field:c,width:130}),t.set(u,{cellRenderer:this.setButtonBodega7,field:u,width:130}),t.set(g,{cellRenderer:this.setButtonBodega8,field:g,width:130}),t.set(h,{cellRenderer:this.setButtonBodega9,field:h,width:130})),o>=10&&(t.set(s,{cellRenderer:this.setButtonBodega1,field:s,width:120}),t.set(r,{cellRenderer:this.setButtonBodega2,field:r,width:120}),t.set(n,{cellRenderer:this.setButtonBodega3,field:n,width:120}),t.set(d,{cellRenderer:this.setButtonBodega4,field:d,width:120}),t.set(l,{cellRenderer:this.setButtonBodega5,field:l,width:120}),t.set(c,{cellRenderer:this.setButtonBodega6,field:c,width:120}),t.set(u,{cellRenderer:this.setButtonBodega7,field:u,width:120}),t.set(g,{cellRenderer:this.setButtonBodega8,field:g,width:120}),t.set(h,{cellRenderer:this.setButtonBodega9,field:h,width:120}),t.set(m,{cellRenderer:this.setButtonBodega10,field:m,width:120})),t.set("nombre",{cellRenderer:this.setButtonNombre,field:"nombre",width:555}),t.set("codigo",{cellRenderer:this.setButtonCodigo,field:"codigo",width:200}),t.set("bodegas",{cellRenderer:this.setButtonBodegas,field:"",width:10}),this.getField("tb_codigo_producto").initData(this.gridOptionsProductos,t),this.getField("tb_codigo_producto").toggle(!0)}else this.getField("tb_codigo_producto").toggle(!1)}},{key:"setButtonBodegas",value:function(e){if(e.data.codigo===this.registroSeleccionado){var t=document.createElement("div");return t.setAttribute("style","height: 100%;width: 10px; position: fixed; padding-right: 0%;padding-left: 0%;padding-top: 0%;font-size: 0.875rem;color: #0000ff; font-weight: bold; background-color: #B7E4FF;"),t.textContent="-",t}var i=document.createElement("div");return i.setAttribute("style","height: 100%;padding-left: 0%;padding-top: 0%;padding-right: 0%;font-size: 0.875rem;"),i.textContent="-",i}},{key:"setButtonCodigo",value:function(e){var t=e.data.codigo;if(e.data.codigo===this.registroSeleccionado){var i=document.createElement("div");return i.setAttribute("style","height: 100%;width: 200px; position: fixed; padding-right: 0%;padding-left: 0%;padding-top: 0%;font-size: 0.875rem;text-align:left;color: #0000ff; font-weight: bold; background-color: #B7E4FF;"),i.textContent=t,i}var a=document.createElement("div");return a.setAttribute("style","height: 100%;padding-left: 0%;padding-top: 0%;padding-right: 0%;font-size: 0.875rem;text-align:left;"),a.textContent=t,a}},{key:"setButtonNombre",value:function(e){var t=e.data.nombre;if(e.data.codigo===this.registroSeleccionado){var i=document.createElement("div");return i.setAttribute("style","height: 100%; width: 555px; position: fixed; padding-right: 0%;padding-left: 0%;padding-top: 0%;font-size: 0.875rem;text-align:left;color: #0000ff; font-weight: bold; background-color: #B7E4FF;"),i.textContent=t,i}var a=document.createElement("div");return a.setAttribute("style","height: 100%;padding-left: 0%;padding-top: 0%;padding-right: 0%;font-size: 0.875rem;text-align:left;"),a.textContent=t,a}},{key:"setButtonBodega10",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega9",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega8",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega7",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega6",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega5",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega4",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega3",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega2",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"setButtonBodega1",value:function(e){var t=this,i=e.data,a=e.column.colId,o=Object.keys(i).indexOf(a),s=Object.values(i)[o];if(0!==s){var r=document.createElement("input");return r.onclick=function(){return t.confirmarItemsModalProducto(e,a)},r.setAttribute("class","buttonStyle"),r.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),r.setAttribute("type","button"),r.setAttribute("value",s),r}if(0===s){var n=document.createElement("div");return n.setAttribute("style","heigth: 100%;padding-left: 45%;padding-top: 0%;heigth: 100%;padding-left: 45%;padding-top: 0%;font-size: 0.875rem;"),n.textContent=s,n}}},{key:"confirmarItemsModalProducto",value:function(e,t){this.estadoModalListar=!0,this.getField("codigo_producto").setValue(e.data.codigo),this.getField("nombre_producto").setValue(e.data.nombre);var i=t.split("saldo");this.setBodega=i[1],this.getField("codigo_bodega_item").setValue(i[1]),this.idProducto=e.data.codigo,this.registroSeleccionado=e.data.codigo,this.getField("modal_codigo_producto").handleClose(),this.closeModalListar()}},{key:"modalCodigoProducto",value:function(){if(""!==this.getField("sede").getValue()&&""!==this.getField("nit").getValue()&&""!==this.getField("nombre").getValue()&&""!==this.getField("sucursal_origen").getValue()&&""!==this.getField("sucursal_cartera").getValue()){var e=[],t={data:[{nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue(),nombre:this.getField("nombre").getValue()}]};this.getField("lista_terceros_nit").setVisible(!0),e.push(t.data[0]),this.getField("lista_terceros_nit").setItemsFichas(e),this.getField("modal_codigo_producto").handleClickOpen(),this.getField("producto_modal_cod_producto").setValue(this.productoModalListar),this.getField("campo1").setValue(this.campo1ModalListar),this.getField("campo2").setValue(this.campo2ModalListar),this.successTablaCodigoProducto(this.estadoTablaProductosBodegas)}else this.getField("sede").setError(!0,"* Este campo es requerido."),this.getField("nit").setError(!0,"* Este campo es requerido."),this.getField("nombre").setError(!0,"* Este campo es requerido."),this.getField("lista_terceros_nit").setVisible(!1)}},{key:"onSelectionChangedItems",value:function(){}},{key:"cerrarEdicionModal",value:function(){!1===this.btnCerrarModal?!0===this.estadoModalListar&&""===this.itemEnEdicion?(this.getField("modal_codigo_producto").handleClickOpen(),this.getField("producto_modal_cod_producto").setValue(this.productoModalListar),this.getField("campo1").setValue(this.campo1ModalListar),this.getField("campo2").setValue(this.campo2ModalListar),this.successTablaCodigoProducto(this.estadoTablaProductosBodegas)):this.crearPedido():this.estadoModalListar=!1,this.btnCerrarModal=!1}},{key:"retornaBodegasPorCodigoFacturacion",value:function(){var e={value:this.getField("codigo_facturacion").getValue()};this.generalFormat.nombre_accion="364-select_bodegas_cod_fac",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successBodegasCodFac,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successBodegasCodFac",value:function(e){var t=this;if(e.data.length>=1){var i=[{text:"Ninguno",value:" ",campos_cambian:{nombre_bodega:""}}];if(e.data.forEach((function(e){var t={};t.value=e.codigo_bodega,t.text=e.codigo_bodega,t.campos_cambian={nombre_bodega:e.nombre},i.push(t)})),this.getField("codigo_bodega_item").setOptions(i),""!==this.bodegaIngreso&&""===this.bodegaSeleccionada){var a=[];""===this.setBodega&&(a=this.bodegaIngreso.split(","),this.setBodega=a[0]),this.getField("codigo_bodega_item").setValue(this.setBodega),e.data.forEach((function(e){e.codigo_bodega===a[0]&&t.getField("nombre_bodega").setValue(e.nombre)}))}else if(""!==this.bodegaSeleccionada){var o=this.bodegaSeleccionada.split(",");this.getField("codigo_bodega_item").setValue(o[0]),e.data.forEach((function(e){e.codigo_bodega===o[0]&&t.getField("nombre_bodega").setValue(e.nombre)}))}}else{this.getField("codigo_bodega_item").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]),this.getField("nombre_bodega").setValue("")}}},{key:"conservaBodegaSeleccionada",value:function(){""!==this.getField("codigo_bodega_item").getValue()&&(this.bodegaSeleccionada=this.getField("codigo_bodega_item").getValue())}},{key:"validarDescuentoMaximo",value:function(){if(this.getField("nit").valid()&&this.getField("sede").valid()&&this.getField("descuento_item").valid()&&this.getField("codigo_producto").valid()&&this.getField("precio_lista").valid()){var e={nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue(),descuento:this.getField("descuento_item").getValue(),codigo:this.getField("codigo_producto").getValue()};this.generalFormat.nombre_accion="364-valida_descuento_maximo",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successValidarDescuentoMax,error:this.error_,general:this.generalFormat})}}},{key:"successValidarDescuentoMax",value:function(e){200!==e.estado_p&&(this.getField("confirmModalCustom").setTitleAndContent("Descuento Maximo Permitido","".concat(e.data.descuento_maximo,"%")),this.getField("confirmModalCustom").setClickDialog(this.confirmCloseAlertModal),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!0))}},{key:"confirmCloseAlertModal",value:function(){this.getField("confirmModalCustom").toggle(!1)}},{key:"setDiasVigencia",value:function(e,t){var i=new Date;i.setDate(e.getDate()+t);var a=i.toISOString();this.getField("fecha_vencimiento").setValue(a.split("T")[0]),this.getField("fecha_validez").setValue(a.split("T")[0])}},{key:"cerrarModalContactos",value:function(){this.getField("modal_contactos").handleClose(),this.getField("modal_nuevo_nit").handleClose()}},{key:"setSucursalesProspectos",value:function(e){e.length>=1?(this.getField("sucursal_cartera").setValue(e[0].sucursal_cartera),this.getField("sucursal_origen").setValue(e[0].sucursal_origen)):this.alertGeneral.toggle(!0,"No existen sucursales cartera y origen configuradas","error")}},{key:"setPrecioListaProspectos",value:function(e){e.length>=1?this.getField("precios").setValue(e[0].lista_precios_pendientes):this.alertGeneral.toggle(!0,"No existe una lista de precios configurada","error")}},{key:"setTipoNegocioProspecto",value:function(e){e.length>=1?this.TipoNegociosProspecto=e[0].codigo_negocio:(this.alertGeneral.toggle(!0,"No existe un c\xf3digo de Negocio V\xe1lido","error"),this.TipoNegociosProspecto="")}},{key:"successTercerosF9",value:function(e){if(e.data.length>1){this.getField("modal_terceros").handleClickOpen(),this.gridOptionsTerceros.rowData=e.model;var t=new Map;this.getField("tabla_terceros").initData(this.gridOptionsTerceros,t)}else 1===e.data.length&&(this.getField("sede").setValue(e.model[0].sede),this.getField("nit").setValue(e.model[0].nit),this.getField("nombre").setValue(e.model[0].nombre))}},{key:"successTerceros",value:function(e){if(e.data.length>1){this.getField("modal_terceros").handleClickOpen(),this.gridOptionsTerceros.rowData=e.model;var t=new Map;this.getField("tabla_terceros").initData(this.gridOptionsTerceros,t)}else 1===e.data.length?(this.getField("sede").setValue(e.model[0].sede),this.getField("nit").setValue(e.model[0].nit),this.getField("nombre").setValue(e.model[0].nombre)):e.data.length}},{key:"buscarNitPendiente",value:function(){this.getField("direccion").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]),this.getField("confirmModalCustom").toggle(!1);var e={value:this.getField("nit").getValue()};this.generalFormat.nombre_accion="364_retorna_terceros_pendientes_nit",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successBuscarNitPendiente,error:this.error_,general:this.generalFormat})}},{key:"successBuscarNitPendiente",value:function(e){if(200===e.estado_p){var t=[{text:e.model[0].direccion,value:e.model[0].direccion,campos_cambian:{}}];this.getField("direccion").setOptions(t),this.getField("nit").setValue(e.data[0].nit),this.getField("nombre").setValue(e.data[0].nombre),this.getField("sede").setValue(1),this.getField("telefono").setValue(e.data[0].telefonos),this.getField("codigo_vendedor").setValue(e.data[0].codigo_vendedor),this.getField("tasa_cambio").setValue(e.data[0].tasa_cambio),this.getField("codigo_ciudad").setValue(e.data[0].codigo_ciudad),this.getField("nombre_ciudad").setValue(e.data[0].nombre_ciudad),this.getField("nombre_vendedor").setValue(e.data[0].nombre_vendedor);var i=[{text:e.model[0].direccion,value:e.model[0].direccion,campos_cambian:{}}];this.getField("direccion").setOptions(i),this.getField("tipo_negocio_id").setValue(e.data[0].negocios_id),this.getField("lista_precios_prospectos").setValue(e.data[0].nit),this.getField("sucursales_pendientes").setValue(e.data[0].codigo_vendedor)}else this.getField("confirmModalCustom").setTitleAndContent("Buscar","Nit no encontrado en Prospectos, Desea Crearlo?"),this.getField("confirmModalCustom").setClickDialog(this.crearNitPendiente),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!1)}},{key:"crearNitPendiente",value:function(){this.getField("direccion").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]),this.getField("confirmModalCustom").toggle(!1),this.getField("modal_nuevo_nit").handleClickOpen(),this.getField("documento_nuevo").setValue(this.getField("nit").getValue()),this.calcularDV(),this.getField("nom1").setValue("."),this.getField("nom2").setValue("."),this.getField("ape1").setValue("."),this.getField("ape2").setValue("."),this.getField("email").setValue(".")}},{key:"agregarNuevoPendiente",value:function(){if(this.getField("ape1").setValue("."),this.getField("ape2").setValue("."),this.getField("nom1").setValue("."),this.getField("nom2").setValue("."),this.getField("email").setValue("."),this.getField("documento_nuevo").valid()&&this.getField("verifica").valid()&&this.getField("tipo_documentos_id").valid()&&this.getField("nom1").valid()&&this.getField("nom2").valid()&&this.getField("ape1").valid()&&this.getField("ape2").valid()&&this.getField("nombre_cliente_nuevo").valid()&&this.getField("direccion_nuevo").valid()&&this.getField("telefonos").valid()&&this.getField("pais_id").valid()&&this.getField("departamento_geografico_id").valid()&&this.getField("ciudad_id").valid()&&this.getField("negocios_id").valid()&&this.getField("vendedor_id").valid()&&this.getField("tipo_persona").valid()&&this.getField("calidad_agente_retenedor_ventas_id").valid()&&this.getField("email").valid()){var e={nit:this.getField("documento_nuevo").getValue(),verifica:this.getField("verifica").getValue(),tipo_documentos_id:this.getField("tipo_documentos_id").getValue(),nombre:this.getField("nombre_cliente_nuevo").getValue(),ape1:this.getField("ape1").getValue(),ape2:this.getField("ape2").getValue(),nom1:this.getField("nom1").getValue(),nom2:this.getField("nom2").getValue(),direccion:this.getField("direccion_nuevo").getValue(),telefonos:this.getField("telefonos").getValue(),ciudad_id:this.getField("ciudad_id").getValue(),negocios_id:this.getField("negocios_id").getValue(),vendedor_id:this.getField("vendedor_id").getValue(),tipo_persona:this.getField("tipo_persona").getValue(),calidad_agente_retenedor_ventas_id:this.getField("calidad_agente_retenedor_ventas_id").getValue(),email:this.getField("email").getValue()};this.generalFormat.nombre_accion="364_terceros_pendientes_agregar",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successAgregarNuevoPendiente,error:this.error_,general:this.generalFormat})}}},{key:"successAgregarNuevoPendiente",value:function(e){200===e.estado_p&&(this.getField("modal_nuevo_nit").handleClose(),this.buscarNitPendiente())}},{key:"calcularDV",value:function(){""!==this.getField("documento_nuevo").getValue()&&" "!==this.getField("documento_nuevo").getValue()&&this.getField("verifica").setValue("".calcularDigitoVerificacion(this.getField("documento_nuevo").getValue()))}},{key:"abrirModalContactos",value:function(){if(this.idEliminarContacto=0,this.getField("telefono_contactos").setValue(""),this.getField("email_contactos").setValue(""),this.getField("observacion_contactos").setValue(""),this.getField("nombre_contacto").setValue(""),this.getField("nit").valid()&&this.getField("sede").valid()&&this.getField("nombre").valid()){this.getField("modal_contactos").handleClickOpen();var e={nit:this.getField("nit").getValue(),sede:parseInt(this.getField("sede").getValue())};this.generalFormat.nombre_accion="364_terceros_contactos_nitsede",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successAbrirModalContactos,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successAbrirModalContactos",value:function(e){if(this.getField("nit_contactos").setValue(this.getField("nit").getValue()),this.getField("sede_contactos").setValue(this.getField("sede").getValue()),this.getField("nombre_contactos").setValue(this.getField("nombre").getValue()),200===e.estado_p)if(e.data.length>=1){this.gridOptionsContactos.rowData=e.data;var t=new Map;t.set("eliminar",{cellRenderer:this.setButtonEliminarContacto,field:"eliminar",width:100}),this.getField("tabla_contactos").initData(this.gridOptionsContactos,t)}else this.getField("tabla_contactos").toggle(!1);else this.getField("tabla_contactos").toggle(!1)}},{key:"setButtonEliminarContacto",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarContactosConfirmar(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarContactosConfirmar",value:function(e){this.idEliminarContacto=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteContactoEliminar),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!1)}},{key:"confirmDeleteContactoEliminar",value:function(){if(this.getField("confirmModalCustom").toggle(!1),this.idEliminarContacto>=1){var e={id:this.idEliminarContacto};this.generalFormat.nombre_accion="364_eliminar_contactos",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.abrirModalContactos,error:this.error_,general:this.generalFormat})}}},{key:"recuperarDepto",value:function(){if(""!==this.getField("pais_id").getValue()&&" "!==this.getField("pais_id").getValue()){var e={value:this.getField("pais_id").getValue()};this.generalFormat.nombre_accion="364_depto_pais_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successRecuperarDepto,error:this.error_,general:this.generalFormat})}}},{key:"successRecuperarDepto",value:function(e){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.nombre,i.campos_cambian={},t.push(i)})),this.getField("departamento_geografico_id").setOptions(t)}}},{key:"recuperarCiudades",value:function(){if(""!==this.getField("departamento_geografico_id").getValue()&&" "!==this.getField("departamento_geografico_id").getValue()){var e={value:this.getField("departamento_geografico_id").getValue()};this.generalFormat.nombre_accion="364_ciudades_depto_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successRecuperarCiudades,error:this.error_,general:this.generalFormat})}}},{key:"successRecuperarCiudades",value:function(e){if(e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.nombre,i.campos_cambian={},t.push(i)})),this.getField("ciudad_id").setOptions(t)}}},{key:"onSelectionChangedTerceros",value:function(){var e=this.gridOptionsTerceros.api.getSelectedRows();this.getField("modal_terceros").handleClose(),this.getField("sede").setValue(e[0].sede),this.getField("nit").setValue(e[0].nit),this.getField("nombre").setValue(e[0].nombre)}},{key:"selectDirecciones",value:function(){if(""!==this.getField("sede").getValue()&&""!==this.getField("nit").getValue()){var e={sede:this.getField("sede").getValue(),nit:this.getField("nit").getValue()};this.generalFormat.nombre_accion="364-retorna_direcciones_sede_terceros",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDirecciones,error:this.error_,general:this.generalFormat})}}},{key:"successDirecciones",value:function(e){if(e.data.length>=1){var t=[];e.data.forEach((function(e){var i={};i.value=e.direccion,i.text=e.direccion,i.campos_cambian={codigo_ciudad:e.codigo_ciudad,nombre_ciudad:e.nciudad},t.push(i)})),this.getField("direccion").setOptions(t)}else{this.getField("direccion").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}])}}},{key:"cleanRecalcular",value:function(){this.getField("cantidad_item_364").setValue(""),this.getField("valor_total_item").setValue(""),this.getField("precio_facturacion").setValue("")}},{key:"cleanRecalcularCant",value:function(){this.getField("valor_total_item").setValue(""),this.getField("precio_facturacion").setValue(""),this.getField("boton_agregar_item").setDisabled(!0)}},{key:"cleanValid",value:function(){this.getField("subtotal").setError(!1,"* Este campo es requerido."),this.getField("valor_iva_final").setError(!1,"* Este campo es requerido."),this.getField("numero_de_item").setError(!1,"* Este campo es requerido."),this.getField("valor_pedido").setError(!1,"* Este campo es requerido."),this.getField("orden_cotizacion").setError(!1,"* Este campo es requerido."),this.getField("observaciones").setError(!1,"* Este campo es requerido."),this.getField("clase_de_pedido").setError(!1,"* Este campo es requerido."),this.getField("orden_de_compra").setError(!1,"* Este campo es requerido."),this.getField("detalle_item").setError(!1,"* Este campo es requerido."),this.getField("descuento_item").setError(!1,"* Este campo es requerido."),this.getField("precio_lista").setError(!1,"* Este campo es requerido."),this.getField("codigo_producto").setError(!1,"* Este campo es requerido."),this.getField("nit").setError(!1,"* Este campo es requerido."),this.getField("sede").setError(!1,"* Este campo es requerido."),this.getField("detalle_item").valid()&&!0===this.cantidadDespacho?(this.getField("boton_agregar_item").setDisabled(!1),this.getField("cantidad_item_364").setError(!1,"* Este campo es requerido.")):this.getField("boton_agregar_item").setDisabled(!0)}},{key:"recalcularPreciosCantidad",value:function(){this.getField("precio_facturacion").setValue(""),this.getField("valor_total_item").setValue("")}},{key:"recalcularPreciosLista",value:function(){this.getField("descuento_item").setValue(0),this.getField("cantidad_item_364").setValue(""),this.getField("precio_facturacion").setValue(""),this.getField("valor_total_item").setValue("")}},{key:"recalcularPrecios",value:function(){this.getField("cantidad_item_364").setValue(""),this.getField("precio_facturacion").setValue(""),this.getField("valor_total_item").setValue(""),this.cleanValid(),this.cleanRecalcular()}},{key:"fechaEntrega",value:function(){if(parseInt(this.getField("numero_de_item").getValue())>=1){var e={numero_items:parseInt(this.getField("numero_de_item").getValue()),nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="364-Servicio_pedidos_calcular_fecha_entrega",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successFechaEntrega,error:this.error_,general:this.generalFormat,showMessage:!1})}else this.getField("fecha_entrega").setValue("")}},{key:"CloseModalProductos",value:function(){""===this.itemEnEdicion?(this.btnCerrarModal=!0,this.crearPedido(),this.getField("modal_producto").handleClose()):this.alertGeneral.toggle(!0,"Esta Editando un \xedtem","error")}},{key:"successFechaEntrega",value:function(e){200===e.estado_p&&this.getField("fecha_entrega").setValue(e.data[0].fecha_entrega)}},{key:"validarCostosItem",value:function(e){this.agregarItems()}},{key:"loadTablaItems",value:function(e){this.getField("modal_producto").handleClickOpen(),this.getField("codigo_producto").setDisabled(!1),this.modificarArray=[],this.gridOptionsTablaItems.rowData=e,this.arrayOrigin=this.nuevoArray;var t=new Map;t.set("codigo",{field:"codigo",width:110}),t.set("descuento",{field:"descuento",width:120}),t.set("precio_sin_iva",{field:"precio sin iva",valueFormatter:this.currencyFormatterPrecioSinIva}),t.set("precio_total",{field:"precio total",valueFormatter:this.currencyFormatterPrecioTotal}),t.set("nombre",{field:"nombre",width:260}),t.set("cantidad",{field:"cantidad",width:110}),t.set("aplicar_descuento",{headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,field:"Descuento en bloque"}),t.set(7,{cellRenderer:this.setButtonEliminarItem,field:"Accion Eliminar",width:150}),t.set(8,{cellRenderer:this.setButtonModificarItem,field:"Accion Modificar",width:150}),this.gridOptionsTablaItems.suppressRowClickSelection=!0,this.gridOptionsTablaItems.rowSelection="multiple",this.gridOptionsTablaItems.enableRangeSelection=!0,this.gridOptionsTablaItems.enableCellChangeFlash=!0,this.getField("descuento_general").setVisible(!0),this.getField("aplicar_descuento").setVisible(!0),this.getField("tabla_item").initData(this.gridOptionsTablaItems,t),this.gridOptionsTablaItems.onSelectionChanged=this.rowSelectedPedido,this.clearCamposProducto()}},{key:"agregarItems",value:function(){if(""!==this.getField("detalle_item").getValue()&&""!==this.getField("cantidad_item_364").getValue()&&0!==this.getField("cantidad_item_364").getValue()&&""!==this.getField("codigo_producto").getValue()&&""!==this.getField("precio_lista").getValue()&&0!==this.getField("precio_lista").getValue()&&this.getField("valor_total_item").valid()&&this.getField("tarifa_iva_item").valid()){this.cantidadDespacho=!1,this.itemEnEdicion="",this.getField("detalle_item").setError(!1,"* Este campo es requerido."),this.getField("cantidad_item_364").setError(!1,"* Este campo es requerido."),this.getField("descuento_item").setError(!1,"* Este campo es requerido."),this.getField("precio_lista").setError(!1,"* Este campo es requerido."),this.getField("codigo_producto").setError(!1,"* Este campo es requerido."),this.getField("boton_agregar_item").setDisabled(!0);var e=this.getField("precio_sin_iva").getValue()*this.getField("cantidad_item_364").getValue(),t=this.getField("valor_iva").getValue()*this.getField("cantidad_item_364").getValue(),i={codigo:this.getField("codigo_producto").getValue(),nombre:this.getField("nombre_producto").getValue(),cantidad:this.getField("cantidad_item_364").getValue(),descuento:this.getField("descuento_item").getValue(),precio_sin_iva:this.getField("precio_sin_iva").getValue(),precio_total:this.getField("valor_total_item").getValue(),bodega:this.getField("codigo_bodega_item").getValue(),nombre_bodega_item:this.getField("nombre_bodega").getValue(),valor_iva:this.getField("valor_iva").getValue(),peso:this.getField("peso_grm").getValue(),precio:this.getField("precio_lista").getValue(),codigo_unidad:this.getField("unidad").getValue(),detalle:this.getField("detalle_item").getValue(),tarifa_iva:this.getField("tarifa_iva_item").getValue(),precio_sin_iva_con_descuento:this.getField("precio_sin_iva_con_descuento").getValue(),precio_mas_iva:this.getField("precio_mas_iva").getValue(),tasa_de_cambio:this.getField("tasa_de_cambio").getValue(),descuento_bloque:0,codigo_facturacion:this.getField("codigo_facturacion").getValue(),subtotal:e,totalIvaItems:t};if(!0===this.estadoModalListar&&(this.modalCodigoProducto(),this.successTablaCodigoProducto(this.estadoTablaProductosBodegas)),this.getField("codigo_producto").valid()&&""!==this.getField("nombre_producto").getValue()&&this.getField("cantidad_item_364").valid()){this.arrayTemporal.push(i);var a=this.getField("codigo_producto").getValue(),o=[];this.nuevoArray.forEach((function(e){e.codigo===a&&o.push(e)})),0===o.length?(this.nuevoArray.push(i),this.loadTablaItems(this.nuevoArray),this.getField("codigo_producto").setValue(""),this.getField("nombre_producto").setValue("")):this.alertGeneral.toggle(!0,"El item ya fue agregado","error")}else i={}}else""===this.getField("codigo_producto").getValue()?(this.getField("codigo_producto").setError(!0,"* Este campo es requerido."),""===this.itemEnEdicion&&this.alertGeneral.toggle(!0,"Faltan datos","error"),this.getField("boton_agregar_item").setDisabled(!0)):""===this.getField("precio_lista").getValue()||0===this.getField("precio_lista").getValue()?(this.getField("precio_lista").setError(!0,"* Este campo es requerido."),this.alertGeneral.toggle(!0,"Faltan datos","error"),this.getField("boton_agregar_item").setDisabled(!0)):""===this.getField("detalle_item").getValue()?(this.getField("detalle_item").setError(!0,"* Este campo es requerido."),this.alertGeneral.toggle(!0,"Faltan datos","error"),this.getField("boton_agregar_item").setDisabled(!0)):""!==this.getField("cantidad_item_364").getValue()&&0!==this.getField("cantidad_item_364").getValue()||(this.getField("cantidad_item_364").setError(!0,"* Este campo es requerido."),this.alertGeneral.toggle(!0,"Faltan datos","error"),this.getField("boton_agregar_item").setDisabled(!0))}},{key:"currencyFormatterPrecioSinIva",value:function(e){var t=(e.data.precio_sin_iva+"").split(".")[1];return 0!==t&&void 0!==t?this.formatNumberPrecioSinIva(e.data.precio_sin_iva)+"."+t:this.formatNumberPrecioSinIva(e.data.precio_sin_iva)}},{key:"formatNumberPrecioSinIva",value:function(e){return Math.floor(e).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}},{key:"currencyFormatterPrecioTotal",value:function(e){var t=(e.data.precio_total+"").split(".")[1];return 0!==t&&void 0!==t?this.formatNumberPrecioTotal(e.data.precio_total)+"."+t:this.formatNumberPrecioTotal(e.data.precio_total)}},{key:"formatNumberPrecioTotal",value:function(e){return Math.floor(e).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}},{key:"rowSelectedPedido",value:function(){this.arrayDataCheckBox=this.gridOptionsTablaItems.api.getSelectedRows();var e=this.arrayDataCheckBox;this.agregarDescuentoItem(e)}},{key:"agregarDescuentoItem",value:function(e){this.dAgregado=e}},{key:"aplicarDescuentoBloque",value:function(){var e=this;if(this.dAgregado.length>0&&""===this.itemEnEdicion){if(this.getField("descuento_general").valid()){var t=this.getField("descuento_general").getValue();this.auxiliarArray=[],this.nuevoArray.forEach((function(t){var i;i=Object.assign({},t),e.auxiliarArray.push(i)})),this.dAgregado.forEach((function(i,a){e.auxiliarArray.forEach((function(e){i.codigo===e.codigo&&(e.descuento_bloque=1,e.descuento=t)}))}));var i={productos:this.auxiliarArray};this.generalFormat.nombre_accion="364-actualiza_descuento_productos",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successDescuentoBloque,error:this.error_,general:this.generalFormat})}}else""!==this.itemEnEdicion?this.alertGeneral.toggle(!0,"Esta modificando un \xedtem","error"):this.alertGeneral.toggle(!0,"No ha seleccionado ning\xfan item","error")}},{key:"successDescuentoBloque",value:function(e){200===e.estado_p&&(this.nuevoArray=e.data,this.openModalProducto(),this.dAgregado=[],this.getField("descuento_general").setValue(0))}},{key:"setButtonEliminarItem",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarItemConfirmar(e.data.codigo)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarItemConfirmar",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.eliminarItem),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!1),this.getField("codigo_eliminar").setValue(e)}},{key:"eliminarItem",value:function(){var e=this;if(0===this.modificarArray.length){this.getField("confirmModalCustom").toggle(!1);var t=[];if(this.nuevoArray.forEach((function(i){i.codigo!==e.getField("codigo_eliminar").getValue()&&t.push(i)})),this.nuevoArray=t,this.nuevoArray.length>0){this.gridOptionsTablaItems.rowData=this.nuevoArray;var i=new Map;i.set("codigo",{field:"codigo",width:110}),i.set("descuento",{field:"descuento",width:120}),i.set("precio_sin_iva",{field:"precio sin iva",valueFormatter:this.currencyFormatterPrecioSinIva}),i.set("precio_total",{field:"precio total",valueFormatter:this.currencyFormatterPrecioTotal}),i.set("nombre",{field:"nombre",width:260}),i.set("cantidad",{field:"cantidad",width:110}),i.set("aplicar_descuento",{headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,field:"Descuento en bloque"}),i.set(7,{cellRenderer:this.setButtonEliminarItem,field:"Accion Eliminar",width:150}),i.set(8,{cellRenderer:this.setButtonModificarItem,field:"Accion Modificar",width:150}),this.gridOptionsTablaItems.suppressRowClickSelection=!0,this.gridOptionsTablaItems.rowSelection="multiple",this.gridOptionsTablaItems.enableRangeSelection=!0,this.gridOptionsTablaItems.enableCellChangeFlash=!0,this.getField("descuento_general").setVisible(!0),this.getField("aplicar_descuento").setVisible(!0),this.getField("tabla_item").initData(this.gridOptionsTablaItems,i),this.gridOptionsTablaItems.onSelectionChanged=this.rowSelectedPedido}else this.getField("tabla_item").toggle(!1),this.getField("tabla_bodega").toggle(!1),this.getField("descuento_general").setVisible(!1),this.getField("aplicar_descuento").setVisible(!1)}else this.alertGeneral.toggle(!0,"Esta modificando un item","error"),this.getField("confirmModalCustom").toggle(!1)}},{key:"setButtonModificarItem",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.modificarItem(e.data.codigo,e.data.nombre,e.data.bodega,e.data.nombre_bodega_item,e.data.valor_iva,e.data.peso,e.data.precio,e.data.descuento,e.data.cantidad,e.data.codigo_unidad,e.data.detalle,e.data.tarifa_iva,e.data.precio_sin_iva,e.data.precio_mas_iva,e.data.precio_total)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Modificar"),i}},{key:"modificarItem",value:function(e,t,i,a,o,s,r,n,d,l,c,u,g,h,m){var _=this;if(0===this.modificarArray.length)if(this.getField("codigo_producto").setDisabled(!0),this.getField("codigo_producto").setValue(e),this.getField("nombre_producto").setValue(t),this.getField("valor_iva").setValue(o),this.getField("peso_grm").setValue(s),this.getField("precio_lista").setValue(r),this.getField("descuento_item").setValue(n),this.getField("cantidad_item_364").setValue(d),this.getField("unidad").setValue(l),this.getField("detalle_item").setValue(c),this.getField("tarifa_iva_item").setValue(u),this.getField("precio_facturacion").setValue(g),this.getField("valor_total_item").setValue(m),this.getField("precio_sin_iva_con_descuento").setValue(g),this.getField("precio_sin_iva").setValue(g),this.getField("precio_mas_iva").setValue(h),this.getField("valor_iva").setValue(o),this.getField("boton_agregar_item").setDisabled(!1),this.itemEnEdicion=this.getField("nombre_producto").getValue(),this.nuevoArray.forEach((function(e){e.codigo!==_.getField("codigo_producto").getValue()&&_.modificarArray.push(e)})),this.nuevoArray=this.modificarArray,this.modificarArray.length>0){this.gridOptionsTablaItems.rowData=this.modificarArray;var b=new Map;b.set("codigo",{field:"codigo",width:110}),b.set("descuento",{field:"descuento",width:120}),b.set("precio_sin_iva",{field:"precio sin iva",valueFormatter:this.currencyFormatterPrecioSinIva}),b.set("precio_total",{field:"precio total",valueFormatter:this.currencyFormatterPrecioTotal}),b.set("nombre",{field:"nombre",width:260}),b.set("cantidad",{field:"cantidad",width:110}),b.set("aplicar_descuento",{headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,field:"Descuento en bloque"}),b.set(7,{cellRenderer:this.setButtonEliminarItem,field:"Accion Eliminar",width:150}),b.set(8,{cellRenderer:this.setButtonModificarItem,field:"Accion Modificar",width:150}),this.gridOptionsTablaItems.suppressRowClickSelection=!0,this.gridOptionsTablaItems.rowSelection="multiple",this.gridOptionsTablaItems.enableRangeSelection=!0,this.gridOptionsTablaItems.enableCellChangeFlash=!0,this.getField("descuento_general").setVisible(!0),this.getField("aplicar_descuento").setVisible(!0),this.getField("tabla_item").initData(this.gridOptionsTablaItems,b),this.gridOptionsTablaItems.onSelectionChanged=this.rowSelectedPedido}else this.getField("tabla_item").toggle(!1),this.getField("tabla_bodega").toggle(!1);else this.alertGeneral.toggle(!0,"Ya est\xe1 modificando un item","error")}},{key:"valueOrdenCotizacion",value:function(){this.cleanValid(),""!==this.getField("orden_cotizacion").getValue()?this.getField("estado_pedido").setValue(this.getField("orden_cotizacion").getValue()):this.getField("estado_pedido").setValue("")}},{key:"clearCampos",value:function(){this.getField("direccion").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]),this.getField("telefono").setValue(""),this.getField("codigo_ciudad").setValue(""),this.getField("nombre_ciudad").setValue(""),this.getField("codigo_vendedor").setValue(""),this.getField("nombre_vendedor").setValue(""),this.getField("tasa_cambio").setValue(""),this.getField("precios").setValue(""),this.getField("codigo_negocio").setValue(""),this.getField("tasa_de_cambio").setValue(""),this.getField("observaciones").setValue("."),this.getField("subtotal").setValue(""),this.getField("valor_iva_final").setValue(""),this.getField("numero_de_item").setValue(""),this.getField("valor_pedido").setValue(""),this.nuevoArray=[],this.estadoTablaProductosBodegas=[],this.registroSeleccionado="",this.TipoNegociosProspecto="",this.codigoNegocio="",this.bodegaSeleccionada="",this.gridOptionsProductos.rowData=[];var e=new Map;this.getField("tb_codigo_producto").initData(this.gridOptionsProductos,e),this.getField("tb_codigo_producto").toggle(!1),this.productoModalListar="",this.campo1ModalListar="",this.campo2ModalListar=""}},{key:"clearCamposProducto",value:function(){this.getField("tarifa_iva_item").setValue(""),this.getField("peso_grm").setValue(""),this.getField("precio_lista").setValue(""),this.getField("unidad").setValue(""),this.getField("precio_facturacion").setValue(""),this.getField("valor_total_item").setValue(""),this.getField("descuento_item").setValue(0),this.getField("cantidad_item_364").setValue(""),this.getField("precio_sin_iva_con_descuento").setValue(""),this.getField("precio_sin_iva").setValue(""),this.getField("precio_mas_iva").setValue(""),this.getField("detalle_item").setValue(".")}},{key:"searchTercero",value:function(){if(this.getField("clase_de_pedido").setValue("1EST"),""!==this.getField("nit").getValue()&&""!==this.getField("sede").getValue()&&""!==this.getField("nombre").getValue()){this.getField("nit").setError(!1,"* Este campo es requerido."),this.getField("sede").setError(!1,"* Este campo es requerido."),this.getField("nombre").setError(!1,"* Este campo es requerido.");var e={nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="364_Retorna_cliente_con_nit_sede",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successSearchTercero,error:this.error_,general:this.generalFormat,showMessage:!1})}else""!==this.getField("nit").getValue()&&""!==this.getField("sede").getValue()||(this.getField("nit").setError(!0,"* Este campo es requerido."),this.getField("sede").setError(!0,"* Este campo es requerido."))}},{key:"successSearchTercero",value:function(e){this.getField("tasa_de_cambio").setValue(this.getField("tasa_cambio").getValue()),200===e.estado_p&&(this.getField("direccion").setValue(e.model[0].direccion),this.getField("telefono").setValue(e.model[0].telefonos),this.getField("codigo_ciudad").setValue(e.model[0].codigo_ciudad),this.getField("nombre_ciudad").setValue(e.model[0].nciudad),this.getField("codigo_vendedor").setValue(e.model[0].codigo_vendedor),this.getField("nombre_vendedor").setValue(e.model[0].nvendedor),this.getField("tasa_cambio").setValue(e.model[0].tasa_cambio),this.getField("precios").setValue(e.model[0].precios),this.codigoNegocio=e.model[0].codigo_negocio,this.getField("codigo_negocio").setValue(e.model[0].codigo_negocio),this.getField("tasa_de_cambio").setValue(this.getField("tasa_cambio").getValue()),this.getField("sucursal_origen").setValue(e.model[0].sucursal_origen),this.getField("sucursal_cartera").setValue(e.model[0].sucursal_cartera),this.selectDirecciones())}},{key:"openModalProducto",value:function(){this.itemEnEdicion="",this.modificarArray=[],""!==this.TipoNegociosProspecto&&this.getField("codigo_negocio").setValue(this.TipoNegociosProspecto),this.getField("nit").valid()&&this.getField("sede").valid()&&this.getField("nombre").valid()&&this.getField("direccion").valid()&&this.getField("telefono").valid()&&this.getField("codigo_ciudad").valid()&&this.getField("nombre_ciudad").valid()&&this.getField("codigo_vendedor").valid()&&this.getField("nombre_vendedor").valid()&&""!==this.getField("tasa_cambio").getValue()&&(this.getField("tasa_de_cambio").setValue(this.getField("tasa_cambio").getValue()),this.retornaBodegasPorCodigoFacturacion(),this.getField("codigo_producto").setDisabled(!1),this.nuevoArray.length>0?(""!==this.codigoNegocio&&this.getField("codigo_negocio").setValue(this.codigoNegocio),this.loadTabla=!0,this.loadTablaItems(this.nuevoArray),this.clearCamposProducto(),!1===this.estadoModalListar&&(this.getField("codigo_producto").setValue(""),this.getField("nombre_producto").setValue(""))):(this.getField("descuento_general").setVisible(!1),this.getField("aplicar_descuento").setVisible(!1),""!==this.codigoNegocio&&this.getField("codigo_negocio").setValue(this.codigoNegocio),this.getField("modal_producto").handleClickOpen())),this.getField("detalle_item").setError(!1,""),this.getField("detalle_item").setValue("."),this.getField("lista_precios").setValue(this.getField("precios").getValue())}},{key:"loadCodigoFacturacion",value:function(){this.generalFormat.nombre_accion="364-Retorna_codigo_facturacion_del_sesion_usuario",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successLoadCodigoFacturacion,error:this.error_,general:this.generalFormat})}},{key:"successLoadCodigoFacturacion",value:function(e){if(e.model&&e.model.length>0){this.getField("modal_principal").handleClose(),this.gridOptionsCodigosFacturacion.rowData=e.model,this.gridOptionsCodigosFacturacion.paginationPageSize=100;var t=new Map;this.getField("tabla_codigos_facturacion").initData(this.gridOptionsCodigosFacturacion,t)}else this.getField("tabla_codigos_facturacion").toggle(!1),this.alertGeneral.toggle(!0,"El usuario no posee c\xf3digos de facturaci\xf3n","error")}},{key:"onSelectionChangedCodigosFacturacion",value:function(e){if(this.datosCodigos=this.gridOptionsCodigosFacturacion.api.getSelectedRows(),void 0!==this.datosCodigos&&void 0!==this.datosCodigos[0]){this.getField("modal_principal").handleClickOpen(),this.getField("codigo_facturacion").setValue(this.datosCodigos[0].codigo_facturacion),this.getField("codigo_facturacion_actual").setValue(this.datosCodigos[0].codigo_facturacion),this.getField("nombre_sucursal").setValue(this.datosCodigos[0].detalle),this.gridOptionsCodigosFacturacion.api.deselectAll(),this.getField("orden_de_compra").setValue("."),this.getField("observaciones").setValue(".");var t=new Date;this.setDiasVigencia(t,30),this.getField("proceso_configuracion_id").setValue(7),this.getField("actividad_configuracion_id").setValue(44),this.bodegaIngreso=this.datosCodigos[0].bodegas_autorizadas}}},{key:"loadPreciosCliente",value:function(){if(""!==this.getField("codigo_id_producto").getValue()&&""!==this.getField("codigo_producto").getValue()){var e={codigo:this.getField("codigo_producto").getValue(),codigo_facturacion:this.getField("codigo_facturacion").getValue(),precios:this.getField("precios").getValue(),nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="364-Retorna_precio_articulo_para_cliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successLoadPreciosCliente,error:this.error_,general:this.generalFormat})}}},{key:"successLoadPreciosCliente",value:function(e){200===e.estado_p&&(this.getField("tarifa_iva_item").setValue(e.model[0].tarifa_iva),this.getField("peso_grm").setValue(e.model[0].peso),this.getField("precio_lista").setValue(e.model[0].precio),this.getField("unidad").setValue(e.model[0].unidad)),this.getField("cantidad_item_364").input.focus()}},{key:"loadItemPrecio",value:function(){if(""!==this.getField("nombre_producto").getValue()&&this.getField("nombre_producto").valid()&&this.getField("cantidad_item_364").getValue()>=.01&&this.getField("codigo_producto").valid()&&this.getField("precio_lista").valid()){var e={codigo:this.getField("codigo_producto").getValue(),codigo_facturacion:this.getField("codigo_facturacion").getValue(),descuento:this.getField("descuento_item").getValue(),cantidad:this.getField("cantidad_item_364").getValue(),precio:this.getField("precio_lista").getValue(),nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="364-Retorna_items_pedido_precio",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successLoadItemPrecio,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successLoadItemPrecio",value:function(e){200===e.estado_p&&(this.getField("precio_facturacion").setValue(e.data.precio_sin_iva),this.getField("valor_total_item").setValue(e.data.precio_total),this.getField("precio_sin_iva_con_descuento").setValue(e.data.precio_sin_iva),this.getField("precio_sin_iva").setValue(e.data.precio_sin_iva),this.getField("precio_mas_iva").setValue(e.data.precio_con_iva),this.getField("valor_iva").setValue(e.data.valor_iva),this.loadBodegasItem(),this.cleanValid())}},{key:"loadBodegasItem",value:function(){if(this.getField("codigo_facturacion").valid()&&""!==this.getField("nombre_producto").getValue()){var e={codigo:this.getField("codigo_producto").getValue(),codigo_facturacion:this.getField("codigo_facturacion").getValue()};this.generalFormat.nombre_accion="364-Retorna_bodegas_item",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successLoadBodegasItem,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successLoadBodegasItem",value:function(e){if(this.validarDespachoMinimo(),200===e.estado_p){this.gridOptionsBodegasItem.rowData=e.model;var t=new Map;this.getField("tabla_bodega").initData(this.gridOptionsBodegasItem,t)}else this.getField("tabla_bodega").toggle(!1)}},{key:"validarDespachoMinimo",value:function(){var e={codigo_producto:this.getField("codigo_producto").getValue(),cantidad:this.getField("cantidad_item_364").getValue(),codigo_bodega:this.getField("codigo_bodega_item").getValue()};this.generalFormat.nombre_accion="364-unidad_min_despacho_item",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successValidarDespachoMinimo,error:this.error_,general:this.generalFormat})}},{key:"successValidarDespachoMinimo",value:function(e){200===e.estado_p?(this.cantidadDespacho=!0,this.cleanValid()):(this.cantidadDespacho=!1,this.getField("boton_agregar_item").setDisabled(!0),this.getField("cantidad_item_364").setError(!0,e.data.mensaje))}},{key:"crearPedido",value:function(){this.getField("boton_grabar").setDisabled(!0),this.confirmCloseAlertModal(),this.valorPedido=0,this.totalIvaItems=0,this.subtotalItems=0,this.cantidad=0;var e="";if(""!==this.nuevoArray){var t=this.nuevoArray.length,i=0,a=0,o=0;this.nuevoArray.forEach((function(e){i+=e.precio_total,a+=e.precio_sin_iva*e.cantidad,o+=e.precio_sin_iva*e.cantidad*e.tarifa_iva/100})),e=""!==this.itemEnEdicion?"Terminado con \xc9xito, No guardo el ultimo el item ".concat(this.itemEnEdicion," que estaba modificando"):"Terminado con \xc9xito",this.getField("boton_grabar").setDisabled(!1),this.getField("confirmModalCustom").setTitleAndContent("Calcular Totales",e),this.getField("confirmModalCustom").setClickDialog(this.confirmCloseAlertModal),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!0),this.alertGeneral.toggle(!1,"Procesando... por favor espere","warning"),this.getField("subtotal").setValue(a.toFixed(2)),this.getField("valor_iva_final").setValue(o.toFixed(2)),this.getField("valor_pedido").setValue(i.toFixed(2)),this.getField("numero_de_item").setValue(t)}}},{key:"savePedido",value:function(){if(this.itemEnEdicion="",this.getField("observaciones").valid()&&this.getField("subtotal").valid()&&this.getField("valor_pedido").valid()&&this.getField("numero_de_item").valid()&&this.getField("clase_de_pedido").valid()&&this.getField("orden_de_compra").valid()){this.getField("boton_grabar").setDisabled(!0);var e={pedido:{nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue(),nombre:this.getField("nombre").getValue(),direccion:this.getField("direccion").getValue(),codigo_ciudad:this.getField("codigo_ciudad").getValue(),valor:this.getField("valor_pedido").getValue(),codigo_vendedor:this.getField("codigo_vendedor").getValue(),estado:"A",observaciones:this.getField("observaciones").getValue(),vence:this.getField("fecha_vencimiento").getValue(),vigencia:this.getField("fecha_validez").getValue(),lista_precios:this.getField("precios").getValue(),codigo_facturacion:this.getField("codigo_facturacion").getValue(),fdespacho:this.getField("fecha_entrega").getValue(),sucursal_origen:this.getField("sucursal_origen").getValue(),sucursal_cartera:this.getField("sucursal_cartera").getValue(),fecha_entrega:this.getField("fecha_entrega").getValue(),direccion_entrega:this.getField("direccion").getValue(),clase_pedido:this.getField("clase_de_pedido").getValue(),orden_compra:this.getField("orden_de_compra").getValue(),tasa_cambio:this.getField("tasa_cambio").getValue()},items:this.nuevoArray,actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),proceso_configuracion_id:this.getField("proceso_configuracion_id").getValue()};this.generalFormat.nombre_accion="364-permite_crear_un_pedido",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successSavePedido,error:this.error_,general:this.generalFormat})}}},{key:"successSavePedido",value:function(e){if(this.getField("boton_grabar").setDisabled(!1),200===e.estado_p){this.clearCampos(),this.clearCamposProducto(),this.getField("nit").setValue(""),this.getField("sede").setValue(""),this.getField("nombre").setValue(""),this.getField("observaciones").setValue("."),this.getField("subtotal").setValue(""),this.getField("valor_iva_final").setValue(""),this.getField("valor_pedido").setValue(""),this.getField("numero_de_item").setValue(""),this.getField("clase_de_pedido").setValue(""),this.getField("orden_de_compra").setValue("."),this.getField("orden_cotizacion").setValue(""),this.gridOptionsBodegasItem.rowData=[],this.getField("tabla_bodega").toggle(!1),this.nuevoArray=[];this.getField("direccion").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]);var t=new Date;this.setDiasVigencia(t,30),this.getField("confirmModalCustom").setTitleAndContent("Pedidos Mercanc\xedas",e.data.mensaje),this.getField("confirmModalCustom").setClickDialog(this.confirmCloseAlertModal),this.getField("confirmModalCustom").toggle(!0),this.getField("confirmModalCustom").setVisibleCancel(!0),this.getField("proceso_configuracion_id").setValue(7),this.getField("actividad_configuracion_id").setValue(44)}}}]),i}(d.a.form);d.a.addController("pedidos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsPedidosMercancia=Object.assign({},o.gridOptions),o.clientesPorDefecto=o.clientesPorDefecto.bind(Object(s.a)(o)),o.successClientesPorDefecto=o.successClientesPorDefecto.bind(Object(s.a)(o)),o.selectOptionProducto=o.selectOptionProducto.bind(Object(s.a)(o)),o.successSelectOptionProducto=o.successSelectOptionProducto.bind(Object(s.a)(o)),o.totalCantidadPorPrecio=o.totalCantidadPorPrecio.bind(Object(s.a)(o)),o.btnLimpiarCamposPrimerSeccion=o.btnLimpiarCamposPrimerSeccion.bind(Object(s.a)(o)),o.arrayTabla=[],o.listarTabla=o.listarTabla.bind(Object(s.a)(o)),o.setButtonEliminar=o.setButtonEliminar.bind(Object(s.a)(o)),o.eliminarItemConfirmar=o.eliminarItemConfirmar.bind(Object(s.a)(o)),o.eliminarItem=o.eliminarItem.bind(Object(s.a)(o)),o.cargarTabla=o.cargarTabla.bind(Object(s.a)(o)),o.habilitarBotonListarTabla=o.habilitarBotonListarTabla.bind(Object(s.a)(o)),o.habilitarBotonGrabarPedido=o.habilitarBotonGrabarPedido.bind(Object(s.a)(o)),o.btnLimpiarCamposSegundaSeccion=o.btnLimpiarCamposSegundaSeccion.bind(Object(s.a)(o)),o.btnGrabarPedido=o.btnGrabarPedido.bind(Object(s.a)(o)),o.successBTNGrabarPedido=o.successBTNGrabarPedido.bind(Object(s.a)(o)),o.traerFamiliasSelect=o.traerFamiliasSelect.bind(Object(s.a)(o)),o.successFamiliasSelect=o.successFamiliasSelect.bind(Object(s.a)(o)),o.traerAliasSelect=o.traerAliasSelect.bind(Object(s.a)(o)),o.successTraerAliasSelect=o.successTraerAliasSelect.bind(Object(s.a)(o)),o.formatearFecha=o.formatearFecha.bind(Object(s.a)(o)),o.mensajeErrorFecha=o.mensajeErrorFecha.bind(Object(s.a)(o)),o.selectOptionColor=o.selectOptionColor.bind(Object(s.a)(o)),o.successSelectOptionColor=o.successSelectOptionColor.bind(Object(s.a)(o)),o.fechaActual=0,o.opciones=[{text:"Ninguno",value:"",campos_cambian:{}}],o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("B2B Pedidos Web, @version: 1.01.0016, @author: Sebastian Rios Echeverri"),this.clientesPorDefecto(),this.getField("tercero_id_").setOnChange(this.traerFamiliasSelect),this.getField("familia_id").setOnChange(this.traerAliasSelect),this.getField("alias_estado_descripcion").setOnChange(this.selectOptionColor),this.getField("articulo_familias_alias_id_").setOnChange(this.habilitarBotonListarTabla),this.getField("portafolio_colores_id_").setOnChange(this.habilitarBotonListarTabla),this.getField("producto_").setOnChange(this.habilitarBotonListarTabla),this.getField("cantidad_").setOnChange(this.totalCantidadPorPrecio),this.getField("codigo_alias").setOnChange(this.selectOptionProducto),this.getField("codigo_color").setOnChange(this.selectOptionProducto),this.getField("btn_limpiar_campos_primer_seccion").setClick(this.btnLimpiarCamposPrimerSeccion),this.getField("btn_limpiar_campos_segunda_seccion").setClick(this.btnLimpiarCamposSegundaSeccion),this.getField("listar_tabla").setClick(this.listarTabla),this.getField("total_general").setOnChange(this.habilitarBotonGrabarPedido),this.getField("observaciones_").setOnChange(this.habilitarBotonGrabarPedido),this.getField("orden_compra_").setOnChange(this.habilitarBotonGrabarPedido),this.getField("grabar_pedido").setClick(this.btnGrabarPedido),this.formatearFecha(),this.getField("fecha_entrega_").setOnChange(this.mensajeErrorFecha)}},{key:"selectOptionColor",value:function(){if(this.getField("portafolio_colores_id_").setOptions(this.opciones),this.getField("producto_").setOptions(this.opciones),""!==this.getField("tercero_id_").getValue()&&" "!==this.getField("tercero_id_").getValue()&&""!==this.getField("articulo_familias_alias_id_").getValue()&&" "!==this.getField("articulo_familias_alias_id_").getValue()&&""!==this.getField("alias_estado_descripcion").getValue()&&" "!==this.getField("alias_estado_descripcion").getValue()){var e={tercero_id:this.getField("tercero_id_").getValue(),articulo_familias_alias_id:this.getField("articulo_familias_alias_id_").getValue()};this.generalFormat.nombre_accion="pedidos_mercancia_s_coloresporarticulos_524",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successSelectOptionColor,error:this.error_,general:this.generalFormat})}else this.getField("portafolio_colores_id_").setOptions(this.opciones),this.getField("producto_").setOptions(this.opciones)}},{key:"successSelectOptionColor",value:function(e){if(200===e.estado_p)if(e.data.length>=1){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.descripcion,i.campos_cambian={color_descripcion_:e.descripcion,codigo_color:e.codigo},t.push(i)})),this.getField("portafolio_colores_id_").setOptions(t)}else this.getField("portafolio_colores_id_").setOptions(this.opciones),this.getField("producto_").setOptions(this.opciones);else this.getField("portafolio_colores_id_").setOptions(this.opciones),this.getField("producto_").setOptions(this.opciones)}},{key:"mensajeErrorFecha",value:function(){this.habilitarBotonGrabarPedido();var e=new Date(this.getField("fecha_entrega_").getValue());e>this.fechaActual?this.getField("fecha_entrega_").setError(!1,"\xa1La fecha de entrega debe ser mayor a la fecha actual!"):e<=this.fechaActual&&this.getField("fecha_entrega_").setError(!0,"\xa1La fecha de entrega debe ser mayor a la fecha actual!")}},{key:"formatearFecha",value:function(){this.fechaActual=new Date;var e=new Date(this.fechaActual.getFullYear(),this.fechaActual.getMonth(),this.fechaActual.getDate()+1).toISOString();this.getField("fecha_entrega_").setValue(e.split("T")[0])}},{key:"traerFamiliasSelect",value:function(e){if(this.getField("familia_id").setOptions(this.opciones),this.getField("articulo_familias_alias_id_").setOptions(this.opciones),this.getField("portafolio_colores_id_").setOptions(this.opciones),this.getField("producto_").setOptions(this.opciones),""!==this.getField("tercero_id_").getValue()&&" "!==this.getField("tercero_id_").getValue()){var t={value:this.getField("tercero_id_").getValue()};this.generalFormat.nombre_accion="pedidos_mercancia_s_familias_traer_familias_tercero_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successFamiliasSelect,error:this.error_,general:this.generalFormat,showMessage:e})}else this.getField("familia_id").setOptions(this.opciones),this.getField("articulo_familias_alias_id_").setOptions(this.opciones),this.getField("portafolio_colores_id_").setOptions(this.opciones),this.getField("producto_").setOptions(this.opciones)}},{key:"successFamiliasSelect",value:function(e){if(200===e.estado_p){var t=[{text:"Ninguno",value:"",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.descripcion,i.campos_cambian={familia_descripcion_:e.descripcion},t.push(i)})),this.getField("familia_id").setOptions(t)}else this.getField("familia_id").setOptions(this.opciones),this.getField("articulo_familias_alias_id_").setOptions(this.opciones),this.getField("portafolio_colores_id_").setOptions(this.opciones),this.getField("producto_").setOptions(this.opciones)}},{key:"traerAliasSelect",value:function(){if(this.getField("articulo_familias_alias_id_").setOptions(this.opciones),this.getField("portafolio_colores_id_").setOptions(this.opciones),this.getField("producto_").setOptions(this.opciones),""!==this.getField("familia_id").getValue()&&" "!==this.getField("familia_id").getValue()){this.habilitarBotonListarTabla();var e={value:this.getField("familia_id").getValue()};this.generalFormat.nombre_accion="pedidos_mercamcia_s_alias_por_articulo_familias_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerAliasSelect,error:this.error_,general:this.generalFormat,showMessage:!1})}else this.getField("codigo_alias").setValue(""),this.getField("codigo_color").setValue(""),this.getField("alias_estado_descripcion").setValue(""),this.getField("precio_unitario_").setValue(""),this.getField("cantidad_").setValue(""),this.getField("precio_total_").setValue(""),this.getField("articulo_familias_alias_id_").setOptions(this.opciones),this.getField("portafolio_colores_id_").setOptions(this.opciones),this.getField("producto_").setOptions(this.opciones)}},{key:"successTraerAliasSelect",value:function(e){if(200===e.estado_p){var t=[{text:"Ninguno",value:"",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.descripcion,i.campos_cambian={alias_descripcion_:e.descripcion,codigo_alias:e.codigo,alias_estado_descripcion:e.estado_descripcion},t.push(i)})),this.getField("articulo_familias_alias_id_").setOptions(t)}else this.getField("articulo_familias_alias_id_").setOptions(this.opciones),this.getField("portafolio_colores_id_").setOptions(this.opciones),this.getField("producto_").setOptions(this.opciones)}},{key:"btnGrabarPedido",value:function(){var e=this,t=this.arrayTabla.map((function(t){return t.fecha_entrega=e.getField("fecha_entrega_").getValue(),t.observaciones=e.getField("observaciones_").getValue(),t.orden_compra=e.getField("orden_compra_").getValue(),t}));if(this.gridOptionsPedidosMercancia.rowData!==[]){var i={data:t};this.generalFormat.nombre_accion="pedidos_mercancia_s_pedidos_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:i,success:this.successBTNGrabarPedido,error:this.error_,general:this.generalFormat})}}},{key:"successBTNGrabarPedido",value:function(e){200===e.estado_p&&this.btnLimpiarCamposSegundaSeccion()}},{key:"habilitarBotonGrabarPedido",value:function(){""!==this.getField("total_general").getValue()&&0!==this.getField("total_general").getValue()&&this.gridOptionsPedidosMercancia.rowData!==[]&&""!==this.getField("observaciones_").getValue()&&" "!==this.getField("observaciones_").getValue()&&""!==this.getField("fecha_entrega_").getValue()&&" "!==this.getField("fecha_entrega_").getValue()&&""!==this.getField("orden_compra_").getValue()&&" "!==this.getField("orden_compra_").getValue()?this.getField("grabar_pedido").setDisabled(!1):this.getField("grabar_pedido").setDisabled(!0)}},{key:"habilitarBotonListarTabla",value:function(){""!==this.getField("articulo_familias_alias_id_").getValue()&&" "!==this.getField("articulo_familias_alias_id_").getValue()||(this.getField("codigo_alias").setValue(""),this.getField("codigo_color").setValue(""),this.getField("alias_estado_descripcion").setValue(""),this.getField("precio_unitario_").setValue(""),this.getField("cantidad_").setValue(""),this.getField("precio_total_").setValue("")),""!==this.getField("portafolio_colores_id_").getValue()&&" "!==this.getField("portafolio_colores_id_").getValue()||(this.getField("codigo_color").setValue(""),this.getField("precio_unitario_").setValue(""),this.getField("cantidad_").setValue(""),this.getField("precio_total_").setValue("")),""!==this.getField("producto_").getValue()&&" "!==this.getField("producto_").getValue()||(this.getField("precio_unitario_").setValue(""),this.getField("cantidad_").setValue(""),this.getField("precio_total_").setValue("")),""!==this.getField("familia_id").getValue()&&0!==this.getField("articulo_familias_alias_id_").getValue()&&""!==this.getField("portafolio_colores_id_").getValue()&&""!==this.getField("producto_").getValue()&&""!==this.getField("precio_unitario_").getValue()&&""!==this.getField("cantidad_").getValue()&&0!==this.getField("cantidad_").getValue()&&""!==this.getField("precio_total_").getValue()?this.getField("listar_tabla").setDisabled(!1):this.getField("listar_tabla").setDisabled(!0)}},{key:"cargarTabla",value:function(){if(this.arrayTabla.length>=1){var e=new Map;e.set("eliminar",{cellRenderer:this.setButtonEliminar,field:"eliminar",width:180}),this.gridOptionsPedidosMercancia.rowData=this.arrayTabla,this.getField("tb_pedidos_mercancia").initData(this.gridOptionsPedidosMercancia,e)}var t=0;this.arrayTabla.forEach((function(e){t+=e.precio_total})),this.getField("total_general").setValue(t.toFixed(4))}},{key:"listarTabla",value:function(){if(this.getField("familia_id").valid()&&this.getField("articulo_familias_alias_id_").valid()&&this.getField("portafolio_colores_id_").valid()&&this.getField("producto_").valid()&&this.getField("precio_unitario_").valid()&&this.getField("cantidad_").valid()&&this.getField("precio_total_").valid()){var e={familia:this.getField("familia_descripcion_").getValue(),alias:this.getField("alias_descripcion_").getValue(),color:this.getField("color_descripcion_").getValue(),producto:this.getField("producto_descripcion_").getValue(),tercero_id:this.getField("tercero_id_").getValue(),articulo_id:this.getField("articulo_id_").getValue(),codigo_articulo:this.getField("codigo_articulo_").getValue(),cantidad:this.getField("cantidad_").getValue(),precio_unitario:this.getField("precio_unitario_").getValue(),precio_total:this.getField("precio_total_").getValue(),portafolio_colores_id:this.getField("portafolio_colores_id_").getValue(),articulo_familias_alias_id:this.getField("articulo_familias_alias_id_").getValue(),fecha_entrega:this.getField("fecha_entrega_").getValue(),observaciones:this.getField("observaciones_").getValue(),orden_compra:this.getField("orden_compra_").getValue()};this.arrayTabla.push(e),this.cargarTabla(),this.getField("portafolio_colores_id_").setValue(""),this.getField("producto_").setValue(0),this.getField("precio_unitario_").setValue(0),this.getField("cantidad_").setValue(0),this.getField("precio_total_").setValue(0),this.getField("familia_id").setValue(""),this.getField("articulo_familias_alias_id_").setValue(""),this.getField("codigo_alias").setValue(""),this.getField("codigo_color").setValue(""),this.getField("codigo_id").setValue(""),this.getField("articulo_id_").setValue("")}}},{key:"setButtonEliminar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarItemConfirmar(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("buttonStyle","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarItemConfirmar",value:function(e){var t=this;this.getField("confirmModalCustom").setTitleAndContent("Eliminar","\xbfDesea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog((function(){t.eliminarItem(e)})),this.getField("confirmModalCustom").toggle(!0)}},{key:"eliminarItem",value:function(e){this.getField("confirmModalCustom").toggle(!1);var t=this.arrayTabla.indexOf(e);this.arrayTabla.splice(t,1),this.arrayTabla.length>=1?this.cargarTabla():this.getField("tb_pedidos_mercancia").toggle(!1)}},{key:"btnLimpiarCamposPrimerSeccion",value:function(){""!==this.getField("familia_id").getValue()&&" "!==this.getField("familia_id").getValue()&&this.getField("familia_id").setValue(""),""!==this.getField("articulo_familias_alias_id_").getValue()&&" "!==this.getField("articulo_familias_alias_id_").getValue()&&this.getField("articulo_familias_alias_id_").setValue(""),""!==this.getField("portafolio_colores_id_").getValue()&&" "!==this.getField("portafolio_colores_id_").getValue()&&this.getField("portafolio_colores_id_").setValue(""),""!==this.getField("producto_").getValue()&&" "!==this.getField("producto_").getValue()&&this.getField("producto_").setValue(""),this.getField("precio_unitario_").setValue(0),this.getField("cantidad_").setValue(0),this.getField("precio_total_").setValue(0),this.getField("codigo_alias").setValue(""),this.getField("codigo_color").setValue(""),this.getField("codigo_id").setValue(""),this.getField("articulo_id_").setValue("")}},{key:"btnLimpiarCamposSegundaSeccion",value:function(){""!==this.getField("familia_id").getValue()&&" "!==this.getField("familia_id").getValue()&&this.getField("familia_id").setValue(""),""!==this.getField("articulo_familias_alias_id_").getValue()&&" "!==this.getField("articulo_familias_alias_id_").getValue()&&this.getField("articulo_familias_alias_id_").setValue(""),""!==this.getField("portafolio_colores_id_").getValue()&&" "!==this.getField("portafolio_colores_id_").getValue()&&this.getField("portafolio_colores_id_").setValue(""),""!==this.getField("producto_").getValue()&&" "!==this.getField("producto_").getValue()&&this.getField("producto_").setValue(""),this.getField("precio_unitario_").setValue(0),this.getField("cantidad_").setValue(0),this.getField("precio_total_").setValue(0),this.arrayTabla=[],this.getField("tb_pedidos_mercancia").toggle(!1),this.arrayTabla.length>=1?this.cargarTabla():(this.getField("tb_pedidos_mercancia").toggle(!1),this.getField("total_general").setValue(0)),this.formatearFecha(),this.getField("observaciones_").setValue("."),this.getField("fecha_entrega_").setError(!1,"\xa1La fecha de entrega debe ser mayor a la fecha actual!"),this.getField("codigo_alias").setValue(""),this.getField("codigo_color").setValue(""),this.getField("orden_compra_").setValue("."),this.getField("codigo_id").setValue(""),this.getField("articulo_id_").setValue("")}},{key:"totalCantidadPorPrecio",value:function(){if(""!==this.getField("precio_unitario_").getValue()&&""!==this.getField("cantidad_").getValue()&&" "!==this.getField("precio_unitario_").getValue()&&" "!==this.getField("cantidad_").getValue()){this.habilitarBotonListarTabla();var e=this.getField("precio_unitario_").getValue()*this.getField("cantidad_").getValue();this.getField("precio_total_").setValue(e.toFixed(2))}else this.getField("precio_total_").setValue(""),this.getField("listar_tabla").setDisabled(!0)}},{key:"selectOptionProducto",value:function(){if(this.getField("producto_").setOptions(this.opciones),""!==this.getField("articulo_familias_alias_id_").getValue()&&" "!==this.getField("articulo_familias_alias_id_").getValue()&&""!==this.getField("portafolio_colores_id_").getValue()&&" "!==this.getField("portafolio_colores_id_").getValue()&&""!==this.getField("codigo_alias").getValue()&&" "!==this.getField("codigo_alias").getValue()&&""!==this.getField("codigo_color").getValue()&&" "!==this.getField("codigo_color").getValue()){this.habilitarBotonListarTabla();var e={tercero_id:this.getField("tercero_id_").getValue(),articulo_familias_alias_id:this.getField("articulo_familias_alias_id_").getValue(),alias:this.getField("codigo_alias").getValue(),color:this.getField("codigo_color").getValue()};this.generalFormat.nombre_accion="pedidos_mercancia_s_traerproductosaliascolor_524",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successSelectOptionProducto,error:this.error_,general:this.generalFormat})}else this.getField("producto_").setOptions(this.opciones)}},{key:"successSelectOptionProducto",value:function(e){if(200===e.estado_p)if(e.data.length>=1){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.codigo,i.campos_cambian={precio_unitario_:e.precio,producto_descripcion_:e.nombre,codigo_articulo_:e.codigo,codigo_id:e.codigo},t.push(i)})),this.getField("producto_").setOptions(t)}else this.getField("producto_").setOptions(this.opciones);else this.getField("producto_").setOptions(this.opciones)}},{key:"clientesPorDefecto",value:function(){this.generalFormat.nombre_accion="pedidos_mercancia_s_clientes_por_defecto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",success:this.successClientesPorDefecto,error:this.error_,general:this.generalFormat})}},{key:"successClientesPorDefecto",value:function(e){200===e.estado_p&&(this.getField("nit").setValue(e.data[0].nit),this.getField("sede").setValue(e.data[0].sede),this.getField("nombre").setValue(e.data[0].nombre),this.getField("tercero_id_").setValue(e.data[0].tercero_id))}}]),i}(d.a.form);d.a.addController("pedidos_mercancia",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.uploadTablePedidos=o.uploadTablePedidos.bind(Object(s.a)(o)),o.loadTablePedidos=o.loadTablePedidos.bind(Object(s.a)(o)),o.gridOptionsPedidos=Object.assign({},o.gridOptions),o.uploadLista=o.uploadLista.bind(Object(s.a)(o)),o.loadLista=o.loadLista.bind(Object(s.a)(o)),o.gridOptionsLista=Object.assign({},o.gridOptions),o.gridOptionsTurno=Object.assign({},o.gridOptions),o.uploadTableOperario=o.uploadTableOperario.bind(Object(s.a)(o)),o.loadOperario=o.loadOperario.bind(Object(s.a)(o)),o.gridOptionsOperario=Object.assign({},o.gridOptions),o.uploadTableTotalClaseUbi=o.uploadTableTotalClaseUbi.bind(Object(s.a)(o)),o.loadTotalClaseUbi=o.loadTotalClaseUbi.bind(Object(s.a)(o)),o.gridOptionsTotalClaseUbi=Object.assign({},o.gridOptions),o.limpiar=o.limpiar.bind(Object(s.a)(o)),o.dataArray=[],o.setButtonOperario=o.setButtonOperario.bind(Object(s.a)(o)),o.successOperarios=o.successOperarios.bind(Object(s.a)(o)),o.valueChange=o.valueChange.bind(Object(s.a)(o)),o.selectOptions=[],o.dataArrayOpe=[],o.guardarArrayOpe=o.guardarArrayOpe.bind(Object(s.a)(o)),o.successPutCountOne=o.successPutCountOne.bind(Object(s.a)(o)),o.turnosSelectOpe=o.turnosSelectOpe.bind(Object(s.a)(o)),o.grabarConSelect=o.grabarConSelect.bind(Object(s.a)(o)),o.successPutGrabarConSelect=o.successPutGrabarConSelect.bind(Object(s.a)(o)),o.resumenPedidos=o.resumenPedidos.bind(Object(s.a)(o)),o.succesResumenPedidos=o.succesResumenPedidos.bind(Object(s.a)(o)),o.gridOptionsResumenPedidos=Object.assign({},o.gridOptions),o.gridOptionsResumenPedidos.onSelectionChanged=o.nothing,o.setChangeProductosReservados=o.setChangeProductosReservados.bind(Object(s.a)(o)),o.ChangeProductosReservados=o.ChangeProductosReservados.bind(Object(s.a)(o)),o.abrirModalProductosRservados=o.abrirModalProductosRservados.bind(Object(s.a)(o)),o.gridOptionsTbProductosReservados=Object.assign({},o.gridOptions),o.dataArrayResumenPedidos=[],o.rowSelectedResumenPedido=o.rowSelectedResumenPedido.bind(Object(s.a)(o)),o.actualizarBtnProcesar=o.actualizarBtnProcesar.bind(Object(s.a)(o)),o.successActualizarBtnProcesar=o.successActualizarBtnProcesar.bind(Object(s.a)(o)),o.rowSelectedPedidos=o.rowSelectedPedidos.bind(Object(s.a)(o)),o.dataArrayPedidosContar=[],o.datosOperarioTodos=o.datosOperarioTodos.bind(Object(s.a)(o)),o.successTraerOperariosTodos=o.successTraerOperariosTodos.bind(Object(s.a)(o)),o.asignarOperario=o.asignarOperario.bind(Object(s.a)(o)),o.successPutasignarOperario=o.successPutasignarOperario.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnCargaPedidos").setClick(this.resumenPedidos),this.getField("btnprocesar").setClick(this.uploadTablePedidos),this.getField("btngrabar").setClick(this.grabarConSelect),this.getField("btncargaoperarios").setClick(this.uploadTableTotalClaseUbi),this.getField("btnAsignar").setClick(this.asignarOperario),this.getField("btncargaoperarios").setVisible(!1),this.getField("btngrabar").setVisible(!1),this.getField("idRegistro").setVisible(!1),this.getField("operariosTodos").setVisible(!1),this.getField("btnAsignar").setVisible(!1),this.getField("nit").setVisible(!1),this.getField("nombre_operario").setVisible(!1);this.generalFormat.nombre_accion="348-Trae_los_operarios_por_el_turno_seleccionado",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{value:0},success:this.turnosSelectOpe,error:this.error_,general:this.generalFormat})}},{key:"nothing",value:function(){}},{key:"turnosSelectOpe",value:function(e){this.selectOptions=e.model}},{key:"resumenPedidos",value:function(){if(""!==this.getField("codigo_bodega").getValue()&&" "!==this.getField("codigo_bodega").getValue()){this.getField("codigo_bodega").setError(!1,"");var e={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="348-Se_retornan_los_pedidos_en_estado_picking_y_estado=R",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesResumenPedidos,error:this.error_,general:this.generalFormat})}else this.getField("codigo_bodega").setError(!0,"Este campo es requerido")}},{key:"succesResumenPedidos",value:function(e){if(this.getField("tbResumenPedidos").toggle(!0),200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.getField("tbResumenPedidos").setOnRowSelected(!0),this.getField("tbResumenPedidos").setOnCellClicked(!0),this.getField("tbResumenPedidos").toggle(!0),this.gridOptionsResumenPedidos.rowData=e.model,this.gridOptionsResumenPedidos.paginationPageSize=100;var t=new Map;t.set("seleccionar",{cellRenderer:this.setButtonSeleccionar,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px"},field:"Seleccionar"}),t.set("accion",{cellRenderer:this.setChangeProductosReservados,field:"Acci\xf3n"}),t.set("valor",{cellRenderer:function(e){return"".formatoPrecio(e.data.valor)},cellStyle:{textAlign:"right",field:"valor"}}),t.set("valor_reserva",{cellRenderer:function(e){return"".formatoPrecio(e.data.valor_reserva)},cellStyle:{textAlign:"right",field:"valor_reserva"}}),t.set("peso_reserva",{cellRenderer:function(e){return"".formatoPrecio(e.data.peso_reserva)},cellStyle:{textAlign:"right",field:"peso_reserva"}}),t.set(0,{headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,field:"seleccionar"}),this.gridOptionsResumenPedidos.suppressRowClickSelection=!0,this.gridOptionsResumenPedidos.rowSelection="multiple",this.gridOptionsResumenPedidos.enableRangeSelection=!0,this.gridOptionsResumenPedidos.enableCellChangeFlash=!0,this.getField("tbResumenPedidos").initData(this.gridOptionsResumenPedidos,t),this.gridOptionsResumenPedidos.onRowClicked=this.rowSelectedResumenPedido}else this.getField("tbResumenPedidos").toggle(!1)}},{key:"rowSelectedResumenPedido",value:function(e){if(""===this.getField("id_inicial").getValue())if(e.node.isSelected()){e.node.setSelected(!1,!1);var t=e.node.data.pedido,i=this.dataArrayResumenPedidos,a=[];i.forEach((function(e,i,o){t!==e&&a.push(e)})),this.dataArrayResumenPedidos=a,this.getField("pedidos").setValue(this.dataArrayResumenPedidos)}else{e.node.setSelected(!0);var o=[];this.gridOptionsResumenPedidos.api.getSelectedRows().forEach((function(e){o.push(e.pedido)})),this.dataArrayResumenPedidos=o,this.getField("pedidos").setValue(this.dataArrayResumenPedidos)}else this.getField("fieldAlert").toggle(!0,"No puede volver a seleccionar un pedido","error")}},{key:"setChangeProductosReservados",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.ChangeProductosReservados(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Ver productos"),i}},{key:"ChangeProductosReservados",value:function(e){var t={numero_pedido:e.pedido,codigo_bodega:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="348-Consultar_pedido_reservado",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.abrirModalProductosRservados,error:this.error_,general:this.generalFormat})}},{key:"abrirModalProductosRservados",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("modalProductosReservados").handleClickOpen(),this.getField("tbProductosReservados").toggle(!0),this.gridOptionsTbProductosReservados.rowData=e.model,this.gridOptionsTbProductosReservados.paginationPageSize=100,this.getField("tbProductosReservados").initData(this.gridOptionsTbProductosReservados)):this.getField("tbProductosReservados").toggle(!1)}},{key:"uploadTablePedidos",value:function(e){if(""!==this.getField("pedidos").getValue()&&" "!==this.getField("pedidos").getValue()&&""!==this.getField("wms_turnos_horarios_id").getValue()&&" "!==this.getField("wms_turnos_horarios_id").getValue())if(""!==this.getField("codigo_bodega").getValue()&&" "!==this.getField("codigo_bodega").getValue()){this.getField("codigo_bodega").setError(!1,""),this.getField("bodega").setValue(this.getField("codigo_bodega").getValue()),this.getField("bodega2").setValue(this.getField("bodega").getValue()),this.getField("pedidos2").setValue(this.getField("pedidos").getValue()),this.getField("pedidos2_1").setValue(this.getField("pedidos2").getValue()),this.actualizarBtnProcesar();var t={value:this.getField("codigo_bodega").getValue(),pedidos:this.getField("pedidos").getValue()};this.generalFormat.nombre_accion="348-Retorna_todos_los_items_pedidos_reservados_donde_estado_picking=0",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.loadTablePedidos,error:this.error_,general:this.generalFormat})}else this.getField("codigo_bodega").setError(!0,"Este campo es requerido");else this.getField("fieldAlert").toggle(!0,"Se debe seleccionar al menos un pedido y seleccionar el turno","error")}},{key:"loadTablePedidos",value:function(e){var t=this;if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var i=new Map;i.set("OperarioSel",{cellRenderer:this.setButtonOperario,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px"},field:"Select Operario"}),this.getField("tabla_pedidos_pendientes_picking").setOnRowSelected(!0),this.getField("tabla_pedidos_pendientes_picking").setOnCellClicked(!0),this.getField("tabla_pedidos_pendientes_picking").toggle(!0),this.gridOptionsPedidos.rowData=e.model,this.gridOptionsPedidos.paginationPageSize=100,i.set(0,{headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,field:"seleccionar"}),this.gridOptionsPedidos.suppressRowClickSelection=!0,this.gridOptionsPedidos.rowSelection="multiple",this.gridOptionsPedidos.enableRangeSelection=!0,this.gridOptionsPedidos.enableCellChangeFlash=!0,this.getField("tabla_pedidos_pendientes_picking").initData(this.gridOptionsPedidos,i),this.gridOptionsPedidos.onRowClicked=this.rowSelectedPedidos,this.datosOperarioTodos(),this.uploadLista(),this.getField("btncargaoperarios").setVisible(!0),this.getField("idRegistro").setVisible(!0),this.getField("operariosTodos").setVisible(!0),this.getField("btnAsignar").setVisible(!0),this.getField("nit").setVisible(!0),this.getField("nombre_operario").setVisible(!0),e.model.forEach((function(e,i){0===i&&(t.getField("id_inicial").setValue(e.id),t.getField("inicial_id").setValue(t.getField("id_inicial").getValue())),i<=e.id&&(t.getField("id_final").setValue(e.id),t.getField("final_id").setValue(t.getField("id_final").getValue()))}))}else this.getField("tabla_pedidos_pendientes_picking").toggle(!1),this.getField("wms_items_pedidos_reservados-totales").setVisible(!1),this.getField("wms_items_pedidos_reservados-totales").setItemsFichas([])}},{key:"rowSelectedPedidos",value:function(e){if(e.node.isSelected()){e.node.setSelected(!1,!1);var t=e.node.data.id,i=this.dataArrayPedidosContar,a=[];i.forEach((function(e,i,o){t!==e&&a.push(e)})),this.dataArrayPedidosContar=a,this.getField("idRegistro").setValue(this.dataArrayPedidosContar)}else{e.node.setSelected(!0);var o=[];this.gridOptionsPedidos.api.getSelectedRows().forEach((function(e){o.push(e.id)})),this.dataArrayPedidosContar=o,this.getField("idRegistro").setValue(this.dataArrayPedidosContar)}}},{key:"datosOperarioTodos",value:function(){var e={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="348-Retorna_wms_operarios-todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerOperariosTodos,error:this.error_,general:this.generalFormat})}},{key:"successTraerOperariosTodos",value:function(e){if(200===e.estado_p&&e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.nombre,i.campos_cambian={totalOperario:e.id},t.push(i)})),this.getField("operariosTodos").setOptions(t)}}},{key:"asignarOperario",value:function(){if(""!==this.getField("idRegistro").getValue()&&" "!==this.getField("idRegistro").getValue())if(""!==this.getField("operariosTodos").getValue()&&" "!==this.getField("operariosTodos").getValue()){this.getField("operariosTodos").setError(!1,"");var e={codigo_bodega:this.getField("codigo_bodega").getValue(),wms_operarios_id:this.getField("totalOperario").getValue(),ids:this.getField("idRegistro").getValue(),id:1,id_inicial:1,id_final:1,bodega:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="348-Cambia_operario_de_todos_los_pedidos_especificados_en_ids",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successPutasignarOperario,error:this.error_,general:this.generalFormat})}else this.getField("operariosTodos").valid()&&""===this.getField("operariosTodos").getValue()&&this.getField("operariosTodos").setError(!0,"Este campo es requerido");else this.getField("fieldAlert").toggle(!0,"Se debe seleccionar al menos un picking y seleccionar un operario","error")}},{key:"successPutasignarOperario",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.getField("idRegistro").setValue(""),this.getField("operariosTodos").setValue(""),this.uploadTablePedidos())}},{key:"actualizarBtnProcesar",value:function(){if(this.dataArrayResumenPedidos.length>0){var e={bodega:this.getField("codigo_bodega").getValue(),pedidos:this.getField("pedidos").getValue(),wms_turnos_horarios_id:this.getField("wms_turnos_horarios_id").getValue()};this.generalFormat.nombre_accion="348-Recibe_varios_pedidos_separados_por_coma_sin_espacios",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successActualizarBtnProcesar,error:this.error_,general:this.generalFormat})}else this.getField("fieldAlert").toggle(!0,"Se asign\xf3 el operario de forma correcta al pedido","success")}},{key:"successActualizarBtnProcesar",value:function(){this.getField("btngrabar").setVisible(!0);var e={value:this.getField("codigo_bodega").getValue(),pedidos:this.getField("pedidos").getValue()};this.generalFormat.nombre_accion="348-Retorna_todos_los_items_pedidos_reservados_donde_estado_picking=0",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.loadTablePedidos,error:this.error_,general:this.generalFormat})}},{key:"setButtonOperario",value:function(e){var t=this;this.dataArrayResumenPedidos=[];var i=e.data.id,a=document.createElement("select"),o=document.createElement("div");o.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),a.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),a.onchange=function(i){return t.valueChange(i,e.data)},a.setAttribute("id","mySelectOperario_");var s=this.successOperarios();return this.valor_idOpe=1,s.map((function(e){return a.appendChild(e),parseInt(e.value)===i&&(t.valor_idOpe=parseInt(e.value)),null})),o.appendChild(a),o}},{key:"successOperarios",value:function(e){var t=document.createElement("option");t.setAttribute("value"," "),t.textContent="Ninguno";var i=[t];return this.selectOptions.map((function(e){var t=document.createElement("option");return t.setAttribute("value",parseInt(e.id)),t.textContent=e.nombre,i.push(t),null})),i}},{key:"valueChange",value:function(e,t){if(void 0!==e.target){var i={id_pedido:t.id,id_operario:parseInt(e.target.value)};this.dataArrayOpe.push(i)}this.guardarArrayOpe()}},{key:"guardarArrayOpe",value:function(){var e={datosactualizacion:this.dataArrayOpe,bodega:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="348-Pedidos_reservados_actualizar_operario",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successPutCountOne,error:this.error_,general:this.generalFormat})}},{key:"successPutCountOne",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.uploadTablePedidos())}},{key:"grabarConSelect",value:function(){if(""!==this.getField("nit").getValue()&&" "!==this.getField("nit").getValue()&&""!==this.getField("nombre_operario").getValue()&&" "!==this.getField("nombre_operario").getValue()){this.getField("nit").setError(!1,""),this.getField("nombre_operario").setError(!1,""),this.getField("btngrabar").setDisabled(!0);var e={bodega:this.getField("codigo_bodega").getValue(),id_inicial:this.getField("id_inicial").getValue(),id_final:this.getField("id_final").getValue(),pedidos:this.getField("pedidos").getValue(),id_operario_resurtido:this.getField("id_operario_resurtido").getValue()};console.log("tipoDato",typeof this.dataArrayOpe),this.generalFormat.nombre_accion="348-id_inicial_y_id_final_son_el_rango_de_id_que_se_asigno_el_operario",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successPutGrabarConSelect,error:this.error_,general:this.generalFormat})}else this.getField("nit").valid()&&""===this.getField("nit").getValue()&&this.getField("nit").setError(!0,"Este campo es requerido"),this.getField("nombre_operario").valid()&&""===this.getField("nombre_operario").getValue()&&this.getField("nombre_operario").setError(!0,"Este campo es requerido")}},{key:"successPutGrabarConSelect",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.dataArrayOpe=[],this.limpiar()),this.getField("btngrabar").setDisabled(!1)}},{key:"uploadTableTotalClaseUbi",value:function(e){if(""!==this.getField("codigo_bodega").getValue()&&" "!==this.getField("codigo_bodega").getValue()){var t={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="348-Trae_la_cantidad_total_de_ubicaciones_con_clase_p_a_y_pe",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.loadTotalClaseUbi,error:this.error_,general:this.generalFormat})}else this.getField("codigo_bodega").setError(!0,"Este campo es requerido")}},{key:"loadTotalClaseUbi",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("tabla_total_ubi").toggle(!0),this.gridOptionsTotalClaseUbi.rowData=e.model,this.gridOptionsTotalClaseUbi.paginationPageSize=100,this.getField("tabla_total_ubi").initData(this.gridOptionsTotalClaseUbi),this.gridOptionsTotalClaseUbi.api.selectIndex(0,!0,!0),this.uploadTableOperario()):this.getField("tabla_total_ubi").toggle(!1)}},{key:"uploadTableOperario",value:function(e){var t={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="348-Trae_la_cantidad_de_items_y_ubicaciones_por_operario",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.loadOperario,error:this.error_,general:this.generalFormat})}},{key:"loadOperario",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("tabla_carga_operario").toggle(!0),this.gridOptionsOperario.rowData=e.model,this.gridOptionsOperario.paginationPageSize=100,this.getField("tabla_carga_operario").initData(this.gridOptionsOperario),this.gridOptionsOperario.api.selectIndex(0,!0,!0)):this.getField("tabla_carga_operario").toggle(!1)}},{key:"uploadLista",value:function(e){var t={codigo_bodega:this.getField("codigo_bodega").getValue(),pedidos:this.getField("pedidos").getValue()};this.generalFormat.nombre_accion="348-Totales_por_pedidos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.loadLista,error:this.error_,general:this.generalFormat})}},{key:"loadLista",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("wms_items_pedidos_reservados-totales").setVisible(!0),this.getField("wms_items_pedidos_reservados-totales").setItemsFichas(e.model)):this.getField("wms_items_pedidos_reservados-totales").setVisible(!1)}},{key:"limpiar",value:function(){this.getField("btngrabar").setIdEntity(1),this.getField("codigo_bodega").setValue(""),this.getField("wms_turnos_horarios_id").setValue(""),this.getField("id_inicial").setValue(""),this.getField("id_final").setValue(""),this.getField("bodega").setValue(""),this.getField("turnoOperario").setValue(""),this.getField("pedidos").setValue(""),this.getField("nombre_operario").setValue(""),this.getField("nit").setValue(""),""!==this.getField("id_inicial").getValue()?this.getField("id_inicial").setError(!1,""):(this.getField("tabla_pedidos_pendientes_picking").toggle(!1),this.getField("tbResumenPedidos").toggle(!1),this.getField("wms_items_pedidos_reservados-totales").setItemsFichas([]),this.getField("tabla_total_ubi").toggle(!1),this.getField("tabla_carga_operario").toggle(!1),this.getField("btncargaoperarios").setVisible(!1),this.getField("btnactualizarope").setVisible(!1),this.getField("btngrabar").setVisible(!1),this.getField("turnoOperario").setVisible(!1),this.getField("btnActualizarUbi").setVisible(!1),this.getField("idRegistro").setVisible(!1),this.getField("operariosTodos").setVisible(!1),this.getField("btnAsignar").setVisible(!1),this.getField("nit").setVisible(!1),this.getField("nombre_operario").setVisible(!1))}}]),i}(d.a.form);d.a.addController("pedidosPendPicking",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).onSelectionChanged=function(){var e=o.gridOptions.api.getSelectedRows();o.getField("tablaRolesFormulario").props.campos_relacionados.split(";").map((function(t){var i=t.split(",");return o.setValueField(i[1],e[0][i[0]])}))},o.initForm=o.initForm.bind(Object(s.a)(o)),o.searchServiciosFormulario=o.searchServiciosFormulario.bind(Object(s.a)(o)),o.successRolesForm=o.successRolesForm.bind(Object(s.a)(o)),o.successServiceForm=o.successServiceForm.bind(Object(s.a)(o)),o.setCheckBox=o.setCheckBox.bind(Object(s.a)(o)),o.limpiarTablaServiciosForm=o.limpiarTablaServiciosForm.bind(Object(s.a)(o)),o.serviceAdd=o.serviceAdd.bind(Object(s.a)(o)),o.searchServiceRolSelect=o.searchServiceRolSelect.bind(Object(s.a)(o)),o.successRolesPermisos=o.successRolesPermisos.bind(Object(s.a)(o)),o.successServiceRolForm=o.successServiceRolForm.bind(Object(s.a)(o)),o.setCheckBoxRol=o.setCheckBoxRol.bind(Object(s.a)(o)),o.addServiceRol=o.addServiceRol.bind(Object(s.a)(o)),o.successAddService=o.successAddService.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.deleteService=o.deleteService.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.successDeleteService=o.successDeleteService.bind(Object(s.a)(o)),o.deleteServiceRol=o.deleteServiceRol.bind(Object(s.a)(o)),o.setButtonDeleteRol=o.setButtonDeleteRol.bind(Object(s.a)(o)),o.successAddRolService=o.successAddRolService.bind(Object(s.a)(o)),o.addServiceUser=o.addServiceUser.bind(Object(s.a)(o)),o.services=new Map,o.servicesRol=new Map,o.permissionRol2=0,o.gridOptions={defaultColDef:{filter:!0,resizable:!0},columnDefs:[],pagination:!0,rowSelection:"single",paginationPageSize:15},o.gridOptions2={defaultColDef:{filter:!0,resizable:!0},columnDefs:[],pagination:!0,rowSelection:"single",paginationPageSize:15},o.gridOptions3={defaultColDef:{filter:!0,resizable:!0},columnDefs:[],pagination:!0,rowSelection:"single",paginationPageSize:15},o.gridOptions4={defaultColDef:{filter:!0,resizable:!0},columnDefs:[],pagination:!0,rowSelection:"single",paginationPageSize:15},o}return Object(o.a)(i,[{key:"setValueField",value:function(e,t){var i=this.getField(e);i&&i.setValue(t)}},{key:"initForm",value:function(){this.getField("btnAddRolService").setDisabled(!0),this.getField("btnAddRolService").setClick(this.addServiceRol),this.getField("btnAddService").setClick(this.addServiceUser),this.getField("btnSearchServicios").setClick(this.searchServiciosFormulario),this.getField("formulario_id").setOnChange(this.limpiarTablaServiciosForm),this.getField("usuario_id").setOnChange(this.limpiarTablaServiciosForm),this.getField("btnAddService").setDisabled(!0),this.getField("btnSearchRolService").setClick(this.searchServiceRolSelect)}},{key:"limpiarTablaServiciosForm",value:function(){""!==this.getField("formulario_id").getValue()&&""!==this.getField("usuario_id").getValue()||(this.getField("tablaServiceForm").toggle(!1),this.getField("tablaServiceRol").toggle(!1))}},{key:"searchServiciosFormulario",value:function(){if(this.getField("codigo").valid()&this.getField("nombre").valid()&this.getField("formulario").valid()&this.getField("nombre_formulario").valid()){var e=this.getField("usuario_id").getValue();this.generalFormat.nombre_accion="traer_permisos_usuarios_porId";var t={value:e};this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successRolesForm,error:this.error_,general:this.generalFormat})}}},{key:"successRolesForm",value:function(e){if(200===e.estado_p){this.permissionUser=e.model;var t=this.getField("formulario_id").getValue();this.generalFormat.nombre_accion="traer_serviciosformulario_por_formulario_id";var i={value:t};this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.successServiceForm,error:this.error_,general:this.generalFormat})}}},{key:"successServiceForm",value:function(e){if(200===e.estado_p){var t=new Map;t.set("opcion",{cellRenderer:this.setCheckBox,field:"Opci\xf3n"}),t.set("accion",{cellRenderer:this.setButtonDelete,field:"accion"}),this.gridOptions2.rowData=e.model,this.getField("tablaServiceForm").initData(this.gridOptions2,t)}else this.getField("tablaServiceForm").toggle(!1)}},{key:"setCheckBox",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.serviceAdd(i)},a.setAttribute("id","buttonAdd_"+i),a.setAttribute("type","checkbox"),a.setAttribute("value","Agregar"),this.permissionUser.length>0&&this.permissionUser.map((function(t){return e.data.id===t.servicios_formulario_id&&(a.checked=!0,a.setAttribute("disabled",!0)),null})),a}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=document.createElement("div"),o=document.createElement("input");o.setAttribute("id","buttonDelete_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Eliminar");var s=!0;return this.permissionUser.length>0&&this.permissionUser.map((function(i){return e.data.id===i.servicios_formulario_id&&(o.onclick=function(){return t.deleteService(i.id)},s=!1),null})),s&&(o.setAttribute("style","width:100%;height: 100%; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),o.setAttribute("disabled",!0)),a.appendChild(o),a}},{key:"deleteService",value:function(e){this.successDeleteCustom=this.successDeleteService;var t={accion:"f9_servicio",campo:"tablaRolesFormulario",id_formulario:this.formId,id:e};this.data=t,this.urlCampo="tablaRolesFormulario",this.urlAccion="f9_servicio",this.getField("modalDelete").toggle(!0)}},{key:"serviceAdd",value:function(e){document.getElementById("buttonAdd_"+e).checked?this.services.set(e,"Agregado"):this.services.delete(e),this.services.size>0?this.getField("btnAddService").setDisabled(!1):this.getField("btnAddService").setDisabled(!0)}},{key:"addServiceRol",value:function(){if(this.getField("rol_id").valid()){var e=[];this.servicesRol.forEach((function(t,i){var a={servicios_formulario_id:i};e.push(a)}));var t={accion:"servicio",id_formulario:this.formId,campo:"btnAddRolService",roles_permiso_id:parseInt(this.getField("rol_id").getValue()),servicios_formularios:e};this.service.send(this.getConstant().formSave(),"POST",t,this.successAddRolService,this.error_)}}},{key:"successAddRolService",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.searchServiceRolSelect())}},{key:"searchServiceRolSelect",value:function(){if(this.getField("rol_id").valid()&this.getField("codigo_formulario").valid()&this.getField("formulario_nombre").valid()){var e=this.getField("rol_id").getValue();this.service.send(this.getConstant().searchFormat().format(e,"btnSearchServiceRolSelect","servicio",this.formId),"GET",void 0,this.successRolesPermisos,this.error_)}}},{key:"successRolesPermisos",value:function(e){if(200===e.estado_p){this.permissionRol2=e.model;var t=this.getField("formulario_id").getValue();this.service.send(this.getConstant().searchFormat().format(t,"btnSearchServicios","servicio",this.formId),"GET",void 0,this.successServiceRolForm,this.error_)}}},{key:"successServiceRolForm",value:function(e){if(200===e.estado_p){var t=new Map;t.set("opcion",{cellRenderer:this.setCheckBoxRol,field:"Opci\xf3n"}),t.set("accion",{cellRenderer:this.setButtonDeleteRol,field:"accion"}),this.gridOptions.rowData=e.model,this.getField("tablaServiceRol").initData(this.gridOptions,t)}else this.getField("tablaServiceRol").toggle(!1)}},{key:"setButtonDeleteRol",value:function(e){var t=this,i=e.data.id,a=document.createElement("div"),o=document.createElement("input");o.setAttribute("id","buttonDelete_"+i),o.setAttribute("class","buttonStyle"),o.setAttribute("type","button"),o.setAttribute("value","Eliminar");var s=!0;return this.permissionRol2.length>0&&this.permissionRol2.map((function(i){return e.data.id===i.servicios_formulario_id&&(s=!1,o.onclick=function(){return t.deleteServiceRol(i.id)}),null})),s&&(o.setAttribute("style","width:100%;height: 100%; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),o.setAttribute("disabled",!0)),a.appendChild(o),a}},{key:"deleteServiceRol",value:function(e){this.successDeleteCustom=this.successDelete;var t={accion:"servicio",campo:"tablaRolService",id_formulario:this.formId,id:e};this.data=t,this.urlCampo="tablaRolService",this.urlAccion="servicio",this.getField("modalDelete").toggle(!0)}},{key:"successDelete",value:function(e){void 0!==e.estado_p&&200!==e.estado_p||(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.searchServiceRolSelect())}},{key:"successDeleteService",value:function(e){void 0!==e.estado_p&&200!==e.estado_p||(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.searchServiciosFormulario())}},{key:"setCheckBoxRol",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.serviceAddRol(i)},a.setAttribute("id","buttonAddRol_"+i),a.setAttribute("type","checkbox"),a.setAttribute("value","Agregar"),this.permissionRol2.length>0&&this.permissionRol2.map((function(t){return e.data.id===t.servicios_formulario_id&&(a.checked=!0,a.setAttribute("disabled",!0)),null})),a}},{key:"serviceAddRol",value:function(e){document.getElementById("buttonAddRol_"+e).checked?this.servicesRol.set(e,"Agregado"):this.servicesRol.delete(e),this.servicesRol.size>0?this.getField("btnAddRolService").setDisabled(!1):this.getField("btnAddRolService").setDisabled(!0)}},{key:"addServiceUser",value:function(){var e="";this.services.forEach((function(t,i){e+=i+","}));var t={usuario_id:this.getField("usuario_id").getValue(),servicios_formulario_id:e};this.generalFormat.nombre_accion="usuarios.permisos.crearmultiples",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.successAddService,error:this.error_,general:this.generalFormat})}},{key:"successAddService",value:function(e){200===e.estado_p&&(this.searchServiciosFormulario(),this.services=new Map,this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"))}}]),i}(d.a.form);d.a.addController("PJ",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.successPesoRecipiente=o.successPesoRecipiente.bind(Object(s.a)(o)),o.restarPesos=o.restarPesos.bind(Object(s.a)(o)),o.grabarTodo=o.grabarTodo.bind(Object(s.a)(o)),o.continuarFlujoProceso=o.continuarFlujoProceso.bind(Object(s.a)(o)),o.traerConceptoFicha=o.traerConceptoFicha.bind(Object(s.a)(o)),o.successConceptoFicha=o.successConceptoFicha.bind(Object(s.a)(o)),o.articuloDensidad=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Pesaje @Version: 1.01.0011_1, @Author: Juan David Nieto"),this.traerConceptoFicha(),this.getField("peso_balanza").setKeyUp(this.restarPesos),this.getField("btnAceptar").setClick(this.grabarTodo);var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="280-Servicio_traer_datos_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="280-Retorna_peso_recipiente",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successPesoRecipiente,error:this.error_,general:this.generalFormat})}},{key:"traerConceptoFicha",value:function(){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha);var e={value:this.getField("produccion_fichas_id").getValue()};this.generalFormat.nombre_accion="280-retorna_concepto_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successConceptoFicha,error:this.error_,general:this.generalFormat})}},{key:"successConceptoFicha",value:function(e){200===e.estado_p&&this.getField("concepto_ficha").setValue(e.data[0].descripcion)}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaDatosFicha").setVisible(!0),this.getField("listaDatosFicha").setItemsFichas(e.model)):this.getField("listaDatosFicha").setVisible(!1)}},{key:"successPesoRecipiente",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=e.model;this.getField("peso_recipiente").setValue(t[0].peso_recipiente),this.articuloDensidad=e.model[0].densidad_formulacion}else this.getField("peso_recipiente").setError(!0,"* No se encontro ning\xfan dato")}},{key:"restarPesos",value:function(){if(this.getField("peso_balanza").valid()&&""!==this.getField("peso_balanza").getValue()&&this.articuloDensidad>=1){var e=parseFloat(this.getField("peso_balanza").getValue())-parseFloat(this.getField("peso_recipiente").getValue()),t=e/this.articuloDensidad;this.getField("galones_resultantes").setValue(t.toFixed(2)),this.getField("kilos_resultantes").setValue(e.toFixed(2)),this.getField("galones_resultantes").valid()}else this.getField("galones_resultantes").setValue(0),this.getField("kilos_resultantes").setValue(0)}},{key:"grabarTodo",value:function(){if(this.getField("galones_resultantes").valid()&this.getField("peso_balanza").valid()){this.getField("galones_resultantes").setError(!1,""),this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha);var e={produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),galones_resultantes:this.getField("galones_resultantes").getValue()};this.generalFormat.nombre_accion="280-Permite_agregar_el_peso",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.continuarFlujoProceso,error:this.error_,general:this.generalFormat})}else this.getField("galones_resultantes").valid()&&""===this.getField("galones_resultantes").getValue()&&this.getField("galones_resultantes").setError(!0,"Este campo es requerido")}},{key:"continuarFlujoProceso",value:function(e){if(200===e.estado_p){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),this.getField("actividad_id").setValue(this.props.data.actividad_id);var t={produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue(),actividad_id:this.getField("actividad_id").getValue()};this.generalFormat.nombre_accion="280-Permite_cotinuar_flujo-envasar",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}}]),i}(d.a.form);t.default=l,d.a.addController("pesajeProduccion",l)},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.uploadPickingReservados=o.uploadPickingReservados.bind(Object(s.a)(o)),o.loadTbPickingReservados=o.loadTbPickingReservados.bind(Object(s.a)(o)),o.gridOptionsPedidosReservados=Object.assign({},o.gridOptions),o.setChange=o.setChange.bind(Object(s.a)(o)),o.change=o.change.bind(Object(s.a)(o)),o.abrirModal=o.abrirModal.bind(Object(s.a)(o)),o.gridOptionsTbPickingFaltante=Object.assign({},o.gridOptions),o.uploadPickingContados=o.uploadPickingContados.bind(Object(s.a)(o)),o.loadTbPickingContados=o.loadTbPickingContados.bind(Object(s.a)(o)),o.gridOptionsPedidosContados=Object.assign({},o.gridOptions),o.setChangePedidosContados=o.setChangePedidosContados.bind(Object(s.a)(o)),o.changePickingContados=o.changePickingContados.bind(Object(s.a)(o)),o.abrirModalProductosFaltaPedi=o.abrirModalProductosFaltaPedi.bind(Object(s.a)(o)),o.gridOptionsTbProductosFaltantePedidos=Object.assign({},o.gridOptions),o.limpiarTodo=o.limpiarTodo.bind(Object(s.a)(o)),o.gridOptionsPedidosReservados.onSelectionChanged=o.funcionVacia,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnProcesar").setClick(this.uploadPickingReservados),this.getField("codigo_bodega").setOnChange(this.limpiarTodo)}},{key:"limpiarTodo",value:function(){for(var e in this.getField("tbPickingReservados").toggle(!1),this.getField("tbPedidosContadosPicking").toggle(!1),this.refs)"codigo_bodega"!==e&&"nombre_bodega"!==e&&"tbPickingReservados"!==e&&void 0!==this.getField(e).setValue&&this.getField(e).setValue("")}},{key:"funcionVacia",value:function(){}},{key:"uploadPickingReservados",value:function(){if(""!==this.getField("codigo_bodega").getValue()&&" "!==this.getField("codigo_bodega").getValue()&&""!==this.getField("nombre_bodega").getValue()&&" "!==this.getField("nombre_bodega").getValue()){this.getField("codigo_bodega").setError(!1,""),this.getField("nombre_bodega").setError(!1,"");var e={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="365-Pedidos_reservados_picking_contados",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.loadTbPickingReservados,error:this.error_,general:this.generalFormat})}else this.getField("codigo_bodega").valid()&&""===this.getField("codigo_bodega").getValue()&&this.getField("codigo_bodega").setError(!0,"Este campo es requerido"),this.getField("nombre_bodega").valid()&&""===this.getField("nombre_bodega").getValue()&&this.getField("nombre_bodega").setError(!0,"Este campo es requerido")}},{key:"loadTbPickingReservados",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=new Map;t.set("accion",{cellRenderer:this.setChange,field:"Acci\xf3n"}),this.getField("tbPickingReservados").toggle(!0),this.gridOptionsPedidosReservados.rowData=e.model,this.getField("tbPickingReservados").initData(this.gridOptionsPedidosReservados,t),this.gridOptionsPedidosReservados.api.selectIndex(0,!0,!0)}this.uploadPickingContados()}},{key:"setChange",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.change(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Ver m\xe1s"),i}},{key:"change",value:function(e){var t={numero_picking:e.numero_picking,numero_pedido:e.pedido,bodega:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="365-Ver_productos_faltantes_picking",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.abrirModal,error:this.error_,general:this.generalFormat})}},{key:"abrirModal",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("modalPickingReservados").handleClickOpen(),this.getField("tbProductosFaltanPicking").toggle(!0),this.gridOptionsTbPickingFaltante.rowData=e.model,this.getField("tbProductosFaltanPicking").initData(this.gridOptionsTbPickingFaltante)):this.getField("tbProductosFaltanPicking").toggle(!1)}},{key:"uploadPickingContados",value:function(){if(""!==this.getField("codigo_bodega").getValue()&&" "!==this.getField("codigo_bodega").getValue()){this.getField("codigo_bodega").setError(!1,"");var e={value:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="365-Ver_productos_contados_picking",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.loadTbPickingContados,error:this.error_,general:this.generalFormat})}else this.getField("codigo_bodega").setError(!0,"Este campo es requerido")}},{key:"loadTbPickingContados",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=new Map;t.set("ubicacion",{cellRenderer:function(e){return e.data.ubicacion},field:"ubicacion_fatante"}),t.set("accion",{cellRenderer:this.setChangePedidosContados,field:"Acci\xf3n"}),this.getField("tbPedidosContadosPicking").toggle(!0),this.gridOptionsPedidosContados.rowData=e.model,this.getField("tbPedidosContadosPicking").initData(this.gridOptionsPedidosContados,t),this.gridOptionsPedidosContados.api.selectIndex(0,!0,!0)}}},{key:"setChangePedidosContados",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.changePickingContados(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Ver m\xe1s"),i}},{key:"changePickingContados",value:function(e){var t={numero_pedido:e.pedido,bodega:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="365-Ver_productos_faltantes_pedido",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.abrirModalProductosFaltaPedi,error:this.error_,general:this.generalFormat})}},{key:"abrirModalProductosFaltaPedi",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("modalPickingContados").handleClickOpen(),this.getField("tbProductosFaltanPedidos").toggle(!0),this.gridOptionsTbProductosFaltantePedidos.rowData=e.model,this.getField("tbProductosFaltanPedidos").initData(this.gridOptionsTbProductosFaltantePedidos)):this.getField("tbProductosFaltanPedidos").toggle(!1)}}]),i}(d.a.form);d.a.addController("contadosPicking",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(227),o=i(4),s=i(5),r=i(0),n=i(7),d=i(6),l=i(3),c=function(e){Object(n.a)(i,e);var t=Object(d.a)(i);function i(e){var a;return Object(o.a)(this,i),(a=t.call(this,e)).initForm=a.initForm.bind(Object(r.a)(a)),a.onSave=a.onSave.bind(Object(r.a)(a)),a.contenedores=["drop1","servicioDRT"],a}return Object(s.a)(i,[{key:"initForm",value:function(){this.getField("guardar_formulario").setClick(this.onSave)}},{key:"onSave",value:function(){var e={};if(this.getField("nombre_formulario").valid()){var t=[];for(var i in this.contenedores){var o=this.getField(this.contenedores[i]).getJSON();if(o.length>0)for(var s in o)"CI"===o[s].tipo_campo&&(o[s].tipo_campo="CE"),t.push.apply(t,Object(a.a)(o[s].childs)),delete o[s].childs,t.push.apply(t,Object(a.a)(o))}for(var r in t){var n=t[r].configuracion;try{delete(n=JSON.parse(n)).isEditable,delete n.isDragable,t[r].configuracion=JSON.stringify(n),"{}"===t[r].configuracion&&(t[r].configuracion=null)}catch(d){}}e={nombre_formulario:this.getField("nombre_formulario").getValue(),seccion_id:this.getField("seccion_id").getValue(),campos:t},this.generalFormat.nombre_accion="crear_automatico_form",console.log(e),this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successScripts,error:this.error_,general:this.generalFormat})}}}]),i}(l.a.form);l.a.addController("PruebaNueva",c),t.default=c},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.loadDataProduct=o.loadDataProduct.bind(Object(s.a)(o)),o.deleteEspecification=o.deleteEspecification.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.gridOptionsPortafolio=Object.assign({},o.gridOptions),o.configCell=new Map,o.successEliminar=o.successEliminar.bind(Object(s.a)(o)),o.loadTable=o.loadTable.bind(Object(s.a)(o)),o.actualizarDatos=o.actualizarDatos.bind(Object(s.a)(o)),o.reloadTable=o.reloadTable.bind(Object(s.a)(o)),o.calcularVolumen=o.calcularVolumen.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("mas_datos").setClick(this.loadDataProduct,this.loadTable),this.getField("actualiza_datos").setClick(this.actualizarDatos),this.getField("alto_cms").setOnChange(this.calcularVolumen),this.getField("ancho_cms").setOnChange(this.calcularVolumen),this.getField("largo_cms").setOnChange(this.calcularVolumen)}},{key:"calcularVolumen",value:function(){var e;e=this.getField("alto_cms").getValue()*this.getField("ancho_cms").getValue()*this.getField("largo_cms").getValue(),this.getField("volumen_cms3").setValue(e)}},{key:"reloadTable",value:function(e){if((e.estado_p||200===e.estado_p)&&this.getField("articulo_id").valid()){var t={value:this.getField("articulo_id").getValue()};this.generalFormat.nombre_accion="servicio_articulo_especificaciones_recupera_todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.loadTable,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"loadDataProduct",value:function(e,t){if((t.estado_p||200===t.estado_p||t.length>0)&&this.getField("articulo_id").valid()){var i={value:this.getField("articulo_id").getValue()};this.generalFormat.nombre_accion="servicio_articulo_especificaciones_recupera_todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:t,error:this.error_,general:this.generalFormat})}}},{key:"actualizarDatos",value:function(){if(this.getField("unidad_manipulacion_id").valid()&&this.getField("unidad_id").valid()&&this.getField("cantidad").valid()&&this.getField("codigo_barras").valid()&&this.getField("articulo_id").valid()&&this.getField("peso_gramos").valid()&&this.getField("descripcion_proveedor").valid()&&this.getField("referencia_proveedor").valid()&&this.getField("codigo_erp_proveedor").valid()&&this.getField("terceros_id").valid()){if(this.getField("largo_cms").getValue()>0&&this.getField("ancho_cms").getValue()>0&&this.getField("alto_cms").getValue()>0&&this.getField("volumen_cms3").getValue()>0){var e={unidad_manipulacion_id:this.getField("unidad_manipulacion_id").getValue(),unidad_id:this.getField("unidad_id").getValue(),cantidad:this.getField("cantidad").getValue(),codigo_barras:this.getField("codigo_barras").getValue(),articulo_id:this.getField("articulo_id").getValue(),peso_gramos:this.getField("peso_gramos").getValue(),descripcion_proveedor:this.getField("descripcion_proveedor").getValue(),referencia_proveedor:this.getField("referencia_proveedor").getValue(),codigo_erp_proveedor:this.getField("codigo_erp_proveedor").getValue(),terceros_id:this.getField("terceros_id").getValue(),volumen_cms3:this.getField("volumen_cms3").getValue(),ancho_cms:this.getField("ancho_cms").getValue(),alto_cms:this.getField("alto_cms").getValue(),largo_cms:this.getField("largo_cms").getValue()};this.generalFormat.nombre_accion="servicio_articulo_especificaciones_crea_actualiza_articulo_especificac",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.reloadTable,error:this.error_,general:this.generalFormat})}if((this.getField("largo_cms").getValue()<=0||""===this.getField("largo_cms").getValue())&&(this.getField("ancho_cms").getValue()<=0||""===this.getField("ancho_cms").getValue())&&(this.getField("alto_cms").getValue()<=0||""===this.getField("alto_cms").getValue())&&(this.getField("volumen_cms3").getValue()<=0||""===this.getField("volumen_cms3").getValue())){var t={unidad_manipulacion_id:this.getField("unidad_manipulacion_id").getValue(),unidad_id:this.getField("unidad_id").getValue(),cantidad:this.getField("cantidad").getValue(),codigo_barras:this.getField("codigo_barras").getValue(),articulo_id:this.getField("articulo_id").getValue(),peso_gramos:this.getField("peso_gramos").getValue(),descripcion_proveedor:this.getField("descripcion_proveedor").getValue(),referencia_proveedor:this.getField("referencia_proveedor").getValue(),codigo_erp_proveedor:this.getField("codigo_erp_proveedor").getValue(),terceros_id:this.getField("terceros_id").getValue()};this.generalFormat.nombre_accion="servicio_articulo_especificaciones_crea_actualiza_articulo_especificac",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.reloadTable,error:this.error_,general:this.generalFormat})}if(this.getField("largo_cms").getValue()<=0){var i={unidad_manipulacion_id:this.getField("unidad_manipulacion_id").getValue(),unidad_id:this.getField("unidad_id").getValue(),cantidad:this.getField("cantidad").getValue(),codigo_barras:this.getField("codigo_barras").getValue(),articulo_id:this.getField("articulo_id").getValue(),peso_gramos:this.getField("peso_gramos").getValue(),descripcion_proveedor:this.getField("descripcion_proveedor").getValue(),referencia_proveedor:this.getField("referencia_proveedor").getValue(),codigo_erp_proveedor:this.getField("codigo_erp_proveedor").getValue(),terceros_id:this.getField("terceros_id").getValue(),volumen_cms3:this.getField("volumen_cms3").getValue(),ancho_cms:this.getField("ancho_cms").getValue(),alto_cms:this.getField("alto_cms").getValue()};this.generalFormat.nombre_accion="servicio_articulo_especificaciones_crea_actualiza_articulo_especificac",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:i,success:this.reloadTable,error:this.error_,general:this.generalFormat})}if(this.getField("ancho_cms").getValue()<=0){var a={unidad_manipulacion_id:this.getField("unidad_manipulacion_id").getValue(),unidad_id:this.getField("unidad_id").getValue(),cantidad:this.getField("cantidad").getValue(),codigo_barras:this.getField("codigo_barras").getValue(),articulo_id:this.getField("articulo_id").getValue(),peso_gramos:this.getField("peso_gramos").getValue(),descripcion_proveedor:this.getField("descripcion_proveedor").getValue(),referencia_proveedor:this.getField("referencia_proveedor").getValue(),codigo_erp_proveedor:this.getField("codigo_erp_proveedor").getValue(),terceros_id:this.getField("terceros_id").getValue(),volumen_cms3:this.getField("volumen_cms3").getValue(),largo_cms:this.getField("largo_cms").getValue(),alto_cms:this.getField("alto_cms").getValue()};this.generalFormat.nombre_accion="servicio_articulo_especificaciones_crea_actualiza_articulo_especificac",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:a,success:this.reloadTable,error:this.error_,general:this.generalFormat})}if(this.getField("alto_cms").getValue()<=0){var o={unidad_manipulacion_id:this.getField("unidad_manipulacion_id").getValue(),unidad_id:this.getField("unidad_id").getValue(),cantidad:this.getField("cantidad").getValue(),codigo_barras:this.getField("codigo_barras").getValue(),articulo_id:this.getField("articulo_id").getValue(),peso_gramos:this.getField("peso_gramos").getValue(),descripcion_proveedor:this.getField("descripcion_proveedor").getValue(),referencia_proveedor:this.getField("referencia_proveedor").getValue(),codigo_erp_proveedor:this.getField("codigo_erp_proveedor").getValue(),terceros_id:this.getField("terceros_id").getValue(),volumen_cms3:this.getField("volumen_cms3").getValue(),largo_cms:this.getField("largo_cms").getValue(),ancho_cms:this.getField("ancho_cms").getValue()};this.generalFormat.nombre_accion="servicio_articulo_especificaciones_crea_actualiza_articulo_especificac",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:o,success:this.reloadTable,error:this.error_,general:this.generalFormat})}if(this.getField("volumen_cms3").getValue()<=0){var s={unidad_manipulacion_id:this.getField("unidad_manipulacion_id").getValue(),unidad_id:this.getField("unidad_id").getValue(),cantidad:this.getField("cantidad").getValue(),codigo_barras:this.getField("codigo_barras").getValue(),articulo_id:this.getField("articulo_id").getValue(),peso_gramos:this.getField("peso_gramos").getValue(),descripcion_proveedor:this.getField("descripcion_proveedor").getValue(),referencia_proveedor:this.getField("referencia_proveedor").getValue(),codigo_erp_proveedor:this.getField("codigo_erp_proveedor").getValue(),terceros_id:this.getField("terceros_id").getValue(),alto_cms:this.getField("alto_cms").getValue(),largo_cms:this.getField("largo_cms").getValue(),ancho_cms:this.getField("ancho_cms").getValue()};this.generalFormat.nombre_accion="servicio_articulo_especificaciones_crea_actualiza_articulo_especificac",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:s,success:this.reloadTable,error:this.error_,general:this.generalFormat})}}}},{key:"loadTable",value:function(e){var t=[],i={producto:this.getField("articulo").getValue(),nombre:this.getField("nombre").getValue(),alias:this.getField("referencia").getValue()};t.push(i),this.getField("datos_modal").handleClickOpen(),this.getField("lista_productos").setItemsFichas(t),200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("tabla_datos").toggle(!0),this.gridOptionsPortafolio.rowData=e.model,this.configCell.set(0,{cellRenderer:this.setButtonDelete,field:"Eliminar"}),this.getField("tabla_datos").initData(this.gridOptionsPortafolio,this.configCell),this.gridOptionsPortafolio.api.selectIndex(0,!0,!0)):this.getField("tabla_datos").toggle(!1)}},{key:"error_",value:function(e){}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteEspecification(i)},a.setAttribute("id","button_delete_"+i),a.setAttribute("style","width:100%; height: 100%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),a.setAttribute("type","button"),a.setAttribute("value","Eliminar"),a}},{key:"deleteEspecification",value:function(e){if(void 0!==e&&""!==e){var t={id:e};this.generalFormat.nombre_accion="servicio_articulo_especificaciones_borra_articulo_especificaciones",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.successEliminar,error:this.error_,general:this.generalFormat})}}},{key:"successEliminar",value:function(e){200===e.estado_p&&(this.loadDataProduct(null,this.loadTable),this.getField("fieldAlert").toggle(!0,"Informaci\xf3n eliminada exitosamente","success"),this.getField("unidad_manipulacion_codigo").setValue(""),this.getField("unidad_manipulacion").setValue(""),this.getField("unidad_codigo").setValue(""),this.getField("unidad").setValue(""),this.getField("cantidad").setValue(""),this.getField("largo_cms").setValue(""),this.getField("ancho_cms").setValue(""),this.getField("alto_cms").setValue(""),this.getField("volumen_cms3").setValue(""),this.getField("peso_gramos").setValue(""),this.getField("nit").setValue(""),this.getField("sede").setValue(""),this.getField("nombre_proveedor").setValue(""),this.getField("descripcion_proveedor").setValue(""),this.getField("referencia_proveedor").setValue(""),this.getField("codigo_barras").setValue(""),this.getField("codigo_erp_proveedor").setValue(""))}}]),i}(d.a.form);d.a.addController("portafolio_form",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.buscarArticuloPortafolioCliente=o.buscarArticuloPortafolioCliente.bind(Object(s.a)(o)),o.sucessArticuloPortafolioCliente=o.sucessArticuloPortafolioCliente.bind(Object(s.a)(o)),o.abrirModal=o.abrirModal.bind(Object(s.a)(o)),o.sucessGuardarArticuloPortafolioCliente=o.sucessGuardarArticuloPortafolioCliente.bind(Object(s.a)(o)),o.guardarArticuloPortafolioCliente=o.guardarArticuloPortafolioCliente.bind(Object(s.a)(o)),o.cerrarModal=o.cerrarModal.bind(Object(s.a)(o)),o.setButtonModificar=o.setButtonModificar.bind(Object(s.a)(o)),o.abrirModalConDatos=o.abrirModalConDatos.bind(Object(s.a)(o)),o.sucessModificarArticuloPortafolioCliente=o.sucessModificarArticuloPortafolioCliente.bind(Object(s.a)(o)),o.modificarArticuloPortafolioCliente=o.modificarArticuloPortafolioCliente.bind(Object(s.a)(o)),o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o.limpiarCamposProducto=o.limpiarCamposProducto.bind(Object(s.a)(o)),o.limpiarCamposProductoModificar=o.limpiarCamposProductoModificar.bind(Object(s.a)(o)),o.gridOptionsDocumentos=Object.assign({},o.gridOptions),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.gridOptionsDocumentos.onSelectionChanged=o.onSelectionChanged,o.filaSeleccionada=[],o}return Object(o.a)(i,[{key:"onSelectionChanged",value:function(){this.filaSeleccionada=this.gridOptionsDocumentos.api.getSelectedRows(),this.getField("id_registro").setValue(this.filaSeleccionada[0].id)}},{key:"initForm",value:function(){console.log("portafolio_clientes, @version: 1.0.1, @author: Anderson Acevedo Bri\xf1ez"),this.getField("tercero_id").setOnChange(this.buscarArticuloPortafolioCliente),this.getField("boton_agregar").setClick(this.abrirModal),this.getField("boton_grabar").setClick(this.guardarArticuloPortafolioCliente),this.getField("boton_modificar").setClick(this.modificarArticuloPortafolioCliente),this.getField("boton_cancelar").setClick(this.cerrarModal),this.getField("boton_cancelar2").setClick(this.cerrarModal),this.getField("nombre_producto").setOnChange(this.limpiarCamposProducto),this.getField("nombre_producto2").setOnChange(this.limpiarCamposProductoModificar),this.getField("nit").setOnChange(this.limpiarCampos)}},{key:"limpiarCampos",value:function(){this.getField("tabla_articulos_cliente").toggle(!1)}},{key:"limpiarCamposProducto",value:function(){this.getField("codigo_articulo_cliente").setValue(""),this.getField("descripcion_articulo_cliente").setValue(""),this.getField("precio_cliente").setValue("")}},{key:"limpiarCamposProductoModificar",value:function(){this.getField("codigo_articulo_cliente2").setValue(""),this.getField("descripcion_articulo_cliente2").setValue(""),this.getField("precio_cliente2").setValue("")}},{key:"buscarArticuloPortafolioCliente",value:function(){if(this.getField("nit").valid()&&""!==this.getField("tercero_id").getValue()&&""!==this.getField("nombre").getValue()){var e={value:this.getField("tercero_id").getValue()};this.generalFormat.nombre_accion="traer_articulos_cliente_terceroid",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.sucessArticuloPortafolioCliente,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"sucessArticuloPortafolioCliente",value:function(e){if(200===e.estado_p){this.gridOptionsDocumentos.rowData=e.model,this.gridOptionsDocumentos.paginationPageSize=15;var t=new Map;t.set(4,{cellRenderer:this.setButtonModificar,field:"Modificar"}),this.getField("tabla_articulos_cliente").initData(this.gridOptionsDocumentos,t)}else this.alertGeneral.toggle(!0,"No se encontr\xf3 productos asociados al cliente","error"),this.getField("tabla_articulos_cliente").toggle(!1)}},{key:"setButtonModificar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.abrirModalConDatos(e.data)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Modificar"),i}},{key:"abrirModalConDatos",value:function(e){this.getField("codigo_producto2").setValue(e.codigo_producto_erp),this.getField("nombre_producto2").setValue(e.nombre_producto),this.getField("codigo_articulo_cliente2").setValue(e.codigo_articulo_cliente),this.getField("descripcion_articulo_cliente2").setValue(e.descripcion_articulo_cliente),this.getField("precio_cliente2").setValue(e.precio_cliente),this.getField("articulo_id").setValue(e.articulo_id),this.getField("modal_modificar").handleClickOpen()}},{key:"abrirModal",value:function(){this.getField("nit").valid()&&""!==this.getField("tercero_id").getValue()&&""!==this.getField("nombre").getValue()&&(this.getField("nombre").setError(!1,"* Este campo es requerido."),this.getField("modal_portafolio_cliente").handleClickOpen())}},{key:"cerrarModal",value:function(){this.getField("codigo_producto").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("codigo_articulo_cliente").setValue(""),this.getField("descripcion_articulo_cliente").setValue(""),this.getField("precio_cliente").setValue(""),this.getField("codigo_producto2").setValue(""),this.getField("nombre_producto2").setValue(""),this.getField("codigo_articulo_cliente2").setValue(""),this.getField("descripcion_articulo_cliente2").setValue(""),this.getField("precio_cliente2").setValue(""),this.getField("articulo_id").setValue(""),this.getField("id_registro").setValue(""),this.getField("modal_modificar").handleClose(),this.getField("modal_portafolio_cliente").handleClose()}},{key:"guardarArticuloPortafolioCliente",value:function(){if(this.getField("codigo_producto").valid()&&this.getField("codigo_articulo_cliente").valid()&&this.getField("descripcion_articulo_cliente").valid()&&this.getField("precio_cliente").valid()){var e={tercero_id:this.getField("tercero_id").getValue(),articulo_id:this.getField("articulo_id").getValue(),codigo_articulo_cliente:this.getField("codigo_articulo_cliente").getValue(),descripcion_articulo_cliente:this.getField("descripcion_articulo_cliente").getValue(),precio_cliente:this.getField("precio_cliente").getValue()};this.generalFormat.nombre_accion="agregar_articulo_portafolio_cliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.sucessGuardarArticuloPortafolioCliente,error:this.error_,general:this.generalFormat})}}},{key:"sucessGuardarArticuloPortafolioCliente",value:function(e){200===e.estado_p&&(this.buscarArticuloPortafolioCliente(),this.cerrarModal())}},{key:"modificarArticuloPortafolioCliente",value:function(){if(this.getField("codigo_producto2").valid()&&""!==this.getField("id_registro").getValue()&&this.getField("codigo_articulo_cliente2").valid()&&this.getField("descripcion_articulo_cliente2").valid()&&this.getField("precio_cliente2").valid()){var e={id:this.getField("id_registro").getValue(),articulo_id:this.getField("articulo_id").getValue(),codigo_articulo_cliente:this.getField("codigo_articulo_cliente2").getValue(),descripcion_articulo_cliente:this.getField("descripcion_articulo_cliente2").getValue(),precio_cliente:this.getField("precio_cliente2").getValue()};this.generalFormat.nombre_accion="modificar_articulo_portafolio_cliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.sucessModificarArticuloPortafolioCliente,error:this.error_,general:this.generalFormat})}}},{key:"sucessModificarArticuloPortafolioCliente",value:function(e){200===e.estado_p&&(this.buscarArticuloPortafolioCliente(),this.cerrarModal())}}]),i}(d.a.form);d.a.addController("portafolio_clientes",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.traerMetadatos=o.traerMetadatos.bind(Object(s.a)(o)),o.respuestaTraerMetadatos=o.respuestaTraerMetadatos.bind(Object(s.a)(o)),o.setButtonActivar=o.setButtonActivar.bind(Object(s.a)(o)),o.setButtonEliminar=o.setButtonEliminar.bind(Object(s.a)(o)),o.guardarMetadatos=o.guardarMetadatos.bind(Object(s.a)(o)),o.respuestaGuardarMetadatos=o.respuestaGuardarMetadatos.bind(Object(s.a)(o)),o.confirmarEliminacion=o.confirmarEliminacion.bind(Object(s.a)(o)),o.EliminarMetadatos=o.EliminarMetadatos.bind(Object(s.a)(o)),o.respuestaEliminarMetadatos=o.respuestaEliminarMetadatos.bind(Object(s.a)(o)),o.ActiviarInactiviar=o.ActiviarInactiviar.bind(Object(s.a)(o)),o.respuestaActiviarInactiviar=o.respuestaActiviarInactiviar.bind(Object(s.a)(o)),o.confirmarSubirDatos=o.confirmarSubirDatos.bind(Object(s.a)(o)),o.SubirPorTipo=o.SubirPorTipo.bind(Object(s.a)(o)),o.respuestaSubirPorTipo=o.respuestaSubirPorTipo.bind(Object(s.a)(o)),o.selectCambia=o.selectCambia.bind(Object(s.a)(o)),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.filaSeleccionada=[],o.gridMetadatos=Object.assign({},o.gridOptions),o.gridMetadatos.onSelectionChanged=o.onSelectionChanged,o.id_delete=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.traerMetadatos(),this.getField("boton_agregar").setClick(this.guardarMetadatos),this.getField("boton_subir").setClick(this.confirmarSubirDatos),this.getField("tipo").setOnChange(this.selectCambia)}},{key:"onSelectionChanged",value:function(){this.filaSeleccionada=this.gridMetadatos.api.getSelectedRows(),"producto"===this.filaSeleccionada[0].tipo?this.getField("codigo").setValue(this.filaSeleccionada[0].codigo):"marca"===this.filaSeleccionada[0].tipo?this.getField("id_marca").setValue(this.filaSeleccionada[0].codigo):"profesion"===this.filaSeleccionada[0].tipo?this.getField("id_profesion").setValue(this.filaSeleccionada[0].codigo):"categoria1"===this.filaSeleccionada[0].tipo?this.getField("id_categoria1").setValue(this.filaSeleccionada[0].codigo):"categoria2"===this.filaSeleccionada[0].tipo?this.getField("id_categoria2").setValue(this.filaSeleccionada[0].codigo):"categoria3"===this.filaSeleccionada[0].tipo?this.getField("id_categoria3").setValue(this.filaSeleccionada[0].codigo):"categoria4"===this.filaSeleccionada[0].tipo&&this.getField("id_categoria4").setValue(this.filaSeleccionada[0].codigo),this.getField("tipo").setValue(this.filaSeleccionada[0].tipo),this.getField("meta_descripcion").setValue(this.filaSeleccionada[0].meta_descripcion),this.getField("metadato").setValue(this.filaSeleccionada[0].metadato),this.getField("id").setValue(this.filaSeleccionada[0].id),this.getField("estadoactivo_id").setValue(this.filaSeleccionada[0].estadoactivo_id),this.getField("nombre_marca").setValue(""),this.getField("nombre_profesion").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("nombre_categoria1").setValue(""),this.getField("nombre_categoria2").setValue(""),this.getField("nombre_categoria3").setValue(""),this.getField("nombre_categoria4").setValue("")}},{key:"selectCambia",value:function(){"producto"===this.getField("tipo").getValue()?(this.getField("codigo").setVisible(!0),this.getField("tipo").setError(!1,"Limpiar"),this.getField("codigo").setError(!1,"Limpiar"),this.getField("meta_descripcion").setError(!1,"Limpiar"),this.getField("metadato").setError(!1,"Limpiar"),this.getField("estadoactivo_id").setError(!1,"Limpiar"),this.getField("id_marca").setVisible(!1),this.getField("id_profesion").setVisible(!1),this.getField("id_categoria1").setVisible(!1),this.getField("id_categoria2").setVisible(!1),this.getField("id_categoria3").setVisible(!1),this.getField("id_categoria4").setVisible(!1),this.getField("nombre_producto").setVisible(!0),this.getField("nombre_marca").setVisible(!1),this.getField("nombre_profesion").setVisible(!1),this.getField("nombre_categoria1").setVisible(!1),this.getField("nombre_categoria2").setVisible(!1),this.getField("nombre_categoria3").setVisible(!1),this.getField("nombre_categoria4").setVisible(!1),this.getField("nombre_categoria4").setValue(""),this.getField("nombre_marca").setValue(""),this.getField("nombre_profesion").setValue(""),this.getField("nombre_categoria1").setValue(""),this.getField("nombre_categoria2").setValue(""),this.getField("nombre_categoria3").setValue(""),this.getField("id_marca").setValue(""),this.getField("id_profesion").setValue(""),this.getField("id_categoria1").setValue(""),this.getField("id_categoria2").setValue(""),this.getField("id_categoria3").setValue(""),this.getField("id_categoria4").setValue("")):"marca"===this.getField("tipo").getValue()?(this.getField("codigo").setVisible(!1),this.getField("id_marca").setVisible(!0),this.getField("id_profesion").setVisible(!1),this.getField("id_categoria1").setVisible(!1),this.getField("id_categoria2").setVisible(!1),this.getField("id_categoria3").setVisible(!1),this.getField("id_categoria4").setVisible(!1),this.getField("tipo").setError(!1,"Limpiar"),this.getField("id_marca").setError(!1,"Limpiar"),this.getField("meta_descripcion").setError(!1,"Limpiar"),this.getField("metadato").setError(!1,"Limpiar"),this.getField("estadoactivo_id").setError(!1,"Limpiar"),this.getField("codigo").setValue(""),this.getField("id_profesion").setValue(""),this.getField("id_categoria1").setValue(""),this.getField("id_categoria2").setValue(""),this.getField("id_categoria3").setValue(""),this.getField("id_categoria4").setValue(""),this.getField("nombre_producto").setVisible(!1),this.getField("nombre_marca").setVisible(!0),this.getField("nombre_profesion").setVisible(!1),this.getField("nombre_categoria1").setVisible(!1),this.getField("nombre_categoria2").setVisible(!1),this.getField("nombre_categoria3").setVisible(!1),this.getField("nombre_categoria4").setVisible(!1),this.getField("nombre_categoria4").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("nombre_profesion").setValue(""),this.getField("nombre_categoria1").setValue(""),this.getField("nombre_categoria2").setValue(""),this.getField("nombre_categoria3").setValue("")):"profesion"===this.getField("tipo").getValue()?(this.getField("codigo").setVisible(!1),this.getField("id_marca").setVisible(!1),this.getField("id_profesion").setVisible(!0),this.getField("id_categoria1").setVisible(!1),this.getField("id_categoria2").setVisible(!1),this.getField("id_categoria3").setVisible(!1),this.getField("id_categoria4").setVisible(!1),this.getField("tipo").setError(!1,"Limpiar"),this.getField("id_profesion").setError(!1,"Limpiar"),this.getField("meta_descripcion").setError(!1,"Limpiar"),this.getField("metadato").setError(!1,"Limpiar"),this.getField("estadoactivo_id").setError(!1,"Limpiar"),this.getField("nombre_producto").setVisible(!1),this.getField("nombre_marca").setVisible(!1),this.getField("nombre_profesion").setVisible(!0),this.getField("nombre_categoria1").setVisible(!1),this.getField("nombre_categoria2").setVisible(!1),this.getField("nombre_categoria3").setVisible(!1),this.getField("nombre_categoria4").setVisible(!1),this.getField("nombre_categoria4").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("nombre_marca").setValue(""),this.getField("nombre_categoria1").setValue(""),this.getField("nombre_categoria2").setValue(""),this.getField("nombre_categoria3").setValue(""),this.getField("codigo").setValue(""),this.getField("id_marca").setValue(""),this.getField("id_categoria1").setValue(""),this.getField("id_categoria2").setValue(""),this.getField("id_categoria3").setValue(""),this.getField("id_categoria4").setValue("")):"categoria1"===this.getField("tipo").getValue()?(this.getField("codigo").setVisible(!1),this.getField("id_marca").setVisible(!1),this.getField("id_profesion").setVisible(!1),this.getField("id_categoria1").setVisible(!0),this.getField("id_categoria2").setVisible(!1),this.getField("id_categoria3").setVisible(!1),this.getField("id_categoria4").setVisible(!1),this.getField("tipo").setError(!1,"Limpiar"),this.getField("id_categoria1").setError(!1,"Limpiar"),this.getField("meta_descripcion").setError(!1,"Limpiar"),this.getField("metadato").setError(!1,"Limpiar"),this.getField("estadoactivo_id").setError(!1,"Limpiar"),this.getField("codigo").setValue(""),this.getField("id_marca").setValue(""),this.getField("id_profesion").setValue(""),this.getField("id_categoria2").setValue(""),this.getField("id_categoria3").setValue(""),this.getField("id_categoria4").setValue(""),this.getField("nombre_producto").setVisible(!1),this.getField("nombre_marca").setVisible(!1),this.getField("nombre_profesion").setVisible(!1),this.getField("nombre_categoria1").setVisible(!0),this.getField("nombre_categoria2").setVisible(!1),this.getField("nombre_categoria3").setVisible(!1),this.getField("nombre_categoria4").setVisible(!1),this.getField("nombre_categoria4").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("nombre_marca").setValue(""),this.getField("nombre_profesion").setValue(""),this.getField("nombre_categoria2").setValue(""),this.getField("nombre_categoria3").setValue("")):"categoria2"===this.getField("tipo").getValue()?(this.getField("codigo").setVisible(!1),this.getField("id_marca").setVisible(!1),this.getField("id_profesion").setVisible(!1),this.getField("id_categoria1").setVisible(!1),this.getField("id_categoria2").setVisible(!0),this.getField("id_categoria3").setVisible(!1),this.getField("id_categoria4").setVisible(!1),this.getField("tipo").setError(!1,"Limpiar"),this.getField("id_categoria2").setError(!1,"Limpiar"),this.getField("meta_descripcion").setError(!1,"Limpiar"),this.getField("metadato").setError(!1,"Limpiar"),this.getField("estadoactivo_id").setError(!1,"Limpiar"),this.getField("codigo").setValue(""),this.getField("id_marca").setValue(""),this.getField("id_profesion").setValue(""),this.getField("id_categoria1").setValue(""),this.getField("id_categoria3").setValue(""),this.getField("id_categoria4").setValue(""),this.getField("nombre_producto").setVisible(!1),this.getField("nombre_marca").setVisible(!1),this.getField("nombre_profesion").setVisible(!1),this.getField("nombre_categoria1").setVisible(!1),this.getField("nombre_categoria2").setVisible(!0),this.getField("nombre_categoria3").setVisible(!1),this.getField("nombre_categoria4").setVisible(!1),this.getField("nombre_categoria4").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("nombre_marca").setValue(""),this.getField("nombre_profesion").setValue(""),this.getField("nombre_categoria1").setValue(""),this.getField("nombre_categoria3").setValue("")):"categoria3"===this.getField("tipo").getValue()?(this.getField("codigo").setVisible(!1),this.getField("id_marca").setVisible(!1),this.getField("id_profesion").setVisible(!1),this.getField("id_categoria1").setVisible(!1),this.getField("id_categoria2").setVisible(!1),this.getField("id_categoria3").setVisible(!0),this.getField("id_categoria4").setVisible(!1),this.getField("tipo").setError(!1,"Limpiar"),this.getField("id_categoria3").setError(!1,"Limpiar"),this.getField("meta_descripcion").setError(!1,"Limpiar"),this.getField("metadato").setError(!1,"Limpiar"),this.getField("estadoactivo_id").setError(!1,"Limpiar"),this.getField("codigo").setValue(""),this.getField("id_marca").setValue(""),this.getField("id_profesion").setValue(""),this.getField("id_categoria1").setValue(""),this.getField("id_categoria2").setValue(""),this.getField("id_categoria4").setValue(""),this.getField("nombre_producto").setVisible(!1),this.getField("nombre_marca").setVisible(!1),this.getField("nombre_profesion").setVisible(!1),this.getField("nombre_categoria1").setVisible(!1),this.getField("nombre_categoria2").setVisible(!1),this.getField("nombre_categoria3").setVisible(!0),this.getField("nombre_categoria4").setVisible(!1),this.getField("nombre_categoria4").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("nombre_marca").setValue(""),this.getField("nombre_profesion").setValue(""),this.getField("nombre_categoria1").setValue(""),this.getField("nombre_categoria2").setValue("")):"categoria4"===this.getField("tipo").getValue()&&(this.getField("codigo").setVisible(!1),this.getField("id_marca").setVisible(!1),this.getField("id_profesion").setVisible(!1),this.getField("id_categoria1").setVisible(!1),this.getField("id_categoria2").setVisible(!1),this.getField("id_categoria3").setVisible(!1),this.getField("id_categoria4").setVisible(!0),this.getField("tipo").setError(!1,"Limpiar"),this.getField("id_categoria4").setError(!1,"Limpiar"),this.getField("meta_descripcion").setError(!1,"Limpiar"),this.getField("metadato").setError(!1,"Limpiar"),this.getField("estadoactivo_id").setError(!1,"Limpiar"),this.getField("codigo").setValue(""),this.getField("id_marca").setValue(""),this.getField("id_profesion").setValue(""),this.getField("id_categoria1").setValue(""),this.getField("id_categoria2").setValue(""),this.getField("id_categoria3").setValue(""),this.getField("nombre_producto").setVisible(!1),this.getField("nombre_marca").setVisible(!1),this.getField("nombre_profesion").setVisible(!1),this.getField("nombre_categoria1").setVisible(!1),this.getField("nombre_categoria2").setVisible(!1),this.getField("nombre_categoria3").setVisible(!1),this.getField("nombre_categoria4").setVisible(!0),this.getField("nombre_categoria2").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("nombre_marca").setValue(""),this.getField("nombre_profesion").setValue(""),this.getField("nombre_categoria1").setValue(""),this.getField("nombre_categoria3").setValue(""))}},{key:"traerMetadatos",value:function(){this.generalFormat.nombre_accion="portafolio_ecommerce_metadatos_todos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.respuestaTraerMetadatos,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"respuestaTraerMetadatos",value:function(e){if(200===e.estado_p){this.getField("tabla_metadatos").toggle(!0),this.getField("boton_subir").setDisabled(!1),this.gridMetadatos.rowData=e.data,this.gridMetadatos.paginationPageSize=15;var t=new Map;t.set(5,{cellRenderer:this.setButtonActivar,field:"Activar/Inactivar",width:150}),t.set(6,{cellRenderer:this.setButtonEliminar,field:"Eliminar",width:150}),this.getField("tabla_metadatos").initData(this.gridMetadatos,t)}else this.getField("tabla_metadatos").toggle(!1),this.getField("boton_subir").setDisabled(!0)}},{key:"setButtonActivar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.ActiviarInactiviar(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:100px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Activar/Inactivar"),i}},{key:"setButtonEliminar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.confirmarEliminacion(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:100px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"guardarMetadatos",value:function(){if(this.getField("tipo").valid())if("producto"===this.getField("tipo").getValue()&&this.getField("codigo").valid()&&this.getField("meta_descripcion").valid()&&this.getField("metadato").valid()&&this.getField("estadoactivo_id").valid()){var e={tipo:this.getField("tipo").getValue(),codigo:this.getField("codigo").getValue(),meta_descripcion:this.getField("meta_descripcion").getValue(),metadato:this.getField("metadato").getValue(),estadoactivo_id:this.getField("estadoactivo_id").getValue(),descripcion:this.getField("meta_descripcion").getValue()};this.generalFormat.nombre_accion="portafolio_ecommerce_metadatos_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.respuestaGuardarMetadatos,error:this.error_,general:this.generalFormat})}else if("marca"===this.getField("tipo").getValue()&&this.getField("id_marca").valid()&&this.getField("meta_descripcion").valid()&&this.getField("metadato").valid()&&this.getField("estadoactivo_id").valid()){var t={tipo:this.getField("tipo").getValue(),codigo:this.getField("id_marca").getValue(),meta_descripcion:this.getField("meta_descripcion").getValue(),metadato:this.getField("metadato").getValue(),estadoactivo_id:this.getField("estadoactivo_id").getValue(),descripcion:this.getField("meta_descripcion").getValue()};this.generalFormat.nombre_accion="portafolio_ecommerce_metadatos_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.respuestaGuardarMetadatos,error:this.error_,general:this.generalFormat})}else if("categoria1"===this.getField("tipo").getValue()&&this.getField("id_categoria1").valid()&&this.getField("meta_descripcion").valid()&&this.getField("metadato").valid()&&this.getField("estadoactivo_id").valid()){var i={tipo:this.getField("tipo").getValue(),codigo:this.getField("id_categoria1").getValue(),meta_descripcion:this.getField("meta_descripcion").getValue(),metadato:this.getField("metadato").getValue(),estadoactivo_id:this.getField("estadoactivo_id").getValue(),descripcion:this.getField("meta_descripcion").getValue()};this.generalFormat.nombre_accion="portafolio_ecommerce_metadatos_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:i,success:this.respuestaGuardarMetadatos,error:this.error_,general:this.generalFormat})}else if("categoria2"===this.getField("tipo").getValue()&&this.getField("id_categoria2").valid()&&this.getField("meta_descripcion").valid()&&this.getField("metadato").valid()&&this.getField("estadoactivo_id").valid()){var a={tipo:this.getField("tipo").getValue(),codigo:this.getField("id_categoria2").getValue(),meta_descripcion:this.getField("meta_descripcion").getValue(),metadato:this.getField("metadato").getValue(),estadoactivo_id:this.getField("estadoactivo_id").getValue(),descripcion:this.getField("meta_descripcion").getValue()};this.generalFormat.nombre_accion="portafolio_ecommerce_metadatos_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:a,success:this.respuestaGuardarMetadatos,error:this.error_,general:this.generalFormat})}else if("categoria3"===this.getField("tipo").getValue()&&""!==this.getField("id_categoria3")&&this.getField("meta_descripcion").valid()&&this.getField("metadato").valid()&&this.getField("estadoactivo_id").valid()){var o={tipo:this.getField("tipo").getValue(),codigo:this.getField("id_categoria3").getValue(),meta_descripcion:this.getField("meta_descripcion").getValue(),metadato:this.getField("metadato").getValue(),estadoactivo_id:this.getField("estadoactivo_id").getValue(),descripcion:this.getField("meta_descripcion").getValue()};this.generalFormat.nombre_accion="portafolio_ecommerce_metadatos_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:o,success:this.respuestaGuardarMetadatos,error:this.error_,general:this.generalFormat})}else if("categoria4"===this.getField("tipo").getValue()&&this.getField("id_categoria4").valid()&&this.getField("meta_descripcion").valid()&&this.getField("metadato").valid()&&this.getField("estadoactivo_id").valid()){var s={tipo:this.getField("tipo").getValue(),codigo:this.getField("id_categoria4").getValue(),meta_descripcion:this.getField("meta_descripcion").getValue(),metadato:this.getField("metadato").getValue(),estadoactivo_id:this.getField("estadoactivo_id").getValue(),descripcion:this.getField("meta_descripcion").getValue()};this.generalFormat.nombre_accion="portafolio_ecommerce_metadatos_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:s,success:this.respuestaGuardarMetadatos,error:this.error_,general:this.generalFormat})}else if("profesion"===this.getField("tipo").getValue()&&this.getField("id_profesion").valid()&&this.getField("meta_descripcion").valid()&&this.getField("metadato").valid()&&this.getField("estadoactivo_id").valid()){var r={tipo:this.getField("tipo").getValue(),codigo:this.getField("id_profesion").getValue(),meta_descripcion:this.getField("meta_descripcion").getValue(),metadato:this.getField("metadato").getValue(),estadoactivo_id:this.getField("estadoactivo_id").getValue(),descripcion:this.getField("meta_descripcion").getValue()};this.generalFormat.nombre_accion="portafolio_ecommerce_metadatos_crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:r,success:this.respuestaGuardarMetadatos,error:this.error_,general:this.generalFormat})}}},{key:"respuestaGuardarMetadatos",value:function(e){200===e.estado_p&&(this.traerMetadatos(),this.getField("tipo").setValue(""),this.getField("metadato").setValue(""),this.getField("meta_descripcion").setValue(""),this.getField("codigo").setValue(""),this.getField("id_marca").setValue(""),this.getField("id_categoria1").setValue(""),this.getField("id_categoria2").setValue(""),this.getField("id_categoria3").setValue(""),this.getField("id_categoria4").setValue(""),this.getField("id_profesion").setValue(""),this.getField("estadoactivo_id").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("nombre_marca").setValue(""),this.getField("nombre_profesion").setValue(""),this.getField("nombre_categoria1").setValue(""),this.getField("nombre_categoria2").setValue(""),this.getField("nombre_categoria3").setValue(""),this.getField("nombre_categoria4").setValue(""))}},{key:"confirmarEliminacion",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.EliminarMetadatos),this.getField("confirmModalCustom").toggle(!0),this.getField("id").setValue(e)}},{key:"EliminarMetadatos",value:function(){if(this.getField("confirmModalCustom").toggle(!1),""!==this.getField("id").getValue()){var e={id:this.getField("id").getValue()};this.generalFormat.nombre_accion="portafolio_ecommerce_metadatos_eliminar",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.respuestaEliminarMetadatos,error:this.error_,general:this.generalFormat})}}},{key:"respuestaEliminarMetadatos",value:function(e){200===e.estado_p&&this.traerMetadatos()}},{key:"ActiviarInactiviar",value:function(e){var t={id:e};this.generalFormat.nombre_accion="portafolio_ecommerce_metadatos_activar",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.respuestaActiviarInactiviar,error:this.error_,general:this.generalFormat})}},{key:"respuestaActiviarInactiviar",value:function(e){200===e.estado_p&&this.traerMetadatos()}},{key:"confirmarSubirDatos",value:function(){this.getField("confirmModalCustom").setTitleAndContent("Subir Datos a LAFERRE","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.SubirPorTipo),this.getField("confirmModalCustom").toggle(!0)}},{key:"SubirPorTipo",value:function(){this.getField("confirmModalCustom").toggle(!1);this.generalFormat.nombre_accion="portafolio_ecommerce_metadatos_subirportipo",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:{tipo:"todo"},success:this.respuestaSubirPorTipo,error:this.error_,general:this.generalFormat})}},{key:"respuestaSubirPorTipo",value:function(e){e.estado_p}}]),i}(d.a.form);d.a.addController("amd_metadatos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).idDataSelected=0,o.initForm=o.initForm.bind(Object(s.a)(o)),o.successUbicaciones=o.successUbicaciones.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.selectedProveedor=o.selectedProveedor.bind(Object(s.a)(o)),o.selectedProveedorTable=o.selectedProveedorTable.bind(Object(s.a)(o)),o.gridOptionsPortafolio=Object.assign({},o.gridOptions),o.gridOptionsPortafolio.onSelectionChanged=o.selectedProveedorTable,o.gridOptionsPortafolioPrecios=Object.assign({},o.gridOptions),o.configCell=new Map,o.successEliminar=o.successEliminar.bind(Object(s.a)(o)),o.loadTable=o.loadTable.bind(Object(s.a)(o)),o.loadTablePrecios=o.loadTablePrecios.bind(Object(s.a)(o)),o.changeSearchProveedor=o.changeSearchProveedor.bind(Object(s.a)(o)),o.closeModalCustom=o.closeModalCustom.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.successGuardar=o.successGuardar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("nit").setSelectionChanged=this.successUbicaciones,this.getField("nit").setOnChange(this.changeSearchProveedor),this.getField("actualizar_datos").setClick(this.selectedProveedor),this.getField("modal_tabla").setCloseButton(this.closeModalCustom)}},{key:"successUbicaciones",value:function(e){if(void 0!==e&&e.length&&e.length>0&&void 0!==e[0].id){this.getField("tercero_id").setValue(this.getField("id_tercero").getValue());var t={value:this.getField("tercero_id").getValue()};this.generalFormat.nombre_accion="292-servicio_productos_especificaciones_articulo",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.loadTable,error:this.error_,general:this.generalFormat})}}},{key:"loadTable",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("tabla_productos_precios").toggle(!0),this.getField("tabla_portafolio").toggle(!0),this.gridOptionsPortafolio.rowData=e.model,this.getField("tabla_portafolio").initData(this.gridOptionsPortafolio,this.configCell)):(this.getField("tabla_productos_precios").toggle(!1),this.getField("tabla_portafolio").toggle(!1))}},{key:"selectedProveedorTable",value:function(e,t,i){if(void 0===i||void 0!==i&&200===i.estado_p||405===i.estado_p){var a=this.gridOptionsPortafolio.api.getSelectedRows();void 0!==a&&a.length&&a.length>0&&(this.getField("tercero_id").setValue(this.getField("id_tercero").getValue()),this.getField("modal_tabla").handleClickOpen(),void 0!==a[0].id&&(this.idDataSelected=a[0].id,this.uploadTable(a[0].id)))}}},{key:"uploadTable",value:function(e){this.getField("articulos_especificaciones_id").setValue(e);var t={value:this.getField("articulos_especificaciones_id").getValue()};this.generalFormat.nombre_accion="292-Busca_un_portafolio_precios_que_tenga_articulo_especificacion_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.loadTablePrecios,error:this.error_,general:this.generalFormat})}},{key:"loadTablePrecios",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("tabla_productos_precios").toggle(!0),this.gridOptionsPortafolioPrecios.rowData=e.model,this.configCell.set(0,{cellRenderer:this.setButtonDelete,field:"Eliminar"}),this.getField("tabla_productos_precios").initData(this.gridOptionsPortafolioPrecios,this.configCell),this.gridOptionsPortafolioPrecios.api.selectIndex(0,!0,!0)):this.getField("tabla_productos_precios").toggle(!1)}},{key:"selectedProveedor",value:function(){if(this.existeFecha("desde")&&this.existeFecha("hasta")&&this.validarFechas("desde","hoy",">=")&&this.validarFechas("desde","hasta","<")){var e={accion:"servicio",campo:"actualizar_datos",id_formulario:this.formId,tercero_id:this.getField("tercero_id").getValue(),articulos_especificaciones_id:this.getField("articulos_especificaciones_id").getValue(),desde:this.getField("desde").getValue(),hasta:this.getField("hasta").getValue(),precio_sin_iva:this.getField("precio_sin_iva").getValue(),detalle:this.getField("detalle").getValue()};this.generalFormat.nombre_accion="292-Crea_o_actualiza_un_portafolio_producto_precio",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successGuardar,error:this.error_,general:this.generalFormat})}}},{key:"successGuardar",value:function(e){if(void 0===e||void 0!==e&&200===e.estado_p){var t=this.gridOptionsPortafolio.api.getSelectedRows();if(void 0!==t&&t.length&&t.length>0&&(this.getField("modal_tabla").handleClickOpen(),void 0!==t[0].id)){this.getField("articulos_especificaciones_id").setValue(t[0].id);var i={value:this.getField("articulos_especificaciones_id").getValue()};this.generalFormat.nombre_accion="292-Busca_un_portafolio_precios_que_tenga_articulo_especificacion_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.loadTablePrecios,error:this.error_,general:this.generalFormat})}}}},{key:"error_",value:function(e){}},{key:"closeModalCustom",value:function(){this.gridOptionsPortafolio.api.deselectAll()}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteEspecification(i)},a.setAttribute("id","button_delete_"+i),a.setAttribute("style","width:100%; height: 100%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),a.setAttribute("type","button"),a.setAttribute("value","Eliminar"),a}},{key:"deleteEspecification",value:function(e){if(void 0!==e&&""!==e){var t={accion:"servicio",campo:"tercero_id",id_formulario:this.getFormId(),id:e};this.generalFormat.nombre_accion="292-Elimina_un_portafolio_producto_precio",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.successEliminar,error:this.error_,general:this.generalFormat})}}},{key:"successEliminar",value:function(e){200===e.estado_p&&(this.uploadTable(this.idDataSelected),this.getField("fieldAlert").toggle(!0,"Informaci\xf3n eliminada exitosamente","success"))}},{key:"changeSearchProveedor",value:function(){this.getField("tabla_productos_precios").toggle(!1),this.getField("tabla_portafolio").toggle(!1)}}]),i}(d.a.form);d.a.addController("port_precios",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.respuestaObtenerTipoTercero=o.respuestaObtenerTipoTercero.bind(Object(s.a)(o)),o.respuestaProveedoresClientesClientesTerceroId=o.respuestaProveedoresClientesClientesTerceroId.bind(Object(s.a)(o)),o.respuestaBotonConsultar=o.respuestaBotonConsultar.bind(Object(s.a)(o)),o.habilitarCampos=o.habilitarCampos.bind(Object(s.a)(o)),o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o.limpiarCamposSegundoBuscador=o.limpiarCamposSegundoBuscador.bind(Object(s.a)(o)),o.respuestaBotonAgregar=o.respuestaBotonAgregar.bind(Object(s.a)(o)),o.listado=o.listado.bind(Object(s.a)(o)),o.gridOptionsTablaProveedoresClientes=Object.assign({},o.gridOptions),o.setButtonEliminar=o.setButtonEliminar.bind(Object(s.a)(o)),o.eliminar=o.eliminar.bind(Object(s.a)(o)),o.respuestaEliminar=o.respuestaEliminar.bind(Object(s.a)(o)),o.limpiarErroresPrimerBuscador=o.limpiarErroresPrimerBuscador.bind(Object(s.a)(o)),o.limpiarErroresSegundoBuscador=o.limpiarErroresSegundoBuscador.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.habilitarCampos(!1),this.getField("nit").setOnChange(this.limpiarErroresPrimerBuscador),this.getField("cliente").setOnChange(this.limpiarErroresSegundoBuscador),this.getField("tipo_proveedor").setCustomSuccess(this.respuestaObtenerTipoTercero),this.getField("carga_clientes_clientes_id").setCustomSuccess(this.respuestaProveedoresClientesClientesTerceroId),this.getField("consultar").setClick(this.listado),this.getField("cancelar").setClick(this.limpiarCampos),this.getField("agregar").setSuccess(this.respuestaBotonAgregar)}},{key:"limpiarErroresPrimerBuscador",value:function(){this.getField("tabla_proveedores_clientes").toggle(!1),this.habilitarCampos(!1)}},{key:"limpiarErroresSegundoBuscador",value:function(){this.habilitarCampos(!1),this.getField("tabla_proveedores_clientes").toggle(!1)}},{key:"habilitarCampos",value:function(e){this.getField("codigo").setVisible(e),this.getField("nombre_producto").setVisible(e),this.getField("agregar").setVisible(e),this.getField("cancelar").setVisible(e)}},{key:"respuestaObtenerTipoTercero",value:function(e){void 0!==e?e.length>0?"P"!==e[0].tipo_proveedor&&(this.alertGeneral.toggle(!0,"No es proveedor","error"),this.limpiarCampos()):(this.alertGeneral.toggle(!0,"No es proveedor","error"),this.limpiarCampos()):(this.alertGeneral.toggle(!0,"no se encontraron el tipo cliente y tipo proveedor del tercero.","error"),this.limpiarCampos())}},{key:"respuestaProveedoresClientesClientesTerceroId",value:function(e){e.length>0?2===e[0].estadoactivo_id&&(this.alertGeneral.toggle(!0,"Cliente configurado pero inactivo","error"),this.limpiarCamposSegundoBuscador()):(this.alertGeneral.toggle(!0,"Cliente no configurado","error"),this.limpiarCamposSegundoBuscador())}},{key:"limpiarCampos",value:function(){this.getField("nit").setValue(""),this.getField("sede").setValue(""),this.getField("nombre").setValue(""),this.getField("tipo_proveedor").setValue(""),this.getField("cliente").setValue(""),this.getField("sedeCliente").setValue(""),this.getField("nombreCliente").setValue(""),this.getField("proveedores_clientes_clientes_id").setValue(""),this.getField("codigo").setVisible(!1),this.getField("nombre_producto").setVisible(!1),this.getField("agregar").setVisible(!1),this.getField("cancelar").setVisible(!1),this.getField("codigo").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("articulo_id").setValue(""),this.getField("articulo_id").setError(!1,"")}},{key:"limpiarCamposSegundoBuscador",value:function(){this.getField("cliente").setValue(""),this.getField("sedeCliente").setValue(""),this.getField("nombreCliente").setValue(""),this.getField("carga_clientes_clientes_id").setValue(""),this.getField("proveedores_clientes_clientes_id").setValue("")}},{key:"respuestaBotonAgregar",value:function(e){200===e.estado_p&&this.listado()}},{key:"listado",value:function(){if(this.getField("nit").valid()&&this.getField("sede").valid()&&this.getField("cliente").valid()&&this.getField("sedeCliente").valid()){var e={value:this.getField("tercero_proveedor_id").getValue()};this.generalFormat.nombre_accion="permite_consultar_proveedores_clientes_portafolio_clientes_510",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.respuestaBotonConsultar,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"respuestaBotonConsultar",value:function(e){if(200===e.estado_p)if(e.data.length>0){this.habilitarCampos(!0),this.gridOptionsTablaProveedoresClientes.rowData=e.data;var t=new Map;t.set("Eliminar",{field:"Eliminar",cellRenderer:this.setButtonEliminar,width:150}),this.getField("tabla_proveedores_clientes").initData(this.gridOptionsTablaProveedoresClientes,t)}else this.getField("tabla_proveedores_clientes").toggle(!1);else this.habilitarCampos(!0),this.getField("tabla_proveedores_clientes").toggle(!1),this.getField("codigo").setValue(""),this.getField("nombre_producto").setValue("")}},{key:"setButtonEliminar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminar(e.data.id)},i.setAttribute("id","boton_eliminar"),i.setAttribute("style","width:90px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminar",value:function(e){var t={id:e};this.generalFormat.nombre_accion="permite_eliminar_proveedores_clientes_portafolioClientes_510",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.respuestaEliminar,error:this.error_,general:this.generalFormat})}},{key:"respuestaEliminar",value:function(e){console.log("data a eliminar ",e),200===e.estado_p&&this.listado()}}]),i}(d.a.form);d.a.addController("porta_cli",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.cargarTabla=o.cargarTabla.bind(Object(s.a)(o)),o.gridOptionsTB=Object.assign({},o.gridOptions),o.crearBotonProcesar=o.crearBotonProcesar.bind(Object(s.a)(o)),o.respuestaAccionProcesar=o.respuestaAccionProcesar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btn_cargar").setSuccess(this.cargarTabla)}},{key:"cargarTabla",value:function(e){var t=this;if(200===e.estado_p){this.gridOptionsTB.rowData=e.data;var i=new Map;i.set("accion",{cellRenderer:function(e){return t.crearBotones(e)},field:"accion",width:250}),this.getField("tabla_archivo_multicash").initData(this.gridOptionsTB,i)}else this.getField("tabla_archivo_multicash").toggle(!1)}},{key:"crearBotones",value:function(e){var t=document.createDocumentFragment(),i=this.crearBotonProcesar(e.data,"Procesar"),a=this.crearBotonProcesar(e.data,"Integrar");switch(a.setAttribute("value","Integrar"),i.setAttribute("style","width:90px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer;margin-right:10px;"),this.getField("estado").getValue()){case"S":a.setAttribute("style","width:90px;height: 20px; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px;"),a.setAttribute("disabled",!0);break;case"P":i.setAttribute("style","width:90px;height: 20px; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px;"),i.setAttribute("disabled",!0);break;case"I":i.setAttribute("style","width:90px;height: 20px; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px;"),i.setAttribute("disabled",!0),a.setAttribute("style","width:90px;height: 20px; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px;"),a.setAttribute("disabled",!0);break;default:"."===e.data.estado?(a.setAttribute("style","width:90px;height: 20px; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px;"),a.setAttribute("disabled",!0)):"P"===e.data.estado?(i.setAttribute("style","width:90px;height: 20px; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px;"),i.setAttribute("disabled",!0)):"I"===e.data.estado&&(i.setAttribute("style","width:90px;height: 20px; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px;"),i.setAttribute("disabled",!0),a.setAttribute("style","width:90px;height: 20px; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px;"),a.setAttribute("disabled",!0))}return t.appendChild(i),t.appendChild(a),t}},{key:"crearBotonProcesar",value:function(e,t){var i=this,a=document.createElement("input");return a.setAttribute("id","boton_procesar"),a.onclick=function(){i.accionProcesar(e,t)},a.setAttribute("value","Procesar"),a.setAttribute("style","width:90px; height: 20px; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer;"),a.setAttribute("type","button"),a}},{key:"accionProcesar",value:function(e,t){if(this.getField("fecha").setValue(e.fecha),"Procesar"===t){var i={fecha:this.getField("fecha").getValue(),bancos_cuentas_id:this.getField("bancos_cuentas_id").getValue()};this.generalFormat.nombre_accion="1208-lee_archivos_txt_bancos_multicash",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:i,success:this.respuestaAccionProcesar,error:this.error_,general:this.generalFormat})}}},{key:"respuestaAccionProcesar",value:function(e){404===e.estado_p&&this.alertGeneral.toggle(!0,e.mensaje,"error"),this.getField("tabla_archivo_multicash").toggle(!1)}}]),i}(d.a.form);d.a.addController("procArchMulticash",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.busca_pedidos_por_numero_pedidos=o.busca_pedidos_por_numero_pedidos.bind(Object(s.a)(o)),o.successBuscarPedidos=o.successBuscarPedidos.bind(Object(s.a)(o)),o.datosFicha=o.datosFicha.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.successModificarDetalle=o.successModificarDetalle.bind(Object(s.a)(o)),o.modificarDireccion=o.modificarDireccion.bind(Object(s.a)(o)),o.successModificarDireccion=o.successModificarDireccion.bind(Object(s.a)(o)),o.traerInformacionClienteTb=o.traerInformacionClienteTb.bind(Object(s.a)(o)),o.successInformacionCliente=o.successInformacionCliente.bind(Object(s.a)(o)),o.gridOptionsInformacionClienteCartera=Object.assign({},o.gridOptions),o.gridOptionsInformacionClientePedidos=Object.assign({},o.gridOptions),o.traerInformacionPedidoItems=o.traerInformacionPedidoItems.bind(Object(s.a)(o)),o.successInformacionPedidoItems=o.successInformacionPedidoItems.bind(Object(s.a)(o)),o.cargarSelectDireccionesCliente=o.cargarSelectDireccionesCliente.bind(Object(s.a)(o)),o.successCargarDireccionesCliente=o.successCargarDireccionesCliente.bind(Object(s.a)(o)),o.abrirOpciones=o.abrirOpciones.bind(Object(s.a)(o)),o.autorizarPedido=o.autorizarPedido.bind(Object(s.a)(o)),o.successAutorizarPedido=o.successAutorizarPedido.bind(Object(s.a)(o)),o.CancelarPedido=o.CancelarPedido.bind(Object(s.a)(o)),o.ConfirmarRechazarPedido=o.ConfirmarRechazarPedido.bind(Object(s.a)(o)),o.gridOptionsInformacionClientePedidoItems=Object.assign({},o.gridOptions),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Proceso trazabilidad autorizar, @version: 1, @author: Jose Albeiro Marin"),this.getField("pedido_modal_autorizar").setValue(this.props.data.referencia),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),this.busca_pedidos_por_numero_pedidos(),this.getField("bt_modificar_detalle").setSuccess(this.successModificarDetalle),this.getField("bt_modificar_direccion").setClick(this.modificarDireccion),this.getField("opciones").setOnChange(this.abrirOpciones),this.getField("cancelar_btn").setClick(this.CancelarPedido)}},{key:"busca_pedidos_por_numero_pedidos",value:function(){var e={numero_pedido:this.getField("pedido_modal_autorizar").getValue()};this.generalFormat.nombre_accion="1251_permite_buscar_pedidos_por_numero_pedidos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successBuscarPedidos,error:this.error_,general:this.generalFormat})}},{key:"successBuscarPedidos",value:function(e){200===e.estado_p&&(this.getField("fecha_modal_autorizar").setValue(e.data[0].fecha),this.getField("nit").setValue(e.data[0].nit),this.getField("sede").setValue(e.data[0].sede),this.getField("nombre_cliente").setValue(e.data[0].nombre),this.getField("detalle").setValue(e.data[0].detalle)),this.datosFicha()}},{key:"datosFicha",value:function(){var e={numero_pedido:this.getField("pedido_modal_autorizar").getValue(),nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="1251_permite_traer_datos_autorizar_pedido",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat})}},{key:"successDatosFicha",value:function(e){var t=[],i={data:[{nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue(),nombre_cliente:this.getField("nombre_cliente").getValue(),cupo:e.data[0].cupo,saldo:e.data[0].saldo,saldo_pedidos:e.data[0].saldo_pedidos,dias_vence:e.data[0].dias_vence,dias_vencidos:e.data[0].dias_vencidos,chequesd:e.data[0].chequesd}]};200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("lista_estado_cliente_modal_autorizar").setVisible(!0),t.push(i.data[0]),this.getField("lista_estado_cliente_modal_autorizar").setItemsFichas(t)):this.getField("lista_estado_cliente_modal_autorizar").setVisible(!1),this.cargarSelectDireccionesCliente()}},{key:"successModificarDetalle",value:function(e){}},{key:"cargarSelectDireccionesCliente",value:function(){var e={sede:this.getField("sede").getValue(),nit:this.getField("nit").getValue()};this.generalFormat.nombre_accion="1251_permite_traer_direcciones_cliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successCargarDireccionesCliente,error:this.error_,general:this.generalFormat})}},{key:"successCargarDireccionesCliente",value:function(e){var t=[];200===e.estado_p&&(t=[{text:"Ninguno",value:"",campos_cambian:{}}],e.data.forEach((function(e){var i={};i.value=e.direccion,i.text=e.direccion.concat(" - ",e.nciudad),i.campos_cambian={ciudad_entrega:e.codigo_ciudad},t.push(i)}))),this.getField("direccion_entrega").setOptions(t),this.getField("direccion_entrega").setValue(e.data[0].direccion)}},{key:"modificarDireccion",value:function(){this.getField("direccion_entrega").setError(!1," "),this.getField("numero_pedido").setValue(this.getField("pedido_modal_autorizar").getValue());var e={numero_pedido:this.getField("numero_pedido").getValue(),direccion_entrega:this.getField("direccion_entrega").getValue(),ciudad_entrega:this.getField("ciudad_entrega").getValue()};""!==this.getField("direccion_entrega").getValue()?(this.generalFormat.nombre_accion="1251_permite_modificar_la_direccion_del_pedido",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successModificarDireccion,error:this.error_,general:this.generalFormat})):this.getField("direccion_entrega").setError(!0,"* Este campo es requerido")}},{key:"successModificarDireccion",value:function(e){}},{key:"abrirOpciones",value:function(){switch(this.getField("opciones").getValue()){case"EC":this.getField("modal_bt_estado_cuenta").handleClickOpen(),this.getField("opciones").setValue("");var e=[],t={data:[{Cliente:this.getField("nit").getValue(),Sede:this.getField("sede").getValue(),Nombre:this.getField("nombre_cliente").getValue()}]};this.getField("lista_bt_estado_cuenta").setVisible(!0),e.push(t.data[0]),this.getField("lista_bt_estado_cuenta").setItemsFichas(e),this.traerInformacionClienteTb();break;case"P":this.getField("modal_bt_ver_productos").handleClickOpen(),this.getField("opciones").setValue(""),this.traerInformacionPedidoItems();var i=[],a={data:[{"Pedido No":this.getField("pedido_modal_autorizar").getValue(),Cliente:this.getField("nit").getValue(),Sede:this.getField("sede").getValue(),Nombre:this.getField("nombre_cliente").getValue()}]};this.getField("lista_bt_ver_productos").setVisible(!0),i.push(a.data[0]),this.getField("lista_bt_ver_productos").setItemsFichas(i);break;case"R":this.getField("opciones").setValue(""),this.id_delete=this.getField("pedido_modal_autorizar").getValue(),this.getField("confirmModalCustom").setTitleAndContent("Confirmaci\xf3n","\xbfConfirma que desea rechazar el pedido? "+this.getField("pedido_modal_autorizar").getValue()),this.getField("confirmModalCustom").setClickDialog(this.ConfirmarRechazarPedido),this.getField("confirmModalCustom").toggle(!0);break;case"A":this.getField("opciones").setValue(""),this.autorizarPedido()}}},{key:"traerInformacionClienteTb",value:function(){var e={nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue()};this.generalFormat.nombre_accion="1251_permite_traer_informacion_del_cliente",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successInformacionCliente,error:this.error_,general:this.generalFormat})}},{key:"successInformacionCliente",value:function(e){if(200===e.estado_p){this.gridOptionsInformacionClienteCartera.rowData=e.data[0].cartera,this.gridOptionsInformacionClientePedidos.rowData=e.data[0].pedidos;var t=new Map;this.getField("tb1_informacion_cliente").initData(this.gridOptionsInformacionClienteCartera,t),this.getField("tb2_informacion_cliente").initData(this.gridOptionsInformacionClientePedidos,t)}}},{key:"traerInformacionPedidoItems",value:function(){var e={numero_pedido:this.getField("pedido_modal_autorizar").getValue()};this.generalFormat.nombre_accion="1251_permite_traer_items_del_pedido",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successInformacionPedidoItems,error:this.error_,general:this.generalFormat})}},{key:"successInformacionPedidoItems",value:function(e){if(200===e.estado_p){this.gridOptionsInformacionClientePedidoItems.rowData=e.data;var t=new Map;this.getField("tb_pedidos_items").initData(this.gridOptionsInformacionClientePedidoItems,t)}this.getField("valor").setValue(e.data[0].valor)}},{key:"autorizarPedido",value:function(){var e={numero_pedido:this.getField("pedido_modal_autorizar").getValue(),detalle_autorizacion:this.getField("detalle_autorizacion").getValue()};this.generalFormat.nombre_accion="1251_permite_autorizar_pedido",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successAutorizarPedido,error:this.error_,general:this.generalFormat})}},{key:"successAutorizarPedido",value:function(e){}},{key:"ConfirmarRechazarPedido",value:function(){var e={numero_pedido:this.getField("pedido_modal_autorizar").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue()};this.generalFormat.nombre_accion="1251_permite_rechazar_pedidos",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}},{key:"CancelarPedido",value:function(){var e={estado_p:200};this.getField("confirmModalCustom").toggle(!1),this.successCloseEstage(e)}}]),i}(d.a.form);d.a.addController("trazab_pedidos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.uploadTbEspecificacionesCalidad=o.uploadTbEspecificacionesCalidad.bind(Object(s.a)(o)),o.loadTbEspecificaciones=o.loadTbEspecificaciones.bind(Object(s.a)(o)),o.gridOptionsEspecificaciones=Object.assign({},o.gridOptions),o.valueChangeOpe1=o.valueChangeOpe1.bind(Object(s.a)(o)),o.valueChangeOpe2=o.valueChangeOpe2.bind(Object(s.a)(o)),o.eliminarOpe2=o.eliminarOpe2.bind(Object(s.a)(o)),o.loadTbEspecificacionesDelete=o.loadTbEspecificacionesDelete.bind(Object(s.a)(o)),o.funcionNuevo=o.funcionNuevo.bind(Object(s.a)(o)),o.modificarOpe1=o.modificarOpe1.bind(Object(s.a)(o)),o.grabarEspecificacion=o.grabarEspecificacion.bind(Object(s.a)(o)),o.succesGrabarEspecificacion=o.succesGrabarEspecificacion.bind(Object(s.a)(o)),o.modificarEspecificacion=o.modificarEspecificacion.bind(Object(s.a)(o)),o.succesModificarEspecificacion=o.succesModificarEspecificacion.bind(Object(s.a)(o)),o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Calidad especificaciones de productos @version 1.01.0018, @author Mario A. Sep\xfalveda"),this.getField("btnConsultar").setClick(this.uploadTbEspecificacionesCalidad),this.getField("btnNuevo").setClick(this.funcionNuevo),this.getField("btnGrabarEspecificacion").setVisible(!1),this.getField("btnModificarEsp").setVisible(!1),this.getField("btnGrabarEspecificacion").setClick(this.grabarEspecificacion),this.getField("btnModificarEsp").setClick(this.modificarEspecificacion),this.getField("nombre").setOnChange(this.limpiarCampos)}},{key:"limpiarCampos",value:function(){this.getField("tablaEspecificaciones").toggle(!1)}},{key:"uploadTbEspecificacionesCalidad",value:function(){if(""!==this.getField("codigo").getValue()&&" "!==this.getField("codigo").getValue()&&""!==this.getField("nombre").getValue()&&" "!==this.getField("nombre").getValue()){this.getField("codigo").setError(!1,""),this.getField("nombre").setError(!1,"");var e={value:this.getField("articulo_id").getValue()};this.generalFormat.nombre_accion="240-Busca_las_calidades_especificaciones_por_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.loadTbEspecificaciones,error:this.error_,general:this.generalFormat})}else this.getField("codigo").valid()&&""===this.getField("codigo").getValue()&&this.getField("codigo").setError(!0,"Este campo es requerido"),this.getField("nombre").valid()&&""===this.getField("nombre").getValue()&&this.getField("nombre").setError(!0,"Este campo es requerido")}},{key:"loadTbEspecificaciones",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=new Map;t.set("operacion1",{cellRenderer:this.valueChangeOpe1,field:"Operaci\xf3n 1"}),t.set("operacion2",{cellRenderer:this.valueChangeOpe2,field:"Operaci\xf3n 2"}),this.gridOptionsEspecificaciones.rowData=e.model,this.getField("tablaEspecificaciones").toggle(!0),this.gridOptionsEspecificaciones.paginationPageSize=100,this.getField("tablaEspecificaciones").initData(this.gridOptionsEspecificaciones,t)}}},{key:"valueChangeOpe1",value:function(e){var t=this,i=e.data.parametro_calidad,a=document.createElement("input");return a.onclick=function(){return t.modificarOpe1(i)},a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Modificar"),a}},{key:"modificarOpe1",value:function(e){this.getField("descripcion").setValue(e),this.getField("calidad").setValue(e),this.getField("btnModificarEsp").setVisible(!0),this.getField("btnGrabarEspecificacion").setVisible(!1)}},{key:"valueChangeOpe2",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarOpe2(e)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarOpe2",value:function(e){var t={id:e.data.id};this.generalFormat.nombre_accion="240-Permite_eliminar_calidad_especificacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.loadTbEspecificacionesDelete,error:this.error_,general:this.generalFormat})}},{key:"loadTbEspecificacionesDelete",value:function(e){200===e.estado_p&&this.uploadTbEspecificacionesCalidad()}},{key:"funcionNuevo",value:function(){this.getField("valor_inferior").setValue(""),this.getField("valor_superior").setValue(""),this.getField("calidad").setValue(""),this.getField("descripcion").setValue(""),this.getField("btnGrabarEspecificacion").setVisible(!0),this.getField("btnModificarEsp").setVisible(!1)}},{key:"grabarEspecificacion",value:function(){if(""!==this.getField("calidad").getValue()&&" "!==this.getField("calidad").getValue()&&""!==this.getField("descripcion").getValue()&&" "!==this.getField("descripcion").getValue()&&""!==this.getField("valor_inferior").getValue()&&" "!==this.getField("valor_inferior").getValue()&&""!==this.getField("valor_superior").getValue()&&" "!==this.getField("valor_superior").getValue()&&""!==this.getField("codigo").getValue()&&" "!==this.getField("codigo").getValue()&&""!==this.getField("nombre").getValue()&&" "!==this.getField("nombre").getValue())if(this.getField("codigo").setError(!1,""),this.getField("nombre").setError(!1,""),this.getField("calidad").setError(!1,""),this.getField("descripcion").setError(!1,""),this.getField("valor_inferior").setError(!1,""),this.getField("valor_superior").setError(!1,""),this.getField("valor_inferior").getValue()<=this.getField("valor_superior").getValue()){var e={articulo_id:this.getField("articulo_id").getValue(),produccion_calidad_parametros_id:this.getField("produccion_calidad_parametros_id").getValue(),valor_inferior:this.getField("valor_inferior").getValue(),valor_superior:this.getField("valor_superior").getValue()};this.generalFormat.nombre_accion="240-Permite_crear_una_calidad_especificacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.succesGrabarEspecificacion,error:this.error_,general:this.generalFormat})}else this.getField("fieldAlert").toggle(!0,"El valor m\xednimo no puede ser mayor al m\xe1ximo","error");else this.getField("fieldAlert").toggle(!0,"Se debe realizar la busqueda de un parametro de calidad diferente al ya existente","error"),this.getField("codigo").valid()&&""===this.getField("codigo").getValue()&&this.getField("codigo").setError(!0,"Este campo es requerido"),this.getField("nombre").valid()&&""===this.getField("nombre").getValue()&&this.getField("nombre").setError(!0,"Este campo es requerido"),this.getField("descripcion").valid()&&""===this.getField("descripcion").getValue()&&this.getField("descripcion").setError(!0,"Este campo es requerido"),this.getField("calidad").valid()&&""===this.getField("calidad").getValue()&&this.getField("calidad").setError(!0,"Este campo es requerido"),this.getField("valor_superior").valid()&&""===this.getField("valor_superior").getValue()&&this.getField("valor_superior").setError(!0,"Este campo es requerido"),this.getField("valor_inferior").valid()&&""===this.getField("valor_inferior").getValue()&&this.getField("valor_inferior").setError(!0,"Este campo es requerido")}},{key:"succesGrabarEspecificacion",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.getField("valor_inferior").setValue(""),this.getField("valor_superior").setValue(""),this.getField("calidad").setValue(""),this.getField("descripcion").setValue(""),this.uploadTbEspecificacionesCalidad())}},{key:"modificarEspecificacion",value:function(){if(""!==this.getField("calidad").getValue()&&" "!==this.getField("calidad").getValue())if(""!==this.getField("valor_inferior").getValue()&&" "!==this.getField("valor_inferior").getValue()&&""!==this.getField("valor_superior").getValue()&&" "!==this.getField("valor_superior").getValue())if(this.getField("valor_inferior").setError(!1,""),this.getField("valor_superior").setError(!1,""),this.getField("valor_inferior").getValue()<=this.getField("valor_superior").getValue()){var e={id:this.getField("id").getValue(),articulo_id:this.getField("articulo_id").getValue(),produccion_calidad_parametros_id:this.getField("produccion_calidad_parametros_id").getValue(),valor_inferior:this.getField("valor_inferior").getValue(),valor_superior:this.getField("valor_superior").getValue()};this.generalFormat.nombre_accion="240-Permite_modificar_una_calidad_especificacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.succesModificarEspecificacion,error:this.error_,general:this.generalFormat})}else this.getField("fieldAlert").toggle(!0,"El valor m\xednimo no puede ser mayor al m\xe1ximo","error");else this.getField("valor_inferior").valid()&&""===this.getField("valor_inferior").getValue()&&this.getField("valor_inferior").setError(!0,"Este campo es requerido"),this.getField("valor_superior").valid()&&""===this.getField("valor_superior").getValue()&&this.getField("valor_superior").setError(!0,"Este campo es requerido");else this.getField("fieldAlert").toggle(!0,"Se debe realizar la busqueda de un parametro de calidad diferente al ya existente","error")}},{key:"succesModificarEspecificacion",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.getField("calidad").setValue(""),this.getField("descripcion").setValue(""),this.uploadTbEspecificacionesCalidad())}}]),i}(d.a.form);d.a.addController("CalProd",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsTbComponentes=Object.assign({},o.gridOptions),o.cargarComponentes=o.cargarComponentes.bind(Object(s.a)(o)),o.successCargarComponentesTb=o.successCargarComponentesTb.bind(Object(s.a)(o)),o.cambiarEstadoCargar=o.cambiarEstadoCargar.bind(Object(s.a)(o)),o.setEliminar=o.setEliminar.bind(Object(s.a)(o)),o.confirmarEliminacion=o.confirmarEliminacion.bind(Object(s.a)(o)),o.EliminarRegistro=o.EliminarRegistro.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.crearComponente=o.crearComponente.bind(Object(s.a)(o)),o.successCrearComponente=o.successCrearComponente.bind(Object(s.a)(o)),o.cambiarEstadoCrear=o.cambiarEstadoCrear.bind(Object(s.a)(o)),o.modificarComponente=o.modificarComponente.bind(Object(s.a)(o)),o.successModificarComponente=o.successModificarComponente.bind(Object(s.a)(o)),o.cancelar=o.cancelar.bind(Object(s.a)(o)),o.seleccionar=o.seleccionar.bind(Object(s.a)(o)),o.setSeleccionar=o.setSeleccionar.bind(Object(s.a)(o)),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.gridOptionsTbComponentes.onSelectionChanged=o.onSelectionChanged,o.filaSeleccionada=[],o.setSustituto=o.setSustituto.bind(Object(s.a)(o)),o.traerComponenteSustituto=o.traerComponenteSustituto.bind(Object(s.a)(o)),o.successTrearComponenteSustituto=o.successTrearComponenteSustituto.bind(Object(s.a)(o)),o.gridOptionsTbComponentesSustitutos=Object.assign({},o.gridOptions),o.setEliminarSustituto=o.setEliminarSustituto.bind(Object(s.a)(o)),o.confirmarEliminacionSustituto=o.confirmarEliminacionSustituto.bind(Object(s.a)(o)),o.successDeleteSustituto=o.successDeleteSustituto.bind(Object(s.a)(o)),o.cambiarEstadoCrearSustituto=o.cambiarEstadoCrearSustituto.bind(Object(s.a)(o)),o.crearComponenteSustituto=o.crearComponenteSustituto.bind(Object(s.a)(o)),o.successCrearComponenteSustituto=o.successCrearComponenteSustituto.bind(Object(s.a)(o)),o.EliminarRegistroSustituto=o.EliminarRegistroSustituto.bind(Object(s.a)(o)),o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Seguimiento documentos, @version: 2, @author: Jose Albeiro Marin"),this.getField("bt_cargar").setClick(this.cargarComponentes),this.getField("nombre_producto").setOnChange(this.cambiarEstadoCargar),this.getField("bt_agregar_componente").setClick(this.crearComponente),this.getField("codigo_producto_hijo").setOnChange(this.cambiarEstadoCrear),this.getField("bt_actualizar_componente").setClick(this.modificarComponente),this.getField("bt_cancelar_componente").setClick(this.cancelar),this.getField("nombre_sustituto").setOnChange(this.cambiarEstadoCrearSustituto),this.getField("agregar_sustituto").setClick(this.crearComponenteSustituto)}},{key:"cambiarEstadoCargar",value:function(){this.getField("codigo_articulo_origen").valid()?this.getField("bt_cargar").setDisabled(!1):this.gridOptionsTbComponentes.rowData=[],this.limpiarCampos()}},{key:"limpiarCampos",value:function(){this.getField("nombre_articulo_despiece").setValue(""),this.getField("codigo_articulo_despiece").setValue(""),this.getField("cantidad").setValue(""),this.getField("factor").setValue(""),this.getField("valor").setValue(""),this.getField("tb_componentes").toggle(!1)}},{key:"cambiarEstadoCrear",value:function(){this.getField("codigo_articulo_despiece").valid()?this.getField("bt_agregar_componente").setDisabled(!1):this.getField("nombre_articulo_despiece").setValue("")}},{key:"cambiarEstadoCrearSustituto",value:function(){this.getField("sustituto_modal").valid()&&this.getField("agregar_sustituto").setDisabled(!1)}},{key:"cargarComponentes",value:function(){var e={value:this.getField("codigo_articulo_origen").getValue()};this.generalFormat.nombre_accion="servicio_componentes-codigoarticuloorigen",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successCargarComponentesTb,error:this.error_,general:this.generalFormat})}},{key:"successCargarComponentesTb",value:function(e){if(200===e.estado_p){var t=new Map;t.set("eliminar",{cellRenderer:this.setEliminar,width:100,field:"eliminar"}),t.set("seleccionar",{cellRenderer:this.setSeleccionar,width:100,field:"seleccionar"}),t.set("sustituto",{cellRenderer:this.setSustituto,width:100,field:"sustituto"}),t.set("nombre_articulo_despiece",{width:200,field:"nombre_articulo_despiece"}),t.set("cantidad",{width:90,field:"cantidad"}),t.set("factor",{width:90,field:"factor"}),t.set("codigo_articulo_despiece",{width:200,field:"codigo_articulo_despiece"}),this.gridOptionsTbComponentes.rowData=e.model,this.getField("tb_componentes").initData(this.gridOptionsTbComponentes,t)}}},{key:"setEliminar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.confirmarEliminacion(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"confirmarEliminacion",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.EliminarRegistro),this.getField("confirmModalCustom").toggle(!0)}},{key:"EliminarRegistro",value:function(e){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_delete){var t={id:this.id_delete};this.generalFormat.nombre_accion="servicio_componentes-eliminar",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.successDelete,error:this.error_,general:this.generalFormat})}}},{key:"successDelete",value:function(e){200===e.estado_p&&this.cargarComponentes()}},{key:"setSeleccionar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.seleccionar(e)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Seleccionar"),i}},{key:"seleccionar",value:function(e){this.filaSeleccionada=this.gridOptionsTbComponentes.api.getSelectedRows(),this.getField("id").setValue(e.data.id),this.getField("codigo_articulo_despiece").setValue(e.data.codigo_articulo_despiece),this.getField("nombre_articulo_despiece").setValue(e.data.nombre_articulo_despiece),this.getField("cantidad").setValue(e.data.cantidad),this.getField("factor").setValue(e.data.factor),this.getField("valor").setValue(e.data.valor),this.getField("articuloorigen_id").setValue(e.data.articuloorigen_id),this.getField("articulodespiece_id").setValue(e.data.articulodespiece_id),this.getField("estadoactivo_id").setValue(e.data.estadoactivo_id)}},{key:"onSelectionChanged",value:function(){this.filaSeleccionada=this.gridOptionsTbComponentes.api.getSelectedRows(),this.getField("bt_agregar_componente").setDisabled(!0)}},{key:"setSustituto",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.sustituto(e)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Sustituto"),i}},{key:"sustituto",value:function(e){this.getField("componentes_id").setValue(e.data.id),this.getField("modal_sustitutos").handleClickOpen(),this.traerComponenteSustituto(e),this.getField("producto_padre_modal_susitutos").setValue(e.data.codigo_articulo_origen),this.getField("nombre_producto_modal_sustitutos").setValue(e.data.nombre_articulo_origen),this.getField("producto_hijo_modal_sustitutos").setValue(e.data.codigo_articulo_despiece),this.getField("nombre_modal_sustitutos").setValue(e.data.nombre_articulo_despiece)}},{key:"crearComponente",value:function(){var e={codigo_articulo_origen:this.getField("codigo_articulo_origen").getValue(),codigo_articulo_despiece:this.getField("codigo_articulo_despiece").getValue(),cantidad:this.getField("cantidad").getValue(),factor:this.getField("factor").getValue(),valor:0,articuloorigen_id:this.getField("articuloorigen_id").getValue(),articulodespiece_id:this.getField("articulodespiece_id").getValue(),estadoactivo_id:1};this.generalFormat.nombre_accion="servicio_componentes-crear",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCrearComponente,error:this.error_,general:this.generalFormat})}},{key:"successCrearComponente",value:function(e){200===e.estado_p&&(this.getField("bt_actualizar_componente").setDisabled(!0),this.cargarComponentes())}},{key:"modificarComponente",value:function(){var e={id:this.getField("id").getValue(),codigo_articulo_origen:this.getField("codigo_articulo_origen").getValue(),codigo_articulo_despiece:this.getField("codigo_articulo_despiece").getValue(),cantidad:this.getField("cantidad").getValue(),factor:this.getField("factor").getValue(),valor:this.getField("valor").getValue(),articuloorigen_id:this.getField("articuloorigen_id").getValue(),articulodespiece_id:this.getField("articulodespiece_id").getValue(),estadoactivo_id:1};this.generalFormat.nombre_accion="servicio_componentes-modificar",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successModificarComponente,error:this.error_,general:this.generalFormat})}},{key:"successModificarComponente",value:function(e){200===e.estado_p&&this.cargarComponentes()}},{key:"cancelar",value:function(){this.getField("codigo_articulo_origen").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("codigo_articulo_despiece").setValue(""),this.getField("nombre_articulo_despiece").setValue(""),this.getField("cantidad").setValue(""),this.getField("factor").setValue(""),this.getField("valor").setValue("")}},{key:"traerComponenteSustituto",value:function(e){var t={value:this.getField("componentes_id").getValue()};this.generalFormat.nombre_accion="permite_traer_componente",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTrearComponenteSustituto,error:this.error_,general:this.generalFormat})}},{key:"successTrearComponenteSustituto",value:function(e){if(200===e.estado_p){var t=new Map;t.set("eliminar",{cellRenderer:this.setEliminarSustituto,field:"accion"}),this.gridOptionsTbComponentesSustitutos.rowData=e.model,this.getField("tb_modal_sustitutos").initData(this.gridOptionsTbComponentesSustitutos,t)}}},{key:"setEliminarSustituto",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.confirmarEliminacionSustituto(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"confirmarEliminacionSustituto",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.EliminarRegistroSustituto),this.getField("confirmModalCustom").toggle(!0)}},{key:"EliminarRegistroSustituto",value:function(e){if(this.getField("confirmModalCustom").toggle(!1),""!==this.id_delete){var t={id:this.id_delete};this.generalFormat.nombre_accion="permite_eliminar_un_componente_sustituto",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.successDeleteSustituto,error:this.error_,general:this.generalFormat})}}},{key:"successDeleteSustituto",value:function(e){200===e.estado_p&&this.traerComponenteSustituto()}},{key:"crearComponenteSustituto",value:function(e){var t={componentes_id:this.getField("componentes_id").getValue(),articulo_id:this.getField("articulo_id").getValue()};this.generalFormat.nombre_accion="permite_crear_un_componente_sustituto",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:t,success:this.successCrearComponenteSustituto,error:this.error_,general:this.generalFormat})}},{key:"successCrearComponenteSustituto",value:function(e){200===e.estado_p&&this.traerComponenteSustituto()}}]),i}(d.a.form);d.a.addController("productosComponentes",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){}}]),i}(d.a.form);d.a.addController("envasadoRelaciKits",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.handlerClickButton=o.handlerClickButton.bind(Object(s.a)(o)),o.handleClickButtonGet=o.handleClickButtonGet.bind(Object(s.a)(o)),o.onSuccessClick=o.onSuccessClick.bind(Object(s.a)(o)),o.error=o.error.bind(Object(s.a)(o)),o.cancelarProducto=o.cancelarProducto.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.buttons.has("btn_show")&&this.buttons.get("btn_show").ref.current.setClick(this.handlerClickButton),this.getField("btn_cancelar").setVisible(!1),this.getField("btn_consultar").setVisible(!1)}},{key:"handlerClickButton",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!0),this.buttons.get("btn_change").ref.current.setDisabled(!0),this.buttons.get("btn_delete").ref.current.setDisabled(!0),this.getField("codigo_articulo_origen").setDisabled(!1),this.getField("codigo_articulo_despiece").setDisabled(!1),this.getField("cantidad").setDisabled(!1),this.getField("factor").setDisabled(!1),this.getField("valor").setDisabled(!1),this.getField("estadoactivo_id").setDisabled(!1),this.getField("btn_consultar").setVisible(!0),this.getField("btn_consultar").setDisabled(!1),this.getField("btn_consultar").setClick(this.handleClickButtonGet),this.getField("btn_cancelar").setVisible(!0),this.getField("btn_cancelar").setDisabled(!1),this.getField("btn_cancelar").setClick(this.cancelarProducto)}},{key:"handleClickButtonGet",value:function(){if(this.getField("codigo_articulo_origen").valid()){var e=this.getField("codigo_articulo_origen").getValue();this.getField("btn_consultar").send(this.getField("btn_consultar").searchFormat.format(e,"btn_consultar","servicio",this.getFormId()),"GET",void 0,this.onSuccessClick,this.error)}}},{key:"onSuccessClick",value:function(e){200===e.estado_p&&e.model.length>0&&e.model.length>0&&(this.gridOptions.rowData=e.model,this.getField("tableShowData").initData(this.gridOptions))}},{key:"cancelarProducto",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!1),this.buttons.get("btn_change").ref.current.setDisabled(!1),this.buttons.get("btn_delete").ref.current.setDisabled(!1),this.getField("codigo_articulo_origen").setDisabled(!0),this.getField("codigo_articulo_despiece").setDisabled(!0),this.getField("cantidad").setDisabled(!0),this.getField("factor").setDisabled(!0),this.getField("valor").setDisabled(!0),this.getField("estadoactivo_id").setDisabled(!0),this.getField("btn_consultar").setVisible(!1),this.getField("btn_consultar").setDisabled(!0),this.getField("btn_cancelar").setVisible(!1),this.getField("btn_cancelar").setDisabled(!0),this.getField("tableShowData").toggle(!1)}},{key:"error",value:function(e){}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsPromociones=Object.assign({},o.gridOptions),o.retornaProductosEcommercePromocion=o.retornaProductosEcommercePromocion.bind(Object(s.a)(o)),o.successEcommercePromociones=o.successEcommercePromociones.bind(Object(s.a)(o)),o.valorActualChange=o.valorActualChange.bind(Object(s.a)(o)),o.setButtonQuitar=o.setButtonQuitar.bind(Object(s.a)(o)),o.setButtonEnviar=o.setButtonEnviar.bind(Object(s.a)(o)),o.eliminarPromocion=o.eliminarPromocion.bind(Object(s.a)(o)),o.confirmDeleteCustomPromocion=o.confirmDeleteCustomPromocion.bind(Object(s.a)(o)),o.successDeletePromocion=o.successDeletePromocion.bind(Object(s.a)(o)),o.enviarPromocion=o.enviarPromocion.bind(Object(s.a)(o)),o.successSubirArticulo=o.successSubirArticulo.bind(Object(s.a)(o)),o.refrescarTablaPromociones=o.refrescarTablaPromociones.bind(Object(s.a)(o)),o.cleanCamposFormulario=o.cleanCamposFormulario.bind(Object(s.a)(o)),o.validCampoValor=o.validCampoValor.bind(Object(s.a)(o)),o.cleanValidTipoPromocion=o.cleanValidTipoPromocion.bind(Object(s.a)(o)),o.guardarValor=o.guardarValor.bind(Object(s.a)(o)),o.successGuardarValor=o.successGuardarValor.bind(Object(s.a)(o)),o.id_delete=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.retornaProductosEcommercePromocion(),this.getField("grabar").setSuccess(this.refrescarTablaPromociones),this.getField("tipo_descuento").setOnChange(this.validCampoValor),this.getField("tipo_promocion").setOnChange(this.cleanValidTipoPromocion)}},{key:"cleanValidTipoPromocion",value:function(){this.getField("tipo_promocion").setError(!1,"* Este campo es requerido.")}},{key:"validCampoValor",value:function(){this.getField("valor").setError(!1,""),"precio"===this.getField("tipo_descuento").getValue()?(this.getField("valor").setValue(""),this.getField("valor").setRules({required:!0,rule:/^(\d{1,9})(\.\d{1,2})?$/,max:999999999,min:1})):"porcentaje"===this.getField("tipo_descuento").getValue()&&(this.getField("valor").setValue(""),this.getField("valor").setRules({required:!0,rule:/^(\d{1,3})(\.\d{1,2})?$/,max:99,min:1}))}},{key:"refrescarTablaPromociones",value:function(e){200===e.estado_p&&(this.retornaProductosEcommercePromocion(),this.cleanCamposFormulario())}},{key:"retornaProductosEcommercePromocion",value:function(){this.generalFormat.nombre_accion="385_retorna_ecommerce_prod_promociones",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successEcommercePromociones,error:this.error_,general:this.generalFormat})}},{key:"successEcommercePromociones",value:function(e){if(this.getField("tabla_promociones").toggle(!1),200===e.estado_p)if(e.model&&e.model.length>0){this.gridOptionsPromociones.rowData=e.model,console.log("tabla:::>",e.model);var t=new Map;t.set("orden_promocion",{singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorActualChange,editable:!0,field:"orden_promocion",width:100}),t.set("eliminar",{cellRenderer:this.setButtonQuitar,field:"eliminar",width:150}),t.set("enviar",{cellRenderer:this.setButtonEnviar,field:"enviar",width:150}),this.getField("tabla_promociones").initData(this.gridOptionsPromociones,t),this.cleanCamposFormulario()}else this.getField("tabla_promociones").toggle(!1)}},{key:"valorActualChange",value:function(e){if(this.getField("tabla_promociones").cellValid(e.oldValue,e.newValue,/^[0-9]+$/,9)){if(e.oldValue!==e.newValue&&""!==e.newValue){var t=e.data.id,i=e.newValue;""!==i&&parseFloat(i)&&parseFloat(i)>=0&&parseFloat(i)<=1e5?(this.guardarValor(t,parseFloat(i)),this.gridOptionsPromociones.rowData=[],this.getField("tabla_promociones").initData(this.gridOptionsPromociones)):(this.alertGeneral.toggle(!0,"El campo no cumple con el formato deseado","error"),this.gridOptionsPromociones.rowData=[],this.getField("tabla_promociones").initData(this.gridOptionsPromociones),this.retornaProductosEcommercePromocion())}}else this.alertGeneral.toggle(!0,"El campo no cumple con el formato deseado","error"),this.gridOptionsPromociones.rowData=[],this.getField("tabla_promociones").initData(this.gridOptionsPromociones),this.retornaProductosEcommercePromocion()}},{key:"guardarValor",value:function(e,t){this.getField("orden").setValue(t);var i=e;if(""!==i&&""!==this.getField("orden").getValue()){var a={id:i,orden:this.getField("orden").getValue()};this.generalFormat.nombre_accion="385-permite_modificar-orden_promocion",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:a,success:this.successGuardarValor,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successGuardarValor",value:function(){this.retornaProductosEcommercePromocion()}},{key:"setButtonQuitar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.eliminarPromocion(e.data.articulo_id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"eliminarPromocion",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustomPromocion),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustomPromocion",value:function(){console.log("ID A ELIMINAR",this.id_delete),this.getField("confirmModalCustom").toggle(!1);var e={articulo_id:this.id_delete};this.generalFormat.nombre_accion="385_elimina_producto_promociones",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successDeletePromocion,error:this.error_,general:this.generalFormat})}},{key:"successDeletePromocion",value:function(e){200===e.estado_p&&(this.retornaProductosEcommercePromocion(),this.cleanCamposFormulario())}},{key:"setButtonEnviar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.enviarPromocion(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Enviar"),i}},{key:"enviarPromocion",value:function(e){var t={value:e};this.generalFormat.nombre_accion="subir_articulo_promocion",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successSubirArticulo,error:this.error_,general:this.generalFormat})}},{key:"successSubirArticulo",value:function(e){200===e.estado_p&&this.retornaProductosEcommercePromocion()}},{key:"cleanCamposFormulario",value:function(){this.getField("codigo").setValue(""),this.getField("nombre").setValue(""),this.getField("articulo_id").setValue(""),this.getField("vigencia_desde_promocion").setValue(""),this.getField("vigencia_hasta_promocion").setValue(""),this.getField("valor").setValue(""),this.getField("unidades_promocion").setValue(""),this.getField("nombre_comercial").setValue(""),this.getField("tipo_descuento").setValue(""),this.getField("tipo_promocion").setValue("")}}]),i}(d.a.form);d.a.addController("promociones",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.succesDatosTablaRecepDev=o.succesDatosTablaRecepDev.bind(Object(s.a)(o)),o.setButtonRecibir=o.setButtonRecibir.bind(Object(s.a)(o)),o.setChangeButtonRecibir=o.setChangeButtonRecibir.bind(Object(s.a)(o)),o.succesButtonRecibir=o.succesButtonRecibir.bind(Object(s.a)(o)),o.uploadTableRecepDev=o.uploadTableRecepDev.bind(Object(s.a)(o)),o.terminarRecepDev=o.terminarRecepDev.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="449-Servicio_traer_datos_ficha_recep_dev_elementos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat});var t={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="449-Servicio_traer_items_tabla_recep_dev_elementos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.succesDatosTablaRecepDev,error:this.error_,general:this.generalFormat}),this.getField("btnTerminarRecepDevElement").setClick(this.terminarRecepDev)}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaRecepDevElement").setVisible(!0),this.getField("listaRecepDevElement").setItemsFichas(e.model)):this.getField("listaRecepDevElement").setVisible(!1)}},{key:"succesDatosTablaRecepDev",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptions.rowData=[],this.getField("tablaRecepDevElement").initData(this.gridOptions),this.getField("tablaRecepDevElement").toggle(!0);var t=new Map;t.set("accion",{cellRenderer:this.setButtonRecibir,field:"Acci\xf3n"}),this.gridOptions.rowData=e.model,this.getField("tablaRecepDevElement").initData(this.gridOptions,t)}else this.getField("tablaRecepDevElement").toggle(!1)}},{key:"setButtonRecibir",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.setChangeButtonRecibir(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Recibir"),i}},{key:"setChangeButtonRecibir",value:function(e){var t={id:e.id};this.generalFormat.nombre_accion="449-Servicio_btn_recibir_tabla_recepcion_dev_elementos",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.succesButtonRecibir,error:this.error_,general:this.generalFormat})}},{key:"succesButtonRecibir",value:function(e){200!==e.estado_p&&404!==e.estado_p||this.uploadTableRecepDev()}},{key:"uploadTableRecepDev",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="449-Servicio_traer_items_tabla_recep_dev_elementos",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesDatosTablaRecepDev,error:this.error_,general:this.generalFormat})}},{key:"terminarRecepDev",value:function(){var e={proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id,produccion_fichas_id:this.props.data.id_ficha};this.generalFormat.nombre_accion="449-Servicio_btn_terminar_recep_dev_elementos",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);t.default=l,d.a.addController("recepDevElement",l)},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.successTbRecepcionDevolucion=o.successTbRecepcionDevolucion.bind(Object(s.a)(o)),o.gridOptionsRecepcionDevolucion=Object.assign({},o.gridOptions),o.setButtonRecepcion=o.setButtonRecepcion.bind(Object(s.a)(o)),o.setChangeButtonRecepcionclick=o.setChangeButtonRecepcionclick.bind(Object(s.a)(o)),o.selectOptions=[],o.successSelectBodega=o.successSelectBodega.bind(Object(s.a)(o)),o.setSelectBodega=o.setSelectBodega.bind(Object(s.a)(o)),o.valueChange=o.valueChange.bind(Object(s.a)(o)),o.setSelectMaquina=o.setSelectMaquina.bind(Object(s.a)(o)),o.grabarBodega=o.grabarBodega.bind(Object(s.a)(o)),o.successGrabarBodega=o.successGrabarBodega.bind(Object(s.a)(o)),o.uploadTbRecepcionDevolucion=o.uploadTbRecepcionDevolucion.bind(Object(s.a)(o)),o.successButtonRecepcionClick=o.successButtonRecepcionClick.bind(Object(s.a)(o)),o.terminarRecepcionDevEnvasadoFinal=o.terminarRecepcionDevEnvasadoFinal.bind(Object(s.a)(o)),o.avisoTerminacionFicha=o.avisoTerminacionFicha.bind(Object(s.a)(o)),o.formulacionFicha="",o.procedimientoFicha="",o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Recepcion Devolucion Envasado Final, @version: 2.0.0, @author: Mario A Sepulveda"),this.getField("btnTerminar").setClick(this.avisoTerminacionFicha);var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="460-Retorna_datos_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="460-Retorna_los_datos_de_las_bodegas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successSelectBodega,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="460-Retorna_tb_fichas_recepcion_devolucion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTbRecepcionDevolucion,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("lista_items_ficha").setVisible(!0),this.getField("lista_items_ficha").setItemsFichas(e.model),this.formulacionFicha=e.model[0].codigo_producto_formulacion,this.procedimientoFicha=e.model[0].procedimiento):(this.getField("lista_items_ficha").setVisible(!1),this.formulacionFicha="",this.procedimientoFicha="")}},{key:"successTbRecepcionDevolucion",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsRecepcionDevolucion.rowData=[],this.getField("TbRecepcionDevolucion").initData(this.gridOptionsRecepcionDevolucion);var t=new Map;t.set("recibir",{cellRenderer:this.setButtonRecepcion,field:"recibir"}),t.set("codigo_bodega",{cellRenderer:this.setSelectBodega,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px",color:"rgb(0, 86, 201)"},width:150,field:"codigo_bodega"}),this.getField("TbRecepcionDevolucion").toggle(!0),this.gridOptionsRecepcionDevolucion.rowData=e.model,this.gridOptionsRecepcionDevolucion.paginationPageSize=100,this.getField("TbRecepcionDevolucion").initData(this.gridOptionsRecepcionDevolucion,t)}else this.getField("TbRecepcionDevolucion").toggle(!1),this.getField("fieldAlert").toggle(!0,"No se encuentra ninguna recepci\xf3n","warning")}},{key:"setButtonRecepcion",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.setChangeButtonRecepcionclick(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Recibir"),i}},{key:"setChangeButtonRecepcionclick",value:function(e){console.log("dataClickRecibir",e.id);var t={id:e.id};this.generalFormat.nombre_accion="460-Actualiza_recepcion_devolucion_recibido",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successButtonRecepcionClick,error:this.error_,general:this.generalFormat})}},{key:"successButtonRecepcionClick",value:function(e){200===e.estado_p?(this.getField("fieldAlert").toggle(!0,"Se actualizo a recibido correctamente","success"),this.uploadTbRecepcionDevolucion()):this.getField("fieldAlert").toggle(!0,"No se actualizo a recibido correctamente","warning")}},{key:"successSelectBodega",value:function(e){200===e.estado_p?this.selectOptions=e.model:this.getField("fieldAlert").toggle(!0,"No se tienen bodegas para mostrar","error")}},{key:"setSelectBodega",value:function(e){var t=this,i=e.data.codigo_bodega,a=document.createElement("select"),o=document.createElement("div");o.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),a.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),a.onchange=function(i){return t.valueChange(i,e.data.id)};var s=this.setSelectMaquina();return this.valor_idMaq=1,s.map((function(e){return a.appendChild(e),e.value===i&&(t.valor_idMaq=e.value),null})),o.appendChild(a),null===i||void 0===i?this.valido=!1:a.value=this.valor_idMaq,o}},{key:"valueChange",value:function(e,t){var i=parseInt(e.target.value);isNaN(i)||this.grabarBodega(t,i)}},{key:"setSelectMaquina",value:function(){var e=document.createElement("option");e.setAttribute("value"," "),e.textContent="Ninguno";var t=[e];return this.selectOptions.map((function(e){var i=document.createElement("option");return i.setAttribute("value",e.codigo_bodega),i.textContent=e.nombre_bodega,t.push(i),null})),t}},{key:"grabarBodega",value:function(e,t){this.getField("codigo_bodega").setValue(t);var i={id:e,codigo_bodega:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="460-Actualiza_bodega_en_recepcion_devolucion",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:i,success:this.successGrabarBodega,error:this.error_,general:this.generalFormat})}},{key:"successGrabarBodega",value:function(e){200===e.estado_p?(this.getField("fieldAlert").toggle(!0,"Se actualizo la bodega correctamente","success"),this.uploadTbRecepcionDevolucion()):this.getField("fieldAlert").toggle(!0,"No se actualizo la bodega correctamente","error")}},{key:"uploadTbRecepcionDevolucion",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="460-Retorna_tb_fichas_recepcion_devolucion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTbRecepcionDevolucion,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"terminarRecepcionDevEnvasadoFinal",value:function(){this.getField("confirmModalCustom").toggle(!1),this.formulacionFicha="",this.procedimientoFicha="",this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id),console.log("Ficha Terminada ---------\x3e");var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue()};this.generalFormat.nombre_accion="460-Permite_terminar_el_proceso_generando_el_traslado_y_los_ajustes",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}},{key:"avisoTerminacionFicha",value:function(){console.log("Se Cerrara la Ficha -------\x3e"),this.getField("confirmModalCustom").setTitleAndContent("Finalizar Ficha","Se finalizara la ficha de la formulaci\xf3n ".concat(this.formulacionFicha,": ").concat(this.procedimientoFicha)),this.getField("confirmModalCustom").setClickDialog(this.terminarRecepcionDevEnvasadoFinal),this.getField("confirmModalCustom").toggle(!0)}}]),i}(d.a.form);d.a.addController("RecDevElemenEnvFinal",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.succesDatosTablaRecepEnv=o.succesDatosTablaRecepEnv.bind(Object(s.a)(o)),o.setButtonRecibir=o.setButtonRecibir.bind(Object(s.a)(o)),o.setChangeButtonRecibir=o.setChangeButtonRecibir.bind(Object(s.a)(o)),o.succesButtonRecibir=o.succesButtonRecibir.bind(Object(s.a)(o)),o.uploadTableRecepEnv=o.uploadTableRecepEnv.bind(Object(s.a)(o)),o.terminarRecepEnv=o.terminarRecepEnv.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="447-Servicio_traer_datos_fichas_recepcion_envasado_final",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat});var t={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="447-servicio_traer_datos_items_tablas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.succesDatosTablaRecepEnv,error:this.error_,general:this.generalFormat,showMessage:!1}),this.getField("btnTerminarRecepEnv").setClick(this.terminarRecepEnv)}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaRecepEnv").setVisible(!0),this.getField("listaRecepEnv").setItemsFichas(e.model)):this.getField("listaRecepEnv").setVisible(!1)}},{key:"succesDatosTablaRecepEnv",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptions.rowData=[],this.getField("tablaRecepEnv").initData(this.gridOptions),this.getField("tablaRecepEnv").toggle(!0);var t=new Map;t.set("accion",{cellRenderer:this.setButtonRecibir,field:"Acci\xf3n"}),this.gridOptions.rowData=e.model,this.getField("tablaRecepEnv").initData(this.gridOptions,t)}else this.getField("tablaRecepEnv").toggle(!1)}},{key:"setButtonRecibir",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.setChangeButtonRecibir(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Recibir"),i}},{key:"setChangeButtonRecibir",value:function(e){var t={id:e.id};this.generalFormat.nombre_accion="447-Servicio_boton_recibir_material_recepcion_emp",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.succesButtonRecibir,error:this.error_,general:this.generalFormat})}},{key:"succesButtonRecibir",value:function(e){200===e.estado_p&&this.uploadTableRecepEnv()}},{key:"uploadTableRecepEnv",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="447-servicio_traer_datos_items_tablas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesDatosTablaRecepEnv,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"terminarRecepEnv",value:function(){var e={proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id,produccion_fichas_id:this.props.data.id_ficha};this.generalFormat.nombre_accion="447-Servicio_boton_terminar_recepcion_envasado_final",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);t.default=l,d.a.addController("recepEnvasado",l)},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.succesTbMaterialEmpaque=o.succesTbMaterialEmpaque.bind(Object(s.a)(o)),o.gridOptionsTbMaterialEmpaque=Object.assign({},o.gridOptions),o.setButtonRecepcion=o.setButtonRecepcion.bind(Object(s.a)(o)),o.setChangeButtonRecepcionclick=o.setChangeButtonRecepcionclick.bind(Object(s.a)(o)),o.succesButtonRecepcion=o.succesButtonRecepcion.bind(Object(s.a)(o)),o.recargarTbMaterialEmpaque=o.recargarTbMaterialEmpaque.bind(Object(s.a)(o)),o.terminarMaterialEmpaqueRecep=o.terminarMaterialEmpaqueRecep.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnTerminar").setClick(this.terminarMaterialEmpaqueRecep);var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="396-Servicio_traer_datos_ficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat,showMessage:!1}),this.generalFormat.nombre_accion="396-Retorna_data_material_empaque_x_recibir",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesTbMaterialEmpaque,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"successDatosFicha",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("lista_items_produccion").setVisible(!0),this.getField("lista_items_produccion").setItemsFichas(e.model)):this.getField("lista_items_produccion").setVisible(!1)}},{key:"succesTbMaterialEmpaque",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsTbMaterialEmpaque.rowData=[],this.getField("TbMaterialEmpaque").initData(this.gridOptionsTbMaterialEmpaque),this.getField("TbMaterialEmpaque").toggle(!0),this.gridOptionsTbMaterialEmpaque.rowData=e.model,this.gridOptionsTbMaterialEmpaque.paginationPageSize=100;var t=new Map;t.set("accion",{cellRenderer:this.setButtonRecepcion,field:"Acci\xf3n"}),this.getField("TbMaterialEmpaque").initData(this.gridOptionsTbMaterialEmpaque,t),this.gridOptionsTbMaterialEmpaque.api.selectIndex(0,!0,!0)}else this.getField("TbMaterialEmpaque").toggle(!1),this.getField("fieldAlert").toggle(!0,"No hay material de empaque","warning")}},{key:"setButtonRecepcion",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.setChangeButtonRecepcionclick(e.data)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Recibir"),i}},{key:"setChangeButtonRecepcionclick",value:function(e){var t={id:e.id};this.generalFormat.nombre_accion="396-Actualiza_material_empaque_recibido_en_la_tabla",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.succesButtonRecepcion,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"succesButtonRecepcion",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Se actualizo de forma correcta","success"),this.recargarTbMaterialEmpaque())}},{key:"recargarTbMaterialEmpaque",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="396-Retorna_data_material_empaque_x_recibir",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesTbMaterialEmpaque,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"terminarMaterialEmpaqueRecep",value:function(){this.getField("produccion_fichas_id").setValue(this.props.data.id_ficha),this.getField("proceso_id").setValue(this.props.data.proceso_id),this.getField("actividad_id").setValue(this.props.data.actividad_id),this.getField("actividad_configuracion_id").setValue(this.props.data.actividad_configuracion_id);var e={id_formulario:this.formId,produccion_fichas_id:this.getField("produccion_fichas_id").getValue(),proceso_id:this.getField("proceso_id").getValue(),actividad_id:this.getField("actividad_id").getValue(),actividad_configuracion_id:this.getField("actividad_configuracion_id").getValue()};this.generalFormat.nombre_accion="396-Permite_terminar_y_pasar_etapa__sig_etapa",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);t.default=l,d.a.addController("RecepMatEmpq",l)},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.terminarItem=o.terminarItem.bind(Object(s.a)(o)),o.devolverItem=o.devolverItem.bind(Object(s.a)(o)),o.successRecibido=o.successRecibido.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.formato=o.formato.bind(Object(s.a)(o)),o.tamanoDatos=0,o.succesTraerDatosFicha=o.succesTraerDatosFicha.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_traer_datos_fichas_recepcion_mercancia",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.succesTraerDatosFicha,error:this.error_,general:this.generalFormat});var t={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_traer_items_fichas_recepcion_mercancia",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat,showMessage:!1}),this.getField("btnTerminar").setClick(this.terminarItem),this.getField("btnDevolver").setClick(this.devolverItem)}},{key:"succesTraerDatosFicha",value:function(e){var t=[];200===e.estado_p&&void 0!==e.data&&e.data.length>0?(this.getField("listaMercancia").setVisible(!0),t.push(e.data[0]),this.getField("listaMercancia").setItemsFichas(t)):this.getField("listaMercancia").setVisible(!1)}},{key:"formato",value:function(e){return"".formatoPrecio(e.data.cantidad)}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p){this.gridOptions.rowData=[],this.getField("tablaMercancia").initData(this.gridOptions);var t=new Map;this.tamanoDatos=e.model.length,t.set("cantidad",{cellRenderer:this.formato,cellStyle:{textAlign:"right"},field:"cantidad"}),t.set(0,{cellRenderer:this.setButtonDelete,field:"Operaci\xf3n 1"}),this.gridOptions.rowData=e.model,this.getField("tablaMercancia").initData(this.gridOptions,t)}else this.getField("tablaMercancia").toggle(!1),this.tamanoDatos=0}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteEspecification(i)},a.setAttribute("id","button_delete_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Recibir"),1===e.data.recibido?"":a}},{key:"deleteEspecification",value:function(e){var t={id:e};this.generalFormat.nombre_accion="servicio_actualizar_items_fichas_recepcion_mercancia",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:t,success:this.successRecibido,error:this.error_,general:this.generalFormat})}},{key:"successRecibido",value:function(e){200===e.estado_p&&(this.tamanoDatos>1?this.uploadTable():(this.getField("tablaMercancia").toggle(!1),this.tamanoDatos=0))}},{key:"uploadTable",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="servicio_traer_items_fichas_recepcion_mercancia",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"terminarItem",value:function(){if(0===this.tamanoDatos){var e={produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.generalFormat.nombre_accion="servicio_terminar_recepcion_mercancia",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}else this.alertGeneral.toggle(!0,"A\xfan hay \xedtems sin recibir","error")}},{key:"devolverItem",value:function(){var e={produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.generalFormat.nombre_accion="servicio_devolver_alistamiento_recepcion_mercancia",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}}]),i}(d.a.form);d.a.addController("RecMer",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.uploadCarteraClientes=o.uploadCarteraClientes.bind(Object(s.a)(o)),o.loadCarteraClientes=o.loadCarteraClientes.bind(Object(s.a)(o)),o.gridOptionsCarteraClientes=Object.assign({},o.gridOptions),o.valorRetencionChange=o.valorRetencionChange.bind(Object(s.a)(o)),o.valorAbonoChange=o.valorAbonoChange.bind(Object(s.a)(o)),o.setButtonAbono=o.setButtonAbono.bind(Object(s.a)(o)),o.setButtonRetencion=o.setButtonRetencion.bind(Object(s.a)(o)),o.valorDescuentoChange=o.valorDescuentoChange.bind(Object(s.a)(o)),o.setButtonDescuento=o.setButtonDescuento.bind(Object(s.a)(o)),o.setChange=o.setChange.bind(Object(s.a)(o)),o.change=o.change.bind(Object(s.a)(o)),o.abrirModal=o.abrirModal.bind(Object(s.a)(o)),o.loadConceptosCobro=o.loadConceptosCobro.bind(Object(s.a)(o)),o.gridOptionsConceptosCobro=Object.assign({},o.gridOptions),o.setButtonValorCero=o.setButtonValorCero.bind(Object(s.a)(o)),o.valorCeroChange=o.valorCeroChange.bind(Object(s.a)(o)),o.totalNeto=o.totalNeto.bind(Object(s.a)(o)),o.limpiar=o.limpiar.bind(Object(s.a)(o)),o.ocultarTabla=o.ocultarTabla.bind(Object(s.a)(o)),o.abrirModalSucursal=o.abrirModalSucursal.bind(Object(s.a)(o)),o.loadModalSucursal=o.loadModalSucursal.bind(Object(s.a)(o)),o.gridOptionsTbsucursal=Object.assign({},o.gridOptions),o.contar=0,o.selectedProveedorTable=o.selectedProveedorTable.bind(Object(s.a)(o)),o.gridOptionsTbsucursal.onSelectionChanged=o.selectedProveedorTable,o.abrirModalCheques=o.abrirModalCheques.bind(Object(s.a)(o)),o.loadModalCheques=o.loadModalCheques.bind(Object(s.a)(o)),o.gridOptionsTbcheques=Object.assign({},o.gridOptions),o.agregarCheque=o.agregarCheque.bind(Object(s.a)(o)),o.dataArray=[],o.valorChequeoChange=o.valorChequeChange.bind(Object(s.a)(o)),o.contarNumeroCheques=0,o.limpiarCheque=o.limpiarCheque.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.deleteEspecification=o.deleteEspecification.bind(Object(s.a)(o)),o.numReg=-2,o.restarChequeChange=o.restarChequeChange.bind(Object(s.a)(o)),o.arrayI=[],o.arrayC=[],o.arrayPagos=[],o.arrayCheque=[],o.guardarArrays=o.guardarArrays.bind(Object(s.a)(o)),o.successPostCountOne=o.successPostCountOne.bind(Object(s.a)(o)),o.limpiarTodo=o.limpiarTodo.bind(Object(s.a)(o)),o.gridOptionsCarteraClientes.onSelectionChanged=o.funcionVacia,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnconsultar").setClick(this.uploadCarteraClientes),this.getField("abonos").setOnChange(this.totalNeto),this.getField("retenciones").setOnChange(this.totalNeto),this.getField("descuentos").setOnChange(this.totalNeto),this.getField("conceptosCobro").setOnChange(this.totalNeto),this.getField("btncancelar").setClick(this.limpiar),this.getField("totalNeto").setOnChange(this.ocultarTabla),this.getField("btngrabar").setClick(this.abrirModalSucursal),this.getField("btncheques").setClick(this.abrirModalCheques),this.getField("btnagregarcheque").setClick(this.agregarCheque),this.getField("btncancelarcheque").setClick(this.limpiarCheque),this.getField("nit").setOnChange(this.limpiarTodo);this.generalFormat.nombre_accion="355-Retorna todos los conceptos_cobros",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.loadConceptosCobro,error:this.error_,general:this.generalFormat})}},{key:"limpiarTodo",value:function(){for(var e in this.refs)console.log("ref",e),"nit"!==e&&"sede"!==e&&"nombre_cliente"!==e&&"TbCarteraCliente"!==e&&void 0!==this.getField(e).setValue&&this.getField(e).setValue("")}},{key:"funcionVacia",value:function(){}},{key:"loadConceptosCobro",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=new Map;t.set("valor",{cellRenderer:this.setButtonValorCero,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorCeroChange,width:100,editable:!0,field:"valor"}),this.getField("TbConceptosCobro").toggle(!0),this.gridOptionsConceptosCobro.rowData=e.model,this.getField("TbConceptosCobro").initData(this.gridOptionsConceptosCobro,t),this.gridOptionsConceptosCobro.api.selectIndex(0,!0,!0)}}},{key:"setButtonValorCero",value:function(e){var t=e.data.valor,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t.length<=17?(a.textContent=t,"".formatoPrecio(e.data.valor)):(a.textContent=0,i.appendChild(a),i)}},{key:"valorCeroChange",value:function(e){var t=this.getField("TbConceptosCobro").cellValid(e.oldValue,e.newValue,"^[0-9_-]");if(0!==e.oldValue&&void 0!==e.oldValue){var i=e.oldValue;this.getField("conceptosCobro").setValue(parseInt(this.getField("conceptosCobro").getValue())-parseInt(i))}if(t)if(e.newValue.length<=17){var a=e.newValue;""!==this.getField("conceptosCobro").getValue()?this.getField("conceptosCobro").setValue(parseInt(this.getField("conceptosCobro").getValue())+parseInt(a)):this.getField("conceptosCobro").setValue(a)}else e.newValue.length>17&&(e.data.valor=0,this.alertGeneral.toggle(!0,"Valor NO puede ser mayor a 17 caracteres","error"));else if(0===e.newValue&&t&&e.oldValue>0){var o=e.oldValue;""!==this.getField("conceptosCobro").getValue()?this.getField("conceptosCobro").setValue(parseInt(this.getField("conceptosCobro").getValue())-parseInt(o)):this.getField("conceptosCobro").setValue(o)}}},{key:"uploadCarteraClientes",value:function(){if(""!==this.getField("nit").getValue()&&" "!==this.getField("nit").getValue()){this.getField("nit").setError(!1,"");var e={value:this.getField("nit").getValue()};this.generalFormat.nombre_accion="355-Retorna_cartera_clientes_que_contenga_nitysaldo_distinto_0",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.loadCarteraClientes,error:this.error_,general:this.generalFormat})}else this.getField("nit").setError(!0,"Este campo es requerido")}},{key:"loadCarteraClientes",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=new Map;t.set("abono",{cellRenderer:this.setButtonAbono,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorAbonoChange,width:100,editable:!0,field:"abono"}),t.set("retencion",{cellRenderer:this.setButtonRetencion,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorRetencionChange,width:100,editable:!0,field:"retencion"}),t.set("descuento",{cellRenderer:this.setButtonDescuento,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorDescuentoChange,width:100,editable:!0,field:"descuento"}),t.set("accion",{cellRenderer:this.setChange,field:"Acci\xf3n"}),t.set("saldo",{cellRenderer:function(e){return"".formatoPrecio(e.data.saldo)},cellStyle:{textAlign:"right",field:"saldo"}}),t.set("valor",{cellRenderer:function(e){return"".formatoPrecio(e.data.valor)},cellStyle:{textAlign:"right",field:"valor"}}),this.getField("TbCarteraCliente").toggle(!0),this.gridOptionsCarteraClientes.rowData=e.model,this.getField("TbCarteraCliente").initData(this.gridOptionsCarteraClientes,t),this.gridOptionsCarteraClientes.api.selectIndex(0,!0,!0)}}},{key:"setButtonRetencion",value:function(e){var t=e.data.retencion,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t.length<=15&&t>0?(a.textContent=t,"".formatoPrecio(e.data.retencion)):(a.textContent=0,i.appendChild(a),i)}},{key:"valorRetencionChange",value:function(e){var t=this.getField("TbCarteraCliente").cellValid(e.oldValue,e.newValue,"^[0-9]");if(e.newValue<0&&(e.data.retencion=0),e.newValue>0&&void 0===e.oldValue||e.newValue>0&&e.oldValue>=0){if(t){if((void 0===e.data.descuento&&void 0===e.data.abono&&0===e.oldValue&&e.newValue.length<=15||"0"===e.data.descuento&&"0"===e.data.abono&&e.newValue.length<=15||void 0===e.data.descuento&&"0"===e.data.abono&&e.newValue.length<=15||"0"===e.data.descuento&&void 0===e.data.abono&&e.newValue.length<=15||void 0===e.data.descuento&&void 0===e.data.abono&&"0"===e.oldValue&&e.newValue.length<=15)&&(this.contar=this.contar+1,this.getField("totalNumDocumentos").setValue(this.contar)),0!==e.oldValue&&void 0!==e.oldValue){var i=e.oldValue;this.getField("retenciones").setValue(parseInt(this.getField("retenciones").getValue())-parseInt(i))}if(e.newValue.length<=15){var a=e.newValue;""!==this.getField("retenciones").getValue()?this.getField("retenciones").setValue(parseInt(this.getField("retenciones").getValue())+parseInt(a)):this.getField("retenciones").setValue(a)}else e.newValue.length>15&&(e.data.retencion=0,("0"===e.data.descuento&&"0"===e.data.abono||void 0===e.data.descuento&&void 0===e.data.abono&&e.oldValue>"0"||void 0===e.data.descuento&&"0"===e.data.abono||"0"===e.data.descuento&&void 0===e.data.abono&&e.oldValue>"0")&&(this.contar=this.contar-1,this.getField("totalNumDocumentos").setValue(this.contar)),this.alertGeneral.toggle(!0,"Retenciones NO puede ser mayor a 15 caracteres","error"))}}else if("0"===e.newValue&&t&&(("0"===e.data.descuento&&"0"===e.data.abono||void 0===e.data.descuento&&void 0===e.data.abono&&e.oldValue>"0"||void 0===e.data.descuento&&"0"===e.data.abono||"0"===e.data.descuento&&void 0===e.data.abono&&e.oldValue>"0")&&(this.contar=this.contar-1,this.getField("totalNumDocumentos").setValue(this.contar)),e.oldValue>0)){var o=e.oldValue;""!==this.getField("retenciones").getValue()?this.getField("retenciones").setValue(parseInt(this.getField("retenciones").getValue())-parseInt(o)):this.getField("retenciones").setValue(o)}}},{key:"setButtonAbono",value:function(e){var t=e.data.abono,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t<=e.data.saldo?(a.textContent=t,"".formatoPrecio(e.data.abono)):(a.textContent=0,i.appendChild(a),i)}},{key:"valorAbonoChange",value:function(e){var t=this.getField("TbCarteraCliente").cellValid(e.oldValue,e.newValue,"^[0-9]");if("0"!==e.newValue){if(t){if((void 0===e.data.descuento&&0===e.data.retencion&&void 0===e.oldValue&&e.newValue<=e.data.saldo||"0"===e.data.descuento&&"0"===e.data.retencion&&"0"===e.oldValue&&e.newValue<=e.data.saldo||void 0===e.data.descuento&&0===e.data.retencion&&"0"===e.oldValue&&e.newValue<=e.data.saldo||void 0===e.data.descuento&&"0"===e.data.retencion&&"0"===e.oldValue&&e.newValue<=e.data.saldo||void 0===e.data.descuento&&0===e.data.retencion&&0===e.oldValue&&e.newValue<=e.data.saldo)&&(this.contar=this.contar+1,this.getField("totalNumDocumentos").setValue(this.contar)),0!==e.oldValue&&void 0!==e.oldValue){var i=e.oldValue;this.getField("abonos").setValue(parseInt(this.getField("abonos").getValue())-parseInt(i))}if(e.newValue<=e.data.saldo){var a=e.newValue;""!==this.getField("abonos").getValue()?this.getField("abonos").setValue(parseInt(this.getField("abonos").getValue())+parseInt(a)):this.getField("abonos").setValue(a)}else e.newValue>e.data.saldo&&(e.data.abono=0,this.alertGeneral.toggle(!0,"Abono NO puede ser mayor a saldo","error"))}}else if("0"===e.newValue&&t&&((void 0===e.data.descuento&&0===e.data.retencion&&e.oldValue>"0"||"0"===e.data.descuento&&"0"===e.data.retencion&&e.oldValue>"0"||void 0===e.data.descuento&&"0"===e.data.retencion&&e.oldValue>"0"||void 0===e.data.descuento&&"0"===e.data.retencion&&e.oldValue>void 0)&&(this.contar=this.contar-1,this.getField("totalNumDocumentos").setValue(this.contar)),e.oldValue>0)){var o=e.oldValue;""!==this.getField("abonos").getValue()?this.getField("abonos").setValue(parseInt(this.getField("abonos").getValue())-parseInt(o)):this.getField("abonos").setValue(o)}}},{key:"setButtonDescuento",value:function(e){var t=e.data.descuento,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t&&t.length<=13&&t>0?(a.textContent=t,"".formatoPrecio(e.data.descuento)):(a.textContent=0,i.appendChild(a),i)}},{key:"valorDescuentoChange",value:function(e){var t=this.getField("TbCarteraCliente").cellValid(e.oldValue,e.newValue,"^[0-9]");if(e.newValue<0&&(e.data.descuento=0),e.newValue>0&&void 0===e.oldValue||e.newValue>0&&e.oldValue>=0){if(t){if((void 0===e.data.abono&&0===e.data.retencion&&void 0===e.oldValue&&e.newValue.length<=13||"0"===e.data.abono&&"0"===e.data.retencion&&"0"===e.oldValue&&e.newValue.length<=13||void 0===e.data.abono&&0===e.data.retencion&&"0"===e.oldValue&&e.newValue.length<=13||void 0===e.data.abono&&"0"===e.data.retencion&&"0"===e.oldValue&&e.newValue.length<=13)&&(this.contar=this.contar+1,this.getField("totalNumDocumentos").setValue(this.contar)),0!==e.oldValue&&void 0!==e.oldValue){var i=e.oldValue;this.getField("descuentos").setValue(parseInt(this.getField("descuentos").getValue())-parseInt(i))}if(e.newValue.length<=13){var a=e.newValue;""!==this.getField("descuentos").getValue()?this.getField("descuentos").setValue(parseInt(this.getField("descuentos").getValue())+parseInt(a)):this.getField("descuentos").setValue(a)}else e.newValue.length>13&&(e.data.descuento=0,(void 0===e.data.abono&&0===e.data.retencion&&e.oldValue>"0"||"0"===e.data.abono&&"0"===e.data.retencion&&e.oldValue>"0"||void 0===e.data.abono&&"0"===e.data.retencion&&e.oldValue>"0")&&(this.contar=this.contar-1,this.getField("totalNumDocumentos").setValue(this.contar)),this.alertGeneral.toggle(!0,"Descuentos NO puede ser mayor a 13 caracteres","error"))}}else if("0"===e.newValue&&t&&((void 0===e.data.abono&&0===e.data.retencion&&e.oldValue>"0"||"0"===e.data.abono&&"0"===e.data.retencion&&e.oldValue>"0"||void 0===e.data.abono&&"0"===e.data.retencion&&e.oldValue>"0")&&(this.contar=this.contar-1,this.getField("totalNumDocumentos").setValue(this.contar)),e.oldValue>0)){var o=e.oldValue;""!==this.getField("descuentos").getValue()?this.getField("descuentos").setValue(parseInt(this.getField("descuentos").getValue())-parseInt(o)):this.getField("descuentos").setValue(o)}}},{key:"setChange",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.change(e.data.id)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Ver detalle"),i}},{key:"change",value:function(e){var t={value:e};this.generalFormat.nombre_accion="355-Retorna_el_texto_de_cartera_clientes_que_contenga_el_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.abrirModal,error:this.error_,general:this.generalFormat})}},{key:"abrirModal",value:function(e){var t=this;console.log("data",e),200===e.estado_p&&void 0!==e.model&&e.model.length>0&&(this.getField("modal_cartera_texto").handleClickOpen(),e.model.forEach((function(e,i){0===i&&t.getField("texto").setValue(e.texto),1===i&&console.log("numero",e.numero),2===i&&t.getField("fecha").setValue(e.fecha),3===i&&t.getField("valor").setValue(e.valor),4===i&&t.getField("saldo").setValue(e.saldo)})))}},{key:"totalNeto",value:function(){var e=0,t=0,i=0,a=0;""!==this.getField("abonos").getValue()&&(e=this.getField("abonos").getValue()),""!==this.getField("descuentos").getValue()&&(t=this.getField("descuentos").getValue()),""!==this.getField("retenciones").getValue()&&(i=this.getField("retenciones").getValue()),""!==this.getField("conceptosCobro").getValue()&&(a=this.getField("conceptosCobro").getValue()),this.getField("totalNeto").setValue(e-t-i-a)}},{key:"limpiar",value:function(){this.getField("abonos").setValue(""),this.getField("retenciones").setValue(""),this.getField("descuentos").setValue(""),this.getField("totalNeto").setValue(""),this.getField("nit").setValue(""),this.getField("sede").setValue(""),this.getField("nombre_cliente").setValue(""),this.getField("totalNumDocumentos").setValue(""),this.getField("abonar").setValue(""),this.getField("observaciones").setValue(""),this.getField("conceptosCobro").setValue(""),this.getField("totalChequesValor").setValue(""),this.getField("totalNumCheques").setValue("")}},{key:"ocultarTabla",value:function(){var e=this;""!==this.getField("totalNeto").getValue()?this.getField("totalNeto").setError(!1,""):(this.getField("TbCarteraCliente").toggle(!1),this.contar=0,this.gridOptionsConceptosCobro.rowData.forEach((function(t){void 0!==t.valor&&(t.valor=0,e.initForm())})),this.dataArray=[],this.contarNumeroCheques=0,this.getField("Tbcheques").toggle(!1),this.getField("totalNumCheques").setValue(0))}},{key:"abrirModalSucursal",value:function(){if(this.getField("nit").valid()&&" "!==this.getField("nit").getValue()&&""!==this.getField("sede").getValue()&&" "!==this.getField("sede").getValue()&&""!==this.getField("nombre_cliente").getValue()&&" "!==this.getField("nombre_cliente").getValue()&&""!==this.getField("abonos").getValue()&&" "!==this.getField("abonos").getValue()&&""!==this.getField("retenciones").getValue()&&" "!==this.getField("retenciones").getValue()&&""!==this.getField("descuentos").getValue()&&" "!==this.getField("descuentos").getValue()&&""!==this.getField("totalNeto").getValue()&&" "!==this.getField("totalNeto").getValue()&&""!==this.getField("abonar").getValue()&&" "!==this.getField("abonar").getValue()&&""!==this.getField("totalNumDocumentos").getValue()&&" "!==this.getField("totalNumDocumentos").getValue()&&""!==this.getField("conceptosCobro").getValue()&&" "!==this.getField("conceptosCobro").getValue()&&""!==this.getField("observaciones").getValue()&&" "!==this.getField("observaciones").getValue()&&""!==this.getField("totalNumCheques").getValue()&&" "!==this.getField("totalNumCheques").getValue()&&""!==this.getField("totalChequesValor").getValue()&&" "!==this.getField("totalChequesValor").getValue()){this.getField("nit").setError(!1,"");this.generalFormat.nombre_accion="355-Retorna_datos_la_sucursal_presente_en_sucursal_configuracion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.loadModalSucursal,error:this.error_,general:this.generalFormat})}else this.getField("nit").valid()&&""===this.getField("nit").getValue()&&this.getField("nit").setError(!0,"Este campo es requerido"),this.getField("sede").valid()&&""===this.getField("sede").getValue()&&this.getField("sede").setError(!0,"Este campo es requerido"),this.getField("nombre_cliente").valid()&&""===this.getField("nombre_cliente").getValue()&&this.getField("nombre_cliente").setError(!0,"Este campo es requerido"),this.getField("abonos").valid()&&""===this.getField("abonos").getValue()&&this.getField("abonos").setError(!0,"Este campo es requerido"),this.getField("retenciones").valid()&&""===this.getField("retenciones").getValue()&&this.getField("retenciones").setError(!0,"Este campo es requerido"),this.getField("descuentos").valid()&&""===this.getField("descuentos").getValue()&&this.getField("descuentos").setError(!0,"Este campo es requerido"),this.getField("totalNeto").valid()&&""===this.getField("totalNeto").getValue()&&this.getField("totalNeto").setError(!0,"Este campo es requerido"),this.getField("abonar").valid()&&""===this.getField("abonar").getValue()&&this.getField("abonar").setError(!0,"Este campo es requerido"),this.getField("observaciones").valid()&&""===this.getField("observaciones").getValue()&&this.getField("observaciones").setError(!0,"Este campo es requerido"),this.getField("totalNumDocumentos").valid()&&""===this.getField("totalNumDocumentos").getValue()&&this.getField("totalNumDocumentos").setError(!0,"Este campo es requerido"),this.getField("conceptosCobro").valid()&&""===this.getField("conceptosCobro").getValue()&&this.getField("conceptosCobro").setError(!0,"Este campo es requerido"),this.getField("totalNumCheques").valid()&&""===this.getField("totalNumCheques").getValue()&&this.getField("totalNumCheques").setError(!0,"Este campo es requerido"),this.getField("totalChequesValor").valid()&&""===this.getField("totalChequesValor").getValue()&&this.getField("totalChequesValor").setError(!0,"Este campo es requerido")}},{key:"loadModalSucursal",value:function(e){200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("modal_sucursal").handleClickOpen(),this.getField("Tbsucursal").toggle(!0),this.gridOptionsTbsucursal.rowData=e.model,this.getField("Tbsucursal").initData(this.gridOptionsTbsucursal,this.configCell)):this.getField("Tbsucursal").toggle(!1)}},{key:"selectedProveedorTable",value:function(e){var t=this;if(void 0===e||void 0!==e&&200===e.estado_p||405===e.estado_p){var i=this.gridOptionsTbsucursal.api.getSelectedRows();if(void 0!==i&&i.length&&i.length>0&&void 0!==i[0].id){var a={cuenta:this.getField("abonar").getValue(),observaciones:this.getField("observaciones").getValue(),total_neto:this.getField("totalNeto").getValue(),total_abono:this.getField("abonos").getValue(),total_retencion:this.getField("retenciones").getValue(),total_descuentos:this.getField("descuentos").getValue(),nit:this.getField("nit").getValue(),sede:this.getField("sede").getValue(),sucursal:i[0].codigo_sucursal};this.arrayPagos.push(a),this.gridOptionsCarteraClientes.rowData.forEach((function(e){if(void 0!==e.abono||void 0!==e.descuento||0!==parseInt(e.retencion)){void 0===e.abono&&(e.abono=0),void 0===e.descuento&&(e.descuento=0);var i={id:e.id,numero:e.numero,sucursal:e.codigo_sucursal,contable:e.contable,abono:parseInt(e.abono),retencion:parseInt(e.retencion),descuentos:parseInt(e.descuento)};t.arrayI.push(i)}})),this.gridOptionsConceptosCobro.rowData.forEach((function(e){if(void 0!==e.valor){var i={cuenta:e.codigo_cuenta,valor:parseInt(e.valor)};t.arrayC.push(i)}})),this.gridOptionsTbcheques.rowData.forEach((function(e){if(void 0!==e.banco){var i={valor:parseInt(e.valor),banco:e.banco,banco_id:e.banco_id,fecha_cheque:e.fecha,cuenta:e.cuenta,cheque:e.numero,consignar:e.fecha,detalle:e.detalle};t.arrayCheque.push(i)}}))}this.guardarArrays()}}},{key:"guardarArrays",value:function(){var e={pagosi:this.arrayI,pagosc:this.arrayC,pagos:this.arrayPagos,cheques:this.arrayCheque};this.generalFormat.nombre_accion="355-Permite_guardar_Arrays_RecibosCaja",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successPostCountOne,error:this.error_,general:this.generalFormat})}},{key:"successPostCountOne",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.getField("modal_sucursal").handleClose(),this.limpiar())}},{key:"abrirModalCheques",value:function(){this.loadModalCheques()}},{key:"loadModalCheques",value:function(e){this.getField("modalCheques").handleClickOpen();var t=new Map;t.set("banco_id",{cellRenderer:this.setButtonBanco,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorBancoChange,width:100,editable:!0,field:"valor"}),t.set("banco",{cellRenderer:this.setButtonBanco,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorBancoChange,width:100,editable:!0,field:"valor"}),t.set("fecha",{cellRenderer:this.setButtonBanco,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorBancoChange,width:100,editable:!0,field:"valor"}),t.set("cuenta",{cellRenderer:this.setButtonBanco,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorBancoChange,width:100,editable:!0,field:"valor"}),t.set("numero",{cellRenderer:this.setButtonBanco,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorBancoChange,width:100,editable:!0,field:"valor"}),t.set("valor",{cellRenderer:this.setButtonBanco,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorBancoChange,width:100,editable:!0,field:"valor"}),t.set("detalle",{cellRenderer:this.setButtonBanco,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.valorBancoChange,width:100,editable:!0,field:"valor"}),t.set("accion",{cellRenderer:this.setButtonDelete,field:"Acci\xf3n"}),this.getField("Tbcheques").toggle(!0),this.gridOptionsTbcheques.rowData=e,this.getField("Tbcheques").initData(this.gridOptionsTbcheques,t),this.agregarCheque()}},{key:"agregarCheque",value:function(){this.numReg+=1;var e={numregisto:this.numReg,banco_id:this.getField("banco_id").getValue(),banco:this.getField("codigo_banco").getValue(),fecha:this.getField("fechaCheque").getValue(),cuenta:this.getField("numCuenta").getValue(),numero:this.getField("numeroCheque").getValue(),valor:this.getField("valorCheque").getValue(),detalle:this.getField("detalleCheque").getValue()};if(""!==e.banco){this.dataArray.push(e);var t=new Map;t.set("accion",{cellRenderer:this.setButtonDelete,field:"Acci\xf3n"}),this.gridOptionsTbcheques.rowData=this.dataArray,this.getField("Tbcheques").initData(this.gridOptionsTbcheques,t),this.valorChequeChange(e)}else if(""===e.banco){var i=new Map;i.set("accion",{cellRenderer:this.setButtonDelete,field:"Acci\xf3n"}),this.gridOptionsTbcheques.rowData=this.dataArray,this.getField("Tbcheques").initData(this.gridOptionsTbcheques,i)}this.getField("codigo_banco").setValue(""),this.getField("nombre_banco").setValue(""),this.getField("banco_id").setValue(""),this.getField("numCuenta").setValue(""),this.getField("fechaCheque").setValue(""),this.getField("numeroCheque").setValue(""),this.getField("valorCheque").setValue(""),this.getField("detalleCheque").setValue("")}},{key:"valorChequeChange",value:function(e){if(""!==e.valor){""!==e.banco&&(this.contarNumeroCheques=this.contarNumeroCheques+1,this.getField("totalNumCheques").setValue(this.contarNumeroCheques));var t=e.valor;""!==this.getField("totalChequesValor").getValue()?this.getField("totalChequesValor").setValue(parseInt(this.getField("totalChequesValor").getValue())+parseInt(t)):this.getField("totalChequesValor").setValue(t)}}},{key:"limpiarCheque",value:function(){this.getField("codigo_banco").setValue(""),this.getField("nombre_banco").setValue(""),this.getField("banco_id").setValue(""),this.getField("numCuenta").setValue(""),this.getField("fechaCheque").setValue(""),this.getField("numeroCheque").setValue(""),this.getField("valorCheque").setValue(""),this.getField("detalleCheque").setValue("")}},{key:"setButtonDelete",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.deleteEspecification(e)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Eliminar"),i}},{key:"deleteEspecification",value:function(e){var t=e.data.numregisto,i=e.data.valor;""!==this.getField("totalChequesValor").getValue()&&this.getField("totalChequesValor").setValue(parseInt(this.getField("totalChequesValor").getValue())-parseInt(i));var a=this.dataArray,o=[];a.forEach((function(e,i,a){parseInt(t)!==parseInt(e.numregisto)&&o.push(e)})),this.dataArray=o,this.getField("fieldAlert").toggle(!0,"Informaci\xf3n eliminada exitosamente","success");var s=new Map;s.set("accion",{cellRenderer:this.setButtonDelete,field:"Acci\xf3n"}),this.gridOptionsTbcheques.rowData=this.dataArray,this.getField("Tbcheques").initData(this.gridOptionsTbcheques,s),this.restarChequeChange()}},{key:"restarChequeChange",value:function(){this.contarNumeroCheques=this.contarNumeroCheques-1,this.getField("totalNumCheques").setValue(this.contarNumeroCheques)}}]),i}(d.a.form);d.a.addController("recibosCaja",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsUbicaciones=Object.assign({},o.gridOptions),o.traerOperarioOrigen=o.traerOperarioOrigen.bind(Object(s.a)(o)),o.successOperariosOrigen=o.successOperariosOrigen.bind(Object(s.a)(o)),o.ningunoSelect="",o.traerZonasOperario=o.traerZonasOperario.bind(Object(s.a)(o)),o.successZonasOperario=o.successZonasOperario.bind(Object(s.a)(o)),o.reclasificarOperario=o.reclasificarOperario.bind(Object(s.a)(o)),o.successReclasificarOperario=o.successReclasificarOperario.bind(Object(s.a)(o)),o.successTraerUbicaciones=o.successTraerUbicaciones.bind(Object(s.a)(o)),o.origenOperario=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("wms_turnos_horarios_id").setOnChange(this.traerOperarioOrigen),this.getField("origen_operario").setOnChange(this.traerZonasOperario),this.getField("reclasificar_operario").setClick(this.reclasificarOperario)}},{key:"traerOperarioOrigen",value:function(){if(this.getField("wms_turnos_horarios_id").valid()){var e={value:this.getField("wms_turnos_horarios_id").getValue()};this.generalFormat.nombre_accion="373-Servicio_reclasificacion_operarios_conteo_traeroperarios_origen",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successOperariosOrigen,error:this.error_,general:this.generalFormat})}else this.getField("origen_operario").setValue(this.ningunoSelect),this.getField("ubicaciones_oprerario_origen").toggle(!1)}},{key:"successOperariosOrigen",value:function(e){if(200===e.estado_p&&e.model&&e.model.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.wms_operario_id,i.text=e.noperario,i.campos_cambian={operario:e.noperario},t.push(i)})),this.getField("origen_operario").setOptions(t),""===this.ningunoSelect&&(this.getField("origen_operario").setValue(this.ningunoSelect),this.getField("ubicaciones_oprerario_origen").toggle(!1))}else{this.getField("origen_operario").setValue(this.ningunoSelect);this.getField("origen_operario").setOptions([{text:"Ninguno",value:" "}]),this.getField("ubicaciones_oprerario_origen").toggle(!1)}}},{key:"traerZonasOperario",value:function(){if(""!==this.getField("origen_operario").getValue()){var e={value:parseInt(this.getField("origen_operario").getValue())};this.generalFormat.nombre_accion="373-Servicio_reclasificacion_operarios_conteo_traer_zonas_operario",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successZonasOperario,error:this.error_,general:this.generalFormat});var t={value:parseInt(this.getField("origen_operario").getValue())};this.generalFormat.nombre_accion="373-Servicio_reclasificacion_operarios_conteo_ubicaciones_operario",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTraerUbicaciones,error:this.error_,general:this.generalFormat})}}},{key:"successZonasOperario",value:function(e){if(200===e.estado_p&&e.model&&e.model.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.wms_nuevo_zona_id,i.text=e.zona,i.campos_cambian={zona:e.zona},t.push(i)})),this.getField("zona_operario").setOptions(t),""===this.ningunoSelect&&this.getField("zona_operario").setValue(this.ningunoSelect)}else{console.log("entro al else"),this.getField("zona_operario").setValue(this.ningunoSelect);this.getField("zona_operario").setOptions([{text:"Ninguno",value:" "}])}}},{key:"reclasificarOperario",value:function(){if(this.getField("wms_turnos_horarios_id").valid()&&this.getField("origen_operario").valid()){var e={operario_origen:parseInt(this.getField("origen_operario").getValue()),operario_destino:parseInt(this.getField("operario_destino_id").getValue()),wms_turnos_horarios_id:parseInt(this.getField("wms_turnos_horarios_id").getValue()),wms_nuevo_zona_id:parseInt(this.getField("zona_operario").getValue())};this.generalFormat.nombre_accion="373-Servicio_reclasificacion_operarios_conteo_recalsificar",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successReclasificarOperario,error:this.error_,general:this.generalFormat})}}},{key:"successReclasificarOperario",value:function(e){if(200===e.estado_p){this.origenOperario=parseInt(this.getField("origen_operario").getValue());var t={value:this.origenOperario};this.generalFormat.nombre_accion="373-Servicio_reclasificacion_operarios_conteo_ubicaciones_operario",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTraerUbicaciones,error:this.error_,general:this.generalFormat})}}},{key:"successTraerUbicaciones",value:function(e){200===e.estado_p&&e.model&&e.model.length>0?(this.gridOptionsUbicaciones.rowData=e.model,this.getField("ubicaciones_oprerario_origen").initData(this.gridOptionsUbicaciones)):this.getField("ubicaciones_oprerario_origen").toggle(!1)}}]),i}(d.a.form);d.a.addController("reclasifica_operario",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.cleanCampos=o.cleanCampos.bind(Object(s.a)(o)),o.habilitarCampos=o.habilitarCampos.bind(Object(s.a)(o)),o.crearFacturaDocumental=o.crearFacturaDocumental.bind(Object(s.a)(o)),o.successCrearFacturaDocumental=o.successCrearFacturaDocumental.bind(Object(s.a)(o)),o.retornaSedesNit=o.retornaSedesNit.bind(Object(s.a)(o)),o.successRetornaSedeNit=o.successRetornaSedeNit.bind(Object(s.a)(o)),o.setearCamposRelacionados=o.setearCamposRelacionados.bind(Object(s.a)(o)),o.setValueSelect="",o.sedeActual=0,o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Reemplazo De Facturas, @version: 1.01.0018, @author: Juan David Nieto"),this.getField("codigo_causal").setDisabled(!0),this.getField("descripcion_causal").setDisabled(!0),this.getField("codigo_responsable").setDisabled(!0),this.getField("nombre_responsable").setDisabled(!0),this.getField("observacion_devolucion").setDisabled(!0),this.getField("observacion_factura").setDisabled(!0),this.getField("usuario").setDisabled(!0),this.getField("nombre").setDisabled(!0),this.getField("boton_grabar").setDisabled(!0),this.getField("factura_origen").setOnChange(this.cleanCampos),this.getField("nit").setOnChange(this.cleanCampos),this.getField("continuar").setClick(this.habilitarCampos),this.getField("boton_grabar").setClick(this.crearFacturaDocumental),this.getField("nombre_cliente").setOnChange(this.retornaSedesNit),this.getField("boton_cargar_factura").setSuccess(this.setearCamposRelacionados)}},{key:"setearCamposRelacionados",value:function(e){200===e.estado_p&&(this.getField("nit_cliente").setValue(e.model[0].nit),this.getField("nombre_cliente").setValue(e.model[0].nproveedor),this.getField("sede").setValue(e.model[0].sede),this.getField("fecha").setValue(e.model[0].fecha),this.getField("valor").setValue(e.model[0].valor),this.getField("codigo_sucursal").setValue(e.model[0].codigo_sucursal),this.getField("saldo").setValue(e.model[0].saldo),this.getField("nproveedor").setValue(e.model[0].nproveedor))}},{key:"cleanCampos",value:function(){this.getField("codigo_causal").setDisabled(!0),this.getField("descripcion_causal").setDisabled(!0),this.getField("codigo_responsable").setDisabled(!0),this.getField("nombre_responsable").setDisabled(!0),this.getField("observacion_devolucion").setDisabled(!0),this.getField("observacion_factura").setDisabled(!0),this.getField("usuario").setDisabled(!0),this.getField("nombre").setDisabled(!0),this.getField("boton_grabar").setDisabled(!0),this.getField("codigo_causal").setValue(""),this.getField("descripcion_causal").setValue(""),this.getField("codigo_responsable").setValue(""),this.getField("nombre_responsable").setValue(""),this.getField("observacion_devolucion").setValue(""),this.getField("observacion_factura").setValue(""),this.getField("usuario").setValue(""),this.getField("nombre").setValue(""),this.getField("sede").setValue(""),this.getField("nit_cliente").setValue(""),this.getField("nombre_cliente").setValue(""),this.getField("nproveedor").setValue(""),this.getField("fecha").setValue(""),this.getField("valor").setValue(""),this.getField("codigo_sucursal").setValue(""),this.getField("saldo").setValue(""),this.getField("nproveedor").setError(!1,"* Este campo es requerido."),this.getField("fecha").setError(!1,"* Este campo es requerido."),this.getField("valor").setError(!1,"* Este campo es requerido."),this.getField("codigo_sucursal").setError(!1,"* Este campo es requerido."),this.getField("saldo").setError(!1,"* Este campo es requerido.");this.getField("sede_final_cliente").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}])}},{key:"habilitarCampos",value:function(){if(this.getField("factura_origen").valid()&&this.getField("nit").valid()&&this.getField("sede").valid()&&this.getField("nproveedor").valid()&&this.getField("fecha").valid()&&this.getField("valor").valid()&&this.getField("codigo_sucursal").valid()&&this.getField("saldo").valid()){var e=this.getField("valor").getValue()-this.getField("saldo").getValue();this.getField("valor").getValue()===this.getField("saldo").getValue()||e<=10&&e>=-10?(this.alertGeneral.toggle(!1,"Los campos Valor y Saldo Cartera deben ser Iguales o diferir por 10 pesos.","error"),this.getField("valor").setError(!1,"* Los campos Valor y Saldo Cartera deben ser Iguales o diferir por 10 pesos."),this.getField("saldo").setError(!1,"* Los campos Valor y Saldo Cartera deben ser Iguales o diferir por 10 pesos."),this.getField("codigo_causal").setDisabled(!1),this.getField("descripcion_causal").setDisabled(!1),this.getField("codigo_responsable").setDisabled(!1),this.getField("nombre_responsable").setDisabled(!1),this.getField("observacion_devolucion").setDisabled(!1),this.getField("observacion_factura").setDisabled(!1),this.getField("usuario").setDisabled(!1),this.getField("nombre").setDisabled(!1),this.getField("boton_grabar").setDisabled(!1)):(this.alertGeneral.toggle(!0,"Los campos Valor y Saldo Cartera deben ser Iguales o diferir por 10 pesos.","error"),this.getField("valor").setError(!0,"* Los campos Valor y Saldo Cartera deben ser Iguales o diferir por 10 pesos."),this.getField("saldo").setError(!0,"* Los campos Valor y Saldo Cartera deben ser Iguales o diferir por 10 pesos."))}}},{key:"retornaSedesNit",value:function(){if(""!==this.getField("nombre_cliente").getValue()){var e={nit:this.getField("nit_cliente").getValue(),estado:"A"};this.generalFormat.nombre_accion="374-teceros_nit_exacto_sedes_todas_filter_estado",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successRetornaSedeNit,error:this.error_,general:this.generalFormat})}}},{key:"successRetornaSedeNit",value:function(e){if(200===e.estado_p){this.sedeActual=this.getField("sede").getValue();var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.sede,i.text=e.sede,i.campos_cambian={},t.push(i)})),this.getField("sede_final_cliente").setOptions(t),this.getField("sede_final_cliente").setValue(this.sedeActual)}}},{key:"crearFacturaDocumental",value:function(){if(this.getField("codigo_causal").valid()&&this.getField("codigo_sucursal").valid()&&this.getField("factura_origen").valid()&&this.getField("codigo_responsable").valid()&&this.getField("observacion_devolucion").valid()&&this.getField("observacion_factura").valid()&&this.getField("usuario").valid()&&this.getField("sede_final_cliente").valid()){var e={factura_origen:this.getField("factura_origen").getValue(),codigo_sucursal:this.getField("codigo_sucursal").getValue(),observacion_devolucion:this.getField("observacion_devolucion").getValue(),observacion_factura:this.getField("observacion_factura").getValue(),codigo_causal:this.getField("codigo_causal").getValue(),codigo_responsable:this.getField("codigo_responsable").getValue(),usuario:this.getField("usuario").getValue(),sede_final_cliente:this.getField("sede_final_cliente").getValue()};this.generalFormat.nombre_accion="374-Permite_crear_una_factura_documental",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCrearFacturaDocumental,error:this.error_,general:this.generalFormat})}}},{key:"successCrearFacturaDocumental",value:function(e){if(200===e.estado_p){this.getField("codigo_causal").setDisabled(!0),this.getField("descripcion_causal").setDisabled(!0),this.getField("codigo_responsable").setDisabled(!0),this.getField("nombre_responsable").setDisabled(!0),this.getField("observacion_devolucion").setDisabled(!0),this.getField("observacion_factura").setDisabled(!0),this.getField("usuario").setDisabled(!0),this.getField("nombre").setDisabled(!0),this.getField("boton_grabar").setDisabled(!0),this.getField("codigo_causal").setValue(""),this.getField("descripcion_causal").setValue(""),this.getField("codigo_responsable").setValue(""),this.getField("nombre_responsable").setValue(""),this.getField("observacion_devolucion").setValue(""),this.getField("observacion_factura").setValue(""),this.getField("usuario").setValue(""),this.getField("nombre").setValue(""),this.getField("factura_origen").setValue(""),this.getField("nit").setValue(""),this.getField("sede").setValue(""),this.getField("nproveedor").setValue(""),this.getField("fecha").setValue(""),this.getField("valor").setValue(""),this.getField("codigo_sucursal").setValue(""),this.getField("saldo").setValue(""),this.getField("nombre_cliente").setValue(""),this.getField("nit_cliente").setValue("");this.getField("sede_final_cliente").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}])}}}]),i}(d.a.form);d.a.addController("reemplazo_facturas",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successTablaItemFichas=o.successTablaItemFichas.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.deleteEspecification=o.deleteEspecification.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.confirmDeleteCustom=o.confirmDeleteCustom.bind(Object(s.a)(o)),o.tamanoDatos=0,o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.grabarItem=o.grabarItem.bind(Object(s.a)(o)),o.grabarTodo=o.grabarTodo.bind(Object(s.a)(o)),o.successGrabarItem=o.successGrabarItem.bind(Object(s.a)(o)),o.formato=o.formato.bind(Object(s.a)(o)),o.successDatosFicha=o.successDatosFicha.bind(Object(s.a)(o)),o.observacion="",o.etapa_id=0,o.abastecimiento="",o.id_delete=0,o.productoAveriado=o.productoAveriado.bind(Object(s.a)(o)),o.confirmProductoAveriado=o.confirmProductoAveriado.bind(Object(s.a)(o)),o.traerBodegas=o.traerBodegas.bind(Object(s.a)(o)),o.successTraerBodega=o.successTraerBodega.bind(Object(s.a)(o)),o.valueChangeOperario=o.valueChangeOperario.bind(Object(s.a)(o)),o.limpiarCampos=o.limpiarCampos.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="443-servicio_reformula_ajustes_traer_datos_fichas",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successDatosFicha,error:this.error_,general:this.generalFormat});var t={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="443-servicio_reformula_ajustes_traer_porid_prod_idficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat,showMessage:!1}),this.getField("btnAgragarAjuste").setClick(this.grabarItem),this.getField("btnGrabarAjuste").setClick(this.grabarTodo),this.getField("btnProductoAveriado").setClick(this.productoAveriado),this.getField("nombre").setOnChange(this.traerBodegas)}},{key:"successDatosFicha",value:function(e){var t=[];200===e.estado_p&&void 0!==e.model&&e.model.length>0?(this.getField("listaAjustes").setVisible(!0),t.push(e.data[0]),this.getField("listaAjustes").setItemsFichas(t)):this.getField("listaAjustes").setVisible(!1)}},{key:"formato",value:function(e){return"".formatoPrecio(e.data.cantidad)}},{key:"successTablaItemFichas",value:function(e){if(200===e.estado_p){this.tamanoDatos=e.model.length,this.gridOptions.rowData=[],this.getField("tablaAjustes").initData(this.gridOptions);var t=new Map;t.set(0,{cellRenderer:this.setButtonDelete,field:"accion"}),t.set("cantidad",{cellRenderer:this.formato,cellStyle:{textAlign:"right"},field:"cantidad"}),this.gridOptions.rowData=e.model,this.getField("tablaAjustes").initData(this.gridOptions,t),this.limpiarCampos()}else this.getField("tablaAjustes").toggle(!1),this.limpiarCampos(),this.tamanoDatos=0}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteEspecification(i)},a.setAttribute("id","button_delete_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Eliminar"),a}},{key:"deleteEspecification",value:function(e){this.id_delete=e,this.getField("confirmModalCustom").setTitleAndContent("Eliminar","Desea realizar esta operaci\xf3n?"),this.getField("confirmModalCustom").setClickDialog(this.confirmDeleteCustom),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmDeleteCustom",value:function(){this.getField("confirmModalCustom").toggle(!1);var e={id:this.id_delete};this.generalFormat.nombre_accion="443-servicio_reformula_ajustes_eliminar_fichas",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:e,success:this.successDelete,error:this.error_,general:this.generalFormat})}},{key:"successDelete",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.uploadTable())}},{key:"uploadTable",value:function(){var e={value:this.props.data.id_ficha};this.generalFormat.nombre_accion="443-servicio_reformula_ajustes_traer_porid_prod_idficha",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTablaItemFichas,error:this.error_,general:this.generalFormat,showMessage:!1})}},{key:"grabarTodo",value:function(){if(this.tamanoDatos>0){var e={produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.generalFormat.nombre_accion="443-servicio_reformula_ajustes_grabar_fichas",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}else this.alertGeneral.toggle(!0,"Debe agregar m\xednimo un producto","error")}},{key:"grabarItem",value:function(){if(this.getField("articulo_id").valid()&this.getField("nombre").valid()&this.getField("cantidad").valid()&this.getField("codigo").valid()&this.getField("unidad_id").valid()){var e={produccion_fichas_id:this.props.data.id_ficha,articulo_id:this.getField("articulo_id").getValue(),cantidad:this.getField("cantidad").getValue(),codigo_bodega:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="443-servicio_reformula_ajustes_crear_fichas_items",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successGrabarItem,error:this.error_,general:this.generalFormat})}}},{key:"successGrabarItem",value:function(e){200===e.estado_p&&this.uploadTable()}},{key:"limpiarCampos",value:function(){this.getField("articulo_id").setValue(""),this.getField("nombre").setValue(""),this.getField("cantidad").setValue(""),this.getField("codigo").setValue(""),this.getField("unidad_id").setValue(""),this.getField("nombre_unidad").setValue(""),this.getField("bodega").setValue("")}},{key:"productoAveriado",value:function(){this.getField("confirmModalCustom").setTitleAndContent("Confirmar","Desea enviar como producto averiado?"),this.getField("confirmModalCustom").setClickDialog(this.confirmProductoAveriado),this.getField("confirmModalCustom").toggle(!0)}},{key:"confirmProductoAveriado",value:function(){var e={produccion_fichas_id:this.props.data.id_ficha,proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id,actividad_id:this.props.data.actividad_id};this.generalFormat.nombre_accion="443-Servicio_reformula_ajustes_boton_producto_averiado",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successCloseEstage,error:this.error_,general:this.generalFormat})}},{key:"traerBodegas",value:function(){if(void 0!==this.getField("articulo_id").getValue()&&""!==this.getField("articulo_id").getValue()){var e={value:this.getField("articulo_id").getValue()};this.generalFormat.nombre_accion="443-servicio_producion_fichas_ref_ajustes_select_bodegas_art",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerBodega,error:this.error_,general:this.generalFormat})}else this.getField("articulo_id").setOnChange(this.traerBodegas)}},{key:"successTraerBodega",value:function(e){var t=[{text:"Ninguno",value:"",campos_cambian:{}}];200===e.estado_p?(e.data.forEach((function(e){var i={};i.value=e.codigo_bodega,i.text="".concat(e.nombre_bodega," , saldo = ").concat(e.saldo),i.campos_cambian={codigo_bodegaCodME:e.codigo_bodega},t.push(i)})),this.getField("bodega").setOptions(t)):this.getField("bodega").setOptions(t),this.getField("bodega").setOnChange(this.valueChangeOperario)}},{key:"valueChangeOperario",value:function(){var e=this.getField("bodega").getValue();this.getField("codigo_bodega").setValue(e)}}]),i}(d.a.form);d.a.addController("ref_ajustes",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).onSelectionChanged=function(){o.getField("eliminarCuentaNiff").setVisible(!0)},o.uploadTable=function(){o.service.send(o.getConstant().searchFormat().format("","tablaRelacionarNiff","servicio",o.formId),"GET",void 0,o.success,o.error_)},o.success=function(e){200===e.estado_p?(o.dataJSON=[],o.dataJSONOrigen=[],o.dataJSONDestino=[],o.dataResponse=e.model,o.tamano=e.model.length,o.dataResponse.map((function(e){return o.traerCuentaOrigen(e.codigocuentaorigen_id),o.traerCuentaDestino(e.codigocuentadestino_id),null}))):o.getField("tablaRelacionarNiff").toggle(!1)},o.initForm=o.initForm.bind(Object(s.a)(o)),o.uploadTable=o.uploadTable.bind(Object(s.a)(o)),o.deleteCuentaNiff=o.deleteCuentaNiff.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.successRelacionar=o.successRelacionar.bind(Object(s.a)(o)),o.successCuentaDestino=o.successCuentaDestino.bind(Object(s.a)(o)),o.successCuentaOrigen=o.successCuentaOrigen.bind(Object(s.a)(o)),o.id_codigocuentadestino=0,o.tamano=0,o.dataJSON=[],o.dataJSONDestino=[],o.dataJSONOrigen=[],o.dataResponse=[],o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"setValueField",value:function(e,t){var i=this.getField(e);i&&i.setValue(t)}},{key:"initForm",value:function(){this.uploadTable(),this.getField("eliminarCuentaNiff").setClick(this.deleteCuentaNiff),this.gridOptions.onSelectionChanged=this.onSelectionChanged,this.getField("btnAceptarRelacionarNIIF").setSuccess(this.successRelacionar)}},{key:"deleteCuentaNiff",value:function(){var e=this.getField("id").getValue();this.successDeleteCustom=this.successDelete;var t={accion:"servicio",campo:"eliminarCuentaNiff",id_formulario:this.formId,id:e};this.data=t,this.getField("modalDelete").toggle(!0)}},{key:"successDelete",value:function(e){void 0!==e.estado_p&&200!==e.estado_p||(this.getField("eliminarCuentaNiff").setVisible(!1),this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.uploadTable())}},{key:"successRelacionar",value:function(e){200===e.estado_p&&(this.uploadTable(),this.getField("txtCuentaOrigen").setValue(""),this.getField("txtNombreOrigen").setValue(""),this.getField("txtCuentaDestino").setValue(""),this.getField("txtNombreDestino").setValue(""),this.getField("estadoactivo_id").setValue(" "),this.getField("codigocuentadestino_id").setValue(""))}},{key:"traerCuentaOrigen",value:function(e){this.service.send(this.getConstant().searchFormat().format(e,"tablaRelacionarNiff","f9_servicio",this.formId),"GET",void 0,this.successCuentaOrigen,this.error_)}},{key:"successCuentaOrigen",value:function(e){var t=this;if(200===e.estado_p&&void 0!==e.model){var i;i={codigo_cuenta_origen:e.model[0].codigo_cuenta,nombre_cuenta_origen:e.model[0].nombre},this.dataJSONOrigen.push(i),this.dataJSONDestino.length===this.tamano&&this.dataJSONOrigen.length===this.tamano&&(this.dataJSONOrigen.map((function(e,i){var a={id:t.dataResponse[i].id,estado:1===t.dataResponse[i].estadoactivo_id?"Activo":"Desactivo",codigo_cuenta_origen:t.dataJSONOrigen[i].codigo_cuenta_origen,nombre_cuenta_origen:t.dataJSONOrigen[i].nombre_cuenta_origen,codigo_cuenta_destino:t.dataJSONDestino[i].codigo_cuenta_destino,nombre_cuenta_destino:t.dataJSONDestino[i].nombre_cuenta_destino};return t.dataJSON.push(a),null})),this.gridOptions.rowData=this.dataJSON,this.getField("tablaRelacionarNiff").initData(this.gridOptions))}}},{key:"traerCuentaDestino",value:function(e){this.service.send(this.getConstant().searchFormat().format(e,"tablaRelacionarNiff","f9_servicio",this.formId),"GET",void 0,this.successCuentaDestino,this.error_)}},{key:"successCuentaDestino",value:function(e){var t=this;if(200===e.estado_p){var i;i={codigo_cuenta_destino:e.model[0].codigo_cuenta,nombre_cuenta_destino:e.model[0].nombre},this.dataJSONDestino.push(i),this.dataJSONDestino.length===this.tamano&&this.dataJSONOrigen.length===this.tamano&&(this.dataJSONOrigen.map((function(e,i){var a={id:t.dataResponse[i].id,estado:1===t.dataResponse[i].estadoactivo_id?"Activo":"Desactivo",codigo_cuenta_origen:t.dataJSONOrigen[i].codigo_cuenta_origen,nombre_cuenta_origen:t.dataJSONOrigen[i].nombre_cuenta_origen,codigo_cuenta_destino:t.dataJSONDestino[i].codigo_cuenta_destino,nombre_cuenta_destino:t.dataJSONDestino[i].nombre_cuenta_destino};return t.dataJSON.push(a),null})),this.gridOptions.rowData=this.dataJSON,this.getField("tablaRelacionarNiff").initData(this.gridOptions))}}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.setearConsecutivoActual=o.setearConsecutivoActual.bind(Object(s.a)(o)),o.successSetearConsecutivoActual=o.successSetearConsecutivoActual.bind(Object(s.a)(o)),o.resultadoNumeroConsecutivo=o.resultadoNumeroConsecutivo.bind(Object(s.a)(o)),o.formatearFecha=o.formatearFecha.bind(Object(s.a)(o)),o.onClickNew=o.handlerClickNew.bind(Object(s.a)(o)),o.btnAgregar=o.btnAgregar.bind(Object(s.a)(o)),o.btnCancelar=o.btnCancelar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){console.log("Reserva de consecutivos, @version: 1.01.0016, @author: Sebastian Rios Echeverri"),this.getField("digi_por_contab_reser_cosecu").setOnChange(this.setearConsecutivoActual),this.getField("telefonos_sucursal_reser_cosecu").setOnChange(this.setearConsecutivoActual),this.getField("numero_actual").setOnChange(this.resultadoNumeroConsecutivo),this.getField("numero_consecutivos").setOnChange(this.resultadoNumeroConsecutivo),this.getField("btn_agregar").setSuccess(this.btnAgregar),this.getField("btn_cancelar").setClick(this.btnCancelar)}},{key:"btnCancelar",value:function(){this.getField("telefonos_sucursal_reser_cosecu").setValue(""),this.getField("digi_por_contab_reser_cosecu").setValue(""),this.getField("btn_agregar").setVisible(!1),this.getField("btn_cancelar").setVisible(!1),this.buttons.get("btn_new").ref.current.setDisabled(!1),this.buttons.get("btn_show").ref.current.setDisabled(!1),this.getField("codigo_documento").setDisabled(!0),this.getField("codigo_sucursal").setDisabled(!0),this.getField("fecha").setDisabled(!0),this.getField("nombre_documento").setDisabled(!0),this.getField("nombre_sucursal").setDisabled(!0),this.getField("numero_actual").setDisabled(!0),this.getField("numero_consecutivo_usados").setDisabled(!0),this.getField("numero_consecutivos").setDisabled(!0),this.getField("estadoactivo_id").setDisabled(!0)}},{key:"btnAgregar",value:function(e){200===e.estado_p&&(this.getField("telefonos_sucursal_reser_cosecu").setValue(""),this.getField("digi_por_contab_reser_cosecu").setValue(""),this.getField("btn_agregar").setVisible(!1),this.getField("btn_cancelar").setVisible(!1),this.buttons.get("btn_new").ref.current.setDisabled(!1),this.buttons.get("btn_show").ref.current.setDisabled(!1),this.getField("codigo_documento").setDisabled(!0),this.getField("codigo_sucursal").setDisabled(!0),this.getField("fecha").setDisabled(!0),this.getField("nombre_documento").setDisabled(!0),this.getField("nombre_sucursal").setDisabled(!0),this.getField("numero_actual").setDisabled(!0),this.getField("numero_consecutivo_usados").setDisabled(!0),this.getField("numero_consecutivos").setDisabled(!0),this.getField("estadoactivo_id").setDisabled(!0),this.getField("numero_consecutivo_usados").setValue(0))}},{key:"handlerClickNew",value:function(e){this.formatearFecha(),this.getField("btn_agregar").setVisible(!0),this.getField("btn_cancelar").setVisible(!0),this.getField("btn_agregar").setDisabled(!1),this.getField("btn_cancelar").setDisabled(!1),this.buttons.get("btn_new").ref.current.setDisabled(!0),this.buttons.get("btn_show").ref.current.setDisabled(!0),this.getField("codigo_documento").setDisabled(!1),this.getField("codigo_sucursal").setDisabled(!1),this.getField("fecha").setDisabled(!1),this.getField("nombre_documento").setDisabled(!1),this.getField("nombre_sucursal").setDisabled(!1),this.getField("numero_actual").setDisabled(!1),this.getField("numero_consecutivo_usados").setDisabled(!1),this.getField("numero_consecutivos").setDisabled(!1),this.getField("estadoactivo_id").setDisabled(!1),this.getField("tableShowData").toggle(!1),this.getField("codigo_documento").setValue(""),this.getField("codigo_sucursal").setValue(""),this.getField("nombre_documento").setValue(""),this.getField("nombre_sucursal").setValue(""),this.getField("numero_actual").setValue(""),this.getField("numero_consecutivo_usados").setValue(""),this.getField("numero_consecutivos").setValue(""),this.getField("estadoactivo_id").setValue("")}},{key:"formatearFecha",value:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString();this.getField("fecha").setValue(t.split("T")[0])}},{key:"resultadoNumeroConsecutivo",value:function(){if(""!==this.getField("numero_consecutivos").getValue()&&" "!==this.getField("numero_consecutivos").getValue()&&""!==this.getField("numero_actual").getValue()&&" "!==this.getField("numero_actual").getValue()){var e=this.getField("numero_actual").getValue()+this.getField("numero_consecutivos").getValue();this.getField("numero_consecutivo_usados").setValue(e)}else this.getField("numero_consecutivo_usados").setValue("")}},{key:"setearConsecutivoActual",value:function(){if(this.getField("numero_actual").setValue(""),""!==this.getField("documento_id").getValue()&&""!==this.getField("sucursal_id").getValue()&&" "!==this.getField("documento_id").getValue()&&" "!==this.getField("sucursal_id").getValue()&&""!==this.getField("digi_por_contab_reser_cosecu").getValue()&&""!==this.getField("telefonos_sucursal_reser_cosecu").getValue()&&" "!==this.getField("digi_por_contab_reser_cosecu").getValue()&&" "!==this.getField("telefonos_sucursal_reser_cosecu").getValue()){var e={codigo_sucursal:this.getField("codigo_sucursal").getValue(),codigo_documento:this.getField("codigo_documento").getValue()};this.generalFormat.nombre_accion="reserva_consecutivos_s_sucursales_documentos_sucursaldocumento_1210",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successSetearConsecutivoActual,error:this.error_,general:this.generalFormat})}}},{key:"successSetearConsecutivoActual",value:function(e){200===e.estado_p&&this.getField("numero_actual").setValue(e.data[0].numero)}}]),i}(d.a.form);d.a.addController("reserva_consecutivos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.mostrarPicking=o.mostrarPicking.bind(Object(s.a)(o)),o.successMostrarPicking=o.successMostrarPicking.bind(Object(s.a)(o)),o.setButtonOperario=o.setButtonOperario.bind(Object(s.a)(o)),o.cambiarOperario=o.cambiarOperario.bind(Object(s.a)(o)),o.setButtonRuta=o.setButtonRuta.bind(Object(s.a)(o)),o.cambiarRuta=o.cambiarRuta.bind(Object(s.a)(o)),o.initModal=o.initModal.bind(Object(s.a)(o)),o.successMostrarOperario=o.successMostrarOperario.bind(Object(s.a)(o)),o.formato=o.formato.bind(Object(s.a)(o)),o.operarioChange=o.operarioChange.bind(Object(s.a)(o)),o.successChangeOperario=o.successChangeOperario.bind(Object(s.a)(o)),o.ocultarCampos=o.ocultarCampos.bind(Object(s.a)(o)),o.pedidoPicking=0,o.pedido="",o.uploadTableOperario=o.uploadTableOperario.bind(Object(s.a)(o)),o.initModalRuta=o.initModalRuta.bind(Object(s.a)(o)),o.guardarRuta=o.guardarRuta.bind(Object(s.a)(o)),o.successChangeRuta=o.successChangeRuta.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnCargarPickingRevision").setClick(this.mostrarPicking),this.getField("numero").setOnChange(this.ocultarCampos),this.getField("bodega").setOnChange(this.ocultarCampos)}},{key:"ocultarCampos",value:function(){this.getField("tablaPickingRevision").toggle(!1)}},{key:"saveConteo",value:function(){if(this.getField("numero").valid()&this.getField("operario").valid()&this.getField("bodega").valid()&this.getField("codigo").valid()&this.getField("conteo").valid()&this.getField("cantidad").valid()&this.getField("oid").valid())if(parseInt(this.getField("conteo").getValue())<=parseInt(this.getField("cantidad").getValue())){this.getField("conteo").setError(!1,"");var e={numero:this.getField("numero").getValue(),operario:this.getField("operario").getValue(),bodega:this.getField("bodega").getValue(),codigo:this.getField("codigo").getValue(),conteo:this.getField("conteo").getValue(),cantidad:this.getField("cantidad").getValue(),oid:this.getField("oid").getValue(),pedido:this.getField("pedido").getValue(),accion:"servicio",campo:"btnGuardarConteo",id_formulario:this.formId};this.service.send(this.getConstant().formSave(),"POST",e,this.uploadTable,this.error_)}else this.getField("conteo").setError(!0,"* Este Valor debe ser menor o igual a la cantidad")}},{key:"uploadTable",value:function(e){200===e.estado_p&&this.mostrarPicking()}},{key:"mostrarPicking",value:function(){this.getField("numero").valid()&this.getField("bodega").valid()&&this.service.send(this.getConstant().searchFormat().format(this.getField("numero").getValue()+"/"+this.getField("bodega").getValue(),"btnCargarPickingRevision","servicio",this.formId),"GET",void 0,this.successMostrarPicking,this.error_)}},{key:"successMostrarPicking",value:function(e){if(200===e.estado_p){var t=new Map;t.set(0,{cellRenderer:this.setButtonOperario,field:"Operaci\xf3n 1"}),t.set(1,{cellRenderer:this.setButtonRuta,field:"Operaci\xf3n 2"}),this.gridOptions.rowData=e.model,this.getField("tablaPickingRevision").initData(this.gridOptions,t)}}},{key:"setButtonOperario",value:function(e){var t=this,i=e.data.pedido,a=document.createElement("input");return a.onclick=function(){return t.cambiarOperario(i)},a.setAttribute("id","buttonOperario_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Modificar"),a}},{key:"cambiarOperario",value:function(e){this.pedidoPicking=e,this.getField("modalOperario").handleClickOpen(this.initModal(e))}},{key:"initModal",value:function(e){this.pedido=e,this.service.send(this.getConstant().searchFormat().format(this.getField("numero").getValue()+"/"+this.getField("bodega").getValue()+"/"+e,"operario","servicio",this.formId),"GET",void 0,this.successMostrarOperario,this.error_)}},{key:"uploadTableOperario",value:function(){this.service.send(this.getConstant().searchFormat().format(this.getField("numero").getValue()+"/"+this.getField("bodega").getValue()+"/"+this.pedido,"operario","servicio",this.formId),"GET",void 0,this.successMostrarOperario,this.error_)}},{key:"successMostrarOperario",value:function(e){if(200===e.estado_p){var t=new Map;t.set("operario",{cellRenderer:this.formato,cellStyle:{textAlign:"right",backgroundColor:"rgb(238,238,238)",borderRadius:"5px"},singleClickEdit:!0,field:"operario",editable:!0,onCellValueChanged:this.operarioChange}),this.gridOptions.rowData=e.model,this.getField("operario").initData(this.gridOptions,t)}else this.getField("modalOperario").handleClose()}},{key:"formato",value:function(e){var t=e.data.operario;null!==t&&0!==t||(this.valido=!1);var i=document.createElement("div"),a=document.createElement("label");return a.textContent=t,i.appendChild(a),i}},{key:"operarioChange",value:function(e){var t=this.getField("operario").cellValid(e.oldValue,e.newValue,"^[0-9a-zA-Z-]+$",10);if(t){var i=e.data.bodega,a=e.data.oid;this.guardarOperario(e.newValue,i,a)}else null!==t&&this.uploadTableOperario()}},{key:"guardarOperario",value:function(e,t,i){var a={accion:"f9_servicio",campo:"operario",id_formulario:this.formId,numero:this.getField("numero").getValue(),operario:e,bodega:t,oid:i};this.service.send(this.getConstant().formSave(),"PUT",a,this.successChangeOperario,this.error_)}},{key:"successChangeOperario",value:function(e){200===e.estado_p?this.alertGeneral.toggle(!0,e.mensaje,"success"):this.initModal(this.pedidoPicking)}},{key:"setButtonRuta",value:function(e){var t=this,i=e.data.pedido,a=document.createElement("input");return a.onclick=function(){return t.cambiarRuta(i)},a.setAttribute("id","buttonEmpaque_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Empaque"),a}},{key:"cambiarRuta",value:function(e){this.getField("modalRuta").handleClickOpen(this.initModalRuta,e)}},{key:"initModalRuta",value:function(e){this.getField("pedido").setValue(e),this.getField("btnAceptarRuta").setClick(this.guardarRuta)}},{key:"guardarRuta",value:function(){if(this.getField("ruta").valid()){var e={accion:"servicio",campo:"btnAceptarRuta",id_formulario:this.formId,ruta:this.getField("ruta").getValue(),pedido:this.getField("pedido").getValue(),numero:this.getField("numero").getValue()};this.service.send(this.getConstant().formSave(),"POST",e,this.successChangeRuta,this.error_)}}},{key:"successChangeRuta",value:function(e){200===e.estado_p&&(this.alertGeneral.toggle(!0,e.model.mensaje,"success"),this.getField("modalRuta").handleClose())}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.cleanCamposFormulario=o.cleanCamposFormulario.bind(Object(s.a)(o)),o.successData=o.successData.bind(Object(s.a)(o)),o.onSelectionChanged=o.onSelectionChanged.bind(Object(s.a)(o)),o.gridOptionsDocumentos=Object.assign({},o.gridOptions),o.gridOptionsDocumentos.onSelectionChanged=o.onSelectionChanged,o.filaSeleccionada=[],o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("documento").setOnChange(this.cleanCamposFormulario),this.getField("boton_consultar").setSuccess(this.successData)}},{key:"successData",value:function(e){if(200===e.estado_p)if(e.model.length>1){this.getField("modal_documentos").handleClickOpen(),this.gridOptionsDocumentos.rowData=e.model;var t=new Map;this.getField("tabla_documentos").initData(this.gridOptionsDocumentos,t)}else this.getField("documento").setValue(e.model[0].documento),this.getField("id").setValue(e.model[0].id),this.getField("id_jaivana").setValue(e.model[0].id_jaivana),this.getField("fecha_factura").setValue(e.model[0].fecha_factura),this.getField("nit").setValue(e.model[0].nit),this.getField("cliente").setValue(e.model[0].cliente),this.getField("email").setValue(e.model[0].email),this.getField("origen").setValue(e.model[0].origen),this.getField("destino").setValue(e.model[0].destino),this.getField("direccion_destino").setValue(e.model[0].direccion_destino),this.getField("numero_cajas").setValue(e.model[0].numero_cajas),this.getField("numero_bordes").setValue(e.model[0].numero_bordes),this.getField("unidades").setValue(e.model[0].unidades),this.getField("peso_total").setValue(e.model[0].peso_total),this.getField("volumen").setValue(e.model[0].volumen),this.getField("valor_real").setValue(e.model[0].valor_real),this.getField("valor_real_con_iva").setValue(e.model[0].valor_real_con_iva),this.getField("radicado").setValue(e.model[0].radicado),this.getField("estado").setValue(e.model[0].estado),this.getField("unidades_entregadas").setValue(e.model[0].unidades_entregadas),this.getField("guia").setValue(e.model[0].guia),this.getField("placa_vehiculo").setValue(e.model[0].placa_vehiculo),this.getField("fecha_asignacion").setValue(e.model[0].fecha_asignacion),this.getField("fecha_entrega").setValue(e.model[0].fecha_entrega)}},{key:"onSelectionChanged",value:function(){this.filaSeleccionada=this.gridOptionsDocumentos.api.getSelectedRows(),this.getField("modal_documentos").handleClose(),this.getField("documento").setValue(this.filaSeleccionada[0].documento),this.getField("id").setValue(this.filaSeleccionada[0].id),this.getField("id_jaivana").setValue(this.filaSeleccionada[0].id_jaivana),this.getField("fecha_factura").setValue(this.filaSeleccionada[0].fecha_factura),this.getField("nit").setValue(this.filaSeleccionada[0].nit),this.getField("cliente").setValue(this.filaSeleccionada[0].cliente),this.getField("email").setValue(this.filaSeleccionada[0].email),this.getField("origen").setValue(this.filaSeleccionada[0].origen),this.getField("destino").setValue(this.filaSeleccionada[0].destino),this.getField("direccion_destino").setValue(this.filaSeleccionada[0].direccion_destino),this.getField("numero_cajas").setValue(this.filaSeleccionada[0].numero_cajas),this.getField("numero_bordes").setValue(this.filaSeleccionada[0].numero_bordes),this.getField("unidades").setValue(this.filaSeleccionada[0].unidades),this.getField("peso_total").setValue(this.filaSeleccionada[0].peso_total),this.getField("volumen").setValue(this.filaSeleccionada[0].volumen),this.getField("valor_real").setValue(this.filaSeleccionada[0].valor_real),this.getField("valor_real_con_iva").setValue(this.filaSeleccionada[0].valor_real_con_iva),this.getField("radicado").setValue(this.filaSeleccionada[0].radicado),this.getField("estado").setValue(this.filaSeleccionada[0].estado),this.getField("unidades_entregadas").setValue(this.filaSeleccionada[0].unidades_entregadas),this.getField("guia").setValue(this.filaSeleccionada[0].guia),this.getField("placa_vehiculo").setValue(this.filaSeleccionada[0].placa_vehiculo),this.getField("fecha_asignacion").setValue(this.filaSeleccionada[0].fecha_asignacion),this.getField("fecha_entrega").setValue(this.filaSeleccionada[0].fecha_entrega)}},{key:"cleanCamposFormulario",value:function(){this.getField("id").setValue(""),this.getField("id_jaivana").setValue(""),this.getField("fecha_factura").setValue(""),this.getField("nit").setValue(""),this.getField("cliente").setValue(""),this.getField("email").setValue(""),this.getField("origen").setValue(""),this.getField("destino").setValue(""),this.getField("direccion_destino").setValue(""),this.getField("numero_cajas").setValue(""),this.getField("numero_bordes").setValue(""),this.getField("unidades").setValue(""),this.getField("peso_total").setValue(""),this.getField("volumen").setValue(""),this.getField("valor_real").setValue(""),this.getField("valor_real_con_iva").setValue(""),this.getField("radicado").setValue(""),this.getField("estado").setValue(""),this.getField("unidades_entregadas").setValue(""),this.getField("guia").setValue(""),this.getField("placa_vehiculo").setValue(""),this.getField("fecha_asignacion").setValue(""),this.getField("fecha_entrega").setValue("")}}]),i}(d.a.form);d.a.addController("seguimiento_doc",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.consultarEspecificaciones=o.consultarEspecificaciones.bind(Object(s.a)(o)),o.gridOptionsEspecificaciones=Object.assign({},o.gridOptions),o.successSustituto=o.successSustituto.bind(Object(s.a)(o)),o.setButtonDelete=o.setButtonDelete.bind(Object(s.a)(o)),o.deleteEspecification=o.deleteEspecification.bind(Object(s.a)(o)),o.successDelete=o.successDelete.bind(Object(s.a)(o)),o.grabarDatos=o.grabarDatos.bind(Object(s.a)(o)),o.successPostSustituto=o.successPostSustituto.bind(Object(s.a)(o)),o.limpiar=o.limpiar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnConsultar").setClick(this.consultarEspecificaciones),this.getField("btnAgregar").setClick(this.grabarDatos),this.getField("codigo_producto").setOnChange(this.limpiar)}},{key:"consultarEspecificaciones",value:function(){if(""!==this.getField("codigo_producto").getValue()&&" "!==this.getField("codigo_producto").getValue()&&""!==this.getField("nombre").getValue()&&" "!==this.getField("nombre").getValue()){this.getField("codigo_producto").setError(!1,""),this.getField("nombre").setError(!1,"");var e={value:this.getField("articulo_id").getValue()};this.generalFormat.nombre_accion="249-Busca_un_articulo_sustituto_por_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successSustituto,error:this.error_,general:this.generalFormat})}else this.getField("codigo_producto").valid()&&""===this.getField("codigo_producto").getValue()&&this.getField("codigo_producto").setError(!0,"Este campo es requerido"),this.getField("nombre").valid()&&""===this.getField("nombre").getValue()&&this.getField("nombre").setError(!0,"Este campo es requerido")}},{key:"successSustituto",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){var t=new Map;t.set("operacion",{cellRenderer:this.setButtonDelete,field:"Operaci\xf3n"}),this.gridOptionsEspecificaciones.rowData=e.model,this.getField("tablaSustitutos").toggle(!0),this.gridOptionsEspecificaciones.paginationPageSize=100,this.getField("tablaSustitutos").initData(this.gridOptionsEspecificaciones,t),this.getField("codigo_sustituto").setVisible(!0),this.getField("nombre_sustituto").setVisible(!0),this.getField("btnAgregar").setVisible(!0)}else this.getField("tablaSustitutos").toggle(!1)}},{key:"setButtonDelete",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.deleteEspecification(i)},a.setAttribute("id","button_delete_"+i),a.setAttribute("class","buttonStyle"),a.setAttribute("type","button"),a.setAttribute("value","Eliminar"),a}},{key:"deleteEspecification",value:function(e){var t={id:e};this.generalFormat.nombre_accion="249-Permite_eliminar_articulo_sustituto",this.service.send({endpoint:this.constant.formConfiguration(),method:"DELETE",body:t,success:this.successDelete,error:this.error_,general:this.generalFormat})}},{key:"successDelete",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.consultarEspecificaciones())}},{key:"grabarDatos",value:function(){if(""!==this.getField("codigo_sustituto").getValue()&&" "!==this.getField("codigo_sustituto").getValue()&&""!==this.getField("nombre_sustituto").getValue()&&" "!==this.getField("nombre_sustituto").getValue())if(this.getField("codigo_sustituto").getValue()!==this.getField("codigo_producto").getValue()){this.getField("codigo_sustituto").setError(!1,"");var e={articulo_id:this.getField("articulo_id").getValue(),articulo_sustituto_id:this.getField("articulo_sustituto_id").getValue()};this.generalFormat.nombre_accion="249-Permite_crear_u_articulo_sustituto",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successPostSustituto,error:this.error_,general:this.generalFormat})}else this.getField("codigo_sustituto").setError(!0,"* Este producto no puede ser igual al producto a sustituir");else this.getField("codigo_sustituto").valid()&&""===this.getField("codigo_sustituto").getValue()&&this.getField("codigo_sustituto").setError(!0,"Este campo es requerido"),this.getField("nombre_sustituto").valid()&&""===this.getField("nombre_sustituto").getValue()&&this.getField("nombre_sustituto").setError(!0,"Este campo es requerido")}},{key:"successPostSustituto",value:function(e){200===e.estado_p&&(this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.getField("articulo_sustituto_id").setValue(""),this.getField("nombre_sustituto").setValue(""),this.getField("codigo_sustituto").setValue(""),this.consultarEspecificaciones())}},{key:"limpiar",value:function(){this.getField("codigo_sustituto").setValue(""),this.getField("nombre_sustituto").setValue(""),this.getField("tablaSustitutos").toggle(!1)}}]),i}(d.a.form);d.a.addController("SustProd",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.buscarArticulosId=o.buscarArticulosId.bind(Object(s.a)(o)),o.successTraerArticuloId=o.successTraerArticuloId.bind(Object(s.a)(o)),o.gridOptionsEcommerce=Object.assign({},o.gridOptions),o.gridOptionsRelacionados=Object.assign({},o.gridOptions),o.gridOptionsColores=Object.assign({},o.gridOptions),o.gridOptionsProfesiones=Object.assign({},o.gridOptions),o.setButtonSelectModal=o.setButtonSelectModal.bind(Object(s.a)(o)),o.openModal=o.openModal.bind(Object(s.a)(o)),o.buscarArticulosRelacionados=o.buscarArticulosRelacionados.bind(Object(s.a)(o)),o.successBuscarArticulosRelacionados=o.successBuscarArticulosRelacionados.bind(Object(s.a)(o)),o.setButtonSubirOrden=o.setButtonSubirOrden.bind(Object(s.a)(o)),o.setButtonBajarOrden=o.setButtonBajarOrden.bind(Object(s.a)(o)),o.setButtonEliminarRelacionado=o.setButtonEliminarRelacionado.bind(Object(s.a)(o)),o.setButtonModificarRelacionado=o.setButtonModificarRelacionado.bind(Object(s.a)(o)),o.buscarColoresArticulos=o.buscarColoresArticulos.bind(Object(s.a)(o)),o.successBuscarColores=o.successBuscarColores.bind(Object(s.a)(o)),o.setButtonEliminarColor=o.setButtonEliminarColor.bind(Object(s.a)(o)),o.buscarProfesiones=o.buscarProfesiones.bind(Object(s.a)(o)),o.successBuscarProfesiones=o.successBuscarProfesiones.bind(Object(s.a)(o)),o.setButtonEliminarProfesion=o.setButtonEliminarProfesion.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("buscar").setClick(this.buscarArticulosId),this.getField("articulo_id_modal_relacionado").setOnChange(this.buscarArticulosRelacionados),this.getField("articulo_id_colores").setOnChange(this.buscarColoresArticulos),this.getField("articulo_id_profesiones").setOnChange(this.buscarProfesiones)}},{key:"buscarArticulosId",value:function(){if(""!==this.getField("nombre_producto").getValue()){var e={value:this.getField("articulo_id").getValue()};this.generalFormat.nombre_accion="382_Busca_portafolio_ecommerce_producto_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerArticuloId,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successTraerArticuloId",value:function(e){if(e.model&&e.model.length>0){this.gridOptionsEcommerce.rowData=e.model;var t=new Map;t.set(3,{cellRenderer:this.setButtonSelectModal,field:"accion_modal",width:150}),this.getField("tabla_ecommerce").initData(this.gridOptionsEcommerce,t)}else this.getField("tabla_ecommerce").toggle(!1)}},{key:"setButtonSelectModal",value:function(e){var t=this,i=document.createElement("select"),a=document.createElement("div");a.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),i.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),i.onchange=function(i){return t.openModal(i,e)};var o=document.createElement("option");o.setAttribute("value"," "),o.textContent="Ninguno",i.appendChild(o);var s=document.createElement("option");s.setAttribute("value",1),s.textContent="Productos Relacionados",i.appendChild(s);var r=document.createElement("option");r.setAttribute("value",2),r.textContent="Colores",i.appendChild(r);var n=document.createElement("option");return n.setAttribute("value",3),n.textContent="Profesiones",i.appendChild(n),a.appendChild(i),a}},{key:"openModal",value:function(e,t){switch(e.target.value){case"1":console.log("Modal 1",t.data),this.getField("modal_productos_relacionados").handleClickOpen(),this.getField("articulo_id_modal_relacionado").setValue(t.data.articulo_id);break;case"2":console.log("Modal 2"),this.getField("modal_colores").handleClickOpen(),this.getField("articulo_id_colores").setValue(t.data.articulo_id);break;case"3":console.log("Modal 3"),this.getField("modal_profesiones").handleClickOpen(),this.getField("articulo_id_profesiones").setValue(t.data.articulo_id);break;default:console.log("no existe Modal")}e.target.value=" "}},{key:"buscarArticulosRelacionados",value:function(){if(this.getField("articulo_id_modal_relacionado").valid()&&""!==this.getField("articulo_id_modal_relacionado").getValue()){var e={value:this.getField("articulo_id_modal_relacionado").getValue()};this.generalFormat.nombre_accion="382_Busca_portafolio_ecommerce_producto_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successBuscarArticulosRelacionados,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successBuscarArticulosRelacionados",value:function(e){if(200===e.estado_p){this.gridOptionsRelacionados.rowData=e.model;var t=new Map;t.set(5,{cellRenderer:this.setButtonSubirOrden,field:"subir"}),t.set(6,{cellRenderer:this.setButtonBajarOrden,field:"bajar"}),t.set(8,{cellRenderer:this.setButtonEliminarRelacionado,field:"Accion Eliminar"}),t.set(9,{cellRenderer:this.setButtonModificarRelacionado,field:"Accion Modificar"}),this.getField("tabla_productos_relacionados").initData(this.gridOptionsRelacionados,t)}else this.getField("tabla_productos_relacionados").toggle(!1)}},{key:"setButtonSubirOrden",value:function(e){var t=document.createElement("input"),i=e.data.orden;return t.setAttribute("id","button_aprove_"),t.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),t.setAttribute("type","button"),t.setAttribute("value","Subir"),1===i&&(t.setAttribute("style","width:60px;height: 20px%; background-color:#ccc;color:#fff;border:1px solid #fff;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),t.setAttribute("disabled",!0)),t}},{key:"setButtonBajarOrden",value:function(e){var t=document.createElement("input");return t.setAttribute("id","button_aprove_"),t.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),t.setAttribute("type","button"),t.setAttribute("value","Bajar"),t}},{key:"setButtonEliminarRelacionado",value:function(e){var t=document.createElement("input");return t.setAttribute("id","button_aprove_"),t.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),t.setAttribute("type","button"),t.setAttribute("value","Eliminar"),t}},{key:"setButtonModificarRelacionado",value:function(e){var t=document.createElement("input");return t.setAttribute("id","button_aprove_"),t.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),t.setAttribute("type","button"),t.setAttribute("value","Modificar"),t}},{key:"buscarColoresArticulos",value:function(){if(this.getField("articulo_id_colores").valid()&&""!==this.getField("articulo_id_colores").getValue()){var e={value:this.getField("articulo_id_colores").getValue()};this.generalFormat.nombre_accion="382_Busca_un_portafolio_productos_colores_por_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successBuscarColores,error:this.error_,general:this.generalFormat,showMessage:!1})}}},{key:"successBuscarColores",value:function(e){if(200===e.estado_p){this.gridOptionsColores.rowData=e.model;var t=new Map;t.set(5,{cellRenderer:this.setButtonEliminarColor,field:"Accion Eliminar"}),this.getField("tabla_colores").initData(this.gridOptionsColores,t)}else this.getField("tabla_colores").toggle(!1)}},{key:"setButtonEliminarColor",value:function(e){var t=document.createElement("input");return t.setAttribute("id","button_aprove_"),t.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),t.setAttribute("type","button"),t.setAttribute("value","Eliminar"),t}},{key:"buscarProfesiones",value:function(){if(this.getField("articulo_id_profesiones").valid()&&""!==this.getField("articulo_id_profesiones").getValue()){var e={value:this.getField("articulo_id_profesiones").getValue()};this.generalFormat.nombre_accion="382_Busca_portafolio_producto_profesiones_por_articulo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successBuscarProfesiones,error:this.error_,general:this.generalFormat,showMessage:!1}),console.log("SEND",e)}}},{key:"successBuscarProfesiones",value:function(e){if(200===e.estado_p){this.gridOptionsProfesiones.rowData=e.model;var t=new Map;t.set(6,{cellRenderer:this.setButtonEliminarProfesion,field:"Accion Eliminar"}),this.getField("tabla_profesiones").initData(this.gridOptionsProfesiones,t)}else this.getField("tabla_profesiones").toggle(!1)}},{key:"setButtonEliminarProfesion",value:function(e){var t=document.createElement("input");return t.setAttribute("id","button_aprove_"),t.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),t.setAttribute("type","button"),t.setAttribute("value","Eliminar"),t}}]),i}(d.a.form);d.a.addController("ecommerce_test",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).getter=o.getter.bind(Object(s.a)(o)),o.setter=o.setter.bind(Object(s.a)(o)),o.initForm=o.initForm.bind(Object(s.a)(o)),o.radioChange1=o.radioChange1.bind(Object(s.a)(o)),o.radioChange2=o.radioChange2.bind(Object(s.a)(o)),o.radioChange3=o.radioChange3.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"getter",value:function(e){return this.getField(e).getValue()}},{key:"setter",value:function(e,t){this.getField(e).setValue(t)}},{key:"initForm",value:function(){this.getField("gravado_id").setOnChange(this.radioChange1),this.getField("exento_id").setOnChange(this.radioChange2),this.getField("excluido_id").setOnChange(this.radioChange3)}},{key:"radioChange1",value:function(){1===this.getter("gravado_id")&&(this.setter("exento_id",2),this.setter("excluido_id",2))}},{key:"radioChange2",value:function(){1===this.getter("exento_id")&&(this.setter("gravado_id",2),this.setter("excluido_id",2))}},{key:"radioChange3",value:function(){1===this.getter("excluido_id")&&(this.setter("gravado_id",2),this.setter("exento_id",2))}}]),i}(d.a.form);d.a.addController("productosTipos",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.handlerClickButton=o.handlerClickButton.bind(Object(s.a)(o)),o.consultarTurno=o.consultarTurno.bind(Object(s.a)(o)),o.successTurno=o.successTurno.bind(Object(s.a)(o)),o.cancelarTurno=o.cancelarTurno.bind(Object(s.a)(o)),o.handlerClickSave=o.handlerClickSave.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"setValueField",value:function(e,t){var i=this.getField(e);i&&i.setValue(t)}},{key:"initForm",value:function(){this.buttons.has("btn_show")&&this.buttons.get("btn_show").ref.current.setClick(this.handlerClickButton),this.buttons.has("btn_save")&&this.buttons.get("btn_save").ref.current.setClick(this.handlerClickSave)}},{key:"handlerClickSave",value:function(){var e=parseInt(this.getField("fecha").getValue().split("-")[2]),t=parseInt(this.getField("fecha").getValue().split("-")[1]),i=parseInt(this.getField("fecha").getValue().split("-")[0]),a=parseInt(this.getField("hasta").getValue().split("-")[2]),o=parseInt(this.getField("hasta").getValue().split("-")[1]),s=parseInt(this.getField("hasta").getValue().split("-")[0]),r=new Date,n=r.getFullYear(),d=r.getMonth()+1,l=r.getDate(),c=!0,u=!0;(c=i>n||i===n&&(t>d||t===d&&e>=l))?this.getField("fecha").setError(!c,""):this.getField("fecha").setError(!c,"* Fecha debe ser Mayor que la fecha actual"),(u=s>i||s===i&&(o>t||o===t&&a>=e))?this.getField("hasta").setError(!u,""):this.getField("hasta").setError(!u,"* Fecha debe ser Mayor que la fecha Desde"),c&&u&&this.onClickSave()}},{key:"handlerClickButton",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!0),this.buttons.get("btn_change").ref.current.setDisabled(!0),this.buttons.get("btn_delete").ref.current.setDisabled(!0),this.getField("fecha").setDisabled(!1),this.getField("hasta").setDisabled(!1),this.getField("codigo_turno").setDisabled(!1),this.getField("btnConsultar").setVisible(!0),this.getField("btnConsultar").setDisabled(!1),this.getField("btnCancelar").setVisible(!0),this.getField("btnCancelar").setDisabled(!1),this.getField("btnConsultar").setClick(this.consultarTurno),this.getField("btnCancelar").setClick(this.cancelarTurno)}},{key:"cancelarTurno",value:function(){this.buttons.get("btn_new").ref.current.setDisabled(!1),this.buttons.get("btn_change").ref.current.setDisabled(!1),this.buttons.get("btn_delete").ref.current.setDisabled(!1),this.getField("fecha").setDisabled(!0),this.getField("hasta").setDisabled(!0),this.getField("codigo_turno").setDisabled(!0),this.getField("btnConsultar").setVisible(!1),this.getField("btnConsultar").setDisabled(!0),this.getField("btnCancelar").setVisible(!1),this.getField("btnCancelar").setDisabled(!0),this.getField("tablaConsulta").toggle(!1)}},{key:"consultarTurno",value:function(){if(this.getField("fecha").valid()&this.getField("hasta").valid()&this.getField("turno_id").valid()&this.getField("codigo_turno").valid()){var e=this.getField("fecha").getValue(),t=this.getField("hasta").getValue(),i=this.getField("turno_id").getValue(),a=this.getField("codigo_turno").getValue();this.service.send(this.getConstant().searchFormat().format(e+"/"+t+"/"+i+"/"+a,"btnConsultar","servicio",this.formId),"GET",void 0,this.successTurno,this.error)}}},{key:"successTurno",value:function(e){200===e.estado_p&&(this.gridOptions.rowData=e.model,this.getField("tablaConsulta").initData(this.gridOptions))}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.gridOptionsUbicaciones=Object.assign({},o.gridOptions),o.cargarUbicaciones=o.cargarUbicaciones.bind(Object(s.a)(o)),o.successUbicaciones=o.successUbicaciones.bind(Object(s.a)(o)),o.setButtonTrasladar=o.setButtonTrasladar.bind(Object(s.a)(o)),o.openModalUbicaciones=o.openModalUbicaciones.bind(Object(s.a)(o)),o.cargarWmsZonas=o.cargarWmsZonas.bind(Object(s.a)(o)),o.successWmsZonas=o.successWmsZonas.bind(Object(s.a)(o)),o.cargarWmsRacks=o.cargarWmsRacks.bind(Object(s.a)(o)),o.successWmsRacks=o.successWmsRacks.bind(Object(s.a)(o)),o.cargarColumnas=o.cargarColumnas.bind(Object(s.a)(o)),o.successColumnas=o.successColumnas.bind(Object(s.a)(o)),o.cargarNiveles=o.cargarNiveles.bind(Object(s.a)(o)),o.cargarTipoUbicacion=o.cargarTipoUbicacion.bind(Object(s.a)(o)),o.clearCamposFormulario=o.clearCamposFormulario.bind(Object(s.a)(o)),o.clearCamposFormularioProducto=o.clearCamposFormularioProducto.bind(Object(s.a)(o)),o.trasladarCantidad=o.trasladarCantidad.bind(Object(s.a)(o)),o.successTrasladar=o.successTrasladar.bind(Object(s.a)(o)),o.clearValidCampos=o.clearValidCampos.bind(Object(s.a)(o)),o.validNiveles=o.validNiveles.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("boton_cargar").setClick(this.cargarUbicaciones),this.getField("sucursal_id").setOnChange(this.cargarWmsZonas),this.getField("wms_zona_id").setOnChange(this.cargarWmsRacks),this.getField("wms_nuevo_rack_id").setOnChange(this.cargarColumnas),this.getField("numero_nivel").setOnChange(this.cargarNiveles),this.getField("nivel_numero").setOnChange(this.cargarTipoUbicacion),this.getField("boton_trasladar").setClick(this.trasladarCantidad),this.getField("wms_nuevo_racks_columnas").setOnChange(this.clearValidCampos),this.getField("codigo_bodega").setOnChange(this.clearValidCampos),this.getField("producto").setOnChange(this.clearValidCampos),this.getField("codigo_bodega").setOnChange(this.clearCamposFormulario),this.getField("nombre_producto").setOnChange(this.clearCamposFormularioProducto)}},{key:"cargarUbicaciones",value:function(){if(""!==this.getField("codigo_bodega").getValue()&&""!==this.getField("producto").getValue()){this.getField("codigo_bodega").setError(!1,"* Este campo es requerido."),this.getField("producto").setError(!1,"* Este campo es requerido.");var e={codigo_producto:this.getField("producto").getValue(),codigo_bodega:this.getField("codigo_bodega").getValue()};this.generalFormat.nombre_accion="368-ubicaciones_cantidades_codigo_producto_codigo_bodega",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successUbicaciones,error:this.error_,general:this.generalFormat})}else""===this.getField("codigo_bodega").getValue()?this.getField("codigo_bodega").setError(!0,"* Este campo es requerido."):""===this.getField("producto").getValue()&&this.getField("producto").setError(!0,"* Este campo es requerido.")}},{key:"successUbicaciones",value:function(e){if(e.model&&e.model.length>0){console.log("DATA ----\x3e>>: ",e.model),this.gridOptionsUbicaciones.rowData=e.model;var t=new Map;t.set(8,{cellRenderer:this.setButtonTrasladar,field:"Trasladar",width:110}),this.getField("tabla_ubicaciones").initData(this.gridOptionsUbicaciones,t)}else this.getField("tabla_ubicaciones").toggle(!1)}},{key:"setButtonTrasladar",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.openModalUbicaciones(e.data.id)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:60px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Trasladar"),i}},{key:"openModalUbicaciones",value:function(e){this.cargarUbicaciones(),this.getField("modal_trasladar").handleClickOpen(),console.log("CLICK EN ID: ",this.getField("id_ubicacion").getValue())}},{key:"cargarWmsZonas",value:function(){if(""!==this.getField("sucursal_id").getValue()){var e={value:this.getField("sucursal_id").getValue()};this.generalFormat.nombre_accion="368-Busca_los_wms_zonas_que_contenga_la_sucursal_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successWmsZonas,error:this.error_,general:this.generalFormat})}}},{key:"successWmsZonas",value:function(e){if(e.model&&e.model.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.codigo+"-"+e.descripcion,i.campos_cambian={},t.push(i)})),this.getField("wms_zona_id").setOptions(t)}}},{key:"cargarWmsRacks",value:function(){if(""!==this.getField("wms_zona_id").getValue()){var e=[{text:"Ninguno",value:" ",campos_cambian:{}}];this.getField("wms_nuevo_racks_columnas").setOptions(e),this.getField("nivel_numero").setOptions(e),this.clearValidCampos();var t={value:this.getField("wms_zona_id").getValue()};this.generalFormat.nombre_accion="368-Busca_los_wms_nuevo_racks_que_contengan_wms_zona_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successWmsRacks,error:this.error_,general:this.generalFormat})}}},{key:"successWmsRacks",value:function(e){var t=[];e.model&&e.model.length>0?(t=[{text:"Ninguno",value:" ",campos_cambian:{}}],e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.numero,i.campos_cambian={},t.push(i)})),this.getField("wms_nuevo_rack_id").setOptions(t),this.getField("tipo_ubicacion").setValue("")):e.model&&0===e.model.length&&(t=[{text:"Ninguno",value:" ",campos_cambian:{}}],e.data.forEach((function(e){var i={value:0,text:0,campos_cambian:{}};t.push(i)})),this.getField("wms_nuevo_rack_id").setOptions(t),this.getField("wms_nuevo_racks_columnas").setOptions(t),this.getField("nivel_numero").setOptions(t),this.getField("tipo_ubicacion").setValue(""))}},{key:"cargarColumnas",value:function(){if(""!==this.getField("wms_nuevo_rack_id").getValue()){this.clearValidCampos();this.getField("nivel_numero").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]);var e={value:this.getField("wms_nuevo_rack_id").getValue()};this.generalFormat.nombre_accion="368-Busca_un_wms_nuevo_racks_columnas_por_wms_nuevo_rack_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successColumnas,error:this.error_,general:this.generalFormat})}}},{key:"successColumnas",value:function(e){if(e.model&&e.model.length>0){console.log("DATOS ARRAY ---\x3e>",e);var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.columna_numero,i.nivel=e.niveles,i.tipo_ubicacion=e.tipo_ubicacion,i.campos_cambian={columna_numero:e.columna_numero,numero_nivel:e.niveles,wms_tipos_ubicacion_id:e.wms_tipos_ubicacion_id,tipo_ubicacion:e.tipo_ubicacion,wms_nuevo_racks_columnas_id:e.id},t.push(i)})),this.getField("wms_nuevo_racks_columnas").setOptions(t)}}},{key:"cargarNiveles",value:function(){if(""!==this.getField("numero_nivel").getValue()&&0!==this.getField("numero_nivel").getValue()){for(var e=[{text:"Ninguno",value:"",campos_cambian:{}}],t=1;t<=parseInt(this.getter("numero_nivel"));t++){var i={};i.value=t,i.text=t,i.campos_cambian={},e.push(i)}this.getField("nivel_numero").setDisabled(!1),this.getField("nivel_numero").setOptions(e)}}},{key:"getter",value:function(e){return this.getField(e).getValue()}},{key:"cargarTipoUbicacion",value:function(){this.validNiveles()}},{key:"trasladarCantidad",value:function(){if(""!==this.getField("wms_zona_id").getValue()&&""!==this.getField("wms_nuevo_rack_id").getValue()&&""!==this.getField("wms_nuevo_racks_columnas_id").getValue()&&""!==this.getField("nivel_numero").getValue()&&""!==this.getField("cantidad").getValue()&&0!==this.getField("cantidad").getValue()&&""!==this.getField("tipo_ubicacion").getValue()&&""!==this.getField("id_ubicacion").getValue()&&""!==this.getField("producto").getValue()&&""!==this.getField("codigo_bodega").getValue()){var e={sucursal_id:11111,columna_numero:1111,nivel_numero:1111,wms_nuevo_racks_columnas:1111,id:this.getField("id_ubicacion").getValue(),codigo:this.getField("producto").getValue(),codigo_bodega:this.getField("codigo_bodega").getValue(),wms_nuevo_racks_columnas_id:this.getField("wms_nuevo_racks_columnas_id").getValue(),nivel:this.getField("nivel_numero").getValue(),cantidad:this.getField("cantidad").getValue()};this.generalFormat.nombre_accion="368-Permite_hacer_traslado_cantidad_productos_ubicacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:e,success:this.successTrasladar,error:this.error_,general:this.generalFormat})}else""===this.getField("wms_zona_id").getValue()?this.getField("wms_zona_id").setError(!0,"* Este campo es requerido."):""===this.getField("wms_nuevo_rack_id").getValue()?this.getField("wms_nuevo_rack_id").setError(!0,"* Este campo es requerido."):""===this.getField("wms_nuevo_racks_columnas_id").getValue()?this.getField("wms_nuevo_racks_columnas").setError(!0,"* Este campo es requerido."):""===this.getField("nivel_numero").getValue()?this.getField("nivel_numero").setError(!0,"* Este campo es requerido."):""===this.getField("tipo_ubicacion").getValue()?this.getField("tipo_ubicacion").setError(!0,"* Este campo es requerido."):""===this.getField("cantidad").getValue()&&0===this.getField("cantidad").getValue()||this.getField("cantidad").setError(!0,"* Este campo es requerido.")}},{key:"successTrasladar",value:function(e){200===e.estado_p&&(this.cargarUbicaciones(),this.getField("modal_trasladar").handleClose())}},{key:"clearValidCampos",value:function(){this.getField("nivel_numero").setOptions([{text:"Ninguno",value:" ",campos_cambian:{}}]),this.getField("wms_zona_id").setError(!1,"* Este campo es requerido."),this.getField("wms_nuevo_rack_id").setError(!1,"* Este campo es requerido."),this.getField("wms_nuevo_racks_columnas").setError(!1,"* Este campo es requerido."),this.getField("nivel_numero").setError(!1,"* Este campo es requerido."),this.getField("tipo_ubicacion").setError(!1,"* Este campo es requerido."),this.getField("cantidad").setError(!1,"* Este campo es requerido."),this.getField("codigo_bodega").setError(!1,"* Este campo es requerido."),this.getField("producto").setError(!1,"* Este campo es requerido.")}},{key:"validNiveles",value:function(){this.getField("nivel_numero").setError(!1,"* Este campo es requerido.")}},{key:"clearCamposFormulario",value:function(){this.getField("producto").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("tabla_ubicaciones").toggle(!1)}},{key:"clearCamposFormularioProducto",value:function(){this.getField("tabla_ubicaciones").toggle(!1)}}]),i}(d.a.form);d.a.addController("ubicaciones_cant",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.tamanoDatos=0,o.grabarItem=o.grabarItem.bind(Object(s.a)(o)),o.observacion="",o.etapa_id=0,o.lote="",o.abastecimiento="",o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnConfirmar").setClick(this.grabarItem)}},{key:"grabarItem",value:function(){if(this.getField("detalle_devoluciones").valid()){var e={accion:"servicio",campo:"btnConfirmar",id_formulario:this.formId,produccion_ficha_id:this.props.data.id_ficha,actividad_id:this.props.data.actividad_id,detalle_devoluciones:this.getField("detalle_devoluciones").getValue(),proceso_id:this.props.data.proceso_id,actividad_configuracion_id:this.props.data.actividad_configuracion_id};this.service.send(this.getConstant().formSave(),"PUT",e,this.successCloseEstage,this.error_)}}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).UploadTable=function(){o.service.send(o.getConstant().searchFormat().format("","table_vista_comprador","servicio",o.formId),"GET",void 0,o.success,o.error_)},o.success=function(e){if(e.model&&e.model.length>0){o.gridOptions.rowData=e.model;var t=new Map;t.set("saldo",{cellRenderer:function(e){return"".formatoPrecio(e.data.saldo)}}),o.getField("table_vista_comprador").initData(o.gridOptions,t)}else o.getField("table_vista_comprador").toggle(!1)},o.state.open=!1,o.initForm=o.initForm.bind(Object(s.a)(o)),o.onClick=o.onClick.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("button_reload")&&this.getField("button_reload").setClick(this.onClick),this.UploadTable()}},{key:"onClick",value:function(){this.UploadTable()}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).uploadTable=function(){o.service.send(o.getConstant().searchFormat().format("","tabla_vista_estandar","servicio",o.formId),"GET",void 0,o.success,o.error_)},o.success=function(e){var t=new Map;t.set(0,{cellRenderer:o.setButtonAprove,field:"Operaci\xf3n"}),t.set("valor",{cellRenderer:o.setFormat}),t.set("saldo",{cellRenderer:o.setFormat2}),e.model&&e.model.length>0?(o.gridOptions2.rowData=e.model,o.getField("tabla_vista_estandar").initData(o.gridOptions2,t)):o.getField("tabla_vista_estandar").toggle(!1)},o.state.open=!1,o.fechaActual="",o.initForm=o.initForm.bind(Object(s.a)(o)),o.setFormat=o.setFormat.bind(Object(s.a)(o)),o.setFormat2=o.setFormat2.bind(Object(s.a)(o)),o.successModal=o.successModal.bind(Object(s.a)(o)),o.setButtonAprove=o.setButtonAprove.bind(Object(s.a)(o)),o.successSaveComprador=o.successSaveComprador.bind(Object(s.a)(o)),o.onClick=o.onClick.bind(Object(s.a)(o)),o.onClick2=o.onClick2.bind(Object(s.a)(o)),o.gridOptions2=Object.assign({},o.gridOptions),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("button_reload_vista")&&this.getField("button_reload_vista").setClick(this.onClick),this.getField("tabla_vista_estandar")&&this.uploadTable()}},{key:"formatoPrecioValor",value:function(){if(""!==this.getField("valor_real").getValue()){var e=this.getField("valor_real").getValue().replace(/,/g,"");this.getField("valor_real").setValue("".formatoPrecio(e))}}},{key:"formatoPrecioIva",value:function(){if(""!==this.getField("iva_real").getValue()){var e=this.getField("iva_real").getValue().replace(/,/g,"");this.getField("iva_real").setValue("".formatoPrecio(e))}}},{key:"formatoPrecioRetencion",value:function(){if(""!==this.getField("retenciones_real").getValue()){var e=this.getField("retenciones_real").getValue().replace(/,/g,"");this.getField("retenciones_real").setValue("".formatoPrecio(e))}}},{key:"onClick",value:function(){this.uploadTable()}},{key:"onClick2",value:function(){var e=this.getField("iva_real").getValue().replace(/,/g,""),t=this.getField("valor_real").getValue().replace(/,/g,""),i=this.getField("retenciones_real").getValue().replace(/,/g,""),a=!1,o=this.fechaActual.split("-"),s=this.getField("vence_vista").getValue().split("-");if(o[0]<s[0]||o[0]===s[0]&&(o[1]<s[1]||o[1]===s[1]&&o[2]<s[2])?(a=!0,this.getField("vence_vista").setError(!1,"")):this.getField("vence_vista").setError(!0,"* Fecha no puede ser menor a "+this.fechaActual),this.getField("comprador_id").valid()&this.getField("iva_real").valid()&this.getField("valor_real").valid()&this.getField("retenciones_real").valid()&a){var r={accion:"servicio",campo:"grabar_comprador",id_formulario:this.formId,cartera_proveedores_id:this.getField("cartera_proveedores_id").getValue(),iva_real:e,vence:this.getField("vence_vista").getValue(),valor_real:t,retenciones_real:i,comprador_id:this.getField("comprador_id").getValue()};parseInt(i)+parseInt(e)>parseInt(t)?(this.getField("retenciones_real").setError(!0,"* Retenci\xf3n + Iva no pueden superar el Valor real"),this.getField("iva_real").setError(!0,"* Retenci\xf3n + Iva no pueden superar el Valor real")):this.service.send(this.getConstant().formSave(),"PUT",r,this.successSaveComprador,this.error_)}}},{key:"successSaveComprador",value:function(e){void 0!==e.estado_p&&200!==e.estado_p||(this.uploadTable(),this.getField("fieldAlert").toggle(!0,"Acci\xf3n Exitosa","success"),this.getField("modal_vista").handleClose())}},{key:"successModal",value:function(e){if(void 0!==e.model[0]&&e.model.length>0){this.getField("valor_real")&&this.getField("valor_real").setKeyUp("".formatoPrecioValor),this.getField("iva_real")&&this.getField("iva_real").setKeyUp("".formatoPrecioIva),this.getField("retenciones_real")&&this.getField("retenciones_real").setKeyUp("".formatoPrecioRetencion);var t=e.model[0].totales,i=e.model[0].data;this.gridOptions.rowData=i;var a=new Map;a.set("valor",{cellRenderer:this.setFormat}),this.getField("tabla_terceros").initData(this.gridOptions,a),this.getField("iva_real").setValue("".formatoPrecio(t.iva)),this.getField("valor_real").setValue("".formatoPrecio(t.valor)),this.getField("retenciones_real").setValue("".formatoPrecio(t.retencion))}else this.getField("modal_vista").handleClose()}},{key:"error_",value:function(){}},{key:"setFormat",value:function(e){return"".formatoPrecio(e.data.valor)}},{key:"setFormat2",value:function(e){return"".formatoPrecio(e.data.saldo)}},{key:"setButtonAprove",value:function(e){var t=this,i=e.data.id,a=e.data.numero,o=e.data.fecha,s=e.data.nit,r=e.data.vence,n=e.data.nombre,d=e.data.sede,l=document.createElement("input");return l.onclick=function(){return t.aprove(i,a,o,s,r,n,d)},l.setAttribute("id","button_aprove_"+i),l.setAttribute("class","buttonStyle"),l.setAttribute("type","button"),l.setAttribute("value","Aprobar"),l}},{key:"aprove",value:function(e,t,i,a,o,s,r){this.getField("modal_vista").handleClickOpen(),this.getField("numero").setValue(t),this.getField("fecha").setValue(i),this.getField("cartera_proveedores_id").setValue(e),this.getField("nit_vista").setValue(a),this.getField("vence_vista").setValue(o),this.getField("nombre_vista").setValue(s),this.fechaActual=o,this.getField("grabar_comprador").setClick(this.onClick2),this.service.send(this.getConstant().searchFormat().format(a+"/"+r+"/"+i+"/"+t,"tabla_terceros","servicio",this.formId),"GET",void 0,this.successModal,this.error_)}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.grabarItem=o.grabarItem.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("btnTerminarMoler").setClick(this.grabarItem)}},{key:"grabarItem",value:function(){if(this.getField("observaciones").valid()){var e={accion:"servicio",campo:"btnTerminarMoler",id_formulario:this.formId,id:this.props.data.id_ficha,actividad_id:this.props.data.actividad_id,detalle_devoluciones:this.getField("observaciones").getValue(),proceso_id:this.props.data.proceso_id,observaciones:this.getField("observaciones").getValue(),actividad_configuracion_id:this.props.data.actividad_configuracion_id};this.service.send(this.getConstant().formSave(),"PUT",e,this.successCloseEstage,this.error_)}}}]),i}(i(3).a.form);t.default=d},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).getter=o.getter.bind(Object(s.a)(o)),o.setter=o.setter.bind(Object(s.a)(o)),o.initForm=o.initForm.bind(Object(s.a)(o)),o.wiper=o.wiper.bind(Object(s.a)(o)),o.initTB=o.initTB.bind(Object(s.a)(o)),o.showTB=o.showTB.bind(Object(s.a)(o)),o.setChange=o.setChange.bind(Object(s.a)(o)),o.change=o.change.bind(Object(s.a)(o)),o.popUp=o.popUp.bind(Object(s.a)(o)),o.checkerShowTB=o.checkerShowTB.bind(Object(s.a)(o)),o.cleaner=o.cleaner.bind(Object(s.a)(o)),o.stateV=!1,o.gridOptionsOnSelectionChanged=Object.assign({},o.gridOptions),o.gridOptionsOnShowTB=Object.assign({},o.gridOptions),o.datosRack=o.datosRack.bind(Object(s.a)(o)),o.successTraerRack=o.successTraerRack.bind(Object(s.a)(o)),o.datosColumna=o.datosColumna.bind(Object(s.a)(o)),o.successTraerColumna=o.successTraerColumna.bind(Object(s.a)(o)),o.datosNivel=o.datosNivel.bind(Object(s.a)(o)),o.limpiar=o.limpiar.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"getter",value:function(e){return this.getField(e).getValue()}},{key:"setter",value:function(e,t){this.getField(e).setValue(t)}},{key:"checkerShowTB",value:function(e){return 0===e&&(this.stateV=!0),1===e&&(this.stateV=!1),this.stateV}},{key:"initForm",value:function(){this.getField("nombre_bodega").setOnChange(this.initTB),this.getField("nombre_producto").setOnChange(this.initTB),this.getField("wms_zona_id").setOnChange(this.datosRack),this.getField("wms_nuevo_rack_id").setOnChange(this.datosColumna),this.getField("btngrabar").setClick(this.limpiar)}},{key:"cleaner",value:function(){this.wiper(),this.getField("codigo_bodega").setDisabled(!1),this.getField("codigo_producto").setDisabled(!1)}},{key:"wiper",value:function(){for(var e in this.refs)void 0!==e&&null!==e&&void 0!==this.getField(e).setValue&&"codigo_bodega"!==e&&"codigo_producto"!==e&&"nombre_bodega"!==e&&"nombre_producto"!==e&&""===this.getter("nombre_producto")&&!1!==this.stateV&&this.getField(e).setValue("");this.stateV&&(this.getField("tb_ubicaciones_productos").toggle(!1),this.getField("modal_cambiar_ubicacion").handleClose())}},{key:"initTB",value:function(){if(this.checkerShowTB()&&(this.wiper(),this.checkerShowTB(1)),""!==this.getter("nombre_producto")&&""!==this.getter("codigo_producto")&&""!==this.getter("nombre_bodega")&&""!==this.getter("codigo_bodega")&&""!==this.getter("articulo_id")){this.getField("articulo_id").setValue(this.getField("id_articulo").getValue()),this.getField("sucursal_id").setValue(this.getField("id_sucursal").getValue());var e={value:this.getter("codigo_producto")+""};this.generalFormat.nombre_accion="servicio_wms_ubicaciones_productos_25_codigoproducto",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.showTB,error:this.error_,general:this.generalFormat})}}},{key:"showTB",value:function(e){var t=new Map;t.set("accion",{cellRenderer:this.setChange,field:"Acci\xf3n"}),this.gridOptionsOnShowTB.rowData=e.model,this.getField("tb_ubicaciones_productos").initData(this.gridOptionsOnShowTB,t),this.checkerShowTB(0)}},{key:"setChange",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.change(e.data.id,e.data.nivel_numero,e.data.columna_numero,e.data.wms_tipos_ubicacion_id,e.data.tipo_ubicacion,e.data.cantidad)},i.setAttribute("class","buttonStyle"),i.setAttribute("type","button"),i.setAttribute("value","Cambiar"),i}},{key:"change",value:function(e,t,i,a){this.getField("btngrabar").setIdEntity(e),this.getField("wms_tipos_ubicacion_id").setValue(t),this.getField("tipo_ubicacion").setValue(i),this.getField("cantidad").setValue(a);var o={value:parseInt(this.getter("sucursal_id"))};this.generalFormat.nombre_accion="339-servicio_wms_ubicaciones_productos_25_zonas-sucursalid",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:o,success:this.popUp,error:this.error_,general:this.generalFormat})}},{key:"popUp",value:function(e){if(200===e.estado_p){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.codigo+"-"+e.descripcion,i.campos_cambian={},t.push(i)})),this.getField("wms_zona_id").setOptions(t),this.getField("articulo_id").setValue(this.getField("id_articulo").getValue()),this.getField("sucursal_id").setValue(this.getField("id_sucursal").getValue()),this.getField("modal_cambiar_ubicacion").handleClickOpen()}}},{key:"datosRack",value:function(e){if(""!==this.getField("wms_zona_id").getValue()&&" "!==this.getField("wms_zona_id").getValue()){var t={value:this.getField("wms_zona_id").getValue()};this.generalFormat.nombre_accion="339-servicio_wms_ubicaciones_productos_25_racks-wmszonaid",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTraerRack,error:this.error_,general:this.generalFormat})}}},{key:"successTraerRack",value:function(e){if(200===e.estado_p&&e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.numero,i.campos_cambian={},t.push(i)})),this.getField("wms_nuevo_rack_id").setOptions(t)}}},{key:"datosColumna",value:function(e,t){if(""!==this.getField("wms_nuevo_rack_id").getValue()&&" "!==this.getField("wms_nuevo_rack_id").getValue()){var i={value:this.getField("wms_nuevo_rack_id").getValue()};this.generalFormat.nombre_accion="339-Busca_un_wms_nuevo_racks_columnas_por_wms_nuevo_rack_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.successTraerColumna,error:this.error_,general:this.generalFormat})}}},{key:"successTraerColumna",value:function(e){if(200===e.estado_p&&e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.columna_numero,i.campos_cambian={columna_numero:e.columna_numero},t.push(i)})),this.getField("wms_nuevo_racks_columnas_id").setOptions(t),this.getField("columna_numero").setOnChange(this.datosNivel)}}},{key:"datosNivel",value:function(){if(""!==this.getField("columna_numero").getValue()&&" "!==this.getField("columna_numero").getValue()){for(var e=[{text:"Ninguno",value:"",campos_cambian:{}}],t=1;t<=parseInt(this.getter("columna_numero"));t++){var i={};i.value=t,i.text=t,i.campos_cambian={},e.push(i)}this.getField("nivel_numero").setDisabled(!1),this.getField("nivel_numero").setOptions(e)}}},{key:"limpiar",value:function(){this.getField("codigo_bodega").setValue(""),this.getField("codigo_producto").setValue(""),this.getField("nombre_bodega").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("wms_zona_id").setValue(""),this.getField("wms_nuevo_rack_id").setValue(""),this.getField("wms_nuevo_racks_columnas_id").setValue(""),this.getField("nivel_numero").setValue(""),this.wiper()}}]),i}(d.a.form);d.a.addController("wmsCambiar_ubicacion",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.valoresZonas=o.valoresZonas.bind(Object(s.a)(o)),o.traerDescripcionZona=o.traerDescripcionZona.bind(Object(s.a)(o)),o.successTraerDescripcionZona=o.successTraerDescripcionZona.bind(Object(s.a)(o)),o.onSelectionChangedRowTableCustom=o.onSelectionChangedRowTableCustom.bind(Object(s.a)(o)),o.gridOptionsTableDefault.onSelectionChanged=o.onSelectionChangedRowTableCustom,o.loadData=o.loadData.bind(Object(s.a)(o)),o.selectedRowsCustom=[],o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("wms_zona_id").setDisabled(!0),this.getField("sucursal_id").setCustomSuccess(this.valoresZonas)}},{key:"valoresZonas",value:function(e){if(e.length>0){this.getField("numero").setValue(e[0].numero);var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];if(e.forEach((function(e){var i={};i.value=e.id,i.text=e.descripcion,i.campos_cambian={},t.push(i)})),this.getField("wms_zona_id").setOptions(t),this.selectedRowsCustom.length>0){for(var i in this.selectedRowsCustom[0])this.getField(i)&&this.getField(i).setValue&&"sucursal_id"!==i&&this.getField(i).setValue(this.selectedRowsCustom[0][i]);this.selectedRowsCustom=[]}}}},{key:"traerDescripcionZona",value:function(e){if(this.getField("wms_zona_id").setValue(""),""!==this.getField("sucursal_id").getValue()&&" "!==this.getField("sucursal_id").getValue()){var t={value:this.getField("sucursal_id").getValue()};this.generalFormat.nombre_accion="336_Busca_los_wms_zonas_que_contenga_la_sucursal_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTraerDescripcionZona,error:this.error_,general:this.generalFormat})}}},{key:"successTraerDescripcionZona",value:function(e){200===e.estado_p&&this.getField("wms_zona_id").setValue(e.model[0].descripcion)}},{key:"onSelectionChangedRowTableCustom",value:function(){var e=this.gridOptionsTableDefault.api.getSelectedRows();void 0!==e[0].sucursal_id&&null!==e[0].sucursal_id&&(this.selectedRowsCustom=e,this.getField("sucursal_id").setValue(e[0].sucursal_id))}}]),i}(d.a.form);d.a.addController("wms_racks",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.successEstadosActivosSelect=o.successEstadosActivosSelect.bind(Object(s.a)(o)),o.selectOptions=[],o.successTiposUbicacion=o.successTiposUbicacion.bind(Object(s.a)(o)),o.selectOptionsTipoUbi=[],o.datosZonas=o.datosZonas.bind(Object(s.a)(o)),o.successTraerZona=o.successTraerZona.bind(Object(s.a)(o)),o.successUbicaciones=o.successUbicaciones.bind(Object(s.a)(o)),o.loadTable=o.loadTable.bind(Object(s.a)(o)),o.gridOptionsRacks=Object.assign({},o.gridOptions),o.idDataSelected=0,o.successEstadosActivos=o.successEstadosActivos.bind(Object(s.a)(o)),o.gridOptionsRacksCol=Object.assign({},o.gridOptions),o.setButtonSeleccionar=o.setButtonSeleccionar.bind(Object(s.a)(o)),o.selectEspecification=o.selectEspecification.bind(Object(s.a)(o)),o.successSeleccionar=o.successSeleccionar.bind(Object(s.a)(o)),o.setButtonNivelActual=o.setButtonNivelActual.bind(Object(s.a)(o)),o.nivelActualChange=o.nivelActualChange.bind(Object(s.a)(o)),o.guardarNiveles=o.guardarNiveles.bind(Object(s.a)(o)),o.successActualizarNivelActual=o.successActualizarNivelActual.bind(Object(s.a)(o)),o.idRack="",o.setButtonOperario=o.setButtonOperario.bind(Object(s.a)(o)),o.valueChange=o.valueChange.bind(Object(s.a)(o)),o.setButtonTipoUbi=o.setButtonTipoUbi.bind(Object(s.a)(o)),o.successTipoUbi=o.successTipoUbi.bind(Object(s.a)(o)),o.valueChangeTipoUbi=o.valueChangeTipoUbi.bind(Object(s.a)(o)),o.setButtonImprimir=o.setButtonImprimir.bind(Object(s.a)(o)),o.servicioImprimir=o.servicioImprimir.bind(Object(s.a)(o)),o.successImprimir=o.successImprimir.bind(Object(s.a)(o)),o.enviarImpresion=o.enviarImpresion.bind(Object(s.a)(o)),o.successEnviarImpresion=o.successEnviarImpresion.bind(Object(s.a)(o)),o.successImpresoras=o.successImpresoras.bind(Object(s.a)(o)),o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("sucursal_id_carga").setOnChange(this.datosZonas),this.getField("zona_id").setOnChange(this.successUbicaciones),this.getField("boton_imprimir").setClick(this.enviarImpresion),this.getField("sucursal_id").setCustomSuccess(this.successImpresoras),this.getField("wms_zona_id").setSelectionChanged=this.successUbicaciones;this.generalFormat.nombre_accion="337-racks_columnas_zonas_nuevo_estadoactvo_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:{},success:this.successEstadosActivosSelect,error:this.error_,general:this.generalFormat}),this.generalFormat.nombre_accion="337-Retorna_todos_los wms_tipos_ubicacion",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",success:this.successTiposUbicacion,error:this.error_,general:this.generalFormat})}},{key:"successEstadosActivosSelect",value:function(e){200===e.estado_p&&(this.selectOptions=e.model)}},{key:"successTiposUbicacion",value:function(e){this.selectOptionsTipoUbi=e.model}},{key:"datosZonas",value:function(){if(""!==this.getField("sucursal_id_carga").getValue()&&" "!==this.getField("sucursal_id_carga").getValue()){var e={value:this.getField("sucursal_id_carga").getValue()};this.generalFormat.nombre_accion="337-racks_columnas_zonas_buscar_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successTraerZona,error:this.error_,general:this.generalFormat})}}},{key:"successTraerZona",value:function(e){var t=[{text:"Ninguno",value:"",campos_cambian:{}}];200===e.estado_p?(e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.codigo+"-"+e.descripcion,i.campos_cambian={zona_id:e.id},t.push(i)})),this.getField("wms_zona_id").setOptions(t)):this.getField("wms_zona_id").setOptions(t)}},{key:"successUbicaciones",value:function(){if(""!==this.getField("zona_id").getValue()&&" "!==this.getField("zona_id").getValue()){var e={value:this.getField("zona_id").getValue()};this.generalFormat.nombre_accion="337-racks_columnas_zonas_nuevo_wmszonaid",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.loadTable,error:this.error_,general:this.generalFormat})}}},{key:"loadTable",value:function(e){if(200===e.estado_p&&void 0!==e.model&&e.model.length>0){this.gridOptionsRacks.rowData=[],this.getField("TbRack").initData(this.gridOptionsRacks),this.getField("TbRack").toggle(!0),this.gridOptionsRacks.rowData=e.model,this.gridOptionsRacks.paginationPageSize=100;var t=new Map;t.set("accion",{cellRenderer:this.setButtonSeleccionar,field:"Seleccionar"}),this.getField("TbRack").initData(this.gridOptionsRacks,t)}else this.getField("TbRack").toggle(!1)}},{key:"setButtonSeleccionar",value:function(e){var t=this,i=e.data.id,a=document.createElement("input");return a.onclick=function(){return t.selectEspecification(i)},a.setAttribute("id","button_selected_"+i),a.setAttribute("style","width:100%; height: 100%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),a.setAttribute("type","button"),a.setAttribute("value","Seleccionar"),a}},{key:"selectEspecification",value:function(e){if(this.idRack=e,this.getField("modal_niveles").handleClickOpen(),void 0!==e&&""!==e){var t={value:e};this.generalFormat.nombre_accion="337-racks_columnas_busca_nuevo_rackcolumna_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successSeleccionar,error:this.error_,general:this.generalFormat})}}},{key:"successSeleccionar",value:function(e){if(200===e.estado_p){this.gridOptionsRacksCol.rowData=[],this.getField("tabla_niveles").initData(this.gridOptionsRacksCol);var t=new Map;t.set("niveles",{cellRenderer:this.setButtonNivelActual,cellStyle:{backgroundColor:"rgb(238,238,238)",textAlign:"right",borderRadius:"5px",color:"rgb(0, 86, 201)"},onCellValueChanged:this.nivelActualChange,width:100,editable:!0,field:"niveles"}),t.set("tipo_ubi",{cellRenderer:this.setButtonTipoUbi,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px"},field:"Tipo Ubicacion"}),t.set("estado",{cellRenderer:this.setButtonOperario,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px"},field:"estado"}),t.set("imprimir",{cellRenderer:this.setButtonImprimir,singleClickEdit:!0,cellStyle:{backgroundColor:"rgb(238,238,238)",borderRadius:"5px"},field:"imprimir"}),this.getField("tabla_niveles").toggle(!0),this.gridOptionsRacksCol.rowData=e.model,this.getField("tabla_niveles").initData(this.gridOptionsRacksCol,t)}else this.getField("tabla_niveles").toggle(!1)}},{key:"setButtonNivelActual",value:function(e){var t=e.data.niveles,i=document.createElement("div"),a=document.createElement("label");return null!==t&&""!==t&&void 0!==t?(a.textContent=t,e.data.niveles):(a.textContent=0,i.appendChild(a),i)}},{key:"setButtonTipoUbi",value:function(e){var t=this,i=e.data.wms_tipos_ubicacion_id,a=document.createElement("select"),o=document.createElement("div");o.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),a.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),a.onchange=function(i){return t.valueChangeTipoUbi(i,e)},a.setAttribute("id","mySelectOperario_");var s=this.successTipoUbi();return this.valor_idOpe=1,s.map((function(e){return a.appendChild(e),parseInt(e.value)===i&&(t.valor_idOpe=parseInt(e.value)),null})),o.appendChild(a),null===i||void 0===i?this.valido=!1:a.value=this.valor_idOpe,o}},{key:"valueChangeTipoUbi",value:function(e,t){var i=t.data.id,a=e.target.value,o=t.data.wms_tipos_ubicacion_id,s=t.data.estadoactivo_id,r=t.data.niveles;void 0!==e.target?(this.getField("wms_tipos_ubicacion_id").setValue(a),this.guardarNiveles(i,r,s,t)):this.getField("wms_tipos_ubicacion_id").setValue(o)}},{key:"successTipoUbi",value:function(){var e=document.createElement("option");e.setAttribute("value"," "),e.textContent="Ninguno";var t=[e];return this.selectOptionsTipoUbi.map((function(e){var i=document.createElement("option");return i.setAttribute("value",parseInt(e.id)),i.textContent=e.tipo,t.push(i),null})),t}},{key:"setButtonOperario",value:function(e){var t=this,i=e.data.estadoactivo_id,a=document.createElement("select"),o=document.createElement("div");o.setAttribute("style","width: 100%; heigth: 100%; padding-top: 4px"),a.setAttribute("style","width: 450px; heigth: 100%; background-color: transparent; border: 0px solid transparent; border-color: #fff transparent transparent transparent"),a.onchange=function(i){return t.valueChange(i,e.data)},a.setAttribute("id","mySelectOperario_");var s=this.successEstadosActivos();return this.valor_idOpe=1,s.map((function(e){return a.appendChild(e),parseInt(e.value)===i&&(t.valor_idOpe=parseInt(e.value)),null})),o.appendChild(a),null===i||void 0===i?this.valido=!1:a.value=this.valor_idOpe,o}},{key:"valueChange",value:function(e,t){if(void 0!==e.target)if(" "!==e.target.value&&""!==e.target.value){var i=parseInt(e.target.value),a=t.id,o=t.niveles,s=t.wms_tipos_ubicacion_id;isNaN(i)||(null!==s&&" "!==s?this.guardarNiveles(a,o,i):this.getField("fieldAlert").toggle(!0,"No tiene ning\xfan tipo de ubicaci\xf3n asignado","error"))}else this.successActualizarNivelActual();else this.successActualizarNivelActual()}},{key:"successEstadosActivos",value:function(e){var t=document.createElement("option");t.setAttribute("value"," "),t.textContent="Ninguno";var i=[t];return this.selectOptions.map((function(e){var t=document.createElement("option");return t.setAttribute("value",parseInt(e.id)),t.textContent=e.descripcion,i.push(t),null})),i}},{key:"guardarNiveles",value:function(e,t,i){t=parseInt(t);var a={id:e,estadoactivo_id:parseInt(i),niveles:t,wms_tipos_ubicacion_id:this.getField("wms_tipos_ubicacion_id").getValue()};this.generalFormat.nombre_accion="337-racks_columnas_modifica_niveles_estado",this.service.send({endpoint:this.constant.formConfiguration(),method:"PUT",body:a,success:this.successActualizarNivelActual,error:this.error_,general:this.generalFormat})}},{key:"successActualizarNivelActual",value:function(){var e={value:this.idRack};this.generalFormat.nombre_accion="337-racks_columnas_busca_nuevo_rackcolumna_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:e,success:this.successSeleccionar,error:this.error_,general:this.generalFormat})}},{key:"setButtonImprimir",value:function(e){var t=this,i=document.createElement("input");return i.onclick=function(){return t.servicioImprimir(e.data.id,e.data.niveles)},i.setAttribute("id","button_aprove_"),i.setAttribute("style","width:80px; height: 20px%; background-color:#303f9f;color:#fff;border:1px solid #303f9f;padding-left:5px;padding-rigth:5px;padding-top:2px;padding-bottom:2px;border-radius:3px; cursor:pointer"),i.setAttribute("type","button"),i.setAttribute("value","Imprimir"),i}},{key:"servicioImprimir",value:function(e,t){this.getField("nivel").setError(!1,"* El valor debe ser menor o igual a "+this.getField("niveles_existentes").getValue()),this.getField("id_nivel_imprimir").setValue(e),this.getField("niveles_existentes").setValue(t);var i={value:this.getField("id_nivel_imprimir").getValue()};this.generalFormat.nombre_accion="337-Retorna_c\xf3digo_ubicaci\xf3n_columna_sin_incluir_nivel",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:i,success:this.successImprimir,error:this.error_,general:this.generalFormat})}},{key:"successImprimir",value:function(e){200===e.estado_p&&(this.getField("modal_imprimir").handleClickOpen(),console.log("DATA ---\x3e>>",e),this.getField("ubicacion_codigo").setValue(e.model[0].ubicacion_codigo),this.getField("sucursal_id").setValue(this.getField("sucursal_id_carga").getValue()))}},{key:"nivelActualChange",value:function(e){var t=this.getField("tabla_niveles").cellValid(e.oldValue,e.newValue,"^[0-9]+$",3),i=e.data.id,a=e.newValue,o=e.oldValue,s=e.data.estadoactivo_id,r=e.data.wms_tipos_ubicacion_id;t?null!==r&&" "!==r?(this.getField("wms_nuevo_rack_id").setValue(e.data.id),this.guardarNiveles(i,a,s,e)):e.newValue.length>0&&(e.data.niveles=0,this.getField("fieldAlert").toggle(!0,"No tiene ning\xfan tipo de ubicaci\xf3n asignado","error"),a=0,this.getField("tabla_niveles").toggle(!1),this.getField("modal_niveles").handleClose()):null!==t&&(this.getField("wms_nuevo_rack_id").setValue(e.data.id),this.guardarNiveles(i,o,s,e))}},{key:"enviarImpresion",value:function(){if(""!==this.getField("nivel").getValue()&&""!==this.getField("id_nivel_imprimir").getValue()&&this.getField("nivel").valid())if(this.getField("nivel").getValue()<=this.getField("niveles_existentes").getValue()){console.log("DATOS ENVIADOS ---\x3e>>","ID",this.getField("id_nivel_imprimir").getValue(),"NIVEL",this.getField("nivel").getValue());var e={id:this.getField("id_nivel_imprimir").getValue(),nivel:this.getField("nivel").getValue(),impresora_id:this.getField("impresora_id").getValue()};this.generalFormat.nombre_accion="337-Permite_imprimir_nivel_columa",this.service.send({endpoint:this.constant.formConfiguration(),method:"POST",body:e,success:this.successEnviarImpresion,error:this.error_,general:this.generalFormat})}else this.getField("nivel").getValue()>this.getField("niveles_existentes").getValue()&&this.getField("nivel").setError(!0,"* El valor debe ser menor o igual a "+this.getField("niveles_existentes").getValue());else""===this.getField("nivel").getValue()&&this.getField("nivel").setError(!0,"* Este campo es requerido.")}},{key:"successEnviarImpresion",value:function(e){200===e.estado_p&&(this.getField("modal_imprimir").handleClose(),this.getField("id_nivel_imprimir").setValue(""),this.getField("niveles_existentes").setValue(""))}},{key:"successImpresoras",value:function(e){if(e.length>0){var t=[{text:"Ninguno",value:"",campos_cambian:{}}];e.forEach((function(e){var i={};i.value=e.id,i.text=e.nombre_recurso,i.campos_cambian={},t.push(i)})),this.getField("impresora_id").setOptions(t)}}}]),i}(d.a.form);d.a.addController("racks_wms_col",l),t.default=l},function(e,t,i){"use strict";i.r(t);var a=i(4),o=i(5),s=i(0),r=i(7),n=i(6),d=i(3),l=function(e){Object(r.a)(i,e);var t=Object(n.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).initForm=o.initForm.bind(Object(s.a)(o)),o.datosZonas=o.datosZonas.bind(Object(s.a)(o)),o.successTraerZona=o.successTraerZona.bind(Object(s.a)(o)),o.datosRack=o.datosRack.bind(Object(s.a)(o)),o.successTraerRack=o.successTraerRack.bind(Object(s.a)(o)),o.datosColumna=o.datosColumna.bind(Object(s.a)(o)),o.successTraerColumna=o.successTraerColumna.bind(Object(s.a)(o)),o.datosNivel=o.datosNivel.bind(Object(s.a)(o)),o.datosTipoUbicacion=o.datosTipoUbicacion.bind(Object(s.a)(o)),o.limpiar=o.limpiar.bind(Object(s.a)(o)),o.tipo_ubicacion=[],o}return Object(o.a)(i,[{key:"initForm",value:function(){this.getField("sucursal_id").setCustomSuccess(this.datosZonas),this.getField("wms_zona_id").setOnChange(this.datosRack),this.getField("wms_nuevo_rack_id").setOnChange(this.datosColumna),this.getField("numero_nivel").setOnChange(this.datosNivel),this.getField("nivel_numero").setOnChange(this.datosTipoUbicacion),this.getField("btngrabar").setClick(this.limpiar)}},{key:"datosZonas",value:function(e){if(e.length>0&&""!==this.getField("sucursal_id").getValue()&&" "!==this.getField("sucursal_id").getValue()){var t={value:this.getField("sucursal_id").getValue()};this.generalFormat.nombre_accion="338_Busca_los_wms_zonas_que_contenga_la_sucursal_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTraerZona,error:this.error_,general:this.generalFormat})}}},{key:"successTraerZona",value:function(e){if(200===e.estado_p){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.codigo+"-"+e.descripcion,i.campos_cambian={},t.push(i)})),this.getField("wms_zona_id").setOptions(t)}}},{key:"datosRack",value:function(e){if(""!==this.getField("wms_zona_id").getValue()&&" "!==this.getField("wms_zona_id").getValue()){var t={value:this.getField("wms_zona_id").getValue()};this.generalFormat.nombre_accion="338-Busca_los_wms_nuevo_racks_que_contengan_wms_zona_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTraerRack,error:this.error_,general:this.generalFormat})}}},{key:"successTraerRack",value:function(e){if(this.getField("numero_nivel").setValue(""),this.getField("wms_nuevo_rack_id").setValue(""),this.getField("wms_nuevo_racks_columnas_id").setValue(""),this.getField("nivel_numero").setValue(""),this.getField("wms_tipos_ubicacion_id").setValue(""),this.getField("tipo_ubicacion").setValue(""),200===e.estado_p&&e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.numero,i.campos_cambian={},t.push(i)})),this.getField("wms_nuevo_rack_id").setOptions(t)}}},{key:"datosColumna",value:function(e){if(""!==this.getField("wms_nuevo_rack_id").getValue()&&" "!==this.getField("wms_nuevo_rack_id").getValue()){var t={value:this.getField("wms_nuevo_rack_id").getValue()};this.generalFormat.nombre_accion="338-Busca_un_wms_nuevo_racks_columnas_por_wms_nuevo_rack_id",this.service.send({endpoint:this.constant.formConfiguration(),method:"GET",body:t,success:this.successTraerColumna,error:this.error_,general:this.generalFormat})}}},{key:"successTraerColumna",value:function(e){if(this.getField("numero_nivel").setValue(""),this.getField("wms_nuevo_racks_columnas_id").setValue(""),this.getField("nivel_numero").setValue(""),this.getField("wms_tipos_ubicacion_id").setValue(""),this.getField("tipo_ubicacion").setValue(""),200===e.estado_p&&e.data.length>0){var t=[{text:"Ninguno",value:" ",campos_cambian:{}}];e.data.forEach((function(e){var i={};i.value=e.id,i.text=e.columna_numero,i.nivel=e.niveles,i.tipo_ubicacion=e.tipo_ubicacion,i.campos_cambian={columna_numero:e.columna_numero,numero_nivel:e.niveles,wms_tipos_ubicacion_id:e.wms_tipos_ubicacion_id,tipo_ubicacion:e.tipo_ubicacion},t.push(i)})),this.getField("wms_nuevo_racks_columnas_id").setOptions(t)}}},{key:"datosNivel",value:function(){if(""!==this.getField("numero_nivel").getValue()&&" "!==this.getField("numero_nivel").getValue()){for(var e=[{text:"Ninguno",value:"",campos_cambian:{}}],t=1;t<=parseInt(this.getter("numero_nivel"));t++){var i={};i.value=t,i.text=t,i.campos_cambian={},e.push(i)}this.getField("nivel_numero").setDisabled(!1),this.getField("nivel_numero").setOptions(e)}}},{key:"getter",value:function(e){return this.getField(e).getValue()}},{key:"datosTipoUbicacion",value:function(){}},{key:"limpiar",value:function(){this.getField("codigo_bodega").setValue(""),this.getField("nombre_bodega").setValue(""),this.getField("codigo_sucursal").setValue(""),this.getField("nombre_sucursal").setValue(""),this.getField("wms_zona_id").setValue(""),this.getField("wms_nuevo_rack_id").setValue(""),this.getField("wms_nuevo_racks_columnas_id").setValue(""),this.getField("nivel_numero").setValue(""),this.getField("wms_tipos_ubicacion_id").setValue(""),this.getField("codigo_producto").setValue(""),this.getField("nombre_producto").setValue(""),this.getField("cantidad").setValue(""),this.getField("articulo_id").setValue(""),this.getField("tipo_ubicacion").setValue(""),this.getField("ubicacion_tipo").setValue("")}}]),i}(d.a.form);d.a.addController("wmsubicacionProducto",l),t.default=l},,,,function(e,t,i){"use strict";i.r(t);var a=i(97),o=(i(1),i(23)),s=i.n(o),r=i(3),n=i(376),d=i(38);var l,c=i(78);(l=i(662)).keys().map(l)||console.log("no Customs from importAll:");new r.a(Object(a.a)({},{baseUrl:"https://pintunal.jaivana.co",keyEmpresa:"vaXGDGSvVprxRc5d7By8KqjZGiEurA"})),s.a.render(Object(c.jsxs)(n.a,{children:[Object(c.jsx)(d.a,{exact:!0,history:r.a.history,path:"/",component:r.a.login}),Object(c.jsx)(d.a,{path:"/login",history:r.a.history,component:r.a.login}),Object(c.jsx)(d.a,{path:"/panel",history:r.a.history,component:r.a.panel}),Object(c.jsx)(d.a,{path:"/listHeadquarters",history:r.a.history,component:r.a.listHeadquarters})]}),document.getElementById("rootprincipal")),window.onload=function(e){"serviceWorker"in navigator?navigator.serviceWorker.register("".concat("","/svcWorker.js"),{useCache:!0}).then((function(e){console.log("Worker registration is successful",e.scope)}),(function(e){console.log("Worker registration has failed",e)})).catch((function(e){console.log(e)})):console.log("Service Worker is not supported by your browser.")}}]),[[820,1,2]]]);